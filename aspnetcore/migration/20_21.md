---
title: ASP.NET Core 2.0을 2.1에서 마이그레이션
author: rick-anderson
description: 이 문서에서는 ASP.NET Core 2.0 앱 2.1로 마이그레이션할 경우의 기본 사항을 다룹니다.
ms.author: riande
ms.custom: mvc
ms.date: 12/04/2018
uid: migration/20_21
ms.openlocfilehash: f69a254703e096c0a3b2c90c00aa5fac8423cdea
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/01/2019
ms.locfileid: "57062630"
---
# <a name="migrate-from-aspnet-core-20-to-21"></a><span data-ttu-id="7fa0d-103">ASP.NET Core 2.0을 2.1에서 마이그레이션</span><span class="sxs-lookup"><span data-stu-id="7fa0d-103">Migrate from ASP.NET Core 2.0 to 2.1</span></span>

<span data-ttu-id="7fa0d-104">작성자: [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="7fa0d-104">By [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

<span data-ttu-id="7fa0d-105">참조 [ASP.NET Core 2.1의 새로운 기능](xref:aspnetcore-2.1) ASP.NET Core 2.1의 새로운 기능에 대 한 개요입니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-105">See [What's new in ASP.NET Core 2.1](xref:aspnetcore-2.1) for an overview of the new features in ASP.NET Core 2.1.</span></span>

<span data-ttu-id="7fa0d-106">이 기사의 내용:</span><span class="sxs-lookup"><span data-stu-id="7fa0d-106">This article:</span></span>

* <span data-ttu-id="7fa0d-107">ASP.NET Core 2.0 앱 2.1로 마이그레이션할 경우의 기본 사항을 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-107">Covers the basics of migrating an ASP.NET Core 2.0 app to 2.1.</span></span>
* <span data-ttu-id="7fa0d-108">ASP.NET Core 웹 응용 프로그램 템플릿 변경 작업을 간략하게를 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-108">Provides an overview of the changes to the ASP.NET Core web application templates.</span></span>

<span data-ttu-id="7fa0d-109">2.1에서 변경 내용의 개요를 볼 수는 가장 빠른 방법은 무엇입니까?</span><span class="sxs-lookup"><span data-stu-id="7fa0d-109">A quick way to get an overview of the changes in 2.1 is to:</span></span>

* <span data-ttu-id="7fa0d-110">WebApp1 라는 ASP.NET Core 2.0 웹 앱을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-110">Create an ASP.NET Core 2.0 web app named WebApp1.</span></span>
* <span data-ttu-id="7fa0d-111">소스 제어 시스템에는 구성이 WebApp1를 커밋하십시오.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-111">Commit the WebApp1 in a source control system.</span></span>
* <span data-ttu-id="7fa0d-112">WebApp1를 삭제 하 고 같은 위치에 대 한 구성이 WebApp1 라는 ASP.NET Core 2.1 웹 앱을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-112">Delete WebApp1 and create an ASP.NET Core 2.1 web app named WebApp1 in the same place.</span></span>
* <span data-ttu-id="7fa0d-113">2.1 버전에서 변경 내용을 검토 합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-113">Review the changes in the 2.1 version.</span></span>

<span data-ttu-id="7fa0d-114">이 문서에서는 ASP.NET Core 2.1에 마이그레이션에 대 한 개요를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-114">This article provides an overview on migration to ASP.NET Core 2.1.</span></span> <span data-ttu-id="7fa0d-115">이 목록은 2.1 버전으로 마이그레이션하는 데 필요한 모든 변경 내용 포함 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-115">It doesn't contain a complete list of all changes needed to migrate to version 2.1.</span></span> <span data-ttu-id="7fa0d-116">일부 프로젝트는 프로젝트에 적용 된 수정 내용을 확인 하 고 프로젝트를 만들 때 선택한 옵션에 따라 추가 단계가 필요할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-116">Some projects might require more steps depending on the options selected when the project was created and modifications made to the project.</span></span>

## <a name="update-the-project-file-to-use-21-versions"></a><span data-ttu-id="7fa0d-117">2.1 버전을 사용하도록 프로젝트 파일 업데이트</span><span class="sxs-lookup"><span data-stu-id="7fa0d-117">Update the project file to use 2.1 versions</span></span>

<span data-ttu-id="7fa0d-118">프로젝트 파일을 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-118">Update the project file:</span></span>

* <span data-ttu-id="7fa0d-119">프로젝트 파일을 업데이트 하 여.NET Core 2.1에 대상 프레임 워크를 변경할 `<TargetFramework>netcoreapp2.1</TargetFramework>`합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-119">Change the target framework to .NET Core 2.1 by updating the project file to `<TargetFramework>netcoreapp2.1</TargetFramework>`.</span></span>
* <span data-ttu-id="7fa0d-120">에 대 한 패키지 참조를 바꿀 `Microsoft.AspNetCore.All` 에 대 한 패키지 참조를 사용 하 여 `Microsoft.AspNetCore.App`입니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-120">Replace the package reference for `Microsoft.AspNetCore.All` with a package reference for `Microsoft.AspNetCore.App`.</span></span> <span data-ttu-id="7fa0d-121">제거 된 종속성을 추가 해야 `Microsoft.AspNetCore.All`합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-121">You may need to add dependencies that were removed from `Microsoft.AspNetCore.All`.</span></span> <span data-ttu-id="7fa0d-122">자세한 내용은 <xref:fundamentals/metapackage#migrate> 및 <xref:fundamentals/metapackage-app>를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-122">For more information, see <xref:fundamentals/metapackage#migrate> and <xref:fundamentals/metapackage-app>.</span></span>
* <span data-ttu-id="7fa0d-123">"Version" 특성에 대 한 패키지 참조를 제거 `Microsoft.AspNetCore.App`합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-123">Remove the "Version" attribute on the package reference to `Microsoft.AspNetCore.App`.</span></span> <span data-ttu-id="7fa0d-124">사용 하는 프로젝트 `<Project Sdk="Microsoft.NET.Sdk.Web">` 버전을 설정할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-124">Projects which use `<Project Sdk="Microsoft.NET.Sdk.Web">` do not need to set the version.</span></span> <span data-ttu-id="7fa0d-125">버전 대상 프레임 워크에 의해 포함 되며 ASP.NET Core 2.1에서 작동 하는 방식에 가장 잘 맞도록 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-125">The version will be implied by the target framework and selected to best match the way ASP.NET Core 2.1 works.</span></span> <span data-ttu-id="7fa0d-126">(아래 자세한 내용은 참조 하십시오.)</span><span class="sxs-lookup"><span data-stu-id="7fa0d-126">(See below for more information.)</span></span>
* <span data-ttu-id="7fa0d-127">.NET Framework를 대상으로 하는 앱에 대 한 2.1에 대 한 각 패키지 참조를 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-127">For apps that target the .NET Framework, update each package reference to 2.1.</span></span>
* <span data-ttu-id="7fa0d-128">에 대 한 참조를 제거 **&lt;DotNetCliToolReference&gt;** 다음 패키지에 대 한 요소입니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-128">Remove references to **&lt;DotNetCliToolReference&gt;** elements for the following packages.</span></span> <span data-ttu-id="7fa0d-129">이러한 도구는.NET Core CLI에서 기본적으로 제공 되어와 별도로 설치할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-129">These tools are bundled by default in the .NET Core CLI and don't need to be installed separately.</span></span>
  * <span data-ttu-id="7fa0d-130">Microsoft.DotNet.Watcher.Tools (`dotnet watch`)</span><span class="sxs-lookup"><span data-stu-id="7fa0d-130">Microsoft.DotNet.Watcher.Tools (`dotnet watch`)</span></span>
  * <span data-ttu-id="7fa0d-131">Microsoft.EntityFrameworkCore.Tools.DotNet (`dotnet ef`)</span><span class="sxs-lookup"><span data-stu-id="7fa0d-131">Microsoft.EntityFrameworkCore.Tools.DotNet (`dotnet ef`)</span></span>
  * <span data-ttu-id="7fa0d-132">Microsoft.Extensions.Caching.SqlConfig.Tools (`dotnet sql-cache`)</span><span class="sxs-lookup"><span data-stu-id="7fa0d-132">Microsoft.Extensions.Caching.SqlConfig.Tools  (`dotnet sql-cache`)</span></span>
  * <span data-ttu-id="7fa0d-133">Microsoft.Extensions.SecretManager.Tools (`dotnet user-secrets`)</span><span class="sxs-lookup"><span data-stu-id="7fa0d-133">Microsoft.Extensions.SecretManager.Tools (`dotnet user-secrets`)</span></span>
* <span data-ttu-id="7fa0d-134">선택 사항: 제거할 수 있습니다 합니다 **&lt;DotNetCliToolReference&gt;** 요소에 대 한 `Microsoft.VisualStudio.Web.CodeGeneration.Tools`합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-134">Optional: you can remove the **&lt;DotNetCliToolReference&gt;** element for `Microsoft.VisualStudio.Web.CodeGeneration.Tools`.</span></span> <span data-ttu-id="7fa0d-135">이 도구를 실행 하 여 전역적으로 설치 된 버전으로 바꿀 수 있습니다 `dotnet tool install -g dotnet-aspnet-codegenerator`합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-135">You can replace this tool with a globally installed version by running `dotnet tool install -g dotnet-aspnet-codegenerator`.</span></span>
* <span data-ttu-id="7fa0d-136">2.1의 경우는 [Razor 클래스 라이브러리](xref:razor-pages/ui-class) 는 Razor 파일을 배포 하기 위한 권장된 솔루션입니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-136">For 2.1, a [Razor Class Library](xref:razor-pages/ui-class) is the recommended solution to distribute Razor files.</span></span> <span data-ttu-id="7fa0d-137">앱 포함 된 뷰를 사용 하 여 Razor 파일의 런타임 컴파일 의존 하 여 그렇지 않은 경우, 추가 `<CopyRefAssembliesToPublishDirectory>true</CopyRefAssembliesToPublishDirectory>` 에 `<PropertyGroup>` 프로젝트 파일에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-137">If your app uses embedded views, or otherwise relies on runtime compilation of Razor files, add `<CopyRefAssembliesToPublishDirectory>true</CopyRefAssembliesToPublishDirectory>` to a `<PropertyGroup>` in your project file.</span></span>

<span data-ttu-id="7fa0d-138">다음 태그는 2.0 프로젝트 템플릿에서 생성 된 파일을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-138">The following markup shows the template-generated 2.0 project file:</span></span>

[!code-xml[](20_21/sample/WebApp20.csproj)]

<span data-ttu-id="7fa0d-139">다음 태그 2.1 프로젝트 템플릿에서 생성 된 파일을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-139">The following markup shows the template-generated 2.1 project file:</span></span>

[!code-xml[](20_21/sample/WebApp21.csproj)]

## <a name="rules-for-projects-targeting-the-shared-framework"></a><span data-ttu-id="7fa0d-140">공유 프레임 워크를 대상으로 하는 프로젝트에 대 한 규칙</span><span class="sxs-lookup"><span data-stu-id="7fa0d-140">Rules for projects targeting the shared framework</span></span>

<span data-ttu-id="7fa0d-141">ASP.NET Core 2.1에는 다음 공유 프레임 워크가 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-141">ASP.NET Core 2.1 includes the following shared frameworks:</span></span>

* [<span data-ttu-id="7fa0d-142">Microsoft.AspNetCore.App</span><span class="sxs-lookup"><span data-stu-id="7fa0d-142">Microsoft.AspNetCore.App</span></span>](xref:fundamentals/metapackage-app)
* [<span data-ttu-id="7fa0d-143">Microsoft.AspNetCore.All</span><span class="sxs-lookup"><span data-stu-id="7fa0d-143">Microsoft.AspNetCore.All</span></span>](xref:fundamentals/metapackage)

<span data-ttu-id="7fa0d-144">패키지 참조에 의해 지정 된 버전은는 *최소한* 버전입니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-144">The version specified by the package reference is the *minimum required* version.</span></span> <span data-ttu-id="7fa0d-145">이러한 패키지의 버전은 2.1.0에만 있는 컴퓨터에서 실행 되지 않습니다 2.1.1 참조는 프로젝트 예를 들어, 런타임을 설치 합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-145">For example, a project referencing the 2.1.1 versions of these packages won't run on a machine with only the 2.1.0 runtime installed.</span></span>

<span data-ttu-id="7fa0d-146">공유 프레임 워크를 대상으로 하는 프로젝트에 대 한 알려진된 문제:</span><span class="sxs-lookup"><span data-stu-id="7fa0d-146">Known issues for projects targeting the shared framework:</span></span>

* <span data-ttu-id="7fa0d-147">.NET Core SDK (Visual Studio 15.6에 처음 포함)의 암시적 버전을 설정 하는 2.1.300 `Microsoft.AspNetCore.App` Entity Framework Core 2.1.1 사용 하 여 충돌을 일으키는 2.1.0에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-147">The .NET Core 2.1.300 SDK (first included in Visual Studio 15.6) set the implicit version of  `Microsoft.AspNetCore.App` to 2.1.0 which caused conflicts with Entity Framework Core 2.1.1.</span></span> <span data-ttu-id="7fa0d-148">권장 되는 방법은 이상 2.1.301으로.NET Core SDK를 업그레이드 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-148">The recommended solution is to upgrade the .NET Core SDK to 2.1.301 or later.</span></span> <span data-ttu-id="7fa0d-149">자세한 내용은 [Microsoft.AspNetCore.App를 사용 하 여 종속성을 공유 하는 패키지는 패치 버전을 참조할 수 없습니다](https://github.com/aspnet/Universe/issues/1180)합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-149">For more information, see [Packages that share dependencies with Microsoft.AspNetCore.App cannot reference patch versions](https://github.com/aspnet/Universe/issues/1180).</span></span>
* <span data-ttu-id="7fa0d-150">사용 해야 하는 모든 프로젝트 `Microsoft.AspNetCore.All` 나 `Microsoft.AspNetCore.App` 사용 하 여 다른 프로젝트에 대 한 프로젝트 참조를 포함 하는 경우에 프로젝트 파일에서 패키지의 패키지 참조를 추가 해야 `Microsoft.AspNetCore.All` 또는 `Microsoft.AspNetCore.App`합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-150">All projects that must use `Microsoft.AspNetCore.All` or `Microsoft.AspNetCore.App` should add a package reference for the package in the project file, even if they contain a project reference to another project using `Microsoft.AspNetCore.All` or `Microsoft.AspNetCore.App`.</span></span>

  <span data-ttu-id="7fa0d-151">예제:</span><span class="sxs-lookup"><span data-stu-id="7fa0d-151">Example:</span></span>

  * <span data-ttu-id="7fa0d-152">`MyApp` 에 대 한 패키지 참조가 `Microsoft.AspNetCore.App`합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-152">`MyApp` has a package reference to `Microsoft.AspNetCore.App`.</span></span>
  * <span data-ttu-id="7fa0d-153">`MyApp.Tests` 에 대 한 프로젝트 참조가 `MyApp.csproj`합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-153">`MyApp.Tests` has a project reference to `MyApp.csproj`.</span></span>

  <span data-ttu-id="7fa0d-154">패키지 참조를 추가할 `Microsoft.AspNetCore.App` 에 `MyApp.Tests`입니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-154">Add a package reference for `Microsoft.AspNetCore.App` to `MyApp.Tests`.</span></span> <span data-ttu-id="7fa0d-155">자세한 내용은 [설정 하기가 어렵습니다 통합 테스트 및 공유 프레임 워크 서비스에서 중단 될 수 있습니다](https://github.com/aspnet/Home/issues/3156)합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-155">For more information, see [Integration testing is hard to set up and may break on shared framework servicing](https://github.com/aspnet/Home/issues/3156).</span></span>

## <a name="update-to-the-21-docker-images"></a><span data-ttu-id="7fa0d-156">2.1 Docker 이미지를 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-156">Update to the 2.1 Docker images</span></span>

<span data-ttu-id="7fa0d-157">ASP.NET Core 2.1에서 Docker 이미지를 마이그레이션 합니다 [dotnet/dotnet-docker GitHub 리포지토리](https://github.com/dotnet/dotnet-docker)합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-157">In ASP.NET Core 2.1, the Docker images migrated to the [dotnet/dotnet-docker GitHub repository](https://github.com/dotnet/dotnet-docker).</span></span> <span data-ttu-id="7fa0d-158">다음 표에서 Docker 이미지 및 태그 변경을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-158">The following table shows the Docker image and tag changes:</span></span>

|<span data-ttu-id="7fa0d-159">2.0</span><span class="sxs-lookup"><span data-stu-id="7fa0d-159">2.0</span></span>      |<span data-ttu-id="7fa0d-160">2.1</span><span class="sxs-lookup"><span data-stu-id="7fa0d-160">2.1</span></span>      |
|---------|---------|
|<span data-ttu-id="7fa0d-161">microsoft/aspnetcore:2.0</span><span class="sxs-lookup"><span data-stu-id="7fa0d-161">microsoft/aspnetcore:2.0</span></span>        |<span data-ttu-id="7fa0d-162">microsoft/dotnet:2.1-aspnetcore-runtime</span><span class="sxs-lookup"><span data-stu-id="7fa0d-162">microsoft/dotnet:2.1-aspnetcore-runtime</span></span> |
|<span data-ttu-id="7fa0d-163">microsoft/aspnetcore-build:2.0</span><span class="sxs-lookup"><span data-stu-id="7fa0d-163">microsoft/aspnetcore-build:2.0</span></span>  |<span data-ttu-id="7fa0d-164">microsoft/dotnet:2.1-sdk</span><span class="sxs-lookup"><span data-stu-id="7fa0d-164">microsoft/dotnet:2.1-sdk</span></span> |

<span data-ttu-id="7fa0d-165">변경 된 `FROM` 줄에 *Dockerfile* 2.1 이전 테이블의 열에 새 이미지 이름과 태그를 사용 하 합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-165">Change the `FROM` lines in your *Dockerfile* to use the new image names and tags in the preceding table's 2.1 column.</span></span> <span data-ttu-id="7fa0d-166">자세한 내용은 [aspnetcore docker 리포지토리에서 dotnet로 마이그레이션](https://github.com/aspnet/Announcements/issues/298)합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-166">For more information, see [Migrating from aspnetcore docker repos to dotnet](https://github.com/aspnet/Announcements/issues/298).</span></span>

## <a name="changes-to-take-advantage-of-the-new-code-based-idioms-that-are-recommended-in-aspnet-core-21"></a><span data-ttu-id="7fa0d-167">ASP.NET Core 2.1에서 권장 하는 새 코드 기반 관용구를 활용 하기 위해 변경 내용</span><span class="sxs-lookup"><span data-stu-id="7fa0d-167">Changes to take advantage of the new code-based idioms that are recommended in ASP.NET Core 2.1</span></span>

### <a name="changes-to-main"></a><span data-ttu-id="7fa0d-168">Main에 대 한 변경 내용</span><span class="sxs-lookup"><span data-stu-id="7fa0d-168">Changes to Main</span></span>

<span data-ttu-id="7fa0d-169">다음 그림은 생성 된 템플릿 변경 내용을 보여 *Program.cs* 파일입니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-169">The following images show the changes made to the templated generated *Program.cs* file.</span></span>

![이전 버전 간 차이점](20_21/_static/main20.png)

<span data-ttu-id="7fa0d-171">위의 이미지는 빨간색에서 삭제를 사용 하 여 2.0 버전을 보여줍니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-171">The preceding image shows the 2.0 version with the deletions in red.</span></span>

<span data-ttu-id="7fa0d-172">다음 이미지에서는 2.1 코드를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-172">The following image shows the 2.1 code.</span></span> <span data-ttu-id="7fa0d-173">녹색의 코드를 대체 2.0 버전:</span><span class="sxs-lookup"><span data-stu-id="7fa0d-173">The code in green replaced the 2.0 version:</span></span>

![새 버전 간 차이점](20_21/_static/main21.png)

<span data-ttu-id="7fa0d-175">다음 코드를 2.1 버전을 보여 줍니다 *Program.cs*:</span><span class="sxs-lookup"><span data-stu-id="7fa0d-175">The following code shows the 2.1 version of *Program.cs*:</span></span>

[!code-csharp[](20_21/sample/Program.cs?name=snippet)]

<span data-ttu-id="7fa0d-176">새 `Main` 에 대 한 호출을 대체 `BuildWebHost` 사용 하 여 [CreateWebHostBuilder](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactory-1.createwebhostbuilder)합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-176">The new `Main` replaces the call to `BuildWebHost` with [CreateWebHostBuilder](/dotnet/api/microsoft.aspnetcore.mvc.testing.webapplicationfactory-1.createwebhostbuilder).</span></span> <span data-ttu-id="7fa0d-177">[IWebHostBuilder](/dotnet/api/microsoft.aspnetcore.hosting.iwebhostbuilder) 새 지원 하기 위해 추가 되었습니다 [통합 테스트 인프라](xref:test/integration-tests)합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-177">[IWebHostBuilder](/dotnet/api/microsoft.aspnetcore.hosting.iwebhostbuilder) was added to support a new [integration test infrastructure](xref:test/integration-tests).</span></span>

### <a name="changes-to-startup"></a><span data-ttu-id="7fa0d-178">시작 변경</span><span class="sxs-lookup"><span data-stu-id="7fa0d-178">Changes to Startup</span></span>

<span data-ttu-id="7fa0d-179">다음 코드에서는 2.1 템플릿 생성 된 코드 변경 내용을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-179">The following code shows the changes to 2.1 template generated code.</span></span> <span data-ttu-id="7fa0d-180">모든 변경 내용을 제외 하는 코드를 새로 추가 된 `UseBrowserLink` 제거 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-180">All changes are newly added code, except that `UseBrowserLink` has been removed:</span></span>

[!code-csharp[](20_21/sample/Startup.cs?highlight=3,4,21-26,30,42,45,47)]

<span data-ttu-id="7fa0d-181">위의 코드 변경 내용에 자세히 설명 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-181">The preceding code changes are detailed in:</span></span>

* <span data-ttu-id="7fa0d-182">[ASP.NET Core에서 지 원하는 GDPR](xref:security/gdpr) 에 대 한 `CookiePolicyOptions` 고 `UseCookiePolicy`입니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-182">[GDPR support in ASP.NET Core](xref:security/gdpr) for `CookiePolicyOptions` and `UseCookiePolicy`.</span></span>
* <span data-ttu-id="7fa0d-183">[HTTP 엄격한 전송 보안 (HSTS) 프로토콜](xref:security/enforcing-ssl#http-strict-transport-security-protocol-hsts) 에 대 한 `UseHsts`합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-183">[HTTP Strict Transport Security Protocol (HSTS)](xref:security/enforcing-ssl#http-strict-transport-security-protocol-hsts) for `UseHsts`.</span></span>
* <span data-ttu-id="7fa0d-184">[HTTPS가 필요](xref:security/enforcing-ssl#require-https) 에 대 한 `UseHttpsRedirection`합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-184">[Require HTTPS](xref:security/enforcing-ssl#require-https) for `UseHttpsRedirection`.</span></span>
* <span data-ttu-id="7fa0d-185">[SetCompatibilityVersion](xref:mvc/compatibility-version) 에 대 한 `SetCompatibilityVersion(CompatibilityVersion.Version_2_1)`합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-185">[SetCompatibilityVersion](xref:mvc/compatibility-version) for `SetCompatibilityVersion(CompatibilityVersion.Version_2_1)`.</span></span>

## <a name="changes-to-authentication-code"></a><span data-ttu-id="7fa0d-186">인증 코드를 변경</span><span class="sxs-lookup"><span data-stu-id="7fa0d-186">Changes to authentication code</span></span>

<span data-ttu-id="7fa0d-187">ASP.NET Core 2.1에서 제공 [ASP.NET Core Id](xref:security/authentication/identity) 으로 [Razor 클래스 라이브러리](xref:razor-pages/ui-class) (RCL).</span><span class="sxs-lookup"><span data-stu-id="7fa0d-187">ASP.NET Core 2.1 provides [ASP.NET Core Identity](xref:security/authentication/identity) as a [Razor Class Library](xref:razor-pages/ui-class) (RCL).</span></span>

<span data-ttu-id="7fa0d-188">2.1 기본 Identity UI 하면 2.0 버전에 비해 중요 한 새 기능이 현재 제공 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-188">The default 2.1 Identity UI doesn't currently provide significant new features over the 2.0 version.</span></span> <span data-ttu-id="7fa0d-189">RCL 패키지를 사용 하 여 Identity를 대체 하는 것은 선택 사항입니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-189">Replacing Identity with the RCL package is optional.</span></span> <span data-ttu-id="7fa0d-190">템플릿 대체 하는 이점 RCL 버전을 사용 하 여 코드를 포함 하는 Identity를 생성 합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-190">The advantages to replacing the template generated Identity code with the RCL version include:</span></span>

* <span data-ttu-id="7fa0d-191">많은 파일이 소스 트리에 외부로 이동 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-191">Many files are moved out of your source tree.</span></span>
* <span data-ttu-id="7fa0d-192">에 포함 된 모든 버그 수정 또는 Id로 새 기능을 [Microsoft.AspNetCore.App 메타 패키지](xref:fundamentals/metapackage-app)합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-192">Any bug fixes or new features to Identity are included in the [Microsoft.AspNetCore.App metapackage](xref:fundamentals/metapackage-app).</span></span> <span data-ttu-id="7fa0d-193">업데이트 된 Id를 자동으로 가져올 때 `Microsoft.AspNetCore.App` 업데이트 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-193">You automatically get the updated Identity when `Microsoft.AspNetCore.App` is updated.</span></span>

<span data-ttu-id="7fa0d-194">Trivial이 아닌 변경한 경우 템플릿 변경 내용을 Id 코드를 생성 합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-194">If you've made non-trivial changes to the template generated Identity code:</span></span>

* <span data-ttu-id="7fa0d-195">위의 장점 그럴 **하지** 맞춤 RCL 버전으로 변환 합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-195">The preceding advantages probably do **not** justify converting to the RCL version.</span></span>
* <span data-ttu-id="7fa0d-196">ASP.NET Core 2.0 Id 코드를 유지할 수 있습니다, 완전히 지원 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-196">You can keep your ASP.NET Core 2.0 Identity code, it's fully supported.</span></span>

<span data-ttu-id="7fa0d-197">Identity 2.1 끝점을 노출 합니다 `Identity` 영역입니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-197">Identity 2.1 exposes endpoints with the `Identity` area.</span></span> <span data-ttu-id="7fa0d-198">예를 들어, 다음 표에서 2.1을 2.0에서 변경 하는 Identity 끝점의 예를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-198">For example, the follow table shows examples of Identity endpoints that change from 2.0 to 2.1:</span></span>

| <span data-ttu-id="7fa0d-199">2.0 URL</span><span class="sxs-lookup"><span data-stu-id="7fa0d-199">2.0 URL</span></span>         | <span data-ttu-id="7fa0d-200">2.1 URL</span><span class="sxs-lookup"><span data-stu-id="7fa0d-200">2.1 URL</span></span> |
| --------------- | ------------ |
| <span data-ttu-id="7fa0d-201">/Account/Login</span><span class="sxs-lookup"><span data-stu-id="7fa0d-201">/Account/Login</span></span>  | <span data-ttu-id="7fa0d-202">/Identity/Account/Login</span><span class="sxs-lookup"><span data-stu-id="7fa0d-202">/Identity/Account/Login</span></span> |
| <span data-ttu-id="7fa0d-203">/Account/Logout</span><span class="sxs-lookup"><span data-stu-id="7fa0d-203">/Account/Logout</span></span> | <span data-ttu-id="7fa0d-204">/Identity/Account/Logout</span><span class="sxs-lookup"><span data-stu-id="7fa0d-204">/Identity/Account/Logout</span></span> |
| <span data-ttu-id="7fa0d-205">계정/관리</span><span class="sxs-lookup"><span data-stu-id="7fa0d-205">/Account/Manage</span></span> | <span data-ttu-id="7fa0d-206">/Identity/Account/Manage</span><span class="sxs-lookup"><span data-stu-id="7fa0d-206">/Identity/Account/Manage</span></span> |

<span data-ttu-id="7fa0d-207">2.0을 바꾸고 코드 Id를 사용 하는 응용 프로그램 Identity Url 고려해 야 할 2.1 Identity 라이브러리 필요를 사용 하 여 Identity UI가 `/Identity` 세그먼트 앞 Uri에 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-207">Applications that have code using Identity and replace 2.0 Identity UI with the 2.1 Identity Library need to take into account Identity URLs have `/Identity` segment prepended to the URIs.</span></span> <span data-ttu-id="7fa0d-208">예를 들어 리디렉션을을 설정 하는 Id 끝점이 새 처리 하는 한 가지 방법은 `/Account/Login` 에 `/Identity/Account/Login`입니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-208">One way to handle the new Identity endpoints is to set up redirects, for example from `/Account/Login` to `/Identity/Account/Login`.</span></span>

### <a name="update-identity-to-version-21"></a><span data-ttu-id="7fa0d-209">업데이트 Id를 버전 2.1</span><span class="sxs-lookup"><span data-stu-id="7fa0d-209">Update Identity to version 2.1</span></span>

<span data-ttu-id="7fa0d-210">다음 옵션은 2.1 Id 업데이트를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-210">The following options are available to update Identity to 2.1.</span></span>

* <span data-ttu-id="7fa0d-211">Identity UI 2.0 코드 변경 없이 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-211">Use the Identity UI 2.0 code with no changes.</span></span> <span data-ttu-id="7fa0d-212">Identity UI 2.0 코드를 사용 하 여 완전히 지원 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-212">Using Identity UI 2.0 code is fully supported.</span></span> <span data-ttu-id="7fa0d-213">생성 된 Id 코드에 중요 한 변경 내용이 적용 된 경우 이것이 좋은 방법입니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-213">This is a good approach when significant changes have been made to the generated Identity code.</span></span>
* <span data-ttu-id="7fa0d-214">기존 Identity 2.0 코드를 삭제 하 고 [스 캐 폴드 Identity](xref:security/authentication/scaffold-identity) 프로젝트로 합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-214">Delete your existing Identity 2.0 code and [Scaffold Identity](xref:security/authentication/scaffold-identity) into your project.</span></span> <span data-ttu-id="7fa0d-215">프로젝트를 사용 합니다 [ASP.NET Core Id](xref:security/authentication/identity) [Razor 클래스 라이브러리](xref:razor-pages/ui-class)합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-215">Your project will use the [ASP.NET Core Identity](xref:security/authentication/identity) [Razor Class Library](xref:razor-pages/ui-class).</span></span> <span data-ttu-id="7fa0d-216">코드와 수정한 Identity UI 코드에 대 한 UI를 생성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-216">You can generate code and UI for any of the Identity UI code that you modified.</span></span> <span data-ttu-id="7fa0d-217">UI 코드를 새로 스 캐 폴드 된 코드 변경 내용을 적용 합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-217">Apply your code changes to the newly scaffolded UI code.</span></span>
* <span data-ttu-id="7fa0d-218">기존 Identity 2.0 코드를 삭제 하 고 [스 캐 폴드 Identity](xref:security/authentication/scaffold-identity) 옵션을 사용 하 여 프로젝트에 **모든 파일 재정의**합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-218">Delete your existing Identity 2.0 code and [Scaffold Identity](xref:security/authentication/scaffold-identity) into your project with the option to **Override all files**.</span></span>

### <a name="replace-identity-20-ui-with-the-identity-21-razor-class-library"></a><span data-ttu-id="7fa0d-219">Identity 2.0 대체 Identity 2.1 Razor 클래스 라이브러리를 사용 하 여 UI</span><span class="sxs-lookup"><span data-stu-id="7fa0d-219">Replace Identity 2.0 UI with the Identity 2.1 Razor Class Library</span></span>

<span data-ttu-id="7fa0d-220">이 섹션에서는 ASP.NET Core 2.0 템플릿 생성 Identity 코드를 대체 하는 단계를 설명 합니다 [ASP.NET Core Id](xref:security/authentication/identity) [Razor 클래스 라이브러리](xref:razor-pages/ui-class)합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-220">This section outlines the steps to replace the ASP.NET Core 2.0 template generated Identity code with the [ASP.NET Core Identity](xref:security/authentication/identity) [Razor Class Library](xref:razor-pages/ui-class).</span></span> <span data-ttu-id="7fa0d-221">Razor 페이지 프로젝트의 경우 다음 단계는 하지만 MVC 프로젝트에 대 한 접근 방법이 비슷합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-221">The following steps are for a Razor Pages project, but the approach for an MVC project is similar.</span></span>

* <span data-ttu-id="7fa0d-222">확인 된 [2.1 버전을 사용 하도록 프로젝트 파일이 업데이트 됩니다](#update-the-project-file-to-use-21-versions)</span><span class="sxs-lookup"><span data-stu-id="7fa0d-222">Verify the [project file is updated to use 2.1 versions](#update-the-project-file-to-use-21-versions)</span></span>
* <span data-ttu-id="7fa0d-223">다음 폴더 및 그 안에 모든 파일을 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-223">Delete the following folders and all the files in them:</span></span>
  * <span data-ttu-id="7fa0d-224">*Controllers*</span><span class="sxs-lookup"><span data-stu-id="7fa0d-224">*Controllers*</span></span>
  * <span data-ttu-id="7fa0d-225">*Pages/Account/*</span><span class="sxs-lookup"><span data-stu-id="7fa0d-225">*Pages/Account/*</span></span>
  * <span data-ttu-id="7fa0d-226">*확장*</span><span class="sxs-lookup"><span data-stu-id="7fa0d-226">*Extensions*</span></span>
* <span data-ttu-id="7fa0d-227">프로젝트를 빌드합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-227">Build the project.</span></span>
* <span data-ttu-id="7fa0d-228">[Identity를 스 캐 폴드](xref:security/authentication/scaffold-identity) 프로젝트로:</span><span class="sxs-lookup"><span data-stu-id="7fa0d-228">[Scaffold Identity](xref:security/authentication/scaffold-identity) into your project:</span></span>
  * <span data-ttu-id="7fa0d-229">기존 프로젝트를 선택  *\_Layout.cshtml* 파일입니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-229">Select the projects exiting *\_Layout.cshtml* file.</span></span>
  * <span data-ttu-id="7fa0d-230">선택 된 **+** 아이콘의 오른쪽에는 **데이터 컨텍스트 클래스**합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-230">Select the **+** icon on the right side of the **Data context class**.</span></span> <span data-ttu-id="7fa0d-231">기본 이름을 적용 합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-231">Accept the default name.</span></span>
  * <span data-ttu-id="7fa0d-232">선택 **추가** 새 데이터 컨텍스트 클래스를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-232">Select **Add** to create a new Data context class.</span></span> <span data-ttu-id="7fa0d-233">새 데이터 컨텍스트를 만드는 것이 스 캐 폴드에 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-233">Creating a new data context is required for to scaffold.</span></span> <span data-ttu-id="7fa0d-234">다음 섹션에서 새 데이터 컨텍스트를 제거합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-234">You remove the new data context in the next section.</span></span>

### <a name="update-after-scaffolding-identity"></a><span data-ttu-id="7fa0d-235">Identity를 스 캐 폴딩 후 업데이트</span><span class="sxs-lookup"><span data-stu-id="7fa0d-235">Update after scaffolding Identity</span></span>

* <span data-ttu-id="7fa0d-236">생성 된 Identity 스 캐 폴더를 삭제 `IdentityDbContext` 파생 클래스에는 *영역/Id/데이터/* 폴더.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-236">Delete the Identity scaffolder generated `IdentityDbContext` derived class in the *Areas/Identity/Data/* folder.</span></span>
* <span data-ttu-id="7fa0d-237">Delete *Areas/Identity/IdentityHostingStartup.cs*</span><span class="sxs-lookup"><span data-stu-id="7fa0d-237">Delete *Areas/Identity/IdentityHostingStartup.cs*</span></span>
* <span data-ttu-id="7fa0d-238">업데이트를  *\_LoginPartial.cshtml* 파일:</span><span class="sxs-lookup"><span data-stu-id="7fa0d-238">Update the *\_LoginPartial.cshtml* file:</span></span>
  * <span data-ttu-id="7fa0d-239">이동할 *페이지 /\_LoginPartial.cshtml* 하려면 *페이지/Shared/\_LoginPartial.cshtml*</span><span class="sxs-lookup"><span data-stu-id="7fa0d-239">Move *Pages/\_LoginPartial.cshtml* to *Pages/Shared/\_LoginPartial.cshtml*</span></span>
  * <span data-ttu-id="7fa0d-240">추가 `asp-area="Identity"` 양식과 앵커 링크를 합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-240">Add `asp-area="Identity"` to the form and anchor links.</span></span>
  * <span data-ttu-id="7fa0d-241">업데이트 된 `<form />` 요소 `<form asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Page("/Index", new { area = "" })" method="post" id="logoutForm" class="navbar-right">`</span><span class="sxs-lookup"><span data-stu-id="7fa0d-241">Update the `<form />` element to `<form asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Page("/Index", new { area = "" })" method="post" id="logoutForm" class="navbar-right">`</span></span>

  <span data-ttu-id="7fa0d-242">다음 코드는 업데이트 된 보여줍니다  *\_LoginPartial.cshtml* 파일:</span><span class="sxs-lookup"><span data-stu-id="7fa0d-242">The following code shows the updated *\_LoginPartial.cshtml* file:</span></span>

  [!code-cshtml[](20_21/sample/_LoginPartial.cshtml?highlight=8,11,22,23)]

<span data-ttu-id="7fa0d-243">업데이트 `ConfigureServices` 다음 코드를 사용 하 여:</span><span class="sxs-lookup"><span data-stu-id="7fa0d-243">Update `ConfigureServices` with the following code:</span></span>

[!code-csharp[](20_21/sample/Startup2.cs?name=snippet)]

## <a name="changes-to-razor-pages-projects-razor-files"></a><span data-ttu-id="7fa0d-244">Razor 페이지 프로젝트 Razor 파일 변경</span><span class="sxs-lookup"><span data-stu-id="7fa0d-244">Changes to Razor Pages projects Razor files</span></span>

### <a name="the-layout-file"></a><span data-ttu-id="7fa0d-245">레이아웃 파일</span><span class="sxs-lookup"><span data-stu-id="7fa0d-245">The layout file</span></span>

* <span data-ttu-id="7fa0d-246">이동할 *페이지 /\_Layout.cshtml* 하려면 *페이지/Shared/\_Layout.cshtml*</span><span class="sxs-lookup"><span data-stu-id="7fa0d-246">Move *Pages/\_Layout.cshtml* to *Pages/Shared/\_Layout.cshtml*</span></span>
* <span data-ttu-id="7fa0d-247">합니다 *Layout.cshtml* 파일에 다음과 같이 변경 합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-247">The *Layout.cshtml* file has the following changes:</span></span>

  * <span data-ttu-id="7fa0d-248">`<partial name="_CookieConsentPartial" />` 추가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-248">`<partial name="_CookieConsentPartial" />` is added.</span></span> <span data-ttu-id="7fa0d-249">자세한 내용은 [ASP.NET Core에서 GDPR 지원](xref:security/gdpr)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-249">For more information, see [GDPR support in ASP.NET Core](xref:security/gdpr).</span></span>
  * <span data-ttu-id="7fa0d-250">3.3.1 2.2.0에서 jQuery 변경</span><span class="sxs-lookup"><span data-stu-id="7fa0d-250">jQuery changes from 2.2.0 to 3.3.1</span></span>

### <a name="validationscriptspartialcshtml"></a><span data-ttu-id="7fa0d-251">\_ValidationScriptsPartial.cshtml</span><span class="sxs-lookup"><span data-stu-id="7fa0d-251">\_ValidationScriptsPartial.cshtml</span></span>

* <span data-ttu-id="7fa0d-252">*페이지 /\_ValidationScriptsPartial.cshtml* 이동할 *페이지/Shared/\_ValidationScriptsPartial.cshtml*</span><span class="sxs-lookup"><span data-stu-id="7fa0d-252">*Pages/\_ValidationScriptsPartial.cshtml* moves to *Pages/Shared/\_ValidationScriptsPartial.cshtml*</span></span>
* <span data-ttu-id="7fa0d-253">*jquery.validate/1.14.0* 변경 *jquery.validate/1.17.0*</span><span class="sxs-lookup"><span data-stu-id="7fa0d-253">*jquery.validate/1.14.0* changes to *jquery.validate/1.17.0*</span></span>

### <a name="new-files"></a><span data-ttu-id="7fa0d-254">새 파일</span><span class="sxs-lookup"><span data-stu-id="7fa0d-254">New files</span></span>

<span data-ttu-id="7fa0d-255">다음 파일이 추가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-255">The following files are added:</span></span>

* <span data-ttu-id="7fa0d-256">*Privacy.cshtml*</span><span class="sxs-lookup"><span data-stu-id="7fa0d-256">*Privacy.cshtml*</span></span>
* <span data-ttu-id="7fa0d-257">*Privacy.cshtml.cs*</span><span class="sxs-lookup"><span data-stu-id="7fa0d-257">*Privacy.cshtml.cs*</span></span>

<span data-ttu-id="7fa0d-258">참조 [ASP.NET Core에서 GDPR 지원](xref:security/gdpr) 앞의 파일에 대 한 정보에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-258">See [GDPR support in ASP.NET Core](xref:security/gdpr) for information on the preceding files.</span></span>

## <a name="changes-to-mvc-projects-razor-files"></a><span data-ttu-id="7fa0d-259">Razor 파일을 MVC 프로젝트 변경</span><span class="sxs-lookup"><span data-stu-id="7fa0d-259">Changes to MVC projects Razor files</span></span>

### <a name="the-layout-file"></a><span data-ttu-id="7fa0d-260">레이아웃 파일</span><span class="sxs-lookup"><span data-stu-id="7fa0d-260">The layout file</span></span>

<span data-ttu-id="7fa0d-261">합니다 *Layout.cshtml* 파일에 다음과 같이 변경 합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-261">The *Layout.cshtml* file has the following changes:</span></span>

* <span data-ttu-id="7fa0d-262">`<partial name="_CookieConsentPartial" />` 추가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-262">`<partial name="_CookieConsentPartial" />` is added.</span></span>
* <span data-ttu-id="7fa0d-263">3.3.1 2.2.0에서 jQuery 변경</span><span class="sxs-lookup"><span data-stu-id="7fa0d-263">jQuery changes from 2.2.0 to 3.3.1</span></span>

### <a name="validationscriptspartialcshtml"></a><span data-ttu-id="7fa0d-264">\_ValidationScriptsPartial.cshtml</span><span class="sxs-lookup"><span data-stu-id="7fa0d-264">\_ValidationScriptsPartial.cshtml</span></span>

<span data-ttu-id="7fa0d-265">*jquery.validate/1.14.0* 변경 *jquery.validate/1.17.0*</span><span class="sxs-lookup"><span data-stu-id="7fa0d-265">*jquery.validate/1.14.0* changes to *jquery.validate/1.17.0*</span></span>

### <a name="new-files-and-action-methods"></a><span data-ttu-id="7fa0d-266">새 파일 및 작업 메서드</span><span class="sxs-lookup"><span data-stu-id="7fa0d-266">New files and action methods</span></span>

<span data-ttu-id="7fa0d-267">다음 추가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-267">The following are added:</span></span>

* <span data-ttu-id="7fa0d-268">*Views/Home/Privacy.cshtml*</span><span class="sxs-lookup"><span data-stu-id="7fa0d-268">*Views/Home/Privacy.cshtml*</span></span>
* <span data-ttu-id="7fa0d-269">`Privacy` 작업 메서드가 Home 컨트롤러에 추가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-269">The `Privacy` action method is added to the Home controller.</span></span>

<span data-ttu-id="7fa0d-270">참조 [ASP.NET Core에서 GDPR 지원](xref:security/gdpr) 앞의 파일에 대 한 정보에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-270">See [GDPR support in ASP.NET Core](xref:security/gdpr) for information on the preceding files.</span></span>

## <a name="changes-to-the-launchsettingsjson-file"></a><span data-ttu-id="7fa0d-271">LaunchSettings.json 파일의 변경</span><span class="sxs-lookup"><span data-stu-id="7fa0d-271">Changes to the launchSettings.json file</span></span>

<span data-ttu-id="7fa0d-272">ASP.NET Core 앱 이제 기본적으로 HTTPS를 사용 합니다 *Properties/launchSettings.json* 파일이 변경 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-272">As ASP.NET Core apps now use HTTPS by default, the *Properties/launchSettings.json* file has changed.</span></span>

<span data-ttu-id="7fa0d-273">다음 JSON 템플릿에서 생성 된 이전 2.0을 보여 줍니다 *launchSettings.json* 파일:</span><span class="sxs-lookup"><span data-stu-id="7fa0d-273">The following JSON shows the earlier 2.0 template-generated *launchSettings.json* file:</span></span>

[!code-json[](20_21/sample/launchSettings20.json)]

<span data-ttu-id="7fa0d-274">다음 JSON 템플릿을 생성 하는 새 2.1을 보여 줍니다 *launchSettings.json* 파일:</span><span class="sxs-lookup"><span data-stu-id="7fa0d-274">The following JSON shows the new 2.1 template-generated *launchSettings.json* file:</span></span>

[!code-json[](20_21/sample/launchSettings21.json)]

<span data-ttu-id="7fa0d-275">자세한 내용은 <xref:security/enforcing-ssl>을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-275">For more information, see <xref:security/enforcing-ssl>.</span></span>

## <a name="breaking-changes"></a><span data-ttu-id="7fa0d-276">호환성이 손상되는 변경</span><span class="sxs-lookup"><span data-stu-id="7fa0d-276">Breaking changes</span></span>

### <a name="fileresult-range-header"></a><span data-ttu-id="7fa0d-277">FileResult 범위 헤더</span><span class="sxs-lookup"><span data-stu-id="7fa0d-277">FileResult Range header</span></span>

<span data-ttu-id="7fa0d-278"><xref:Microsoft.AspNetCore.Mvc.FileResult> 더 이상 처리 합니다 [Accept-ranges](https://developer.mozilla.org/docs/Web/HTTP/Headers/Accept-Ranges) 기본적으로 헤더입니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-278"><xref:Microsoft.AspNetCore.Mvc.FileResult> no longer processes the [Accept-Ranges](https://developer.mozilla.org/docs/Web/HTTP/Headers/Accept-Ranges) header by default.</span></span> <span data-ttu-id="7fa0d-279">사용 하도록 설정 합니다 `Accept-Ranges` 헤더를 설정 <xref:Microsoft.AspNetCore.Mvc.FileResult.EnableRangeProcessing> 에 `true`입니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-279">To enable the `Accept-Ranges` header, set <xref:Microsoft.AspNetCore.Mvc.FileResult.EnableRangeProcessing> to `true`.</span></span>

### <a name="controllerbasefile-and-physicalfile-range-header"></a><span data-ttu-id="7fa0d-280">ControllerBase.File 및 PhysicalFile 범위 헤더</span><span class="sxs-lookup"><span data-stu-id="7fa0d-280">ControllerBase.File and PhysicalFile Range header</span></span>

<span data-ttu-id="7fa0d-281">다음 <xref:Microsoft.AspNetCore.Mvc.ControllerBase> 메서드를 더 이상 처리 합니다 [Accept-ranges](https://developer.mozilla.org/docs/Web/HTTP/Headers/Accept-Ranges) 기본적으로 헤더:</span><span class="sxs-lookup"><span data-stu-id="7fa0d-281">The following <xref:Microsoft.AspNetCore.Mvc.ControllerBase> methods no longer processes the [Accept-Ranges](https://developer.mozilla.org/docs/Web/HTTP/Headers/Accept-Ranges) header by default:</span></span>

* <span data-ttu-id="7fa0d-282">오버 로드 [ControllerBase.File](/dotnet/api/microsoft.aspnetcore.mvc.controllerbase.file#Microsoft_AspNetCore_Mvc_ControllerBase_File_System_String_System_String_System_String_System_Boolean_)</span><span class="sxs-lookup"><span data-stu-id="7fa0d-282">Overloads of [ControllerBase.File](/dotnet/api/microsoft.aspnetcore.mvc.controllerbase.file#Microsoft_AspNetCore_Mvc_ControllerBase_File_System_String_System_String_System_String_System_Boolean_)</span></span>
* [<span data-ttu-id="7fa0d-283">ControllerBase.PhysicalFile</span><span class="sxs-lookup"><span data-stu-id="7fa0d-283">ControllerBase.PhysicalFile</span></span>](xref:Microsoft.AspNetCore.Mvc.ControllerBase.PhysicalFile*)

<span data-ttu-id="7fa0d-284">사용 하도록 설정 합니다 `Accept-Ranges` 헤더를 설정 합니다 `EnableRangeProcessing` 매개 변수를 `true`합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-284">To enable the `Accept-Ranges` header, set the `EnableRangeProcessing` parameter to `true`.</span></span>

## <a name="additional-changes"></a><span data-ttu-id="7fa0d-285">추가 변경 내용</span><span class="sxs-lookup"><span data-stu-id="7fa0d-285">Additional changes</span></span>

* <span data-ttu-id="7fa0d-286">최신 설치에서 IIS 사용 하 여 Windows 앱을 호스트 하는 경우 [.NET Core 호스팅 번들](xref:host-and-deploy/iis/index#install-the-net-core-hosting-bundle)합니다.</span><span class="sxs-lookup"><span data-stu-id="7fa0d-286">If hosting the app on Windows with IIS, install the latest [.NET Core Hosting Bundle](xref:host-and-deploy/iis/index#install-the-net-core-hosting-bundle).</span></span>
* [<span data-ttu-id="7fa0d-287">SetCompatibilityVersion</span><span class="sxs-lookup"><span data-stu-id="7fa0d-287">SetCompatibilityVersion</span></span>](xref:mvc/compatibility-version)
* [<span data-ttu-id="7fa0d-288">전송 구성</span><span class="sxs-lookup"><span data-stu-id="7fa0d-288">Transport configuration</span></span>](xref:fundamentals/servers/kestrel#transport-configuration)
