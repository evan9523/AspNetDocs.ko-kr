---
uid: identity/overview/getting-started/aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider
title: 'ASP.NET Identity: EntityFramework MySQL 공급자 ()에서 MySQL 저장소 사용C#()-ASP.NET 4.x'
author: maumar
description: 이 자습서에서는 ASP.NET Identity에 대 한 기본 데이터 저장소 메커니즘을 EntityFramework (SQL 클라이언트 공급자)와 MySQL provid 대체 하는 방법을 보여 줍니다.
ms.author: riande
ms.date: 12/10/2013
ms.assetid: 15253312-a92c-43ba-908e-b5dacd3d08b8
ms.custom: seoapril2019
msc.legacyurl: /identity/overview/getting-started/aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider
msc.type: authoredcontent
ms.openlocfilehash: e89ed139657c5ce9ddcc56879946c62038919483
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78471875"
---
# <a name="aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider-c"></a><span data-ttu-id="60a86-103">ASP.NET Identity: EntityFramework MySQL 공급자 (C#)에서 Mysql 저장소 사용</span><span class="sxs-lookup"><span data-stu-id="60a86-103">ASP.NET Identity: Using MySQL Storage with an EntityFramework MySQL Provider (C#)</span></span>

<span data-ttu-id="60a86-104">[Maurycy Markowski](https://github.com/maumar), [Raquel Soares De Almeida](https://github.com/raquelsa), [Robert McMurray](https://github.com/rmcmurray)</span><span class="sxs-lookup"><span data-stu-id="60a86-104">by [Maurycy Markowski](https://github.com/maumar), [Raquel Soares De Almeida](https://github.com/raquelsa), [Robert McMurray](https://github.com/rmcmurray)</span></span>

> <span data-ttu-id="60a86-105">이 자습서에서는 [**ASP.NET Identity**](introduction-to-aspnet-identity.md) 에 대 한 기본 데이터 저장소 메커니즘을 ENTITYFRAMEWORK (SQL 클라이언트 공급자)와 MySQL 공급자로 바꾸는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-105">This tutorial shows you how to replace the default data storage mechanism for [**ASP.NET Identity**](introduction-to-aspnet-identity.md) with EntityFramework (SQL client provider) with a MySQL provider.</span></span>

<span data-ttu-id="60a86-106">이 자습서에서는 다음 항목을 다룹니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-106">The following topics will be covered in this tutorial:</span></span>

- <span data-ttu-id="60a86-107">Azure에서 MySQL 데이터베이스 만들기</span><span class="sxs-lookup"><span data-stu-id="60a86-107">Creating a MySQL database on Azure</span></span>
- <span data-ttu-id="60a86-108">Visual Studio 2013 MVC 템플릿을 사용 하 여 MVC 응용 프로그램 만들기</span><span class="sxs-lookup"><span data-stu-id="60a86-108">Creating an MVC application using Visual Studio 2013 MVC template</span></span>
- <span data-ttu-id="60a86-109">MySQL 데이터베이스 공급자와 작동 하도록 EntityFramework 구성</span><span class="sxs-lookup"><span data-stu-id="60a86-109">Configuring EntityFramework to work with a MySQL database provider</span></span>
- <span data-ttu-id="60a86-110">응용 프로그램을 실행 하 여 결과 확인</span><span class="sxs-lookup"><span data-stu-id="60a86-110">Running the application to verify the results</span></span>

<span data-ttu-id="60a86-111">이 자습서의 끝 부분에서는 Azure에서 호스트 되는 MySQL 데이터베이스를 사용 하는 ASP.NET Identity 저장소를 사용 하는 MVC 응용 프로그램을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-111">At the end of this tutorial, you will have an MVC application with the ASP.NET Identity store that is using a MySQL database that is hosted in Azure.</span></span>

## <a name="creating-a-mysql-database-instance-on-azure"></a><span data-ttu-id="60a86-112">Azure에서 MySQL 데이터베이스 인스턴스 만들기</span><span class="sxs-lookup"><span data-stu-id="60a86-112">Creating a MySQL database instance on Azure</span></span>

1. <span data-ttu-id="60a86-113">[Azure Portal](https://go.microsoft.com/fwlink/?linkid=529715&amp;clcid=0x409)에 로그인합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-113">Log in to the [Azure Portal](https://go.microsoft.com/fwlink/?linkid=529715&amp;clcid=0x409).</span></span>
2. <span data-ttu-id="60a86-114">페이지 맨 아래에 있는 **새로 만들기** 를 클릭 한 다음 **스토어**를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-114">Click **NEW** at the bottom of the page, and then select **STORE**:</span></span>

    [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image2.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image1.png)
3. <span data-ttu-id="60a86-115">**선택 및 추가 기능** 마법사에서 **ClearDB MySQL 데이터베이스**를 선택 하 고 프레임 맨 아래에 있는 **다음** 화살표를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-115">In the **Choose and Add-on** wizard, select **ClearDB MySQL Database**, and then click the **Next** arrow at the bottom of the frame:</span></span>

   <span data-ttu-id="60a86-116">[다음 이미지를 클릭 하 여 확장 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-116">[Click the following image to expand it.</span></span> <span data-ttu-id="60a86-117">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image4.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="60a86-117">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image4.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image3.png)</span></span>
4. <span data-ttu-id="60a86-118">기본 **무료** 요금제를 유지 하 고, **이름을** **IdentityMySQLDatabase**로 변경 하 고, 사용자에 게 가장 가까운 지역을 선택 하 고, 프레임 맨 아래에 있는 **다음** 화살표를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-118">Keep the default **Free** plan, change the **NAME** to **IdentityMySQLDatabase**, select the region that is nearest to you, and then click the **Next** arrow at the bottom of the frame:</span></span>

   <span data-ttu-id="60a86-119">[다음 이미지를 클릭 하 여 확장 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-119">[Click the following image to expand it.</span></span> <span data-ttu-id="60a86-120">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image6.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="60a86-120">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image6.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image5.png)</span></span>
5. <span data-ttu-id="60a86-121">**구매** 확인 표시를 클릭 하 여 데이터베이스 만들기를 완료 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-121">Click the **PURCHASE** checkmark to complete the database creation.</span></span>

   <span data-ttu-id="60a86-122">[다음 이미지를 클릭 하 여 확장 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-122">[Click the following image to expand it.</span></span> <span data-ttu-id="60a86-123">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image8.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="60a86-123">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image8.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image7.png)</span></span>
6. <span data-ttu-id="60a86-124">데이터베이스가 만들어진 후 관리 포털의 **ADD-ONS** 탭에서 관리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-124">After your database has been created, you can manage it from the **ADD-ONS** tab in the management portal.</span></span> <span data-ttu-id="60a86-125">데이터베이스에 대 한 연결 정보를 검색 하려면 페이지 맨 아래에 있는 **연결** 정보를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-125">To retrieve the connection information for your database, click **CONNECTION INFO** at the bottom of the page:</span></span>

   <span data-ttu-id="60a86-126">[다음 이미지를 클릭 하 여 확장 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-126">[Click the following image to expand it.</span></span> <span data-ttu-id="60a86-127">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image10.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="60a86-127">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image10.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image9.png)</span></span>
7. <span data-ttu-id="60a86-128">**CONNECTIONSTRING** 필드에서 복사 단추를 클릭 하 여 연결 문자열을 복사 하 고 저장 합니다. MVC 응용 프로그램에 대 한이 자습서의 뒷부분에서이 정보를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-128">Copy the connection string by clicking on the copy button by the **CONNECTIONSTRING** field and save it; you will use this information later in this tutorial for your MVC application:</span></span>

   <span data-ttu-id="60a86-129">[다음 이미지를 클릭 하 여 확장 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-129">[Click the following image to expand it.</span></span> <span data-ttu-id="60a86-130">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image12.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="60a86-130">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image12.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image11.png)</span></span>

## <a name="creating-an-mvc-application-project"></a><span data-ttu-id="60a86-131">MVC 응용 프로그램 프로젝트 만들기</span><span class="sxs-lookup"><span data-stu-id="60a86-131">Creating an MVC application project</span></span>

<span data-ttu-id="60a86-132">자습서의이 섹션에 있는 단계를 완료 하려면 먼저 웹 또는 [Visual Studio 2013](https://go.microsoft.com/fwlink/?LinkId=306566) [에 대 한 Visual Studio Express 2013](https://go.microsoft.com/fwlink/?LinkId=299058) 을 설치 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-132">To complete the steps in this section of the tutorial, you will first need to install [Visual Studio Express 2013 for Web](https://go.microsoft.com/fwlink/?LinkId=299058) or [Visual Studio 2013](https://go.microsoft.com/fwlink/?LinkId=306566).</span></span> <span data-ttu-id="60a86-133">Visual Studio가 설치 되 면 다음 단계를 사용 하 여 새 MVC 응용 프로그램 프로젝트를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-133">Once Visual Studio has been installed, use the following steps to create a new MVC application project:</span></span>

1. <span data-ttu-id="60a86-134">Visual Studio 2103을 엽니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-134">Open Visual Studio 2103.</span></span>
2. <span data-ttu-id="60a86-135">**시작** 페이지에서 **새 프로젝트** 를 클릭 하거나 **파일** 메뉴를 클릭 한 후 **새 프로젝트**를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-135">Click **New Project** from the **Start** page, or you can click the **File** menu and then **New Project**:</span></span>

   <span data-ttu-id="60a86-136">[다음 이미지를 클릭 하 여 확장 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-136">[Click the following image to expand it.</span></span> <span data-ttu-id="60a86-137">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image2.jpg)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="60a86-137">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image2.jpg)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image1.jpg)</span></span>
3. <span data-ttu-id="60a86-138">**새 프로젝트** 대화 상자가 표시 되 면 템플릿 목록에서 **시각적 C# 개체** 를 확장 한 다음 **웹**을 클릭 하 고 **ASP.NET 웹 응용 프로그램**을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-138">When the **New Project** dialog box is displayed, expand **Visual C#** in the list of templates, then click **Web**, and select **ASP.NET Web Application**.</span></span> <span data-ttu-id="60a86-139">프로젝트 이름을 **IdentityMySQLDemo** 로 지정한 다음 **확인을**클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-139">Name your project **IdentityMySQLDemo** and then click **OK**:</span></span>

   <span data-ttu-id="60a86-140">[다음 이미지를 클릭 하 여 확장 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-140">[Click the following image to expand it.</span></span> <span data-ttu-id="60a86-141">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image14.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="60a86-141">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image14.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image13.png)</span></span>
4. <span data-ttu-id="60a86-142">**새 ASP.NET 프로젝트** 대화 상자에서 기본 옵션을 사용 하 여 **MVC** 템플릿을 선택 합니다. 그러면 **개별 사용자 계정이** 인증 방법으로 구성 됩니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-142">In the **New ASP.NET Project** dialog, select the **MVC** templatewith the default options; this will configure **Individual User Accounts** as the authentication method.</span></span> <span data-ttu-id="60a86-143">**확인**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-143">Click **OK**:</span></span>

   <span data-ttu-id="60a86-144">[다음 이미지를 클릭 하 여 확장 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-144">[Click the following image to expand it.</span></span> <span data-ttu-id="60a86-145">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image16.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="60a86-145">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image16.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image15.png)</span></span>

## <a name="configure-entityframework-to-work-with-a-mysql-database"></a><span data-ttu-id="60a86-146">MySQL 데이터베이스를 사용 하도록 EntityFramework 구성</span><span class="sxs-lookup"><span data-stu-id="60a86-146">Configure EntityFramework to work with a MySQL database</span></span>

### <a name="update-the-entity-framework-assembly-for-your-project"></a><span data-ttu-id="60a86-147">프로젝트에 대 한 Entity Framework 어셈블리 업데이트</span><span class="sxs-lookup"><span data-stu-id="60a86-147">Update the Entity Framework assembly for your project</span></span>

<span data-ttu-id="60a86-148">Visual Studio 2013 템플릿에서 만든 MVC 응용 프로그램에는 [Entityframework 6.0.0](http://www.nuget.org/packages/EntityFramework) 패키지에 대 한 참조가 포함 되어 있지만 해당 어셈블리의 릴리스 이후 상당한 성능 향상이 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-148">The MVC application that was created from the Visual Studio 2013 template contains a reference to the [EntityFramework 6.0.0](http://www.nuget.org/packages/EntityFramework) package, but there have been updates to that assembly since its release which contain significant performance improvements.</span></span> <span data-ttu-id="60a86-149">응용 프로그램에서 이러한 최신 업데이트를 사용 하려면 다음 단계를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-149">In order to use these latest updates in your application, use the following steps.</span></span>

1. <span data-ttu-id="60a86-150">Visual Studio에서 MVC 프로젝트를 엽니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-150">Open your MVC project in Visual Studio.</span></span>
2. <span data-ttu-id="60a86-151">**도구**를 클릭 하 고 **NuGet 패키지 관리자**를 클릭 한 다음 **패키지 관리자 콘솔**을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-151">Click **Tools**, then click **NuGet Package Manager**, and then click **Package Manager Console**:</span></span>

   <span data-ttu-id="60a86-152">[다음 이미지를 클릭 하 여 확장 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-152">[Click the following image to expand it.</span></span> <span data-ttu-id="60a86-153">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image18.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="60a86-153">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image18.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image17.png)</span></span>
3. <span data-ttu-id="60a86-154">Visual Studio의 아래쪽 섹션에 **패키지 관리자 콘솔이** 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-154">The **Package Manager Console** will appear in the bottom section of Visual Studio.</span></span> <span data-ttu-id="60a86-155">&quot;**업데이트 패키지 EntityFramework**&quot;를 입력 하 고 enter 키를 누릅니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-155">Type &quot;**Update-Package EntityFramework**&quot; and press Enter:</span></span>

   <span data-ttu-id="60a86-156">[다음 이미지를 클릭 하 여 확장 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-156">[Click the following image to expand it.</span></span> <span data-ttu-id="60a86-157">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image20.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="60a86-157">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image20.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image19.png)</span></span>

### <a name="install-the-mysql-provider-for-entityframework"></a><span data-ttu-id="60a86-158">EntityFramework 용 MySQL 공급자 설치</span><span class="sxs-lookup"><span data-stu-id="60a86-158">Install the MySQL provider for EntityFramework</span></span>

<span data-ttu-id="60a86-159">EntityFramework를 MySQL 데이터베이스에 연결 하려면 MySQL 공급자를 설치 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-159">In order for EntityFramework to connect to MySQL database, you need to install a MySQL provider.</span></span> <span data-ttu-id="60a86-160">이렇게 하려면 **패키지 관리자 콘솔** 을 열고 &quot;**설치-패키지 MySql.** &quot;를 입력 한 다음 enter 키를 누릅니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-160">To do so, open the **Package Manager Console** and type &quot;**Install-Package MySql.Data.Entity -Pre**&quot;, and then press Enter.</span></span>

> [!NOTE]
> <span data-ttu-id="60a86-161">이 버전은 어셈블리의 시험판 버전 이며 버그를 포함할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-161">This is a pre-release version of the assembly, and as such it may contain bugs.</span></span> <span data-ttu-id="60a86-162">프로덕션 환경에서는 시험판 버전의 공급자를 사용해 서는 안 됩니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-162">You should not use a pre-release version of the provider in production.</span></span>

<span data-ttu-id="60a86-163">[다음 이미지를 클릭 하 여 확장 하십시오.]</span><span class="sxs-lookup"><span data-stu-id="60a86-163">[Click the following image to expand it.]</span></span>

[![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image22.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image21.png)

### <a name="making-project-configuration-changes-to-the-webconfig-file-for-your-application"></a><span data-ttu-id="60a86-164">응용 프로그램에 대 한 web.config 파일의 프로젝트 구성 변경</span><span class="sxs-lookup"><span data-stu-id="60a86-164">Making project configuration changes to the Web.config file for your application</span></span>

<span data-ttu-id="60a86-165">이 섹션에서는 방금 설치한 MySQL 공급자를 사용 하 여 Entity Framework를 구성 하 고, MySQL 공급자 팩터리를 등록 하 고, Azure에서 연결 문자열을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-165">In this section you will configure the Entity Framework to use the MySQL provider that you just installed, register the MySQL provider factory, and add your connection string from Azure.</span></span>

> [!NOTE]
> <span data-ttu-id="60a86-166">다음 예제에는 MySql의 특정 어셈블리 버전이 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-166">The following examples contain a specific assembly version for MySql.Data.dll.</span></span> <span data-ttu-id="60a86-167">어셈블리 버전이 변경 되는 경우 올바른 버전으로 적절 한 구성 설정을 수정 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-167">If the assembly version changes, you will need to modify the appropriate configuration settings with the correct version.</span></span>

1. <span data-ttu-id="60a86-168">Visual Studio 2013에서 프로젝트에 대 한 web.config 파일을 엽니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-168">Open the Web.config file for your project in Visual Studio 2013.</span></span>
2. <span data-ttu-id="60a86-169">Entity Framework에 대 한 기본 데이터베이스 공급자 및 팩터리를 정의 하는 다음 구성 설정을 찾습니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-169">Locate the following configuration settings, which define the default database provider and factory for the Entity Framework:</span></span>

    [!code-xml[Main](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/samples/sample1.xml)]
3. <span data-ttu-id="60a86-170">이러한 구성 설정을 다음으로 바꿔 MySQL 공급자를 사용 하도록 Entity Framework를 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-170">Replace those configuration settings with the following, which will configure the Entity Framework to use the MySQL provider:</span></span>

    [!code-xml[Main](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/samples/sample2.xml)]
4. <span data-ttu-id="60a86-171">&lt;connectionStrings&gt; 섹션을 찾아 다음 코드로 바꿉니다 .이 코드는 Azure에서 호스트 되는 MySQL 데이터베이스에 대 한 연결 문자열을 정의 합니다 (providerName 값도 원래에서 변경 됨).</span><span class="sxs-lookup"><span data-stu-id="60a86-171">Locate the &lt;connectionStrings&gt; section and replace it with the following code, which will define the connection string for your MySQL database that is hosted on Azure (note that providerName value has also been changed from the original):</span></span>

    [!code-xml[Main](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/samples/sample3.xml?highlight=3-4)]

### <a name="adding-custom-migrationhistory-context"></a><span data-ttu-id="60a86-172">사용자 지정 MigrationHistory 컨텍스트 추가</span><span class="sxs-lookup"><span data-stu-id="60a86-172">Adding custom MigrationHistory context</span></span>

<span data-ttu-id="60a86-173">Entity Framework Code First는 **MigrationHistory** 테이블을 사용 하 여 모델 변경 내용을 추적 하 고 데이터베이스 스키마와 개념 스키마 간에 일관성을 유지 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-173">Entity Framework Code First uses a **MigrationHistory** table to keep track of model changes and to ensure the consistency between the database schema and conceptual schema.</span></span> <span data-ttu-id="60a86-174">그러나 기본 키가 너무 크기 때문에이 테이블은 기본적으로 MySQL에 대해 작동 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-174">However, this table does not work for MySQL by default because the primary key is too large.</span></span> <span data-ttu-id="60a86-175">이러한 상황을 해결 하려면 해당 테이블에 대 한 키 크기를 축소 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-175">To remedy this situation, you will need to shrink the key size for that table.</span></span> <span data-ttu-id="60a86-176">이렇게 하려면 다음 단계를 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-176">To do so, use the following steps:</span></span>

1. <span data-ttu-id="60a86-177">이 테이블에 대 한 스키마 정보는 다른 **DbContext**로 수정할 수 있는 **HistoryContext**에서 캡처됩니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-177">The schema information for this table is captured in a **HistoryContext**, which can be modified as any other **DbContext**.</span></span> <span data-ttu-id="60a86-178">이렇게 하려면 **MySqlHistoryContext.cs** 이라는 새 클래스 파일을 프로젝트에 추가 하 고 해당 내용을 다음 코드로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-178">To do so, add a new class file named **MySqlHistoryContext.cs** to the project, and replace its contents with the following code:</span></span>

    [!code-csharp[Main](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/samples/sample4.cs)]
2. <span data-ttu-id="60a86-179">그런 다음 수정 된 **HistoryContext**를 사용 하도록 Entity Framework를 구성 해야 합니다 (기본값은 아님).</span><span class="sxs-lookup"><span data-stu-id="60a86-179">Next you will need to configure Entity Framework to use the modified **HistoryContext**, rather than default one.</span></span> <span data-ttu-id="60a86-180">코드 기반 구성 기능을 활용 하 여이 작업을 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-180">This can be done by leveraging code-based configuration features.</span></span> <span data-ttu-id="60a86-181">이렇게 하려면 **MySqlConfiguration.cs** 이라는 새 클래스 파일을 프로젝트에 추가 하 고 해당 내용을로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-181">To do so, add new class file named **MySqlConfiguration.cs** to your project and replace its contents with:</span></span>

    [!code-csharp[Main](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/samples/sample5.cs)]

### <a name="creating-a-custom-entityframework-initializer-for-applicationdbcontext"></a><span data-ttu-id="60a86-182">ApplicationDbContext에 대 한 사용자 지정 EntityFramework 이니셜라이저 만들기</span><span class="sxs-lookup"><span data-stu-id="60a86-182">Creating a custom EntityFramework initializer for ApplicationDbContext</span></span>

<span data-ttu-id="60a86-183">이 자습서에 제공 되는 MySQL 공급자는 현재 Entity Framework 마이그레이션을 지원 하지 않으므로 데이터베이스에 연결 하려면 모델 이니셜라이저를 사용 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-183">The MySQL provider that is featured in this tutorial does not currently support Entity Framework migrations, so you will need to use model initializers in order to connect to the database.</span></span> <span data-ttu-id="60a86-184">이 자습서에서는 Azure에서 MySQL 인스턴스를 사용 하므로 사용자 지정 Entity Framework 이니셜라이저를 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-184">Because this tutorial is using a MySQL instance on Azure, you will need to create a custom Entity Framework initializer.</span></span>

> [!NOTE]
> <span data-ttu-id="60a86-185">Azure의 SQL Server 인스턴스에 연결 하거나 온-프레미스에서 호스트 되는 데이터베이스를 사용 하는 경우에는이 단계가 필요 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-185">This step is not required if you are connecting to a SQL Server instance on Azure or if you are using a database that is hosted on premises.</span></span>

<span data-ttu-id="60a86-186">MySQL에 대 한 사용자 지정 Entity Framework 이니셜라이저를 만들려면 다음 단계를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-186">To create a custom Entity Framework initializer for MySQL, use the following steps:</span></span>

1. <span data-ttu-id="60a86-187">**MySqlInitializer.cs** 라는 새 클래스 파일을 프로젝트에 추가 하 고 내용을 다음 코드로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-187">Add a new class file named **MySqlInitializer.cs** to the project, and replace it's contents with the following code:</span></span>

    [!code-csharp[Main](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/samples/sample6.cs?highlight=23)]
2. <span data-ttu-id="60a86-188">**모델** 디렉터리에 있는 프로젝트에 대 한 **IdentityModels.cs** 파일을 열고 내용을 다음으로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-188">Open the **IdentityModels.cs** file for your project, which is located in the **Models** directory, and replace it's contents with the following:</span></span>

    [!code-csharp[Main](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/samples/sample7.cs)]

## <a name="running-the-application-and-verifying-the-database"></a><span data-ttu-id="60a86-189">응용 프로그램 실행 및 데이터베이스 확인</span><span class="sxs-lookup"><span data-stu-id="60a86-189">Running the application and verifying the database</span></span>

<span data-ttu-id="60a86-190">이전 섹션의 단계를 완료 한 후에는 데이터베이스를 테스트 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-190">Once you have completed the steps in the preceding sections, you should test your database.</span></span> <span data-ttu-id="60a86-191">이렇게 하려면 다음 단계를 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-191">To do so, use the following steps:</span></span>

1. <span data-ttu-id="60a86-192">**Ctrl +** f 5를 눌러 웹 응용 프로그램을 빌드하고 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-192">Press **Ctrl + F5** to build and run the web application.</span></span>
2. <span data-ttu-id="60a86-193">페이지 위쪽에서 **등록** 탭을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-193">Click the **Register** tab on the top of the page:</span></span>

   <span data-ttu-id="60a86-194">[다음 이미지를 클릭 하 여 확장 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-194">[Click the following image to expand it.</span></span> <span data-ttu-id="60a86-195">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image4.jpg)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image3.jpg)</span><span class="sxs-lookup"><span data-stu-id="60a86-195">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image4.jpg)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image3.jpg)</span></span>
3. <span data-ttu-id="60a86-196">새 사용자 이름 및 암호를 입력 한 다음 **등록**을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-196">Enter a new user name and password, and then click **Register**:</span></span>

   <span data-ttu-id="60a86-197">[다음 이미지를 클릭 하 여 확장 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-197">[Click the following image to expand it.</span></span> <span data-ttu-id="60a86-198">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image24.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="60a86-198">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image24.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image23.png)</span></span>
4. <span data-ttu-id="60a86-199">이 시점에서 MySQL 데이터베이스에 ASP.NET Identity 테이블이 생성 되 고 사용자가 등록 되 고 응용 프로그램에 로그인 됩니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-199">At this point the ASP.NET Identity tables are created on the MySQL Database, and the user is registered and logged into the application:</span></span>

   <span data-ttu-id="60a86-200">[다음 이미지를 클릭 하 여 확장 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-200">[Click the following image to expand it.</span></span> <span data-ttu-id="60a86-201">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image6.jpg)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image5.jpg)</span><span class="sxs-lookup"><span data-stu-id="60a86-201">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image6.jpg)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image5.jpg)</span></span>

### <a name="installing-mysql-workbench-tool-to-verify-the-data"></a><span data-ttu-id="60a86-202">MySQL 워크 벤치 도구를 설치 하 여 데이터 확인</span><span class="sxs-lookup"><span data-stu-id="60a86-202">Installing MySQL Workbench tool to verify the data</span></span>

1. <span data-ttu-id="60a86-203">[Mysql 다운로드 페이지](http://dev.mysql.com/downloads/windows/installer/) 에서 **mysql 워크 벤치** 도구를 설치 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-203">Install the **MySQL Workbench** tool from the [MySQL downloads page](http://dev.mysql.com/downloads/windows/installer/)</span></span>
2. <span data-ttu-id="60a86-204">설치 마법사: **기능 선택** 탭의 **응용 프로그램** 섹션에서 **MySQL 워크 벤치** 를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-204">In the installation wizard: **Feature Selection** tab, select **MySQL Workbench** under **applications** section.</span></span>
3. <span data-ttu-id="60a86-205">앱을 시작 하 고이 자습서의 begging에서 만든 Azure MySQL 데이터베이스의 연결 문자열 데이터를 사용 하 여 새 연결을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-205">Launch the app and add a new connection using the connection string data from the Azure MySQL database you created at the begging of this tutorial.</span></span>
4. <span data-ttu-id="60a86-206">연결을 설정한 후 IdentityMySQLDatabase에서 만든 **ASP.NET Identity** 테이블을 검사 합니다 **.**</span><span class="sxs-lookup"><span data-stu-id="60a86-206">After establishing the connection, inspect the **ASP.NET Identity** tables created on the **IdentityMySQLDatabase.**</span></span>
5. <span data-ttu-id="60a86-207">아래 이미지에 표시 된 것 처럼 모든 ASP.NET Identity 필수 테이블이 생성 된 것을 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-207">You will see that all ASP.NET Identity required tables are created as shown in the image below:</span></span>

   <span data-ttu-id="60a86-208">[다음 이미지를 클릭 하 여 확장 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-208">[Click the following image to expand it.</span></span> <span data-ttu-id="60a86-209">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image8.jpg)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="60a86-209">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image8.jpg)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image7.jpg)</span></span>
6. <span data-ttu-id="60a86-210">새 사용자를 등록할 때 항목을 확인 하려면 **aspnetusers** 테이블에서 인스턴스를 검사 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-210">Inspect the **aspnetusers** table for instance to check for the entries as you register new users.</span></span>

   <span data-ttu-id="60a86-211">[다음 이미지를 클릭 하 여 확장 합니다.</span><span class="sxs-lookup"><span data-stu-id="60a86-211">[Click the following image to expand it.</span></span> <span data-ttu-id="60a86-212">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image26.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="60a86-212">] [![](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image26.png)](aspnet-identity-using-mysql-storage-with-an-entityframework-mysql-provider/_static/image25.png)</span></span>
