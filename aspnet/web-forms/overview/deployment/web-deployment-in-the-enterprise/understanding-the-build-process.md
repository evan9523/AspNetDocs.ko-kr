---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-build-process
title: 빌드 프로세스 이해 | Microsoft Docs
author: jrjlee
description: 이 항목에서는 엔터프라이즈급 빌드 및 배포 프로세스에 대 한 연습을 제공 합니다. 이 항목에서 설명 하는 방법은 사용자 지정 Microsoft 빌드 Engin를 사용 합니다.
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 5b982451-547b-4a2f-a5dc-79bc64d84d40
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-build-process
msc.type: authoredcontent
ms.openlocfilehash: 802d93f7ca987d018967275bae68b8c56d883a25
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78520835"
---
# <a name="understanding-the-build-process"></a><span data-ttu-id="f2b8f-104">빌드 프로세스 이해</span><span class="sxs-lookup"><span data-stu-id="f2b8f-104">Understanding the Build Process</span></span>

<span data-ttu-id="f2b8f-105">[Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="f2b8f-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="f2b8f-106">PDF 다운로드</span><span class="sxs-lookup"><span data-stu-id="f2b8f-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="f2b8f-107">이 항목에서는 엔터프라이즈급 빌드 및 배포 프로세스에 대 한 연습을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-107">This topic provides a walkthrough of an enterprise-scale build and deployment process.</span></span> <span data-ttu-id="f2b8f-108">이 항목에서 설명 하는 방법은 사용자 지정 MSBuild (Microsoft Build Engine) 프로젝트 파일을 사용 하 여 프로세스의 모든 측면에 대 한 세분화 된 제어를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-108">The approach described in this topic uses custom Microsoft Build Engine (MSBuild) project files to provide fine-grained control over every aspect of the process.</span></span> <span data-ttu-id="f2b8f-109">프로젝트 파일 내에서 사용자 지정 MSBuild 대상은 인터넷 정보 서비스 (IIS) 웹 배포 도구 (Msdeploy.exe) 및 데이터베이스 배포 유틸리티 nuget.exe와 같은 배포 유틸리티를 실행 하는 데 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-109">Within the project files, custom MSBuild targets are used to run deployment utilities like the Internet Information Services (IIS) Web Deployment Tool (MSDeploy.exe) and the database deployment utility VSDBCMD.exe.</span></span>
> 
> > [!NOTE]
> > <span data-ttu-id="f2b8f-110">이전 항목인 [프로젝트 파일 이해](understanding-the-project-file.md)에서는 MSBuild 프로젝트 파일의 주요 구성 요소에 대해 설명 하 고 여러 대상 환경에 대 한 배포를 지원 하기 위해 분할 프로젝트 파일의 개념을 소개 했습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-110">The previous topic, [Understanding the Project File](understanding-the-project-file.md), described the key components of an MSBuild project file and introduced the concept of split project files to support deployment to multiple target environments.</span></span> <span data-ttu-id="f2b8f-111">이러한 개념에 대해 잘 모르는 경우이 항목을 진행 하기 전에 [프로젝트 파일 이해](understanding-the-project-file.md) 를 검토 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-111">If you're not already familiar with these concepts, you should review [Understanding the Project File](understanding-the-project-file.md) before you work through this topic.</span></span>

<span data-ttu-id="f2b8f-112">이 항목에서는 Fabrikam, i n c. 라는 가상 회사의 엔터프라이즈 배포 요구 사항을 기반으로 하는 일련의 자습서의 일부를 형성 합니다. 이 자습서 시리즈에서는 샘플 솔루션&#x2014;&#x2014;을 사용 [하 여](the-contact-manager-solution.md)ASP.NET MVC 3 응용 프로그램, Windows Communication Foundation (WCF) 서비스 및 데이터베이스 프로젝트를 비롯 한 현실적인 복잡성의 웹 응용 프로그램을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-112">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="f2b8f-113">이러한 자습서의 핵심에 나오는 배포 방법은 [프로젝트 파일 이해](understanding-the-project-file.md)에 설명 된 프로젝트 파일을 이해 하는 방법에 설명 되어 있습니다 .이는 빌드 프로세스가 모든 대상 환경에 적용&#x2014;되는 빌드 명령을 포함 하는 두 개의 프로젝트 파일과 환경 특정 빌드 및 배포 설정을 포함 하는 프로젝트 파일에 의해 제어 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-113">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="f2b8f-114">빌드 시 환경 관련 프로젝트 파일은 환경에 관계 없는 프로젝트 파일에 병합 되어 전체 빌드 명령 집합을 형성 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-114">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="build-and-deployment-overview"></a><span data-ttu-id="f2b8f-115">빌드 및 배포 개요</span><span class="sxs-lookup"><span data-stu-id="f2b8f-115">Build and Deployment Overview</span></span>

<span data-ttu-id="f2b8f-116">[Contact Manager 솔루션](the-contact-manager-solution.md)에서 다음과 같은 세 개의 파일이 빌드 및 배포 프로세스를 제어 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-116">In the [Contact Manager solution](the-contact-manager-solution.md), three files control the build and deployment process:</span></span>

- <span data-ttu-id="f2b8f-117">*유니버설 프로젝트 파일* (*Publish. proj*)</span><span class="sxs-lookup"><span data-stu-id="f2b8f-117">A *universal project file* (*Publish.proj*).</span></span> <span data-ttu-id="f2b8f-118">여기에는 대상 환경 간에 변경 되지 않는 빌드 및 배포 지침이 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-118">This contains build and deployment instructions that do not change between destination environments.</span></span>
- <span data-ttu-id="f2b8f-119">*환경 관련 프로젝트 파일* (*Env-Dev. proj*)</span><span class="sxs-lookup"><span data-stu-id="f2b8f-119">An *environment-specific project file* (*Env-Dev.proj*).</span></span> <span data-ttu-id="f2b8f-120">여기에는 특정 대상 환경에 특정 한 빌드 및 배포 설정이 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-120">This contains build and deployment settings that are specific to a particular destination environment.</span></span> <span data-ttu-id="f2b8f-121">예를 들어, *env-Dev. proj* 파일을 사용 하 여 개발자 또는 테스트 환경에 대 한 설정을 제공 하 고, 스테이징 환경에 대 한 설정을 제공 하는 *env Stage* 라는 대체 파일을 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-121">For example, you could use the *Env-Dev.proj* file to provide settings for a developer or test environment and create an alternative file named *Env-Stage.proj* to provide settings for a staging environment.</span></span>
- <span data-ttu-id="f2b8f-122">*명령 파일* (*Publish-Dev*).</span><span class="sxs-lookup"><span data-stu-id="f2b8f-122">A *command file* (*Publish-Dev.cmd*).</span></span> <span data-ttu-id="f2b8f-123">여기에는 실행할 프로젝트 파일을 지정 하는 Msbuild.exe 명령이 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-123">This contains an MSBuild.exe command that specifies which project files you want to execute.</span></span> <span data-ttu-id="f2b8f-124">모든 대상 환경에 대해 명령 파일을 만들 수 있습니다. 여기에는 각 파일에 다른 환경 관련 프로젝트 파일을 지정 하는 Msbuild.exe 명령이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-124">You can create a command file for every destination environment, where each file contains an MSBuild.exe command that specifies a different environment-specific project file.</span></span> <span data-ttu-id="f2b8f-125">이렇게 하면 개발자가 적절 한 명령 파일을 실행 하 여 다른 환경에 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-125">This lets the developer deploy to different environments simply by running the appropriate command file.</span></span>

<span data-ttu-id="f2b8f-126">샘플 솔루션의 솔루션 게시 폴더에서 이러한 세 개의 파일을 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-126">In the sample solution, you can find these three files in the Publish solution folder.</span></span>

![](understanding-the-build-process/_static/image1.png)

<span data-ttu-id="f2b8f-127">이러한 파일을 좀 더 자세히 살펴보기 전에이 방법을 사용할 때 전체 빌드 프로세스의 작동 방식을 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-127">Before you look at these files in more detail, let's take a look at how the overall build process works when you use this approach.</span></span> <span data-ttu-id="f2b8f-128">개략적인 수준에서 빌드 및 배포 프로세스는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-128">At a high level, the build and deployment process looks like this:</span></span>

![](understanding-the-build-process/_static/image2.png)

<span data-ttu-id="f2b8f-129">첫 번째는 두 프로젝트 파일이 유니버설 빌드 및 배포 명령을&#x2014;포함 하 고 환경 관련 설정이&#x2014;포함 된 파일을 단일 프로젝트 파일에 병합 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-129">The first thing that happens is that the two project files&#x2014;one containing universal build and deployment instructions, and one containing environment-specific settings&#x2014;are merged into a single project file.</span></span> <span data-ttu-id="f2b8f-130">그런 다음 MSBuild는 프로젝트 파일의 지침을 따릅니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-130">MSBuild then works through the instructions in the project file.</span></span> <span data-ttu-id="f2b8f-131">각 프로젝트에 대 한 프로젝트 파일을 사용 하 여 솔루션의 각 프로젝트를 빌드합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-131">It builds each of the projects in the solution, using the project file for each project.</span></span> <span data-ttu-id="f2b8f-132">그런 다음 웹 배포 (Msdeploy.exe)와 같은 다른 도구를 호출 하 고, VSDBCMD 유틸리티를 호출 하 여 웹 콘텐츠 및 데이터베이스를 대상 환경에 배포 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-132">It then calls out to other tools, like Web Deploy (MSDeploy.exe) and the VSDBCMD utility to deploy your web content and databases to the target environment.</span></span>

<span data-ttu-id="f2b8f-133">시작부터 완료까지 빌드 및 배포 프로세스는 다음 작업을 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-133">From start to finish, the build and deployment process performs these tasks:</span></span>

1. <span data-ttu-id="f2b8f-134">새 빌드를 준비 하면서 출력 디렉터리의 내용을 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-134">It deletes the contents of the output directory, in preparation for a fresh build.</span></span>
2. <span data-ttu-id="f2b8f-135">솔루션의 각 프로젝트를 빌드합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-135">It builds each project in the solution:</span></span>

    1. <span data-ttu-id="f2b8f-136">이 경우 웹&#x2014;프로젝트의 경우 ASP.NET MVC 웹 응용 프로그램 및 WCF 웹 서비스&#x2014;빌드 프로세스에서 각 프로젝트에 대 한 웹 배포 패키지를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-136">For web projects&#x2014;in this case, an ASP.NET MVC web application and a WCF web service&#x2014;the build process creates a web deployment package for each project.</span></span>
    2. <span data-ttu-id="f2b8f-137">데이터베이스 프로젝트의 경우 빌드 프로세스에서 각 프로젝트에 대 한 배포 매니페스트 (deploymanifest 파일)를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-137">For database projects, the build process creates a deployment manifest (.deploymanifest file) for each project.</span></span>
3. <span data-ttu-id="f2b8f-138">이 메서드는 VSDBCMD 유틸리티를 사용 하 여 솔루션의 각 데이터베이스 프로젝트를 배포 합니다. 프로젝트&#x2014;의 다양 한 속성을 사용 하 여 대상 연결 문자열 및&#x2014;데이터베이스 이름과 .deploy 매니페스트 파일을 함께 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-138">It uses the VSDBCMD.exe utility to deploy each database project in the solution, using various properties from the project files&#x2014;a target connection string and a database name&#x2014;together with the .deploymanifest file.</span></span>
4. <span data-ttu-id="f2b8f-139">이 클래스는 Msdeploy.exe 유틸리티를 사용 하 여 솔루션의 각 웹 프로젝트를 배포 하 고 프로젝트 파일의 다양 한 속성을 사용 하 여 배포 프로세스를 제어 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-139">It uses the MSDeploy.exe utility to deploy each web project in the solution, using various properties from the project files to control the deployment process.</span></span>

<span data-ttu-id="f2b8f-140">샘플 솔루션을 사용 하 여이 프로세스를 보다 자세히 추적할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-140">You can use the sample solution to trace this process in more detail.</span></span>

> [!NOTE]
> <span data-ttu-id="f2b8f-141">사용자의 서버 환경에 맞는 환경 관련 프로젝트 파일을 사용자 지정 하는 방법에 대 한 지침은 [대상 환경에 대 한 배포 속성 구성](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-141">For guidance on how to customize the environment-specific project files for your own server environments, see [Configure Deployment Properties for a Target Environment](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span></span>

## <a name="invoking-the-build-and-deployment-process"></a><span data-ttu-id="f2b8f-142">빌드 및 배포 프로세스 호출</span><span class="sxs-lookup"><span data-stu-id="f2b8f-142">Invoking the Build and Deployment Process</span></span>

<span data-ttu-id="f2b8f-143">개발자 테스트 환경에 Contact Manager 솔루션을 배포 하려면 개발자가 *Publish-Dev* 명령 파일을 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-143">To deploy the Contact Manager solution to a developer test environment, the developer runs the *Publish-Dev.cmd* command file.</span></span> <span data-ttu-id="f2b8f-144">이렇게 하면 Msbuild.exe를 호출 하 고, 실행할 프로젝트 파일로 *proj* 를 지정 하 고,를 매개 변수 값으로 *Env* 를 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-144">This invokes MSBuild.exe, specifying *Publish.proj* as the project file to execute and *Env-Dev.proj* as a parameter value.</span></span>

[!code-console[Main](understanding-the-build-process/samples/sample1.cmd)]

> [!NOTE]
> <span data-ttu-id="f2b8f-145">**/Sfl** 스위치 (short **/file로거에서**short)는 현재 디렉터리에 있는 *msbuild .log* 파일에 빌드 출력을 기록 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-145">The **/fl** switch (short for **/fileLogger**) logs the build output to a file named *msbuild.log* in the current directory.</span></span> <span data-ttu-id="f2b8f-146">자세한 내용은 [MSBuild 명령줄 참조](https://msdn.microsoft.com/library/ms164311.aspx)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-146">For more information, see the [MSBuild Command Line Reference](https://msdn.microsoft.com/library/ms164311.aspx).</span></span>

<span data-ttu-id="f2b8f-147">이 시점에서 MSBuild는 실행을 시작 하 고, *Publish. proj* 파일을 로드 하 고, 그 안에 있는 명령 처리를 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-147">At this point, MSBuild starts running, loads the *Publish.proj* file, and starts processing the instructions within it.</span></span> <span data-ttu-id="f2b8f-148">첫 번째 명령은 **TargetEnvPropsFile** 매개 변수가 지정 하는 프로젝트 파일을 가져오도록 MSBuild에 지시 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-148">The first instruction tells MSBuild to import the project file that the **TargetEnvPropsFile** parameter specifies.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample2.xml)]

<span data-ttu-id="f2b8f-149">**TargetEnvPropsFile** 매개 변수는 *env-dev. proj* 파일을 지정 합니다. 따라서 MSBuild는 *Env* 파일의 콘텐츠를 *Publish.* proj 파일에 병합 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-149">The **TargetEnvPropsFile** parameter specifies the *Env-Dev.proj* file, so MSBuild merges the contents of the *Env-Dev.proj* file into the *Publish.proj* file.</span></span>

<span data-ttu-id="f2b8f-150">MSBuild가 병합 된 프로젝트 파일에서 발견 하는 다음 요소는 속성 그룹입니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-150">The next elements that MSBuild encounters in the merged project file are property groups.</span></span> <span data-ttu-id="f2b8f-151">속성은 파일에 표시 되는 순서 대로 처리 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-151">Properties are processed in the order in which they appear in the file.</span></span> <span data-ttu-id="f2b8f-152">MSBuild는 지정 된 조건을 충족 하는 각 속성에 대 한 키-값 쌍을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-152">MSBuild creates a key-value pair for each property, providing that any specified conditions are met.</span></span> <span data-ttu-id="f2b8f-153">파일에서 나중에 정의 된 속성은 파일에서 이전에 정의 된 동일한 이름의 속성을 덮어씁니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-153">Properties defined later in the file will overwrite any properties with the same name defined earlier in the file.</span></span> <span data-ttu-id="f2b8f-154">예를 들어 **Outputroot** 속성을 고려 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-154">For example, consider the **OutputRoot** properties.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample3.xml)]

<span data-ttu-id="f2b8f-155">MSBuild에서 첫 번째 **outputroot** 요소를 처리할 때 비슷한 이름의 매개 변수를 제공 하지 않으면 **outputroot** 속성의 값 \**을로 설정 합니다. \** . 두 번째 **outputroot** 요소가 발견 되 면 조건이 **true**로 평가 되 면 **Outputroot** 속성의 값을 **OutDir** 매개 변수 값으로 덮어씁니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-155">When MSBuild processes the first **OutputRoot** element, providing a similarly named parameter has not been provided, it sets the value of the **OutputRoot** property to **..\Publish\Out**. When it encounters the second **OutputRoot** element, if the condition evaluates to **true**, it will overwrite the value of the **OutputRoot** property with the value of the **OutDir** parameter.</span></span>

<span data-ttu-id="f2b8f-156">MSBuild에서 발견 하는 다음 요소는 단일 항목 그룹 이며 **ProjectsToBuild**이라는 항목이 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-156">The next element that MSBuild encounters is a single item group, containing an item named **ProjectsToBuild**.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample4.xml)]

<span data-ttu-id="f2b8f-157">MSBuild는 이름이 **ProjectsToBuild**인 항목 목록을 빌드하여이 명령을 처리 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-157">MSBuild processes this instruction by building an item list named **ProjectsToBuild**.</span></span> <span data-ttu-id="f2b8f-158">이 경우 항목 목록에는 솔루션 파일의 경로와&#x2014;파일 이름을 포함 하는 단일 값이 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-158">In this case, the item list contains a single value&#x2014;the path and filename of the solution file.</span></span>

<span data-ttu-id="f2b8f-159">이 시점에서 나머지 요소는 대상입니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-159">At this point, the remaining elements are targets.</span></span> <span data-ttu-id="f2b8f-160">대상은 기본적으로 속성 및 항목과&#x2014;다르게 처리 되지만, 사용자가 명시적으로 지정 하거나 프로젝트 파일 내의 다른 구문에서 호출 하지 않는 한 대상은 처리 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-160">Targets are processed differently from properties and items&#x2014;essentially, targets are not processed unless they are either explicitly specified by the user or invoked by another construct within the project file.</span></span> <span data-ttu-id="f2b8f-161">열기 **프로젝트** 태그에 **defaulttargets** 특성이 포함 되어 있다는 것을 기억 하세요.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-161">Recall that the opening **Project** tag includes a **DefaultTargets** attribute.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample5.xml)]

<span data-ttu-id="f2b8f-162">이렇게 하면 Msbuild.exe가 호출 될 때 대상이 지정 되지 않은 경우 **Fullpublish** 대상을 호출 하도록 msbuild에 지시 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-162">This instructs MSBuild to invoke the **FullPublish** target, if targets are not specified when MSBuild.exe is invoked.</span></span> <span data-ttu-id="f2b8f-163">**Fullpublish** 대상에는 작업이 포함 되지 않습니다. 대신 종속성 목록을 지정 하기만 하면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-163">The **FullPublish** target doesn't contain any tasks; instead it simply specifies a list of dependencies.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample6.xml)]

<span data-ttu-id="f2b8f-164">이 종속성은 **Fullpublish** 대상을 실행 하기 위해 제공 된 순서 대로이 대상 목록을 호출 해야 함을 MSBuild에 지시 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-164">This dependency tells MSBuild that in order to execute the **FullPublish** target, it needs to invoke this list of targets in the order provided:</span></span>

1. <span data-ttu-id="f2b8f-165">**정리** 대상을 호출 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-165">It must invoke the **Clean** target.</span></span>
2. <span data-ttu-id="f2b8f-166">**Buildprojects** 대상을 호출 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-166">It must invoke the **BuildProjects** target.</span></span>
3. <span data-ttu-id="f2b8f-167">**GatherPackagesForPublishing** 대상을 호출 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-167">It must invoke the **GatherPackagesForPublishing** target.</span></span>
4. <span data-ttu-id="f2b8f-168">이는 파일을 대상으로 호출 **해야 합니다.**</span><span class="sxs-lookup"><span data-stu-id="f2b8f-168">It must invoke the **PublishDbPackages** target.</span></span>
5. <span data-ttu-id="f2b8f-169">이 클래스는 **웹 패키지** 대상을 호출 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-169">It must invoke the **PublishWebPackages** target.</span></span>

### <a name="the-clean-target"></a><span data-ttu-id="f2b8f-170">정리 대상</span><span class="sxs-lookup"><span data-stu-id="f2b8f-170">The Clean Target</span></span>

<span data-ttu-id="f2b8f-171">**Clean** 대상은 새로운 빌드에 대 한 준비로 출력 디렉터리와 모든 콘텐츠를 기본적으로 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-171">The **Clean** target basically deletes the output directory and all its contents, as preparation for a fresh build.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample7.xml)]

<span data-ttu-id="f2b8f-172">대상이 **ItemGroup** 요소를 포함 하 고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-172">Notice that the target includes an **ItemGroup** element.</span></span> <span data-ttu-id="f2b8f-173">**대상** 요소 내에서 속성 또는 항목을 정의 하는 경우 *동적* 속성 및 항목을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-173">When you define properties or items within a **Target** element, you're creating *dynamic* properties and items.</span></span> <span data-ttu-id="f2b8f-174">즉, 속성이 나 항목은 대상이 실행 될 때까지 처리 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-174">In other words, the properties or items aren't processed until the target is executed.</span></span> <span data-ttu-id="f2b8f-175">빌드 프로세스가 시작 될 때까지 출력 디렉터리가 존재 하지 않거나 파일을 포함 하지 않을 수 있으므로 **\_FilesToDelete** 목록을 정적 항목으로 빌드할 수 없습니다. 실행이 진행 될 때까지 기다려야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-175">The output directory might not exist or contain any files until the build process begins, so you can't build the **\_FilesToDelete** list as a static item; you have to wait until execution is underway.</span></span> <span data-ttu-id="f2b8f-176">따라서 목록을 대상 내의 동적 항목으로 빌드합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-176">As such, you build the list as a dynamic item within the target.</span></span>

> [!NOTE]
> <span data-ttu-id="f2b8f-177">이 경우 **정리** 대상이 가장 먼저 실행 되기 때문에 동적 항목 그룹을 사용할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-177">In this case, because the **Clean** target is the first to be executed, there's no real need to use a dynamic item group.</span></span> <span data-ttu-id="f2b8f-178">그러나 특정 시점에서 다른 순서로 대상을 실행할 수 있으므로 이러한 유형의 시나리오에서 동적 속성 및 항목을 사용 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-178">However, it's good practice to use dynamic properties and items in this type of scenario, as you might want to execute targets in a different order at some point.</span></span>  
> <span data-ttu-id="f2b8f-179">또한 사용 하지 않을 항목을 선언 하지 않아야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-179">You should also aim to avoid declaring items that will never be used.</span></span> <span data-ttu-id="f2b8f-180">특정 대상에만 사용 되는 항목이 있는 경우 대상에 배치 하 여 빌드 프로세스에서 불필요 한 오버 헤드를 제거 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-180">If you have items that will only be used by a specific target, consider placing them inside the target to remove any unnecessary overhead on the build process.</span></span>

<span data-ttu-id="f2b8f-181">동적 항목을 제거 하 고, **정리** 대상은 매우 간단 하며, 기본 제공 **Message**, **Delete**및 **RemoveDir** 작업을 다음과 같이 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-181">Dynamic items aside, the **Clean** target is fairly straightforward and makes use of the built-in **Message**, **Delete**, and **RemoveDir** tasks to:</span></span>

1. <span data-ttu-id="f2b8f-182">로 거로 메시지를 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-182">Send a message to the logger.</span></span>
2. <span data-ttu-id="f2b8f-183">삭제할 파일 목록을 작성 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-183">Build a list of files to delete.</span></span>
3. <span data-ttu-id="f2b8f-184">파일을 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-184">Delete the files.</span></span>
4. <span data-ttu-id="f2b8f-185">출력 디렉터리를 제거 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-185">Remove the output directory.</span></span>

### <a name="the-buildprojects-target"></a><span data-ttu-id="f2b8f-186">BuildProjects 대상</span><span class="sxs-lookup"><span data-stu-id="f2b8f-186">The BuildProjects Target</span></span>

<span data-ttu-id="f2b8f-187">**Buildprojects** 대상은 기본적으로 샘플 솔루션의 모든 프로젝트를 빌드합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-187">The **BuildProjects** target basically builds all the projects in the sample solution.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample8.xml)]

<span data-ttu-id="f2b8f-188">이 대상은 이전 항목인 [프로젝트 파일 이해](understanding-the-project-file.md)에서 작업 및 대상이 속성 및 항목을 참조 하는 방법을 설명 하는 세부 정보에 설명 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-188">This target was described in some detail in the previous topic, [Understanding the Project File](understanding-the-project-file.md), to illustrate how tasks and targets reference properties and items.</span></span> <span data-ttu-id="f2b8f-189">이 시점에서 주로 **MSBuild** 작업에 관심이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-189">At this point, you're mainly interested in the **MSBuild** task.</span></span> <span data-ttu-id="f2b8f-190">이 작업을 사용 하 여 여러 프로젝트를 빌드할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-190">You can use this task to build multiple projects.</span></span> <span data-ttu-id="f2b8f-191">태스크가 Msbuild.exe의 새 인스턴스를 만들지 않습니다. 현재 실행 중인 인스턴스를 사용 하 여 각 프로젝트를 빌드합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-191">The task does not create a new instance of MSBuild.exe; it uses the current running instance to build each project.</span></span> <span data-ttu-id="f2b8f-192">이 예제에서 중요 한 점은 배포 속성입니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-192">The key points of interest in this example are the deployment properties:</span></span>

- <span data-ttu-id="f2b8f-193">**Deployonbuild** 속성은 각 프로젝트의 빌드가 완료 되 면 프로젝트 설정에서 배포 명령을 실행 하도록 MSBuild에 지시 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-193">The **DeployOnBuild** property instructs MSBuild to run any deployment instructions in the project settings when the build of each project is complete.</span></span>
- <span data-ttu-id="f2b8f-194">**Deploytarget** 속성은 프로젝트가 빌드된 후에 호출 하려는 대상을 식별 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-194">The **DeployTarget** property identifies the target that you want to invoke after the project is built.</span></span> <span data-ttu-id="f2b8f-195">이 경우 **패키지** 대상은 배포 가능한 웹 패키지에 프로젝트 출력을 빌드합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-195">In this case, the **Package** target builds the project output into a deployable web package.</span></span>

> [!NOTE]
> <span data-ttu-id="f2b8f-196">**패키지** 대상은 웹 게시 파이프라인 (WPP)을 호출 합니다 .이를 통해 MSBuild와 웹 배포 간의 통합을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-196">The **Package** target invokes the Web Publishing Pipeline (WPP), which provides integration between MSBuild and Web Deploy.</span></span> <span data-ttu-id="f2b8f-197">WPP에서 제공 하는 기본 제공 대상을 살펴보려면% PROGRAMFILES (x86)% \ MSBuild\Microsoft\VisualStudio\v10.0\Web 폴더에 있는 *Microsoft* .targets 파일을 검토 하십시오.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-197">If you want to take a look at the built-in targets that the WPP provides, review the *Microsoft.Web.Publishing.targets* file in the %PROGRAMFILES(x86)%\MSBuild\Microsoft\VisualStudio\v10.0\Web folder.</span></span>

### <a name="the-gatherpackagesforpublishing-target"></a><span data-ttu-id="f2b8f-198">GatherPackagesForPublishing 대상</span><span class="sxs-lookup"><span data-stu-id="f2b8f-198">The GatherPackagesForPublishing Target</span></span>

<span data-ttu-id="f2b8f-199">**GatherPackagesForPublishing** 대상을 연구 하면 실제로 어떤 작업도 포함 되지 않는다는 것을 알 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-199">If you study the **GatherPackagesForPublishing** target, you'll notice that it doesn't actually contain any tasks.</span></span> <span data-ttu-id="f2b8f-200">대신 세 개의 동적 항목을 정의 하는 단일 항목 그룹을 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-200">Instead, it contains a single item group that defines three dynamic items.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample9.xml)]

<span data-ttu-id="f2b8f-201">이러한 항목은 **Buildprojects** 대상이 실행 될 때 생성 된 배포 패키지를 참조 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-201">These items refer to the deployment packages that were created when the **BuildProjects** target was executed.</span></span> <span data-ttu-id="f2b8f-202">항목이 참조 하는 파일이 **Buildprojects** 대상이 실행 될 때까지 존재 하지 않기 때문에 프로젝트 파일에서 이러한 항목을 정적으로 정의할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-202">You couldn't define these items statically in the project file, because the files to which the items refer don't exist until the **BuildProjects** target is executed.</span></span> <span data-ttu-id="f2b8f-203">대신 **Buildprojects** 대상이 실행 될 때까지 호출 되지 않는 대상 내에서 항목을 동적으로 정의 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-203">Instead, the items must be defined dynamically within a target that is not invoked until after the **BuildProjects** target is executed.</span></span>

<span data-ttu-id="f2b8f-204">항목이이 대상&#x2014;내에서 사용 되지 않습니다 .이 대상은 각 항목 값과 연결 된 항목 및 메타 데이터를 간단 하 게 빌드합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-204">The items are not used within this target&#x2014;this target simply builds the items and the metadata associated with each item value.</span></span> <span data-ttu-id="f2b8f-205">이러한 요소를 처리 한 후에는 지 수 **패키지** 항목에 두 개의 값, 즉 *valmanager* . c a c. p a c. .cmd 파일의 경로 *와 파일에* 대 한 경로가 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-205">Once these elements are processed, the **PublishPackages** item will contain two values, the path to the *ContactManager.Mvc.deploy.cmd* file and the path to the *ContactManager.Service.deploy.cmd* file.</span></span> <span data-ttu-id="f2b8f-206">웹 배포는 각 프로젝트에 대 한 웹 패키지의 일부로 이러한 파일을 만들며, 패키지를 배포 하기 위해 대상 서버에서 호출 해야 하는 파일입니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-206">Web Deploy creates these files as part of the web package for each project, and these are the files that you must invoke on the destination server in order to deploy the packages.</span></span> <span data-ttu-id="f2b8f-207">이러한 파일 중 하나를 여는 경우에는 기본적으로 다양 한 빌드 관련 매개 변수 값을 사용 하는 Msdeploy.exe 명령이 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-207">If you open up one of these files, you'll basically see an MSDeploy.exe command with various build-specific parameter values.</span></span>

<span data-ttu-id="f2b8f-208">**Dbpublishpackages** 항목에는 단일 값, 즉 *연락처 관리자. 데이터베이스. deploymanifest* 파일의 경로가 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-208">The **DbPublishPackages** item will contain a single value, the path to the *ContactManager.Database.deploymanifest* file.</span></span>

> [!NOTE]
> <span data-ttu-id="f2b8f-209">데이터베이스 프로젝트를 빌드할 때 deploymanifest 파일이 생성 되 고 MSBuild 프로젝트 파일과 동일한 스키마를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-209">A .deploymanifest file is generated when you build a database project, and it uses the same schema as an MSBuild project file.</span></span> <span data-ttu-id="f2b8f-210">데이터베이스 스키마 (.dbschema)의 위치와 배포 전 및 배포 후 스크립트의 세부 정보를 포함 하 여 데이터베이스를 배포 하는 데 필요한 모든 정보를 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-210">It contains all the information required to deploy a database, including the location of the database schema (.dbschema) and details of any pre-deployment and post-deployment scripts.</span></span> <span data-ttu-id="f2b8f-211">자세한 내용은 [데이터베이스 빌드 및 배포 개요](https://msdn.microsoft.com/library/aa833165.aspx)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-211">For more information, see [An Overview of Database Build and Deployment](https://msdn.microsoft.com/library/aa833165.aspx).</span></span>

<span data-ttu-id="f2b8f-212">배포 패키지 및 데이터베이스 배포 매니페스트를 만들고 사용 하 여 [웹 응용 프로그램 프로젝트를 빌드하고 패키지](building-and-packaging-web-application-projects.md) 하 고 [데이터베이스 프로젝트를 배포](deploying-database-projects.md)하는 방법에 대해 자세히 알아봅니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-212">You'll learn more about how deployment packages and database deployment manifests are created and used in [Building and Packaging Web Application Projects](building-and-packaging-web-application-projects.md) and [Deploying Database Projects](deploying-database-projects.md).</span></span>

### <a name="the-publishdbpackages-target"></a><span data-ttu-id="f2b8f-213">패키지 대상</span><span class="sxs-lookup"><span data-stu-id="f2b8f-213">The PublishDbPackages Target</span></span>

<span data-ttu-id="f2b8f-214">잠시 후에는 대상 환경에 배포 **하는 대상** 환경에 배포 하는 VSDBCMD **DB패키지** 대상이 VSDBCMD 유틸리티를 호출 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-214">Briefly speaking, the **PublishDbPackages** target invokes the VSDBCMD utility to deploy the **ContactManager** database to a target environment.</span></span> <span data-ttu-id="f2b8f-215">데이터베이스 배포를 구성 하려면 많은 의사 결정 및 미묘한 차이이 필요 하며, [데이터베이스 프로젝트 배포](deploying-database-projects.md) 및 [여러 환경에 대 한 데이터베이스 배포 사용자 지정](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md)에서이에 대해 자세히 알아보세요.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-215">Configuring database deployment involves lots of decisions and nuances, and you'll learn more about this in [Deploying Database Projects](deploying-database-projects.md) and [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span> <span data-ttu-id="f2b8f-216">이 항목에서는이 대상이 실제로 작동 하는 방식에 대해 집중적으로 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-216">In this topic, we'll focus on how this target actually functions.</span></span>

<span data-ttu-id="f2b8f-217">먼저, 여는 태그에 **Outputs** 특성이 포함 되어 있는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-217">First, notice that the opening tag includes an **Outputs** attribute.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample10.xml)]

<span data-ttu-id="f2b8f-218">*대상 일괄 처리*의 예입니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-218">This is an example of *target batching*.</span></span> <span data-ttu-id="f2b8f-219">MSBuild 프로젝트 파일에서 일괄 처리는 컬렉션을 반복 하는 기술입니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-219">In MSBuild project files, batching is a technique for iterating over collections.</span></span> <span data-ttu-id="f2b8f-220">**Outputs** 특성의 값 "% (Db\\\doud\\\\\\\\\doudid **)"** 는 **Dbpublishpackages** 항목 목록의 **Identity** metadata 속성을 참조 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-220">The value of the **Outputs** attribute, **"%(DbPublishPackages.Identity)"**, refers to the **Identity** metadata property of the **DbPublishPackages** item list.</span></span> <span data-ttu-id="f2b8f-221">\**Outputs =% \* \* \* (Itemlist)* 표기법은 다음과 같이 변환 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-221">This notation, \**Outputs=%\*\*\*(ItemList.ItemMetadataName)*, is translated as:</span></span>

- <span data-ttu-id="f2b8f-222">**Dbpublishpackages** 의 항목을 동일한 **id** 메타 데이터 값을 포함 하는 항목의 일괄 처리로 분할 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-222">Split the items in **DbPublishPackages** into batches of items that contain the same **Identity** metadata value.</span></span>
- <span data-ttu-id="f2b8f-223">일괄 처리당 대상을 한 번 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-223">Execute the target once per batch.</span></span>

> [!NOTE]
> <span data-ttu-id="f2b8f-224">**Id** 는 만들 때 모든 항목에 할당 되는 [기본 제공 메타 데이터 값](https://msdn.microsoft.com/library/ms164313.aspx) 중 하나입니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-224">**Identity** is one of the [built-in metadata values](https://msdn.microsoft.com/library/ms164313.aspx) that is assigned to every item on creation.</span></span> <span data-ttu-id="f2b8f-225">**항목 요소의** &#x2014; **Include** 특성 값, 즉 항목의 경로와 파일 이름을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-225">It refers to the value of the **Include** attribute in the **Item** element&#x2014;in other words, the path and filename of the item.</span></span>

<span data-ttu-id="f2b8f-226">이 경우 경로와 파일 이름이 같은 항목이 두 개 이상 이어야 하기 때문에 기본적으로 일괄 처리 크기를 사용 하 게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-226">In this case, because there should never be more than one item with the same path and filename, we're essentially working with batch sizes of one.</span></span> <span data-ttu-id="f2b8f-227">대상은 모든 데이터베이스 패키지에 대해 한 번 실행 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-227">The target is executed once for every database package.</span></span>

<span data-ttu-id="f2b8f-228">**\_Cmd** 속성에서 비슷한 표기법을 확인할 수 있습니다 .이 속성은 적절 한 스위치를 사용 하 여 VSDBCMD 명령을 작성 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-228">You can see a similar notation in the **\_Cmd** property, which builds a VSDBCMD command with the appropriate switches.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample11.xml)]

<span data-ttu-id="f2b8f-229">이 경우 **% (DbDatabaseConnectionString)** , **% (dbFullPath**) 및 **% (Db)** 는 모두 **dbpublishpackages** 항목 컬렉션의 메타 데이터 값을 참조 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-229">In this case, **%(DbPublishPackages.DatabaseConnectionString)**, **%(DbPublishPackages.TargetDatabase)**, and **%(DbPublishPackages.FullPath)** all refer to metadata values of the **DbPublishPackages** item collection.</span></span> <span data-ttu-id="f2b8f-230">**\_Cmd** 속성은 명령을 호출 하는 **Exec** 작업에서 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-230">The **\_Cmd** property is used by the **Exec** task, which invokes the command.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample12.xml)]

<span data-ttu-id="f2b8f-231">이 표기법의 결과로 **Exec** 작업은 **DatabaseConnectionString**, **targetdatabase**및 **FullPath** 메타 데이터 값의 고유한 조합을 기반으로 일괄 처리를 만들며 각 일괄 처리에 대해 작업이 한 번씩 실행 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-231">As a result of this notation, the **Exec** task will create batches based on unique combinations of the **DatabaseConnectionString**, **TargetDatabase**, and **FullPath** metadata values, and the task will execute once for each batch.</span></span> <span data-ttu-id="f2b8f-232">*작업 일괄 처리*의 예입니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-232">This is an example of *task batching*.</span></span> <span data-ttu-id="f2b8f-233">그러나 대상 수준 일괄 처리가 항목 컬렉션을 단일 항목 일괄 처리로 이미 분할 했으므로 **Exec** 태스크는 대상의 각 반복에 대해 한 번만 실행 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-233">However, because the target-level batching has already divided our item collection into single-item batches, the **Exec** task will run once and only once for each iteration of the target.</span></span> <span data-ttu-id="f2b8f-234">즉,이 작업은 솔루션의 각 데이터베이스 패키지에 대해 VSDBCMD 유틸리티를 한 번씩 호출 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-234">In other words, this task invokes the VSDBCMD utility once for each database package in the solution.</span></span>

> [!NOTE]
> <span data-ttu-id="f2b8f-235">대상 및 작업 일괄 처리에 대 한 자세한 내용은 MSBuild [일괄 처리](https://msdn.microsoft.com/library/ms171473.aspx), [대상 일괄 처리의 항목 메타 데이터](https://msdn.microsoft.com/library/ms228229.aspx)및 [작업 일괄 처리의 항목 메타 데이터](https://msdn.microsoft.com/library/ms171474.aspx)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-235">For more information on target and task batching, see MSBuild [Batching](https://msdn.microsoft.com/library/ms171473.aspx), [Item Metadata in Target Batching](https://msdn.microsoft.com/library/ms228229.aspx), and [Item Metadata in Task Batching](https://msdn.microsoft.com/library/ms171474.aspx).</span></span>

### <a name="the-publishwebpackages-target"></a><span data-ttu-id="f2b8f-236">대상 웹 패키지 대상</span><span class="sxs-lookup"><span data-stu-id="f2b8f-236">The PublishWebPackages Target</span></span>

<span data-ttu-id="f2b8f-237">이 시점에서는 샘플 솔루션의 각 프로젝트에 대해 웹 배포 패키지를 생성 하는 **Buildprojects** 대상을 호출 했습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-237">By this point, you've invoked the **BuildProjects** target, which generates a web deployment package for each project in the sample solution.</span></span> <span data-ttu-id="f2b8f-238">각 패키지는 패키지를 대상 환경에 배포 하는 데 필요한 Msdeploy.exe 명령이 포함 된 *배포 .cmd* 파일이 며, 대상 환경에 필요한 세부 정보를 지정 하는 *setparameters .xml* 파일이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-238">Accompanying each package is a *deploy.cmd* file, which contains the MSDeploy.exe commands required to deploy the package to the target environment, and a *SetParameters.xml* file, which specifies the necessary details of the target environment.</span></span> <span data-ttu-id="f2b8f-239">또한 관심 있는 *배포 .cmd* 파일이 포함 된 항목 컬렉션을 생성 하는 **GatherPackagesForPublishing** 대상을 호출 했습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-239">You've also invoked the **GatherPackagesForPublishing** target, which generates an item collection containing the *deploy.cmd* files you're interested in.</span></span> <span data-ttu-id="f2b8f-240">기본적으로, 대상 **웹 패키지** 대상은 다음 함수를 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-240">Essentially, the **PublishWebPackages** target performs these functions:</span></span>

- <span data-ttu-id="f2b8f-241">**XmlPoke** 작업을 사용 하 여 대상 환경에 대 한 올바른 세부 정보를 포함 하도록 각 패키지에 대 한 *setparameters .xml* 파일을 조작 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-241">It manipulates the *SetParameters.xml* file for each package to include the correct details for the target environment, using the **XmlPoke** task.</span></span>
- <span data-ttu-id="f2b8f-242">적절 한 스위치를 사용 하 여 각 패키지에 대 한 *배포 .cmd* 파일을 호출 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-242">It invokes the *deploy.cmd* file for each package, using the appropriate switches.</span></span>

<span data-ttu-id="f2b8f-243">지 수 **dbpackage** 대상과 마찬가지로, 대상 일괄 **처리 대상은 대상** 일괄 처리를 사용 하 여 각 웹 패키지에 대해 한 번씩 대상이 실행 되도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-243">Just like the **PublishDbPackages** target, the **PublishWebPackages** target uses target batching to ensure that the target is executed once for each web package.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample13.xml)]

<span data-ttu-id="f2b8f-244">대상 내에서 **Exec** 작업은 각 웹 패키지에 대 한 *배포 .cmd* 파일을 실행 하는 데 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-244">Within the target, the **Exec** task is used to run the *deploy.cmd* file for each web package.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample14.xml)]

<span data-ttu-id="f2b8f-245">웹 패키지 배포를 구성 하는 방법에 대 한 자세한 내용은 [웹 응용 프로그램 프로젝트 빌드 및 패키징](building-and-packaging-web-application-projects.md)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-245">For more information on configuring the deployment of web packages, see [Building and Packaging Web Application Projects](building-and-packaging-web-application-projects.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="f2b8f-246">결론</span><span class="sxs-lookup"><span data-stu-id="f2b8f-246">Conclusion</span></span>

<span data-ttu-id="f2b8f-247">이 항목에서는 연락처 관리자 샘플 솔루션에 대 한 시작부터 끝까지 프로젝트 파일 분할을 사용 하 여 빌드 및 배포 프로세스를 제어 하는 방법에 대 한 연습을 제공 했습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-247">This topic provided a walkthrough of how split project files are used to control the build and deployment process from start to finish for the Contact Manager sample solution.</span></span> <span data-ttu-id="f2b8f-248">이 방법을 사용 하면 특정 환경 전용 명령 파일을 실행 하 여 반복 가능한 단일 단계로 복잡 한 엔터프라이즈급 배포를 실행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-248">Using this approach lets you run complex, enterprise-scale deployments in a single, repeatable step, simply by running an environment-specific command file.</span></span>

## <a name="further-reading"></a><span data-ttu-id="f2b8f-249">추가 참고 자료</span><span class="sxs-lookup"><span data-stu-id="f2b8f-249">Further Reading</span></span>

<span data-ttu-id="f2b8f-250">프로젝트 파일 및 WPP에 대 한 자세한 소개는 Microsoft Build Engine 내부: Sayed Ibrahim Hashimi에서 [MSBuild 및 Team Foundation Build 사용](http://amzn.com/0735645248) 및 WILLIAM, ISBN: 978-0-7356-4524-0을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="f2b8f-250">For a more in-depth introduction to project files and the WPP, see [Inside the Microsoft Build Engine: Using MSBuild and Team Foundation Build](http://amzn.com/0735645248) by Sayed Ibrahim Hashimi and William Bartholomew, ISBN: 978-0-7356-4524-0.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="f2b8f-251">[이전](understanding-the-project-file.md)
> [다음](building-and-packaging-web-application-projects.md)</span><span class="sxs-lookup"><span data-stu-id="f2b8f-251">[Previous](understanding-the-project-file.md)
[Next](building-and-packaging-web-application-projects.md)</span></span>
