---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments
title: 여러 환경에 대 한 데이터베이스 배포 사용자 지정 | Microsoft Docs
author: jrjlee
description: 이 항목에서는 배포 프로세스의 일부로 데이터베이스의 속성을 특정 대상 환경에 맞게 조정 하는 방법에 대해 설명 합니다. 참고:이 항목은 ...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: a172979a-1318-4318-a9c6-4f9560d26267
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments
msc.type: authoredcontent
ms.openlocfilehash: 8ae8cb1a322afb95c5d2e8d5e73c7825c7b2fe5a
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78489035"
---
# <a name="customizing-database-deployments-for-multiple-environments"></a><span data-ttu-id="5ac72-104">다중 환경을 위한 데이터베이스 배포 사용자 지정</span><span class="sxs-lookup"><span data-stu-id="5ac72-104">Customizing Database Deployments for Multiple Environments</span></span>

<span data-ttu-id="5ac72-105">[Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="5ac72-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="5ac72-106">PDF 다운로드</span><span class="sxs-lookup"><span data-stu-id="5ac72-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="5ac72-107">이 항목에서는 배포 프로세스의 일부로 데이터베이스의 속성을 특정 대상 환경에 맞게 조정 하는 방법에 대해 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-107">This topic describes how to tailor the properties of a database to specific target environments as part of the deployment process.</span></span>
> 
> > [!NOTE]
> > <span data-ttu-id="5ac72-108">이 항목에서는 Msbuild.exe 및 nuget.exe를 사용 하 여 Visual Studio 2010 데이터베이스 프로젝트를 배포 한다고 가정 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-108">The topic assumes that you're deploying a Visual Studio 2010 database project using MSBuild.exe and VSDBCMD.exe.</span></span> <span data-ttu-id="5ac72-109">이 방법을 선택할 수 있는 이유에 대 한 자세한 내용은 [엔터프라이즈의 웹 배포](../web-deployment-in-the-enterprise/web-deployment-in-the-enterprise.md) 및 [데이터베이스 프로젝트 배포](../web-deployment-in-the-enterprise/deploying-database-projects.md)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="5ac72-109">For more information on why you might choose this approach, see [Web Deployment in the Enterprise](../web-deployment-in-the-enterprise/web-deployment-in-the-enterprise.md) and [Deploying Database Projects](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span></span>
> 
> 
> <span data-ttu-id="5ac72-110">데이터베이스 프로젝트를 여러 대상에 배포 하는 경우 각 대상 환경에 대 한 데이터베이스 배포 속성을 사용자 지정 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-110">When you deploy a database project to multiple destinations, you'll often want to customize the database deployment properties for each target environment.</span></span> <span data-ttu-id="5ac72-111">예를 들어 테스트 환경에서는 일반적으로 모든 배포에서 데이터베이스를 다시 만드는 반면 스테이징 또는 프로덕션 환경에서는 데이터를 보존 하기 위해 증분 업데이트를 수행 하는 것이 훨씬 더 많을 것입니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-111">For example, in test environments you'd typically recreate the database on every deployment, whereas in staging or production environments you'd be a lot more likely to make incremental updates to preserve your data.</span></span>
> 
> <span data-ttu-id="5ac72-112">Visual Studio 2010 데이터베이스 프로젝트에서 배포 설정은 배포 구성 파일 (. sqldeployment)에 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-112">In a Visual Studio 2010 database project, deployment settings are contained within a deployment configuration (.sqldeployment) file.</span></span> <span data-ttu-id="5ac72-113">이 항목에서는 환경 특정 배포 구성 파일을 만들고 VSDBCMD 매개 변수로 사용할 파일을 지정 하는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-113">This topic will show you how to create environment-specific deployment configuration files and specify the one you want to use as a VSDBCMD parameter.</span></span>

<span data-ttu-id="5ac72-114">이 항목에서는 Fabrikam, i n c. 라는 가상 회사의 엔터프라이즈 배포 요구 사항을 기반으로 하는 일련의 자습서의 일부를 형성 합니다. 이 자습서 시리즈에서는 샘플 솔루션&#x2014;&#x2014;을 사용 [하 여](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)ASP.NET MVC 3 응용 프로그램, Windows Communication Foundation (WCF) 서비스 및 데이터베이스 프로젝트를 비롯 한 현실적인 복잡성의 웹 응용 프로그램을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-114">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="5ac72-115">이러한 자습서의 핵심에 나오는 배포 방법은 [프로젝트 파일 이해](../web-deployment-in-the-enterprise/understanding-the-project-file.md)에 설명 된 프로젝트 파일을 이해 하는 방법에 설명 되어 있습니다 .이는 빌드 프로세스가 모든 대상 환경에 적용&#x2014;되는 빌드 명령을 포함 하는 두 개의 프로젝트 파일과 환경 특정 빌드 및 배포 설정을 포함 하는 프로젝트 파일에 의해 제어 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-115">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="5ac72-116">빌드 시 환경 관련 프로젝트 파일은 환경에 관계 없는 프로젝트 파일에 병합 되어 전체 빌드 명령 집합을 형성 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-116">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="task-overview"></a><span data-ttu-id="5ac72-117">작업 개요</span><span class="sxs-lookup"><span data-stu-id="5ac72-117">Task Overview</span></span>

<span data-ttu-id="5ac72-118">이 항목에서는 다음과 같이 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-118">This topic assumes that:</span></span>

- <span data-ttu-id="5ac72-119">[프로젝트 파일 이해](../web-deployment-in-the-enterprise/understanding-the-project-file.md)에 설명 된 대로 프로젝트 파일 분할 방식을 솔루션 배포에 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-119">You use the split project file approach to solution deployment, as described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span>
- <span data-ttu-id="5ac72-120">[빌드 프로세스 이해](../web-deployment-in-the-enterprise/understanding-the-build-process.md)의 설명에 따라 프로젝트 파일에서 VSDBCMD를 호출 하 여 데이터베이스 프로젝트를 배포 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-120">You call VSDBCMD from the project file to deploy your database project, as described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>

<span data-ttu-id="5ac72-121">대상 환경 간의 다양 한 데이터베이스 배포 속성을 지 원하는 배포 시스템을 만들려면 다음을 수행 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-121">To create a deployment system that supports varying the database deployment properties between target environments, you'll need to:</span></span>

- <span data-ttu-id="5ac72-122">각 대상 환경에 대 한 배포 구성 (. sqldeployment) 파일을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-122">Create a deployment configuration (.sqldeployment) file for each target environment.</span></span>
- <span data-ttu-id="5ac72-123">명령줄 스위치로 배포 구성 파일을 지정 하는 VSDBCMD 명령을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-123">Create a VSDBCMD command that specifies the deployment configuration file as a command-line switch.</span></span>
- <span data-ttu-id="5ac72-124">VSDBCMD 옵션이 대상 환경에 적합 하도록 Microsoft Build Engine (MSBuild) 프로젝트 파일에서 VSDBCMD 명령을 매개 변수화 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-124">Parameterize the VSDBCMD command in a Microsoft Build Engine (MSBuild) project file, so that the VSDBCMD options are appropriate to the target environment.</span></span>

<span data-ttu-id="5ac72-125">이 항목에서는 이러한 각 절차를 수행 하는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-125">This topic will show you how to perform each of these procedures.</span></span>

## <a name="creating-environment-specific-deployment-configuration-files"></a><span data-ttu-id="5ac72-126">환경 특정 배포 구성 파일 만들기</span><span class="sxs-lookup"><span data-stu-id="5ac72-126">Creating Environment-Specific Deployment Configuration Files</span></span>

<span data-ttu-id="5ac72-127">기본적으로 데이터베이스 프로젝트에는 *sqldeployment*라는 단일 배포 구성 파일이 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-127">By default, a database project contains a single deployment configuration file named *Database.sqldeployment*.</span></span> <span data-ttu-id="5ac72-128">Visual Studio 2010에서이 파일을 열면 사용할 수 있는 다양 한 배포 옵션을 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-128">If you open this file in Visual Studio 2010, you can see the different deployment options that are available to you:</span></span>

- <span data-ttu-id="5ac72-129">**배포 비교 데이터 정렬**입니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-129">**Deployment comparison collation**.</span></span> <span data-ttu-id="5ac72-130">이를 통해 프로젝트의 데이터베이스 데이터 정렬 ( *원본* 데이터 정렬) 또는 대상 서버의 데이터베이스 데이터 정렬 ( *대상* 데이터 정렬) 중 어떤 것을 사용할지 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-130">This lets you choose whether to use the database collation of your project (the *source* collation) or the database collation of your destination server (the *target* collation).</span></span> <span data-ttu-id="5ac72-131">대부분의 경우 개발 또는 테스트 환경에 배포 하는 경우 원본 데이터 정렬을 사용 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-131">In most cases, you'll want to use the source collation when you deploy to a development or test environment.</span></span> <span data-ttu-id="5ac72-132">스테이징 또는 프로덕션 환경에 배포 하는 경우에는 일반적으로 상호 운용성 문제를 방지 하기 위해 대상 데이터 정렬을 변경 하지 않는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-132">When you deploy to a staging or production environment, you'll usually want to leave the target collation unchanged to avoid any interoperability issues.</span></span>
- <span data-ttu-id="5ac72-133">**데이터베이스 속성을 배포**합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-133">**Deploy database properties**.</span></span> <span data-ttu-id="5ac72-134">이를 통해 데이터베이스 속성을 적용할지 여부를 선택할 수 있습니다. *sqlsettings* 파일에 정의 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-134">This lets you choose whether to apply the database properties, as defined in the *Database.sqlsettings* file.</span></span> <span data-ttu-id="5ac72-135">처음으로 데이터베이스를 배포 하는 경우 데이터베이스 속성을 배포 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-135">When you deploy a database for the first time, you should deploy the database properties.</span></span> <span data-ttu-id="5ac72-136">기존 데이터베이스를 업데이트 하는 경우 속성이 이미 준비 되어 있어야 하 고, 다시 배포할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-136">If you're updating an existing database, the properties should already be in place, and you shouldn't need to deploy them again.</span></span>
- <span data-ttu-id="5ac72-137">**항상 데이터베이스를 다시 만듭니다**.</span><span class="sxs-lookup"><span data-stu-id="5ac72-137">**Always re-create database**.</span></span> <span data-ttu-id="5ac72-138">이렇게 하면 스키마를 사용 하 여 대상 데이터베이스를 최신 상태로 만들기 위해 배포 하거나 증분 변경 작업을 수행할 때마다 대상 데이터베이스를 다시 만들지 여부를 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-138">This lets you choose whether to re-create the target database every time you deploy or make incremental changes to bring the target database up to date with your schema.</span></span> <span data-ttu-id="5ac72-139">데이터베이스를 다시 만들면 기존 데이터베이스의 모든 데이터가 손실 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-139">If you re-create the database, you'll lose any data in the existing database.</span></span> <span data-ttu-id="5ac72-140">따라서 스테이징 또는 프로덕션 환경에 대 한 배포의 경우 일반적으로 **false** 로 설정 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-140">As such, you should usually set this to **false** for deployments to staging or production environments.</span></span>
- <span data-ttu-id="5ac72-141">**데이터 손실이 발생할 수 있는 경우 증분 배포를 차단**합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-141">**Block incremental deployment if data loss might occur**.</span></span> <span data-ttu-id="5ac72-142">이를 통해 데이터베이스 스키마를 변경 하면 데이터가 손실 될 경우 배포를 중지할지 여부를 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-142">This lets you choose whether deployment should stop if a change to the database schema will cause the loss of data.</span></span> <span data-ttu-id="5ac72-143">일반적으로 프로덕션 환경에 배포 하는 경우이를 **true** 로 설정 하 여 중요 한 데이터를 개입 하 고 보호할 수 있는 기회를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-143">You typically set this to **true** for a deployment to a production environment, to give you the opportunity to intervene and protect any important data.</span></span> <span data-ttu-id="5ac72-144">**항상 데이터베이스 다시 만들기** 를 **false**로 설정한 경우에는이 설정이 적용 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-144">If you have set **Always re-create database** to **false**, this setting will have no effect.</span></span>
- <span data-ttu-id="5ac72-145">**단일 사용자 모드로 배포를 실행**합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-145">**Execute deployment in single-user mode**.</span></span> <span data-ttu-id="5ac72-146">이는 일반적으로 개발 또는 테스트 환경에서 문제가 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-146">This is not usually an issue in development or test environments.</span></span> <span data-ttu-id="5ac72-147">그러나 스테이징 또는 프로덕션 환경에 대 한 배포의 경우 일반적으로이를 **true** 로 설정 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-147">However, you should typically set this to **true** for deployments to staging or production environments.</span></span> <span data-ttu-id="5ac72-148">이렇게 하면 배포가 진행 되는 동안 사용자가 데이터베이스를 변경할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-148">This prevents users from making changes to the database while the deployment is underway.</span></span>
- <span data-ttu-id="5ac72-149">**배포 전에 데이터베이스를 백업**합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-149">**Back up database before deployment**.</span></span> <span data-ttu-id="5ac72-150">일반적으로 데이터 손실을 예방 하기 위해 프로덕션 환경에 배포할 때이를 **true** 로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-150">You typically set this to **true** when you deploy to a production environment, as a precaution against data loss.</span></span> <span data-ttu-id="5ac72-151">스테이징 데이터베이스에 많은 데이터가 포함 된 경우 스테이징 환경에 배포 하는 경우이를 **true** 로 설정 해야 할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-151">You may also want to set it to **true** when you deploy to a staging environment, if your staging database contains a lot of data.</span></span>
- <span data-ttu-id="5ac72-152">**대상 데이터베이스에 있지만 데이터베이스 프로젝트에 없는 개체에 대 한 DROP 문을 생성**합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-152">**Generate DROP statements for objects that are in the target database but that are not in the database project**.</span></span> <span data-ttu-id="5ac72-153">대부분의 경우 데이터베이스에 대 한 증분 변경을 수행 하는 데 필수적인 부분입니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-153">In most cases, this is an integral and essential part of making incremental changes to a database.</span></span> <span data-ttu-id="5ac72-154">**항상 데이터베이스 다시 만들기** 를 **false**로 설정한 경우에는이 설정이 적용 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-154">If you have set **Always re-create database** to **false**, this setting will have no effect.</span></span>
- <span data-ttu-id="5ac72-155">**ALTER ASSEMBLY 문을 사용 하 여 CLR 유형을 업데이트 하지 마십시오**.</span><span class="sxs-lookup"><span data-stu-id="5ac72-155">**Do not use ALTER ASSEMBLY statements to update CLR types**.</span></span> <span data-ttu-id="5ac72-156">이 설정은 SQL Server CLR (공용 언어 런타임) 형식을 최신 어셈블리 버전으로 업데이트 하는 방법을 결정 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-156">This setting determines how SQL Server should update common language runtime (CLR) types to newer assembly versions.</span></span> <span data-ttu-id="5ac72-157">대부분의 시나리오에서이는 **false** 로 설정 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-157">This should be set to **false** in most scenarios.</span></span>

<span data-ttu-id="5ac72-158">다음 표에서는 다양 한 대상 환경에 대 한 일반적인 배포 설정을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-158">This table shows typical deployment settings for different destination environments.</span></span> <span data-ttu-id="5ac72-159">그러나 정확한 요구 사항에 따라 설정이 달라질 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-159">However, your settings may be different depending on your exact requirements.</span></span>

|  | <span data-ttu-id="5ac72-160">개발자/테스트</span><span class="sxs-lookup"><span data-stu-id="5ac72-160">Developer/Test</span></span> | <span data-ttu-id="5ac72-161">스테이징/통합</span><span class="sxs-lookup"><span data-stu-id="5ac72-161">Staging/Integration</span></span> | <span data-ttu-id="5ac72-162">프로덕션</span><span class="sxs-lookup"><span data-stu-id="5ac72-162">Production</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="5ac72-163">**배포 비교 데이터 정렬**</span><span class="sxs-lookup"><span data-stu-id="5ac72-163">**Deployment comparison collation**</span></span> | <span data-ttu-id="5ac72-164">원본</span><span class="sxs-lookup"><span data-stu-id="5ac72-164">Source</span></span> | <span data-ttu-id="5ac72-165">대상</span><span class="sxs-lookup"><span data-stu-id="5ac72-165">Target</span></span> | <span data-ttu-id="5ac72-166">대상</span><span class="sxs-lookup"><span data-stu-id="5ac72-166">Target</span></span> |
| <span data-ttu-id="5ac72-167">**데이터베이스 속성 배포**</span><span class="sxs-lookup"><span data-stu-id="5ac72-167">**Deploy database properties**</span></span> | <span data-ttu-id="5ac72-168">True</span><span class="sxs-lookup"><span data-stu-id="5ac72-168">True</span></span> | <span data-ttu-id="5ac72-169">첫 번째 시간만</span><span class="sxs-lookup"><span data-stu-id="5ac72-169">First time only</span></span> | <span data-ttu-id="5ac72-170">첫 번째 시간만</span><span class="sxs-lookup"><span data-stu-id="5ac72-170">First time only</span></span> |
| <span data-ttu-id="5ac72-171">**항상 데이터베이스 다시 만들기**</span><span class="sxs-lookup"><span data-stu-id="5ac72-171">**Always re-create database**</span></span> | <span data-ttu-id="5ac72-172">True</span><span class="sxs-lookup"><span data-stu-id="5ac72-172">True</span></span> | <span data-ttu-id="5ac72-173">False</span><span class="sxs-lookup"><span data-stu-id="5ac72-173">False</span></span> | <span data-ttu-id="5ac72-174">False</span><span class="sxs-lookup"><span data-stu-id="5ac72-174">False</span></span> |
| <span data-ttu-id="5ac72-175">**데이터 손실이 발생할 수 있는 경우 증분 배포 차단**</span><span class="sxs-lookup"><span data-stu-id="5ac72-175">**Block incremental deployment if data loss might occur**</span></span> | <span data-ttu-id="5ac72-176">False</span><span class="sxs-lookup"><span data-stu-id="5ac72-176">False</span></span> | <span data-ttu-id="5ac72-177">가능할 수도 있음</span><span class="sxs-lookup"><span data-stu-id="5ac72-177">Maybe</span></span> | <span data-ttu-id="5ac72-178">True</span><span class="sxs-lookup"><span data-stu-id="5ac72-178">True</span></span> |
| <span data-ttu-id="5ac72-179">**단일 사용자 모드에서 배포 스크립트 실행**</span><span class="sxs-lookup"><span data-stu-id="5ac72-179">**Execute deployment script in single-user mode**</span></span> | <span data-ttu-id="5ac72-180">False</span><span class="sxs-lookup"><span data-stu-id="5ac72-180">False</span></span> | <span data-ttu-id="5ac72-181">True</span><span class="sxs-lookup"><span data-stu-id="5ac72-181">True</span></span> | <span data-ttu-id="5ac72-182">True</span><span class="sxs-lookup"><span data-stu-id="5ac72-182">True</span></span> |
| <span data-ttu-id="5ac72-183">**배포 전 데이터베이스 백업**</span><span class="sxs-lookup"><span data-stu-id="5ac72-183">**Back up database before deployment**</span></span> | <span data-ttu-id="5ac72-184">False</span><span class="sxs-lookup"><span data-stu-id="5ac72-184">False</span></span> | <span data-ttu-id="5ac72-185">가능할 수도 있음</span><span class="sxs-lookup"><span data-stu-id="5ac72-185">Maybe</span></span> | <span data-ttu-id="5ac72-186">True</span><span class="sxs-lookup"><span data-stu-id="5ac72-186">True</span></span> |
| <span data-ttu-id="5ac72-187">**대상 데이터베이스에 있지만 데이터베이스 프로젝트에 없는 개체에 대 한 DROP 문을 생성 합니다.**</span><span class="sxs-lookup"><span data-stu-id="5ac72-187">**Generate DROP statements for objects that are in the target database but that are not in the database project**</span></span> | <span data-ttu-id="5ac72-188">False</span><span class="sxs-lookup"><span data-stu-id="5ac72-188">False</span></span> | <span data-ttu-id="5ac72-189">True</span><span class="sxs-lookup"><span data-stu-id="5ac72-189">True</span></span> | <span data-ttu-id="5ac72-190">True</span><span class="sxs-lookup"><span data-stu-id="5ac72-190">True</span></span> |
| <span data-ttu-id="5ac72-191">**ALTER ASSEMBLY 문을 사용 하 여 CLR 형식 업데이트 안 함**</span><span class="sxs-lookup"><span data-stu-id="5ac72-191">**Do not use ALTER ASSEMBLY statements to update CLR types**</span></span> | <span data-ttu-id="5ac72-192">False</span><span class="sxs-lookup"><span data-stu-id="5ac72-192">False</span></span> | <span data-ttu-id="5ac72-193">False</span><span class="sxs-lookup"><span data-stu-id="5ac72-193">False</span></span> | <span data-ttu-id="5ac72-194">False</span><span class="sxs-lookup"><span data-stu-id="5ac72-194">False</span></span> |

> [!NOTE]
> <span data-ttu-id="5ac72-195">데이터베이스 배포 속성 및 환경 고려 사항에 대 한 자세한 내용은 [데이터베이스 프로젝트 설정 개요](https://msdn.microsoft.com/library/aa833291(v=VS.100).aspx), [방법: 배포 정보에 대 한 속성 구성](https://msdn.microsoft.com/library/dd172125.aspx), [격리 된 개발 환경에 데이터베이스 빌드 및 배포](https://msdn.microsoft.com/library/dd193409.aspx), [스테이징 또는 프로덕션 환경에 데이터베이스 빌드 및 배포](https://msdn.microsoft.com/library/dd193413.aspx)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="5ac72-195">For more information on database deployment properties and environment considerations, see [An Overview of Database Project Settings](https://msdn.microsoft.com/library/aa833291(v=VS.100).aspx), [How to: Configure Properties for Deployment Details](https://msdn.microsoft.com/library/dd172125.aspx), [Build and Deploy Database to an Isolated Development Environment](https://msdn.microsoft.com/library/dd193409.aspx), and [Build and Deploy Databases to a Staging or Production Environment](https://msdn.microsoft.com/library/dd193413.aspx).</span></span>

<span data-ttu-id="5ac72-196">여러 대상에 대 한 데이터베이스 프로젝트 배포를 지원 하려면 각 대상 환경에 대 한 배포 구성 파일을 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-196">To support the deployment of a database project to multiple destinations, you should create a deployment configuration file for each target environment.</span></span>

<span data-ttu-id="5ac72-197">**환경 관련 구성 파일을 만들려면**</span><span class="sxs-lookup"><span data-stu-id="5ac72-197">**To create an environment-specific configuration file**</span></span>

1. <span data-ttu-id="5ac72-198">Visual Studio 2010의 **솔루션 탐색기** 창에서 데이터베이스 프로젝트를 마우스 오른쪽 단추로 클릭 한 다음 **속성**을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-198">In Visual Studio 2010, in the **Solution Explorer** window, right-click your database project, and then click **Properties**.</span></span>
2. <span data-ttu-id="5ac72-199">데이터베이스 프로젝트 속성 페이지의 **배포 탭에** 있는 **배포 구성 파일** 행에서 **새로 만들기**를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-199">On the database project properties page, on the **Deploy** tab, in the **Deployment configuration file** row, click **New**.</span></span>

    ![](customizing-database-deployments-for-multiple-environments/_static/image1.png)
3. <span data-ttu-id="5ac72-200">**새 배포 구성 파일** 대화 상자에서 파일에 의미 있는 이름 (예: **testenvironment**)을 지정한 다음 **저장**을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-200">In the **New Deployment Configuration File** dialog box, give the file a meaningful name (for example, **TestEnvironment.sqldeployment**), and then click **Save**.</span></span>
4. <span data-ttu-id="5ac72-201">*[Filename] \* \* *. sqldeployment** 페이지에서 대상 환경의 요구 사항과 일치 하도록 배포 속성을 설정한 후 파일을 저장 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-201">On the *[Filename]\*\*\*.sqldeployment*\* page, set the deployment properties to match the requirements of your destination environment, and then save the file.</span></span>

    ![](customizing-database-deployments-for-multiple-environments/_static/image2.png)
5. <span data-ttu-id="5ac72-202">새 파일이 데이터베이스 프로젝트의 속성 폴더에 추가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-202">Notice that the new file is added to the Properties folder in your database project.</span></span>

    ![](customizing-database-deployments-for-multiple-environments/_static/image3.png)

## <a name="specifying-the-deployment-configuration-file-in-vsdbcmd"></a><span data-ttu-id="5ac72-203">VSDBCMD에서 배포 구성 파일 지정</span><span class="sxs-lookup"><span data-stu-id="5ac72-203">Specifying the Deployment Configuration File in VSDBCMD</span></span>

<span data-ttu-id="5ac72-204">Visual Studio 2010 내에서 솔루션 구성 (예: 디버그 및 릴리스)을 사용 하는 경우 배포 구성 파일을 각 구성과 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-204">When you use solution configurations (like Debug and Release) within Visual Studio 2010, you can associate a deployment configuration file with each configuration.</span></span> <span data-ttu-id="5ac72-205">특정 구성을 빌드할 때 빌드 프로세스는 구성 별 배포 구성 파일을 가리키는 구성 특정 배포 매니페스트 파일을 생성 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-205">When you build a particular configuration, the build process generates a configuration-specific deployment manifest file that points to the configuration-specific deployment configuration file.</span></span> <span data-ttu-id="5ac72-206">그러나 이러한 자습서에서 설명 하는 배포 방법의 주요 목표 중 하나는 Visual Studio 2010 및 솔루션 구성을 사용 하지 않고 배포 프로세스를 제어 하는 기능을 사용자에 게 제공 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-206">However, one of the main aims of the approach to deployment described in these tutorials is to give people the ability to control the deployment process without using Visual Studio 2010 and solution configurations.</span></span> <span data-ttu-id="5ac72-207">이 방법에서는 대상 배포 환경에 관계 없이 솔루션 구성이 동일 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-207">In this approach, the solution configuration is the same regardless of the target deployment environment.</span></span> <span data-ttu-id="5ac72-208">데이터베이스 배포를 특정 대상 환경에 맞게 조정 하려면 VSDBCMD 명령줄 옵션을 사용 하 여 배포 구성 파일을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-208">To tailor your database deployment to a specific destination environment, you can use the VSDBCMD command-line options to specify your deployment configuration file.</span></span>

<span data-ttu-id="5ac72-209">VSDBCMD에서 배포 구성 파일을 지정 하려면 **p:/DeploymentConfigurationFile** 스위치를 사용 하 고 파일의 전체 경로를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-209">To specify a deployment configuration file in your VSDBCMD, use the **p:/DeploymentConfigurationFile** switch and provide the full path to your file.</span></span> <span data-ttu-id="5ac72-210">이렇게 하면 배포 매니페스트에서 식별 하는 배포 구성 파일이 재정의 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-210">This will override the deployment configuration file that the deployment manifest identifies.</span></span> <span data-ttu-id="5ac72-211">예를 들어이 VSDBCMD 명령을 사용 하 여 테스트 환경에 배포 **하는 데** 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-211">For example, you could use this VSDBCMD command to deploy the **ContactManager** database to a test environment:</span></span>

[!code-console[Main](customizing-database-deployments-for-multiple-environments/samples/sample1.cmd)]

> [!NOTE]
> <span data-ttu-id="5ac72-212">빌드 프로세스는 파일을 출력 디렉터리에 복사할 때 sqldeployment 파일의 이름을 바꿀 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-212">Note that the build process may rename your .sqldeployment file when it copies the file to the output directory.</span></span>

<span data-ttu-id="5ac72-213">배포 전 또는 배포 후 SQL 스크립트에서 SQL 명령 변수를 사용 하는 경우 유사한 방법을 사용 하 여 배포에 sqlcmdvars 파일을 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-213">If you use SQL command variables in your pre-deployment or post-deployment SQL scripts, you can use a similar approach to associate an environment-specific .sqlcmdvars file with your deployment.</span></span> <span data-ttu-id="5ac72-214">이 경우에는 **p:/SqlCommandVariablesFile** 스위치를 사용 하 여 sqlcmdvars 파일을 식별 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-214">In this case, you use the **p:/SqlCommandVariablesFile** switch to identify your .sqlcmdvars file.</span></span>

## <a name="running-the-vsdbcmd-command-from-an-msbuild-project-file"></a><span data-ttu-id="5ac72-215">MSBuild 프로젝트 파일에서 VSDBCMD 명령 실행</span><span class="sxs-lookup"><span data-stu-id="5ac72-215">Running the VSDBCMD Command from an MSBuild Project File</span></span>

<span data-ttu-id="5ac72-216">Msbuild 대상 내에서 **Exec** 작업을 사용 하 여 msbuild 프로젝트 파일에서 VSDBCMD 명령을 호출할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-216">You can invoke a VSDBCMD command from an MSBuild project file by using an **Exec** task within an MSBuild target.</span></span> <span data-ttu-id="5ac72-217">가장 간단한 형태는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-217">In its simplest form, it would look like this:</span></span>

[!code-xml[Main](customizing-database-deployments-for-multiple-environments/samples/sample2.xml)]

- <span data-ttu-id="5ac72-218">실제로 프로젝트 파일을 쉽게 읽고 다시 사용할 수 있도록 하려면 다양 한 명령줄 매개 변수를 저장 하는 속성을 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-218">In practice, to make your project files easy to read and reuse, you'll want to create properties to store the various command-line parameters.</span></span> <span data-ttu-id="5ac72-219">이렇게 하면 사용자가 환경 관련 프로젝트 파일에서 속성 값을 보다 쉽게 제공 하거나 MSBuild 명령줄에서 기본값을 재정의할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-219">This makes it easier for users to provide property values in an environment-specific project file or to override default values from the MSBuild command line.</span></span> <span data-ttu-id="5ac72-220">[프로젝트 파일 이해](../web-deployment-in-the-enterprise/understanding-the-project-file.md)에 설명 된 분할 프로젝트 파일 방법을 사용 하는 경우 두 파일 간에 빌드 지침과 속성을 적절 하 게 나누어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-220">If you use the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), you should divide your build instructions and properties between the two files accordingly:</span></span>
- <span data-ttu-id="5ac72-221">배포 구성 파일 이름, 데이터베이스 연결 문자열 및 대상 데이터베이스 이름과 같은 환경 관련 설정은 환경 관련 프로젝트 파일에 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-221">Environment-specific settings, like the deployment configuration filename, the database connection string, and the target database name, should go in the environment-specific project file.</span></span>
- <span data-ttu-id="5ac72-222">Vsdbcmd 명령을 실행 하는 MSBuild 대상과 VSDBCMD 실행 파일의 위치와 같은 범용 속성은 모두 유니버설 프로젝트 파일에 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-222">The MSBuild target that runs the VSDBCMD command, together with any universal properties like the location of the VSDBCMD executable, should go in the universal project file.</span></span>

<span data-ttu-id="5ac72-223">또한 VSDBCMD를 호출 하기 전에 데이터베이스 프로젝트를 빌드하여 deploymanifest 파일을 만들고 사용할 수 있도록 준비 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-223">You should also ensure that you build the database project before you invoke VSDBCMD so that the .deploymanifest file is created and ready to use.</span></span> <span data-ttu-id="5ac72-224">[빌드 프로세스 이해](../web-deployment-in-the-enterprise/understanding-the-build-process.md)항목에서이 방법의 전체 예제를 볼 수 있으며,이는 [Contact Manager 샘플 솔루션](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)의 프로젝트 파일을 안내 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-224">You can see a full example of this approach in the topic [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md), which walks you through the project files in the [Contact Manager sample solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="5ac72-225">결론</span><span class="sxs-lookup"><span data-stu-id="5ac72-225">Conclusion</span></span>

<span data-ttu-id="5ac72-226">이 항목에서는 MSBuild 및 VSDBCMD를 사용 하 여 데이터베이스 프로젝트를 배포할 때 데이터베이스 속성을 다른 대상 환경에 맞게 조정 하는 방법에 대해 설명 했습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-226">This topic described how you can tailor database properties to different destination environments when you deploy database projects using MSBuild and VSDBCMD.</span></span> <span data-ttu-id="5ac72-227">이 방법은 대규모의 엔터프라이즈급 솔루션의 일부로 데이터베이스 프로젝트를 배포 해야 하는 경우에 유용 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-227">This approach is useful when you need to deploy database projects as part of larger, enterprise-scale solutions.</span></span> <span data-ttu-id="5ac72-228">이러한 솔루션은 샌드박스가 적용 된 개발 또는 테스트 환경, 스테이징 또는 통합 플랫폼, 프로덕션 또는 라이브 환경과 같은 여러 대상에 배포 되는 경우가 많습니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-228">These solutions are often deployed to multiple destinations, like sandboxed development or test environments, staging or integration platforms, and production or live environments.</span></span> <span data-ttu-id="5ac72-229">이러한 각 대상 환경에는 일반적으로 고유한 데이터베이스 배포 속성 집합이 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-229">Each of these target environments typically requires a unique set of database deployment properties.</span></span>

## <a name="further-reading"></a><span data-ttu-id="5ac72-230">추가 참고 자료</span><span class="sxs-lookup"><span data-stu-id="5ac72-230">Further Reading</span></span>

<span data-ttu-id="5ac72-231">VSDBCMD를 사용 하 여 데이터베이스 프로젝트를 배포 하는 방법에 대 한 자세한 내용은 [데이터베이스 프로젝트 배포](../web-deployment-in-the-enterprise/deploying-database-projects.md)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="5ac72-231">For more information on deploying database projects using VSDBCMD.exe, see [Deploying Database Projects](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span></span> <span data-ttu-id="5ac72-232">사용자 지정 MSBuild 프로젝트 파일을 사용 하 여 배포 프로세스를 제어 하는 방법에 대 한 자세한 내용은 [프로젝트 파일 이해](../web-deployment-in-the-enterprise/understanding-the-project-file.md) 및 [빌드 프로세스 이해](../web-deployment-in-the-enterprise/understanding-the-build-process.md)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="5ac72-232">For more information on using custom MSBuild project files to control the deployment process, see [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md) and [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>

<span data-ttu-id="5ac72-233">MSDN의 이러한 문서에서는 데이터베이스 배포에 대 한 일반적인 지침을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ac72-233">These articles on MSDN provide more general guidance on database deployment:</span></span>

- <span data-ttu-id="5ac72-234">[데이터베이스 프로젝트 설정 개요](https://msdn.microsoft.com/library/aa833291(v=VS.100).aspx)</span><span class="sxs-lookup"><span data-stu-id="5ac72-234">[An Overview of Database Project Settings](https://msdn.microsoft.com/library/aa833291(v=VS.100).aspx)</span></span>
- [<span data-ttu-id="5ac72-235">방법: 배포 정보에 대 한 속성 구성</span><span class="sxs-lookup"><span data-stu-id="5ac72-235">How to: Configure Properties for Deployment Details</span></span>](https://msdn.microsoft.com/library/dd172125.aspx)
- [<span data-ttu-id="5ac72-236">격리 된 개발 환경에 데이터베이스 빌드 및 배포</span><span class="sxs-lookup"><span data-stu-id="5ac72-236">Build and Deploy Databases to an Isolated Development Environment</span></span>](https://msdn.microsoft.com/library/dd193409.aspx)
- [<span data-ttu-id="5ac72-237">스테이징 또는 프로덕션 환경에 데이터베이스 빌드 및 배포</span><span class="sxs-lookup"><span data-stu-id="5ac72-237">Build and Deploy Databases to a Staging or Production Environment</span></span>](https://msdn.microsoft.com/library/dd193413.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="5ac72-238">[이전](performing-a-what-if-deployment.md)
> [다음](deploying-database-role-memberships-to-test-environments.md)</span><span class="sxs-lookup"><span data-stu-id="5ac72-238">[Previous](performing-a-what-if-deployment.md)
[Next](deploying-database-role-memberships-to-test-environments.md)</span></span>
