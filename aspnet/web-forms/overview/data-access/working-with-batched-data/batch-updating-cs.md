---
uid: web-forms/overview/data-access/working-with-batched-data/batch-updating-cs
title: 일괄 업데이트 (C#) | Microsoft Docs
author: rick-anderson
description: 단일 작업에서 여러 데이터베이스 레코드를 업데이트 하는 방법에 대해 알아봅니다. 사용자 인터페이스 계층에서 각 행을 편집할 수 있는 GridView를 작성 합니다. 데이터 ...
ms.author: riande
ms.date: 06/26/2007
ms.assetid: 4e849bcc-c557-4bc3-937e-f7453ee87265
msc.legacyurl: /web-forms/overview/data-access/working-with-batched-data/batch-updating-cs
msc.type: authoredcontent
ms.openlocfilehash: baaaf37c47cc57d90ea579a5c20949bf8cfc7a3c
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78476405"
---
# <a name="batch-updating-c"></a><span data-ttu-id="f650e-105">일괄 업데이트(C#)</span><span class="sxs-lookup"><span data-stu-id="f650e-105">Batch Updating (C#)</span></span>

<span data-ttu-id="f650e-106">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="f650e-106">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="f650e-107">[코드 다운로드](https://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_64_CS.zip) 또는 [PDF 다운로드](batch-updating-cs/_static/datatutorial64cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="f650e-107">[Download Code](https://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_64_CS.zip) or [Download PDF](batch-updating-cs/_static/datatutorial64cs1.pdf)</span></span>

> <span data-ttu-id="f650e-108">단일 작업에서 여러 데이터베이스 레코드를 업데이트 하는 방법에 대해 알아봅니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-108">Learn how to update multiple database records in a single operation.</span></span> <span data-ttu-id="f650e-109">사용자 인터페이스 계층에서 각 행을 편집할 수 있는 GridView를 작성 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-109">In the User Interface Layer we build a GridView where each row is editable.</span></span> <span data-ttu-id="f650e-110">데이터 액세스 계층에서는 여러 업데이트 작업을 트랜잭션 내에서 래핑하여 모든 업데이트가 성공 하거나 모든 업데이트가 롤백되는 것을 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-110">In the Data Access Layer we wrap the multiple Update operations within a transaction to ensure that all updates succeed or all updates are rolled back.</span></span>

## <a name="introduction"></a><span data-ttu-id="f650e-111">소개</span><span class="sxs-lookup"><span data-stu-id="f650e-111">Introduction</span></span>

<span data-ttu-id="f650e-112">[이전 자습서](wrapping-database-modifications-within-a-transaction-cs.md) 에서는 데이터 액세스 계층을 확장 하 여 데이터베이스 트랜잭션에 대 한 지원을 추가 하는 방법을 살펴보았습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-112">In the [preceding tutorial](wrapping-database-modifications-within-a-transaction-cs.md) we saw how to extend the Data Access Layer to add support for database transactions.</span></span> <span data-ttu-id="f650e-113">데이터베이스 트랜잭션은 일련의 데이터 수정 문이 하나의 원자성 작업으로 처리 되도록 보장 하므로 모든 수정 작업이 실패 하거나 모두 성공 하 게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-113">Database transactions guarantee that a series of data modification statements will be treated as one atomic operation, which ensures that all modifications will fail or all will succeed.</span></span> <span data-ttu-id="f650e-114">이 낮은 수준의 DAL 기능을 사용 하면 일괄 처리 데이터 수정 인터페이스를 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-114">With this low-level DAL functionality out of the way, we re ready to turn our attention to creating batch data modification interfaces.</span></span>

<span data-ttu-id="f650e-115">이 자습서에서는 각 행을 편집할 수 있는 GridView를 빌드합니다 (그림 1 참조).</span><span class="sxs-lookup"><span data-stu-id="f650e-115">In this tutorial we'll build a GridView where each row is editable (see Figure 1).</span></span> <span data-ttu-id="f650e-116">각 행이 편집 인터페이스에서 렌더링 되므로 편집, 업데이트 및 취소 단추의 열이 필요 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-116">Since each row is rendered in its editing interface, there s no need for a column of Edit, Update, and Cancel buttons.</span></span> <span data-ttu-id="f650e-117">대신, 페이지에는 클릭 하면 GridView 행을 열거 하 고 데이터베이스를 업데이트 하는 두 개의 업데이트 제품 단추가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-117">Instead, there are two Update Products buttons on the page that, when clicked, enumerate the GridView rows and update the database.</span></span>

<span data-ttu-id="f650e-118">[![GridView의 각 행을 편집할 수 있습니다.](batch-updating-cs/_static/image1.gif)](batch-updating-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="f650e-118">[![Each Row in the GridView is Editable](batch-updating-cs/_static/image1.gif)](batch-updating-cs/_static/image1.png)</span></span>

<span data-ttu-id="f650e-119">**그림 1**: GridView의 각 행을 편집할 수 있습니다 ([전체 크기 이미지를 보려면 클릭](batch-updating-cs/_static/image2.png)).</span><span class="sxs-lookup"><span data-stu-id="f650e-119">**Figure 1**: Each Row in the GridView is Editable ([Click to view full-size image](batch-updating-cs/_static/image2.png))</span></span>

<span data-ttu-id="f650e-120">S를 시작 하겠습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-120">Let s get started!</span></span>

> [!NOTE]
> <span data-ttu-id="f650e-121">[일괄 처리 업데이트 수행](../editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs.md) 자습서에서 DataList 컨트롤을 사용 하 여 일괄 처리 편집 인터페이스를 만들었습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-121">In the [Performing Batch Updates](../editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs.md) tutorial we created a batch editing interface using the DataList control.</span></span> <span data-ttu-id="f650e-122">이 자습서는에서 GridView를 사용 하 고 일괄 업데이트가 트랜잭션 범위 내에서 수행 되는의 이전 버전과 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-122">This tutorial differs from the previous one in that is uses a GridView and the batch update is performed within the scope of a transaction.</span></span> <span data-ttu-id="f650e-123">이 자습서를 완료 한 후 이전 자습서로 돌아가서 이전 자습서에서 추가한 데이터베이스 트랜잭션 관련 기능을 사용 하도록 업데이트 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-123">After completing this tutorial I encourage you to return to the earlier tutorial and update it to use the database transaction-related functionality added in the preceding tutorial.</span></span>

## <a name="examining-the-steps-for-making-all-gridview-rows-editable"></a><span data-ttu-id="f650e-124">모든 GridView 행을 편집할 수 있도록 하는 단계 검사</span><span class="sxs-lookup"><span data-stu-id="f650e-124">Examining the Steps for Making All GridView Rows Editable</span></span>

<span data-ttu-id="f650e-125">[데이터 삽입, 업데이트 및 삭제](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) 자습서의 개요에 설명 된 대로 GridView는 행 단위로 기본 데이터를 편집 하는 기본 제공 지원을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-125">As discussed in the [An Overview of Inserting, Updating, and Deleting Data](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) tutorial, the GridView offers built-in support for editing its underlying data on a per-row basis.</span></span> <span data-ttu-id="f650e-126">내부적으로 GridView는 [`EditIndex` 속성](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.editindex(VS.80).aspx)을 통해 편집할 수 있는 행을 메모 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-126">Internally, the GridView notes what row is editable through its [`EditIndex` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.editindex(VS.80).aspx).</span></span> <span data-ttu-id="f650e-127">GridView는 데이터 원본에 바인딩될 때 각 행을 검사 하 여 행의 인덱스가 `EditIndex`의 값과 같은지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-127">As the GridView is being bound to its data source, it checks each row to see if the index of the row equals the value of `EditIndex`.</span></span> <span data-ttu-id="f650e-128">이 경우 해당 행의 필드는 편집 인터페이스를 사용 하 여 렌더링 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-128">If so, that row s fields are rendered using their editing interfaces.</span></span> <span data-ttu-id="f650e-129">BoundFields의 경우 편집 인터페이스는 `Text` 속성이 BoundField s `DataField` 속성으로 지정 된 데이터 필드의 값을 할당 하는 TextBox입니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-129">For BoundFields, the editing interface is a TextBox whose `Text` property is assigned the value of the data field specified by the BoundField s `DataField` property.</span></span> <span data-ttu-id="f650e-130">템플릿 필드의 경우에는 `EditItemTemplate` `ItemTemplate`대신 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-130">For TemplateFields, the `EditItemTemplate` is used in place of the `ItemTemplate`.</span></span>

<span data-ttu-id="f650e-131">편집 워크플로는 사용자가 행의 편집 단추를 클릭 하면 시작 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-131">Recall that the editing workflow starts when a user clicks a row s Edit button.</span></span> <span data-ttu-id="f650e-132">이렇게 하면 포스트백이 발생 하 고, GridView s `EditIndex` 속성을 클릭 된 행 인덱스로 설정 하 고, 데이터를 표 형식으로 다시 바인딩합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-132">This causes a postback, sets the GridView s `EditIndex` property to the clicked row s index, and rebinds the data to the grid.</span></span> <span data-ttu-id="f650e-133">행 취소 단추를 클릭 하면 데이터를 표 형식으로 다시 바인딩하기 전에 `EditIndex` `-1` 값으로 설정 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-133">When a row s Cancel button is clicked, on postback the `EditIndex` is set to a value of `-1` before rebinding the data to the grid.</span></span> <span data-ttu-id="f650e-134">GridView의 행이 0부터 인덱싱을 시작 하므로 `EditIndex`를 `-1` 설정 하면 읽기 전용 모드에서 GridView를 표시 하는 효과가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-134">Since the GridView s rows start indexing at zero, setting `EditIndex` to `-1` has the effect of displaying the GridView in read-only mode.</span></span>

<span data-ttu-id="f650e-135">`EditIndex` 속성은 행당 편집에 적합 하지만 일괄 편집을 위해 디자인 되지 않았습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-135">The `EditIndex` property works well for per-row editing, but is not designed for batch editing.</span></span> <span data-ttu-id="f650e-136">전체 GridView를 편집 가능 하 게 만들려면 편집 인터페이스를 사용 하 여 각 행을 렌더링 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-136">To make the entire GridView editable, we need to have each row render using its editing interface.</span></span> <span data-ttu-id="f650e-137">이를 수행 하는 가장 쉬운 방법은 편집 가능 필드가 `ItemTemplate`에 정의 된 편집 인터페이스를 사용 하 여 Templatefield로 변환로 구현 되는 위치를 만드는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-137">The easiest way to accomplish this is to create where each editable field is implemented as a TemplateField with its editing interface defined in the `ItemTemplate`.</span></span>

<span data-ttu-id="f650e-138">다음 몇 가지 단계를 통해 완전히 편집 가능한 GridView를 만들게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-138">Over the next several steps we'll create a completely editable GridView.</span></span> <span data-ttu-id="f650e-139">1 단계에서 GridView와 해당 ObjectDataSource를 만들고 BoundFields 및 CheckBoxField를 템플릿 필드로 변환 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-139">In Step 1 we'll start by creating the GridView and its ObjectDataSource and convert its BoundFields and CheckBoxField into TemplateFields.</span></span> <span data-ttu-id="f650e-140">2 단계와 3 단계에서는 `EditItemTemplate`의 편집 인터페이스를 템플릿 필드에서 `ItemTemplate` s로 이동 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-140">In Steps 2 and 3 we'll move the editing interfaces from the TemplateFields `EditItemTemplate` s to their `ItemTemplate` s.</span></span>

## <a name="step-1-displaying-product-information"></a><span data-ttu-id="f650e-141">1 단계: 제품 정보 표시</span><span class="sxs-lookup"><span data-stu-id="f650e-141">Step 1: Displaying Product Information</span></span>

<span data-ttu-id="f650e-142">행을 편집할 수 있는 GridView를 만드는 방법에 대해 설명 하기 전에 제품 정보를 표시 하는 것으로 시작 해 보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-142">Before we worry about creating a GridView where are rows are editable, let s start by simply displaying the product information.</span></span> <span data-ttu-id="f650e-143">`BatchData` 폴더에서 `BatchUpdate.aspx` 페이지를 열고 GridView를 도구 상자에서 디자이너로 끌어 옵니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-143">Open the `BatchUpdate.aspx` page in the `BatchData` folder and drag a GridView from the Toolbox onto the Designer.</span></span> <span data-ttu-id="f650e-144">GridView s `ID`를 `ProductsGrid`로 설정 하 고 스마트 태그에서 `ProductsDataSource`라는 새 ObjectDataSource에 바인딩합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-144">Set the GridView s `ID` to `ProductsGrid` and, from its smart tag, choose to bind it to a new ObjectDataSource named `ProductsDataSource`.</span></span> <span data-ttu-id="f650e-145">`ProductsBLL` 클래스 s `GetProducts` 메서드에서 데이터를 검색 하도록 ObjectDataSource를 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-145">Configure the ObjectDataSource to retrieve its data from the `ProductsBLL` class s `GetProducts` method.</span></span>

<span data-ttu-id="f650e-146">[ProductsBLL 클래스를 사용 하도록 ObjectDataSource 구성 ![](batch-updating-cs/_static/image2.gif)](batch-updating-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="f650e-146">[![Configure the ObjectDataSource to Use the ProductsBLL Class](batch-updating-cs/_static/image2.gif)](batch-updating-cs/_static/image3.png)</span></span>

<span data-ttu-id="f650e-147">**그림 2**: `ProductsBLL` 클래스를 사용 하도록 ObjectDataSource 구성 ([전체 크기 이미지를 보려면 클릭](batch-updating-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="f650e-147">**Figure 2**: Configure the ObjectDataSource to Use the `ProductsBLL` Class ([Click to view full-size image](batch-updating-cs/_static/image4.png))</span></span>

<span data-ttu-id="f650e-148">[GetProducts 메서드를 사용 하 여 제품 데이터를 검색 ![](batch-updating-cs/_static/image3.gif)](batch-updating-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="f650e-148">[![Retrieve the Product Data Using the GetProducts Method](batch-updating-cs/_static/image3.gif)](batch-updating-cs/_static/image5.png)</span></span>

<span data-ttu-id="f650e-149">**그림 3**: `GetProducts` 메서드를 사용 하 여 제품 데이터 검색 ([전체 크기 이미지를 보려면 클릭](batch-updating-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="f650e-149">**Figure 3**: Retrieve the Product Data Using the `GetProducts` Method ([Click to view full-size image](batch-updating-cs/_static/image6.png))</span></span>

<span data-ttu-id="f650e-150">GridView와 마찬가지로 ObjectDataSource의 수정 기능은 행 단위로 작동 하도록 디자인 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-150">Like the GridView, the ObjectDataSource s modification features are designed to work on a per-row basis.</span></span> <span data-ttu-id="f650e-151">레코드 집합을 업데이트 하려면 데이터를 일괄 처리 하 고 BLL에 전달 하는 코드 ASP.NET 페이지의 코드를 약간 작성 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-151">In order to update a set of records, we'll need to write a bit of code in the ASP.NET page s code-behind class that batches the data and passes it to the BLL.</span></span> <span data-ttu-id="f650e-152">따라서 ObjectDataSource s 업데이트, 삽입 및 삭제 탭의 드롭다운 목록을 (없음)으로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-152">Therefore, set the drop-down lists in the ObjectDataSource s UPDATE, INSERT, and DELETE tabs to (None).</span></span> <span data-ttu-id="f650e-153">마침을 클릭하여 마법사를 완료합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-153">Click Finish to complete the wizard.</span></span>

<span data-ttu-id="f650e-154">[업데이트, 삽입 및 삭제 탭의 드롭다운 목록을 (없음)으로 설정 ![](batch-updating-cs/_static/image4.gif)](batch-updating-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="f650e-154">[![Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE Tabs to (None)](batch-updating-cs/_static/image4.gif)](batch-updating-cs/_static/image7.png)</span></span>

<span data-ttu-id="f650e-155">**그림 4**: 업데이트, 삽입 및 삭제 탭의 드롭다운 목록을 (없음)로 설정 ([전체 크기 이미지를 보려면 클릭](batch-updating-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="f650e-155">**Figure 4**: Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE Tabs to (None) ([Click to view full-size image](batch-updating-cs/_static/image8.png))</span></span>

<span data-ttu-id="f650e-156">데이터 소스 구성 마법사를 완료 한 후 ObjectDataSource의 선언적 태그는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-156">After completing the Configure Data Source wizard, the ObjectDataSource s declarative markup should look like the following:</span></span>

[!code-aspx[Main](batch-updating-cs/samples/sample1.aspx)]

<span data-ttu-id="f650e-157">데이터 원본 구성 마법사를 완료 하면 Visual Studio에서 GridView의 product 데이터 필드에 대 한 BoundFields 및 CheckBoxField를 만들게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-157">Completing the Configure Data Source wizard also causes Visual Studio to create BoundFields and a CheckBoxField for the product data fields in the GridView.</span></span> <span data-ttu-id="f650e-158">이 자습서에서는를 사용 하 여 사용자만 제품 이름, 범주, 가격 및 단종 된 상태를 보고 편집할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-158">For this tutorial, let s only allow the user to view and edit the product s name, category, price, and discontinued status.</span></span> <span data-ttu-id="f650e-159">`ProductName`, `CategoryName`, `UnitPrice`및 `Discontinued` 필드를 제외한 모든 필드를 제거 하 고 처음 세 필드의 `HeaderText` 속성 이름을 Product, Category 및 Price로 각각 변경 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-159">Remove all but the `ProductName`, `CategoryName`, `UnitPrice`, and `Discontinued` fields and rename the `HeaderText` properties of the first three fields to Product, Category, and Price, respectively.</span></span> <span data-ttu-id="f650e-160">마지막으로 GridView의 스마트 태그에서 페이징 사용 및 정렬 사용 확인란을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-160">Lastly, check the Enable Paging and Enable Sorting checkboxes in the GridView s smart tag.</span></span>

<span data-ttu-id="f650e-161">이 시점에서 GridView에는 3 개의 BoundFields (`ProductName`, `CategoryName`및 `UnitPrice`)와 CheckBoxField (`Discontinued`)가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-161">At this point the GridView has three BoundFields (`ProductName`, `CategoryName`, and `UnitPrice`) and a CheckBoxField (`Discontinued`).</span></span> <span data-ttu-id="f650e-162">이러한 4 개 필드를 템플릿 필드로 변환한 다음 Templatefield로 변환 s `EditItemTemplate`에서 편집 인터페이스를 `ItemTemplate`으로 이동 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-162">We need to convert these four fields into TemplateFields and then move the editing interface from the TemplateField s `EditItemTemplate` to its `ItemTemplate`.</span></span>

> [!NOTE]
> <span data-ttu-id="f650e-163">[데이터 수정 인터페이스 사용자 지정](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) 자습서에서 템플릿 필드를 만들고 사용자 지정 하는 방법을 살펴보았습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-163">We explored creating and customizing TemplateFields in the [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) tutorial.</span></span> <span data-ttu-id="f650e-164">BoundFields 및 CheckBoxField를 템플릿 필드로 변환 하 고 해당 `ItemTemplate` s에서 편집 인터페이스를 정의 하는 단계를 안내 하지만, 중단 하거나 리프레셔가 필요한 경우이 이전 자습서를 다시 참조할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-164">We'll walk through the steps of converting the BoundFields and CheckBoxField into TemplateFields and defining their editing interfaces in their `ItemTemplate` s, but if you get stuck or need a refresher, don t hesitate to refer back to this earlier tutorial.</span></span>

<span data-ttu-id="f650e-165">GridView s 스마트 태그에서 열 편집 링크를 클릭 하 여 필드 대화 상자를 엽니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-165">From the GridView s smart tag, click the Edit Columns link to open the Fields dialog box.</span></span> <span data-ttu-id="f650e-166">그런 다음 각 필드를 선택 하 고이 필드를 Templatefield로 변환으로 변환 링크를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-166">Next, select each field and click the Convert this field into a TemplateField link.</span></span>

![기존 BoundFields 및 CheckBoxField를 Templatefield로 변환로 변환](batch-updating-cs/_static/image5.gif)

<span data-ttu-id="f650e-168">**그림 5**: 기존 BoundFields 및 CheckBoxField를 templatefield로 변환로 변환</span><span class="sxs-lookup"><span data-stu-id="f650e-168">**Figure 5**: Convert the Existing BoundFields and CheckBoxField Into TemplateField</span></span>

<span data-ttu-id="f650e-169">이제 각 필드가 Templatefield로 변환 이므로 `EditItemTemplate`의 편집 인터페이스를 `ItemTemplate` s로 이동할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-169">Now that each field is a TemplateField, we re ready to move the editing interface from the `EditItemTemplate` s to the `ItemTemplate` s.</span></span>

## <a name="step-2-creating-theproductnameunitprice-anddiscontinuedediting-interfaces"></a><span data-ttu-id="f650e-170">2 단계:`ProductName`,`UnitPrice`및`Discontinued`편집 인터페이스 만들기</span><span class="sxs-lookup"><span data-stu-id="f650e-170">Step 2: Creating the`ProductName`,`UnitPrice`, and`Discontinued`Editing Interfaces</span></span>

<span data-ttu-id="f650e-171">`ProductName`, `UnitPrice`및 `Discontinued` 편집 인터페이스를 만드는 방법은이 단계의 항목 이며, 각 인터페이스가 Templatefield로 변환 s `EditItemTemplate`에 이미 정의 되어 있으므로 매우 간단 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-171">Creating the `ProductName`, `UnitPrice`, and `Discontinued` editing interfaces are the topic of this step and are pretty straightforward, as each interface is already defined in the TemplateField s `EditItemTemplate`.</span></span> <span data-ttu-id="f650e-172">적용 가능한 범주의 DropDownList을 만들어야 하므로 `CategoryName` 편집 인터페이스를 만드는 것은 약간 더 복잡 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-172">Creating the `CategoryName` editing interface is a bit more involved since we need to create a DropDownList of the applicable categories.</span></span> <span data-ttu-id="f650e-173">이 `CategoryName` 편집 인터페이스는 3 단계에서 세울.</span><span class="sxs-lookup"><span data-stu-id="f650e-173">This `CategoryName` editing interface is tackled in Step 3.</span></span>

<span data-ttu-id="f650e-174">`ProductName` Templatefield로 변환로 시작 하겠습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-174">Let s start with the `ProductName` TemplateField.</span></span> <span data-ttu-id="f650e-175">GridView의 스마트 태그에서 템플릿 편집 링크를 클릭 하 고 `ProductName` Templatefield로 변환 s `EditItemTemplate`으로 드릴 다운 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-175">Click on the Edit Templates link from the GridView s smart tag and drill down to the `ProductName` TemplateField s `EditItemTemplate`.</span></span> <span data-ttu-id="f650e-176">텍스트 상자를 선택 하 고 클립보드에 복사한 다음 `ProductName` Templatefield로 변환 s `ItemTemplate`에 붙여넣습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-176">Select the TextBox, copy it to the clipboard, and then paste it to the `ProductName` TemplateField s `ItemTemplate`.</span></span> <span data-ttu-id="f650e-177">텍스트 상자 `ID` 속성을 `ProductName`로 변경 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-177">Change the TextBox s `ID` property to `ProductName`.</span></span>

<span data-ttu-id="f650e-178">그런 다음 `ItemTemplate`에 RequiredFieldValidator를 추가 하 여 사용자가 각 제품 이름에 대 한 값을 제공 하는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-178">Next, add a RequiredFieldValidator to the `ItemTemplate` to ensure that the user provides a value for each product s name.</span></span> <span data-ttu-id="f650e-179">`ControlToValidate` 속성을 ProductName로 설정 합니다. `ErrorMessage` 속성은 제품 이름을 제공 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-179">Set the `ControlToValidate` property to ProductName, the `ErrorMessage` property to You must provide the product's name.</span></span> <span data-ttu-id="f650e-180">\*`Text` 속성입니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-180">and the `Text` property to \*.</span></span> <span data-ttu-id="f650e-181">이러한 `ItemTemplate`을 추가 하면 화면이 그림 6과 유사 하 게 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-181">After making these additions to the `ItemTemplate`, your screen should look similar to Figure 6.</span></span>

<span data-ttu-id="f650e-182">[![ProductName Templatefield로 변환에는 이제 텍스트 상자와 RequiredFieldValidator가 포함 됩니다.](batch-updating-cs/_static/image6.gif)](batch-updating-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="f650e-182">[![The ProductName TemplateField Now Includes a TextBox and a RequiredFieldValidator](batch-updating-cs/_static/image6.gif)](batch-updating-cs/_static/image9.png)</span></span>

<span data-ttu-id="f650e-183">**그림 6**: 이제 `ProductName` Templatefield로 변환에 TextBox 및 RequiredFieldValidator가 포함 됩니다 ([전체 크기 이미지를 보려면 클릭](batch-updating-cs/_static/image10.png)).</span><span class="sxs-lookup"><span data-stu-id="f650e-183">**Figure 6**: The `ProductName` TemplateField Now Includes a TextBox and a RequiredFieldValidator ([Click to view full-size image](batch-updating-cs/_static/image10.png))</span></span>

<span data-ttu-id="f650e-184">`UnitPrice` 편집 인터페이스의 경우 텍스트 상자를 `EditItemTemplate`에서 `ItemTemplate`로 복사 하 여 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-184">For the `UnitPrice` editing interface, start by copying the TextBox from the `EditItemTemplate` to the `ItemTemplate`.</span></span> <span data-ttu-id="f650e-185">그런 다음, 입력란 앞에 $를 놓고 `ID` 속성을 UnitPrice로 설정 하 고 `Columns` 속성을 8로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-185">Next, place a $ in front of the TextBox and set its `ID` property to UnitPrice and its `Columns` property to 8 .</span></span>

<span data-ttu-id="f650e-186">또한 `UnitPrice` s `ItemTemplate`에 CompareValidator를 추가 하 여 사용자가 입력 한 값이 $0.00 보다 크거나 같은 유효한 통화 값 인지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-186">Also add a CompareValidator to the `UnitPrice` s `ItemTemplate` to ensure that the value entered by the user is a valid currency value greater than or equal to $0.00.</span></span> <span data-ttu-id="f650e-187">유효성 검사기 s `ControlToValidate` 속성을 UnitPrice로 설정 하 고 해당 `ErrorMessage` 속성을 올바른 통화 값으로 입력 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-187">Set the validator s `ControlToValidate` property to UnitPrice, its `ErrorMessage` property to You must enter a valid currency value.</span></span> <span data-ttu-id="f650e-188">통화 기호를 생략 하 고, 해당 `Text` 속성을 \*, `Type` 속성을 `Currency`, `Operator` 속성을 `GreaterThanEqual`로, 해당 `ValueToCompare` 속성을 0으로 바꾸십시오.</span><span class="sxs-lookup"><span data-stu-id="f650e-188">Please omit any currency symbols., its `Text` property to \*, its `Type` property to `Currency`, its `Operator` property to `GreaterThanEqual`, and its `ValueToCompare` property to 0 .</span></span>

<span data-ttu-id="f650e-189">[CompareValidator를 추가 하 여 입력 된 가격이 음수가 아닌 통화 값 인지 확인 ![](batch-updating-cs/_static/image7.gif)](batch-updating-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="f650e-189">[![Add a CompareValidator to Ensure the Price Entered is a Non-Negative Currency Value](batch-updating-cs/_static/image7.gif)](batch-updating-cs/_static/image11.png)</span></span>

<span data-ttu-id="f650e-190">**그림 7**: 입력 된 가격이 음수가 아닌 통화 값 인지 확인 하기 위해 comparevalidator 추가 ([전체 크기 이미지를 보려면 클릭](batch-updating-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="f650e-190">**Figure 7**: Add a CompareValidator to Ensure the Price Entered is a Non-Negative Currency Value ([Click to view full-size image](batch-updating-cs/_static/image12.png))</span></span>

<span data-ttu-id="f650e-191">`Discontinued` Templatefield로 변환 `ItemTemplate`에 이미 정의 되어 있는 확인란을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-191">For the `Discontinued` TemplateField you can use the CheckBox already defined in the `ItemTemplate`.</span></span> <span data-ttu-id="f650e-192">`ID`를 중단 된 것으로 설정 하 고 `Enabled` 속성을 `true`로 설정 하기만 하면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-192">Simply set its `ID` to Discontinued and its `Enabled` property to `true`.</span></span>

## <a name="step-3-creating-thecategorynameediting-interface"></a><span data-ttu-id="f650e-193">3 단계:`CategoryName`편집 인터페이스 만들기</span><span class="sxs-lookup"><span data-stu-id="f650e-193">Step 3: Creating the`CategoryName`Editing Interface</span></span>

<span data-ttu-id="f650e-194">`CategoryName` Templatefield로 변환 s `EditItemTemplate`의 편집 인터페이스에는 `CategoryName` 데이터 필드의 값을 표시 하는 텍스트 상자가 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-194">The editing interface in the `CategoryName` TemplateField s `EditItemTemplate` contains a TextBox that displays the value of the `CategoryName` data field.</span></span> <span data-ttu-id="f650e-195">가능한 범주를 나열 하는 DropDownList로 대체 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-195">We need to replace this with a DropDownList that lists the possible categories.</span></span>

> [!NOTE]
> <span data-ttu-id="f650e-196">[데이터 수정 인터페이스 사용자 지정](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) 자습서에는 텍스트 상자와는 달리 DropDownList을 포함 하도록 템플릿을 사용자 지정 하는 방법에 대 한 자세한 설명이 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-196">The [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) tutorial contains a more thorough and complete discussion on customizing a template to include a DropDownList as opposed to a TextBox.</span></span> <span data-ttu-id="f650e-197">여기에 나와 있는 단계는 완료 되지만 tersely 제공 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-197">While the steps here are complete, they are presented tersely.</span></span> <span data-ttu-id="f650e-198">DropDownList 범주를 만들고 구성 하는 방법에 대 한 자세한 내용은 [데이터 수정 인터페이스 사용자 지정](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) 자습서를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="f650e-198">For a more in-depth look at creating and configuring the categories DropDownList, refer back to the [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) tutorial.</span></span>

<span data-ttu-id="f650e-199">도구 상자의 DropDownList을 `CategoryName` Templatefield로 변환 s `ItemTemplate`로 끌어 `ID`를 `Categories`로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-199">Drag a DropDownList from the Toolbox onto the `CategoryName` TemplateField s `ItemTemplate`, setting its `ID` to `Categories`.</span></span> <span data-ttu-id="f650e-200">이 시점에서는 일반적으로 스마트 태그를 통해 Dropdownlist s 데이터 원본을 정의 하 여 새 ObjectDataSource를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-200">At this point we would usually define the DropDownLists s data source through its smart tag, creating a new ObjectDataSource.</span></span> <span data-ttu-id="f650e-201">그러나이 경우 `ItemTemplate`내에 ObjectDataSource가 추가 됩니다. 그러면 각 GridView 행에 대해 ObjectDataSource 인스턴스가 생성 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-201">However, this will add the ObjectDataSource within the `ItemTemplate`, which will result in an ObjectDataSource instance created for each GridView row.</span></span> <span data-ttu-id="f650e-202">대신를 사용 하 여 GridView의 템플릿 필드 외부에 ObjectDataSource를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-202">Instead, let s create the ObjectDataSource outside of the GridView s TemplateFields.</span></span> <span data-ttu-id="f650e-203">템플릿 편집을 종료 하 고 objectdatasource를 도구 상자에서 `ProductsDataSource` ObjectDataSource 아래의 디자이너로 끌어옵니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-203">End the template editing and drag an ObjectDataSource from the Toolbox onto the Designer beneath the `ProductsDataSource` ObjectDataSource.</span></span> <span data-ttu-id="f650e-204">새 ObjectDataSource `CategoriesDataSource`의 이름을로 설정 하 고 `CategoriesBLL` 클래스 s `GetCategories` 메서드를 사용 하도록 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-204">Name the new ObjectDataSource `CategoriesDataSource` and configure it to use the `CategoriesBLL` class s `GetCategories` method.</span></span>

<span data-ttu-id="f650e-205">[범주 Bll 클래스를 사용 하도록 ObjectDataSource 구성 ![](batch-updating-cs/_static/image8.gif)](batch-updating-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="f650e-205">[![Configure the ObjectDataSource to Use the CategoriesBLL Class](batch-updating-cs/_static/image8.gif)](batch-updating-cs/_static/image13.png)</span></span>

<span data-ttu-id="f650e-206">**그림 8**: `CategoriesBLL` 클래스를 사용 하도록 ObjectDataSource 구성 ([전체 크기 이미지를 보려면 클릭](batch-updating-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="f650e-206">**Figure 8**: Configure the ObjectDataSource to Use the `CategoriesBLL` Class ([Click to view full-size image](batch-updating-cs/_static/image14.png))</span></span>

<span data-ttu-id="f650e-207">[GetCategories 메서드를 사용 하 여 범주 데이터를 검색 ![](batch-updating-cs/_static/image9.gif)](batch-updating-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="f650e-207">[![Retrieve the Category Data Using the GetCategories Method](batch-updating-cs/_static/image9.gif)](batch-updating-cs/_static/image15.png)</span></span>

<span data-ttu-id="f650e-208">**그림 9**: `GetCategories` 메서드를 사용 하 여 범주 데이터 검색 ([전체 크기 이미지를 보려면 클릭](batch-updating-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="f650e-208">**Figure 9**: Retrieve the Category Data Using the `GetCategories` Method ([Click to view full-size image](batch-updating-cs/_static/image16.png))</span></span>

<span data-ttu-id="f650e-209">이 ObjectDataSource는 단순히 데이터를 검색 하는 데 사용 되므로 업데이트 및 삭제 탭의 드롭다운 목록을 (없음)으로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-209">Since this ObjectDataSource is used merely to retrieve data, set the drop-down lists in the UPDATE and DELETE tabs to (None).</span></span> <span data-ttu-id="f650e-210">마침을 클릭하여 마법사를 완료합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-210">Click Finish to complete the wizard.</span></span>

<span data-ttu-id="f650e-211">[업데이트 및 삭제 탭의 드롭다운 목록을 (없음)으로 설정 ![](batch-updating-cs/_static/image10.gif)](batch-updating-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="f650e-211">[![Set the Drop-Down Lists in the UPDATE and DELETE Tabs to (None)](batch-updating-cs/_static/image10.gif)](batch-updating-cs/_static/image17.png)</span></span>

<span data-ttu-id="f650e-212">**그림 10**: 업데이트 및 삭제 탭의 드롭다운 목록을 (없음)로 설정 ([전체 크기 이미지를 보려면 클릭](batch-updating-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="f650e-212">**Figure 10**: Set the Drop-Down Lists in the UPDATE and DELETE Tabs to (None) ([Click to view full-size image](batch-updating-cs/_static/image18.png))</span></span>

<span data-ttu-id="f650e-213">마법사를 완료 한 후 `CategoriesDataSource`의 선언 태그는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-213">After completing the wizard, the `CategoriesDataSource` s declarative markup should look like the following:</span></span>

[!code-aspx[Main](batch-updating-cs/samples/sample2.aspx)]

<span data-ttu-id="f650e-214">`CategoriesDataSource` 생성 및 구성 된 상태에서 `CategoryName` Templatefield로 변환 s `ItemTemplate`으로 돌아가서 DropDownList의 스마트 태그에서 데이터 소스 선택 링크를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-214">With the `CategoriesDataSource` created and configured, return to the `CategoryName` TemplateField s `ItemTemplate` and, from the DropDownList s smart tag, click on the Choose Data Source link.</span></span> <span data-ttu-id="f650e-215">데이터 소스 구성 마법사의 첫 번째 드롭다운 목록에서 `CategoriesDataSource` 옵션을 선택 하 고 표시에 사용 되는 `CategoryName`을 값으로 `CategoryID` 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-215">In the Data Source Configuration wizard, select the `CategoriesDataSource` option from the first drop-down list and choose to have `CategoryName` used for the display and `CategoryID` as the value.</span></span>

<span data-ttu-id="f650e-216">[DropDownList을 범주 데이터 원본에 바인딩 ![](batch-updating-cs/_static/image11.gif)](batch-updating-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="f650e-216">[![Bind the DropDownList to the CategoriesDataSource](batch-updating-cs/_static/image11.gif)](batch-updating-cs/_static/image19.png)</span></span>

<span data-ttu-id="f650e-217">**그림 11**: DropDownList을 `CategoriesDataSource`에 바인딩 ([전체 크기 이미지를 보려면 클릭](batch-updating-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="f650e-217">**Figure 11**: Bind the DropDownList to the `CategoriesDataSource` ([Click to view full-size image](batch-updating-cs/_static/image20.png))</span></span>

<span data-ttu-id="f650e-218">이때 `Categories` DropDownList은 모든 범주를 나열 하지만 GridView 행에 바인딩된 제품의 적절 한 범주는 아직 자동으로 선택 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-218">At this point the `Categories` DropDownList lists all of the categories, but it does not yet automatically select the appropriate category for the product bound to the GridView row.</span></span> <span data-ttu-id="f650e-219">이를 수행 하려면 `Categories` DropDownList s `SelectedValue`을 제품 `CategoryID` 값으로 설정 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-219">To accomplish this we need to set the `Categories` DropDownList s `SelectedValue` to the product s `CategoryID` value.</span></span> <span data-ttu-id="f650e-220">DropDownList의 스마트 태그에서 데이터 바인딩 편집 링크를 클릭 하 고 그림 12와 같이 `SelectedValue` 속성을 `CategoryID` 데이터 필드에 연결 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-220">Click on the Edit DataBindings link from the DropDownList s smart tag and associate the `SelectedValue` property with the `CategoryID` data field as shown in Figure 12.</span></span>

![제품 CategoryID 값을 DropDownList s SelectedValue 속성에 바인딩합니다.](batch-updating-cs/_static/image12.gif)

<span data-ttu-id="f650e-222">**그림 12**: 제품 `CategoryID` 값을 DropDownList s `SelectedValue` 속성에 바인딩</span><span class="sxs-lookup"><span data-stu-id="f650e-222">**Figure 12**: Bind the Product s `CategoryID` Value to the DropDownList s `SelectedValue` Property</span></span>

<span data-ttu-id="f650e-223">마지막으로 발생 한 문제: 제품에 `CategoryID` 값이 지정 되지 않은 경우 `SelectedValue`의 데이터 바인딩 문이 예외를 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-223">One last problem remains: if the product doesn t have a `CategoryID` value specified then the databinding statement on `SelectedValue` will result in an exception.</span></span> <span data-ttu-id="f650e-224">이는 DropDownList에는 범주에 대 한 항목만 포함 되 고 `CategoryID`에 `NULL` 데이터베이스 값이 있는 제품에 대 한 옵션은 제공 하지 않기 때문입니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-224">This is because the DropDownList contains only items for the categories and does not offer an option for those products that have a `NULL` database value for `CategoryID`.</span></span> <span data-ttu-id="f650e-225">이를 해결 하려면 DropDownList s `AppendDataBoundItems` 속성을 `true`로 설정 하 고 드롭다운에 새 항목을 추가 하 여 선언적 구문에서 `Value` 속성을 생략 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-225">To remedy this, set the DropDownList s `AppendDataBoundItems` property to `true` and add a new item to the DropDownList, omitting the `Value` property from the declarative syntax.</span></span> <span data-ttu-id="f650e-226">즉, `Categories` DropDownList의 선언적 구문이 다음과 같이 표시 되는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-226">That is, make sure that the `Categories` DropDownList s declarative syntax looks like the following:</span></span>

[!code-aspx[Main](batch-updating-cs/samples/sample3.aspx)]

<span data-ttu-id="f650e-227">`<asp:ListItem Value="">`를 선택 하는 방법에 대 한 자세한 내용을 확인 하 고 `Value` 특성이 명시적으로 빈 문자열로 설정 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-227">Note how the `<asp:ListItem Value="">` -- Select One -- has its `Value` attribute explicitly set to an empty string.</span></span> <span data-ttu-id="f650e-228">이러한 추가 DropDownList 항목이 `NULL` 사례를 처리 하는 데 필요한 이유와 `Value` 속성을 빈 문자열에 할당 하는 이유를 보다 자세히 설명 하려면 [데이터 수정 인터페이스 사용자 지정](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) 자습서를 다시 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="f650e-228">Refer back to the [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) tutorial for a more thorough discussion on why this additional DropDownList item is needed to handle the `NULL` case and why assignment of the `Value` property to an empty string is essential.</span></span>

> [!NOTE]
> <span data-ttu-id="f650e-229">여기에는 잠재적 성능 및 확장성 문제가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-229">There is a potential performance and scalability issue here that is worth mentioning.</span></span> <span data-ttu-id="f650e-230">각 행에는 `CategoriesDataSource`를 데이터 소스로 사용 하는 DropDownList이 있으므로 `CategoriesBLL` 클래스 s `GetCategories` 메서드는 페이지 방문 당 *n* 번 호출 됩니다. 여기서 *n* 은 GridView의 행 수입니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-230">Since each row has a DropDownList that uses the `CategoriesDataSource` as its data source, the `CategoriesBLL` class s `GetCategories` method will be called *n* times per page visit, where *n* is the number of rows in the GridView.</span></span> <span data-ttu-id="f650e-231">`GetCategories`에 대 한 이러한 *n* 호출은 데이터베이스에 *n* 개의 쿼리를 발생 시킬 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-231">These *n* calls to `GetCategories` result in *n* queries to the database.</span></span> <span data-ttu-id="f650e-232">이러한 데이터베이스에 미치는 영향은 요청 당 캐시에서 또는 SQL 캐싱 종속성 또는 매우 짧은 시간 기반 만료를 사용 하는 캐싱 계층을 통해 반환 된 범주를 있으므로 안전성이 떨어질 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-232">This impact on the database could be lessened by caching the returned categories either in a per-request cache or through the Caching Layer using a SQL caching dependency or a very short time-based expiry.</span></span> <span data-ttu-id="f650e-233">요청당 캐싱 옵션에 대 한 자세한 내용은 [요청 당 캐시 저장소`HttpContext.Items`](http://aspnet.4guysfromrolla.com/articles/060904-1.aspx)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="f650e-233">For more information on the per-request caching option, see [`HttpContext.Items` a Per-Request Cache Store](http://aspnet.4guysfromrolla.com/articles/060904-1.aspx).</span></span>

## <a name="step-4-completing-the-editing-interface"></a><span data-ttu-id="f650e-234">4 단계: 편집 인터페이스 완료</span><span class="sxs-lookup"><span data-stu-id="f650e-234">Step 4: Completing the Editing Interface</span></span>

<span data-ttu-id="f650e-235">진행 상황을 보기 위해 일시 중지 하지 않고 GridView의 템플릿에 대 한 몇 가지 변경 내용을 만들었습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-235">We ve made a number of changes to the GridView s templates without pausing to view our progress.</span></span> <span data-ttu-id="f650e-236">잠시 시간을 내 서 브라우저를 통해 진행 상황을 확인 하세요.</span><span class="sxs-lookup"><span data-stu-id="f650e-236">Take a moment to view our progress through a browser.</span></span> <span data-ttu-id="f650e-237">그림 13에 표시 된 것 처럼 각 행은 셀의 편집 인터페이스를 포함 하는 `ItemTemplate`를 사용 하 여 렌더링 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-237">As Figure 13 shows, each row is rendered using its `ItemTemplate`, which contains the cell s editing interface.</span></span>

<span data-ttu-id="f650e-238">[각 GridView 행을 편집할 수 있는 ![](batch-updating-cs/_static/image13.gif)](batch-updating-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="f650e-238">[![Each GridView Row is Editable](batch-updating-cs/_static/image13.gif)](batch-updating-cs/_static/image21.png)</span></span>

<span data-ttu-id="f650e-239">**그림 13**: 각 GridView 행을 편집할 수 있습니다 ([전체 크기 이미지를 보려면 클릭](batch-updating-cs/_static/image22.png)).</span><span class="sxs-lookup"><span data-stu-id="f650e-239">**Figure 13**: Each GridView Row is Editable ([Click to view full-size image](batch-updating-cs/_static/image22.png))</span></span>

<span data-ttu-id="f650e-240">이 시점에서 주의 해야 하는 몇 가지 사소한 서식 문제가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-240">There are a few minor formatting issues that we should take care of at this point.</span></span> <span data-ttu-id="f650e-241">첫째, `UnitPrice` 값에는 소수점이 네 개 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-241">First, note that the `UnitPrice` value contains four decimal points.</span></span> <span data-ttu-id="f650e-242">이 문제를 해결 하려면 `UnitPrice` Templatefield로 변환 s `ItemTemplate`으로 돌아가서 TextBox의 스마트 태그에서 데이터 바인딩 편집 링크를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-242">To fix this, return to the `UnitPrice` TemplateField s `ItemTemplate` and, from the TextBox s smart tag, click on the Edit DataBindings link.</span></span> <span data-ttu-id="f650e-243">그런 다음 `Text` 속성을 숫자로 서식 지정 하도록 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-243">Next, specify that the `Text` property should be formatted as a number.</span></span>

![텍스트 속성을 숫자로 서식 지정](batch-updating-cs/_static/image14.gif)

<span data-ttu-id="f650e-245">**그림 14**: `Text` 속성을 숫자로 서식 지정</span><span class="sxs-lookup"><span data-stu-id="f650e-245">**Figure 14**: Format the `Text` Property as a Number</span></span>

<span data-ttu-id="f650e-246">둘째, `Discontinued` 열의 확인란을 왼쪽 맞춤으로 지정 하는 대신 가운데에 놓습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-246">Second, let s center the checkbox in the `Discontinued` column (rather than having it left-aligned).</span></span> <span data-ttu-id="f650e-247">GridView의 스마트 태그에서 열 편집을 클릭 하 고 왼쪽 아래 모퉁이의 필드 목록에서 `Discontinued` Templatefield로 변환를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-247">Click on Edit Columns from the GridView s smart tag and select the `Discontinued` TemplateField from the list of fields in the bottom left corner.</span></span> <span data-ttu-id="f650e-248">`ItemStyle`로 드릴 다운 하 고 그림 15와 같이 `HorizontalAlign` 속성을 가운데로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-248">Drill down into `ItemStyle` and set the `HorizontalAlign` property to Center as shown in Figure 15.</span></span>

![단종 된 확인란 가운데 맞춤](batch-updating-cs/_static/image15.gif)

<span data-ttu-id="f650e-250">**그림 15**: `Discontinued` 확인란 가운데 맞춤</span><span class="sxs-lookup"><span data-stu-id="f650e-250">**Figure 15**: Center the `Discontinued` CheckBox</span></span>

<span data-ttu-id="f650e-251">그런 다음 ValidationSummary 컨트롤을 페이지에 추가 하 고 해당 `ShowMessageBox` 속성을 `true`로 설정 하 고 `ShowSummary` 속성을 `false`로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-251">Next, add a ValidationSummary control to the page and set its `ShowMessageBox` property to `true` and its `ShowSummary` property to `false`.</span></span> <span data-ttu-id="f650e-252">또한 클릭 하면 사용자의 변경 내용을 업데이트 하는 단추 웹 컨트롤을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-252">Also add the Button Web controls that, when clicked, will update the user s changes.</span></span> <span data-ttu-id="f650e-253">특히 GridView 위에 있는 Button 웹 컨트롤 두 개를 추가 하 고 그 아래에 하나를 추가 하 여 두 컨트롤 `Text` 속성을 설정 하 여 제품을 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-253">Specifically, add two Button Web controls, one above the GridView and one below it, setting both controls `Text` properties to Update Products .</span></span>

<span data-ttu-id="f650e-254">GridView의 편집 인터페이스는 `ItemTemplate` s의 템플릿 필드에 정의 되어 있으므로 `EditItemTemplate`는 불필요 하 고 삭제 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-254">Since the GridView s editing interface is defined in its TemplateFields `ItemTemplate` s, the `EditItemTemplate` s are superfluous and may be deleted.</span></span>

<span data-ttu-id="f650e-255">위에서 언급 한 서식을 변경한 후 단추 컨트롤을 추가 하 고 불필요 한 `EditItemTemplate` s를 제거 하 고 나면 페이지의 선언적 구문은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-255">After making the above mentioned formatting changes, adding the Button controls, and removing the unnecessary `EditItemTemplate` s, your page s declarative syntax should look like the following:</span></span>

[!code-aspx[Main](batch-updating-cs/samples/sample4.aspx)]

<span data-ttu-id="f650e-256">그림 16은 단추 웹 컨트롤이 추가 되 고 형식이 변경 된 후 브라우저를 통해 볼 때이 페이지를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-256">Figure 16 shows this page when viewed through a browser after the Button Web controls have been added and the formatting changes made.</span></span>

<span data-ttu-id="f650e-257">[이제 페이지에 두 개의 업데이트 제품 단추가 포함 됩니다 ![](batch-updating-cs/_static/image16.gif)](batch-updating-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="f650e-257">[![The Page Now Includes Two Update Products Buttons](batch-updating-cs/_static/image16.gif)](batch-updating-cs/_static/image23.png)</span></span>

<span data-ttu-id="f650e-258">**그림 16**: 이제 페이지에 두 개의 업데이트 제품 단추가 포함 됩니다 ([전체 크기 이미지를 보려면 클릭](batch-updating-cs/_static/image24.png)).</span><span class="sxs-lookup"><span data-stu-id="f650e-258">**Figure 16**: The Page Now Includes Two Update Products Buttons ([Click to view full-size image](batch-updating-cs/_static/image24.png))</span></span>

## <a name="step-5-updating-the-products"></a><span data-ttu-id="f650e-259">5 단계: 제품 업데이트</span><span class="sxs-lookup"><span data-stu-id="f650e-259">Step 5: Updating the Products</span></span>

<span data-ttu-id="f650e-260">사용자가이 페이지를 방문 하면 수정 사항이 적용 되 고 두 개의 업데이트 제품 단추 중 하나를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-260">When a user visits this page they will make their modifications and then click one of the two Update Products buttons.</span></span> <span data-ttu-id="f650e-261">이 시점에서 각 행에 대 한 사용자가 입력 한 값을 `ProductsDataTable` 인스턴스에 저장 한 다음이를 BLL 메서드에 전달 해야 합니다. 그런 다음 해당 `ProductsDataTable` 인스턴스를 DAL의 `UpdateWithTransaction` 메서드로 전달 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-261">At that point we need to somehow save the user-entered values for each row into a `ProductsDataTable` instance and then pass that to a BLL method that will then pass that `ProductsDataTable` instance to the DAL s `UpdateWithTransaction` method.</span></span> <span data-ttu-id="f650e-262">[이전 자습서](wrapping-database-modifications-within-a-transaction-cs.md)에서 만든 `UpdateWithTransaction` 메서드는 변경 내용 일괄 처리가 원자성 작업으로 업데이트 되도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-262">The `UpdateWithTransaction` method, which we created in the [preceding tutorial](wrapping-database-modifications-within-a-transaction-cs.md), ensures that the batch of changes will be updated as an atomic operation.</span></span>

<span data-ttu-id="f650e-263">`BatchUpdate.aspx.cs`에서 `BatchUpdate` 라는 메서드를 만들고 다음 코드를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-263">Create a method named `BatchUpdate` in `BatchUpdate.aspx.cs` and add the following code:</span></span>

[!code-csharp[Main](batch-updating-cs/samples/sample5.cs)]

<span data-ttu-id="f650e-264">이 메서드는 BLL `GetProducts` 메서드를 호출 하 여 `ProductsDataTable`의 모든 제품을 다시 가져오는 방식으로 시작 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-264">This method starts out by getting all of the products back in a `ProductsDataTable` via a call to the BLL s `GetProducts` method.</span></span> <span data-ttu-id="f650e-265">그런 다음 `ProductGrid` GridView s [`Rows` 컬렉션](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rows(VS.80).aspx)을 열거 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-265">It then enumerates the `ProductGrid` GridView s [`Rows` collection](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rows(VS.80).aspx).</span></span> <span data-ttu-id="f650e-266">`Rows` 컬렉션에는 GridView에 표시 되는 각 행에 대 한 [`GridViewRow` 인스턴스가](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridviewrow.aspx) 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-266">The `Rows` collection contains a [`GridViewRow` instance](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridviewrow.aspx) for each row displayed in the GridView.</span></span> <span data-ttu-id="f650e-267">페이지당 최대 10 개의 행을 표시 하기 때문에 GridView s `Rows` 컬렉션에는 10 개 이하의 항목이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-267">Since we are showing at most ten rows per page, the GridView s `Rows` collection will have no more than ten items.</span></span>

<span data-ttu-id="f650e-268">각 행에 대해 `ProductID`은 `DataKeys` 컬렉션에서 grabbed `ProductsDataTable`에서 적절 한 `ProductsRow` 선택 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-268">For each row the `ProductID` is grabbed from the `DataKeys` collection and the appropriate `ProductsRow` is selected from the `ProductsDataTable`.</span></span> <span data-ttu-id="f650e-269">4 개의 Templatefield로 변환 입력 컨트롤은 프로그래밍 방식으로 참조 되며 해당 값은 `ProductsRow` 인스턴스 속성에 할당 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-269">The four TemplateField input controls are programmatically referenced and their values assigned to the `ProductsRow` instance s properties.</span></span> <span data-ttu-id="f650e-270">각 GridView 행의 값을 사용 하 여 `ProductsDataTable`를 업데이트 한 후에는 해당 값이 이전 자습서에서 살펴본 것 처럼 BLL s `UpdateWithTransaction` 메서드에 전달 되며,이 메서드는 DAL s `UpdateWithTransaction` 메서드를 호출 하기만 하면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-270">After each GridView row s values have been used to update the `ProductsDataTable`, it s passed to the BLL s `UpdateWithTransaction` method which, as we saw in the preceding tutorial, simply calls down into the DAL s `UpdateWithTransaction` method.</span></span>

<span data-ttu-id="f650e-271">이 자습서에 사용 되는 일괄 업데이트 알고리즘은 제품 정보가 변경 되었는지 여부에 관계 없이 GridView의 행에 해당 하는 `ProductsDataTable`의 각 행을 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-271">The batch update algorithm used for this tutorial updates each row in the `ProductsDataTable` that corresponds to a row in the GridView, regardless of whether the product s information has been changed.</span></span> <span data-ttu-id="f650e-272">이러한 블라인드 업데이트는 일반적으로 성능 문제가 아니지만 데이터베이스 테이블에 대 한 변경 내용을 다시 감사 하는 경우 불필요 한 레코드가 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-272">While such blind updates aren't usually a performance issue, they can lead to superfluous records if you re auditing changes to the database table.</span></span> <span data-ttu-id="f650e-273">[일괄 처리 업데이트 수행](../editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs.md) 자습서로 돌아가서 DataList를 사용 하 여 Batch 업데이트 인터페이스를 탐색 하 고 사용자가 실제로 수정한 레코드만 업데이트 하는 코드를 추가 했습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-273">Back in the [Performing Batch Updates](../editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs.md) tutorial we explored a batch updating interface with the DataList and added code that would only update those records that were actually modified by the user.</span></span> <span data-ttu-id="f650e-274">원할 경우 언제 든 지이 자습서의 코드를 업데이트 하기 위해 [Batch 업데이트를 수행](../editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs.md) 하는 방법을 자유롭게 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-274">Feel free to use the techniques from [Performing Batch Updates](../editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs.md) to update the code in this tutorial, if desired.</span></span>

> [!NOTE]
> <span data-ttu-id="f650e-275">스마트 태그를 통해 데이터 소스를 GridView에 바인딩하는 경우 Visual Studio에서 자동으로 GridView s `DataKeyNames` 속성에 데이터 원본의 기본 키 값을 할당 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-275">When binding the data source to the GridView through its smart tag, Visual Studio automatically assigns the data source s primary key value(s) to the GridView s `DataKeyNames` property.</span></span> <span data-ttu-id="f650e-276">1 단계에 설명 된 대로 GridView s 스마트 태그를 사용 하 여 ObjectDataSource를 GridView에 바인딩하지 않은 경우 `DataKeys` 컬렉션을 통해 각 행에 대 한 `ProductID` 값에 액세스 하려면 GridView s `DataKeyNames` 속성을 ProductID로 수동으로 설정 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-276">If you did not bind the ObjectDataSource to the GridView through the GridView s smart tag as outlined in Step 1, then you will need to manually set the GridView s `DataKeyNames` property to ProductID in order to access the `ProductID` value for each row through the `DataKeys` collection.</span></span>

<span data-ttu-id="f650e-277">`BatchUpdate`에 사용 되는 코드는 BLL의 `UpdateProduct` 메서드에서 사용 되는 코드와 유사 하며, `UpdateProduct` 메서드의 주요 차이점은 아키텍처에서 단일 `ProductRow` 인스턴스만 검색 한다는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-277">The code used in `BatchUpdate` is similar to that used in the BLL s `UpdateProduct` methods, the main difference being that in the `UpdateProduct` methods only a single `ProductRow` instance is retrieved from the architecture.</span></span> <span data-ttu-id="f650e-278">`ProductRow` 속성을 할당 하는 코드는 전체 패턴과 마찬가지로 `BatchUpdate`의 `foreach` 루프 내에 있는 코드와 `UpdateProducts` 메서드와 동일 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-278">The code that assigns the properties of the `ProductRow` is the same between the `UpdateProducts` methods and the code within the `foreach` loop in `BatchUpdate`, as is the overall pattern.</span></span>

<span data-ttu-id="f650e-279">이 자습서를 완료 하려면 제품 업데이트 단추 중 하나를 클릭할 때 `BatchUpdate` 메서드를 호출 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-279">To complete this tutorial, we need to have the `BatchUpdate` method invoked when either of the Update Products buttons is clicked.</span></span> <span data-ttu-id="f650e-280">이러한 두 단추 컨트롤의 `Click` 이벤트에 대 한 이벤트 처리기를 만들고 이벤트 처리기에 다음 코드를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-280">Create event handlers for the `Click` events of these two Button controls and add the following code in the event handlers:</span></span>

[!code-csharp[Main](batch-updating-cs/samples/sample6.cs)]

<span data-ttu-id="f650e-281">먼저 `BatchUpdate`를 호출 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-281">First a call is made to `BatchUpdate`.</span></span> <span data-ttu-id="f650e-282">그런 다음 `ClientScript property`는 제품을 읽는 messagebox를 표시 하는 JavaScript를 삽입 하는 데 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-282">Next, the `ClientScript property` is used to inject JavaScript that will display a messagebox that reads The products have been updated.</span></span>

<span data-ttu-id="f650e-283">이 코드를 테스트 하는 데 몇 분 정도 걸립니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-283">Take a minute to test out this code.</span></span> <span data-ttu-id="f650e-284">브라우저를 통해 `BatchUpdate.aspx`를 방문 하 여 여러 행을 편집 하 고 업데이트 제품 단추 중 하나를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-284">Visit `BatchUpdate.aspx` through a browser, edit a number of rows, and click one of the Update Products buttons.</span></span> <span data-ttu-id="f650e-285">입력 유효성 검사 오류가 없는 경우 제품이 업데이트 되었다는 messagebox가 표시 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-285">Assuming there are no input validation errors, you should see a messagebox that reads The products have been updated.</span></span> <span data-ttu-id="f650e-286">업데이트의 원자성을 확인 하려면 `UnitPrice` 값 1234.56을 허용 하지 않는 것과 같은 임의 `CHECK` 제약 조건을 추가 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-286">To verify the atomicity of the update, consider adding a random `CHECK` constraint, like one that disallows `UnitPrice` values of 1234.56.</span></span> <span data-ttu-id="f650e-287">그런 다음 `BatchUpdate.aspx`에서 여러 레코드를 편집 하 여 제품의 `UnitPrice` 값 중 하나를 금지 값 (1234.56)으로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-287">Then from `BatchUpdate.aspx`, edit a number of records, making sure to set one of the product s `UnitPrice` value to the forbidden value ( 1234.56 ).</span></span> <span data-ttu-id="f650e-288">이렇게 하면 해당 일괄 처리 작업 중에 다른 변경 내용으로 제품 업데이트를 클릭 하면 오류가 발생 하 여 원래 값으로 롤백됩니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-288">This should result in an error when clicking Update Products with the other changes during that batch operation rolled back to their original values.</span></span>

## <a name="an-alternativebatchupdatemethod"></a><span data-ttu-id="f650e-289">대체`BatchUpdate`메서드</span><span class="sxs-lookup"><span data-stu-id="f650e-289">An Alternative`BatchUpdate`Method</span></span>

<span data-ttu-id="f650e-290">방금 검사 한 `BatchUpdate` 메서드는 BLL의 `GetProducts` 메서드에서 *모든* 제품을 검색 한 다음 GridView에 표시 된 레코드만 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-290">The `BatchUpdate` method we just examined retrieves *all* of the products from the BLL s `GetProducts` method and then updates just those records that appear in the GridView.</span></span> <span data-ttu-id="f650e-291">이 방법은 GridView가 페이징을 사용 하지 않는 경우에 적합 하지만,이 경우에는 수백, 수천 또는 수십 개의 제품이 있을 수 있지만 GridView에는 행이 10 개만 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-291">This approach is ideal if the GridView does not use paging, but if it does, there may be hundreds, thousands, or tens of thousands of products, but only ten rows in the GridView.</span></span> <span data-ttu-id="f650e-292">이 경우에는 데이터베이스의 모든 제품을 수정 하는 데 필요한 모든 제품을 수정 하는 것이 이상적이 지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-292">In such a case, getting all of the products from the database only to modify 10 of them is less than ideal.</span></span>

<span data-ttu-id="f650e-293">이러한 유형의 경우 대신 다음 `BatchUpdateAlternate` 방법을 사용 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-293">For those types of situations, consider using the following `BatchUpdateAlternate` method instead:</span></span>

[!code-csharp[Main](batch-updating-cs/samples/sample7.cs)]

<span data-ttu-id="f650e-294">`BatchMethodAlternate`는 `products`라는 비어 있는 새 `ProductsDataTable`를 만들어 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-294">`BatchMethodAlternate` starts by creating a new empty `ProductsDataTable` named `products`.</span></span> <span data-ttu-id="f650e-295">그런 다음 GridView s `Rows` 컬렉션을 단계별로 수행 하 고 각 행에 대해 BLL의 `GetProductByProductID(productID)` 메서드를 사용 하 여 특정 제품 정보를 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-295">It then steps through the GridView s `Rows` collection and for each row gets the particular product information using the BLL s `GetProductByProductID(productID)` method.</span></span> <span data-ttu-id="f650e-296">검색 된 `ProductsRow` 인스턴스는 `BatchUpdate`와 동일한 방식으로 속성을 업데이트 했지만 행을 업데이트 한 후 DataTable s [`ImportRow(DataRow)` 메서드](https://msdn.microsoft.com/library/system.data.datatable.importrow(VS.80).aspx)를 통해 `products``ProductsDataTable`으로 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-296">The retrieved `ProductsRow` instance has its properties updated in the same fashion as `BatchUpdate`, but after updating the row it is imported into the `products``ProductsDataTable` via the DataTable s [`ImportRow(DataRow)` method](https://msdn.microsoft.com/library/system.data.datatable.importrow(VS.80).aspx).</span></span>

<span data-ttu-id="f650e-297">`foreach` 루프가 완료 되 면 GridView의 각 행에 대해 하나의 `ProductsRow` 인스턴스가 `products`에 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-297">After the `foreach` loop completes, `products` contains one `ProductsRow` instance for each row in the GridView.</span></span> <span data-ttu-id="f650e-298">각 `ProductsRow` 인스턴스는 업데이트 대신 `products`에 추가 되었으므로 `UpdateWithTransaction` 메서드에 무조건 전달 하면 `ProductsTableAdapter`는 각 레코드를 데이터베이스에 삽입 하려고 시도 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-298">Since each of the `ProductsRow` instances have been added to the `products` (instead of updated), if we blindly pass it to the `UpdateWithTransaction` method the `ProductsTableAdapter` will try to insert each of the records into the database.</span></span> <span data-ttu-id="f650e-299">대신 이러한 각 행이 수정 되었는지 (추가 되지 않음) 지정 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-299">Instead, we need to specify that each of these rows has been modified (not added).</span></span>

<span data-ttu-id="f650e-300">`UpdateProductsWithTransaction`이름이 지정 된 BLL에 새 메서드를 추가 하 여이를 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-300">This can be accomplished by adding a new method to the BLL named `UpdateProductsWithTransaction`.</span></span> <span data-ttu-id="f650e-301">아래에 표시 된 `UpdateProductsWithTransaction`는 `ProductsDataTable`의 각 `ProductsRow` 인스턴스의 `RowState`를 `Modified`로 설정 하 고 `ProductsDataTable`를 DAL s `UpdateWithTransaction` 메서드에 전달 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-301">`UpdateProductsWithTransaction`, shown below, sets the `RowState` of each of the `ProductsRow` instances in the `ProductsDataTable` to `Modified` and then passes the `ProductsDataTable` to the DAL s `UpdateWithTransaction` method.</span></span>

[!code-csharp[Main](batch-updating-cs/samples/sample8.cs)]

## <a name="summary"></a><span data-ttu-id="f650e-302">요약</span><span class="sxs-lookup"><span data-stu-id="f650e-302">Summary</span></span>

<span data-ttu-id="f650e-303">GridView는 기본 제공 행 단위 편집 기능을 제공 하지만 완전히 편집할 수 있는 인터페이스를 만드는 데는 지원 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-303">The GridView provides built-in per-row editing capabilities, but lacks support for creating fully editable interfaces.</span></span> <span data-ttu-id="f650e-304">이 자습서에서 보았듯이 이러한 인터페이스는 가능 하지만 약간의 작업이 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-304">As we saw in this tutorial, such interfaces are possible, but require a bit of work.</span></span> <span data-ttu-id="f650e-305">모든 행을 편집할 수 있는 GridView를 만들려면 GridView의 필드를 템플릿 필드로 변환 하 고 `ItemTemplate` 내에서 편집 인터페이스를 정의 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-305">To create a GridView where every row is editable, we need to convert the GridView s fields into TemplateFields and define the editing interface within the `ItemTemplate` s.</span></span> <span data-ttu-id="f650e-306">또한 모든 형식 업데이트 단추 웹 컨트롤을 GridView와 별도로 페이지에 추가 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-306">Additionally, Update All -type Button Web controls must be added to the page, separate from the GridView.</span></span> <span data-ttu-id="f650e-307">이러한 단추 `Click` 이벤트 처리기는 GridView의 `Rows` 컬렉션을 열거 하 고, `ProductsDataTable`에 변경 내용을 저장 하 고, 업데이트 된 정보를 적절 한 BLL 메서드에 전달 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-307">These Buttons `Click` event handlers need to enumerate the GridView s `Rows` collection, store the changes in a `ProductsDataTable`, and pass the updated information into the appropriate BLL method.</span></span>

<span data-ttu-id="f650e-308">다음 자습서에서는 batch 삭제를 위한 인터페이스를 만드는 방법을 알아봅니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-308">In the next tutorial we'll see how to create an interface for batch deleting.</span></span> <span data-ttu-id="f650e-309">특히 각 GridView 행은 확인란을 포함 하 고, 모든 형식 업데이트 단추 대신 선택한 행 삭제 단추를 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-309">In particular, each GridView row will include a checkbox and instead of Update All -type buttons, we'll have Delete Selected Rows buttons.</span></span>

<span data-ttu-id="f650e-310">행복 한 프로그래밍</span><span class="sxs-lookup"><span data-stu-id="f650e-310">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="f650e-311">저자 정보</span><span class="sxs-lookup"><span data-stu-id="f650e-311">About the Author</span></span>

<span data-ttu-id="f650e-312">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)(7 개의 ASP/ASP. NET books 및 [4GuysFromRolla.com](http://www.4guysfromrolla.com)창립자)은 1998부터 Microsoft 웹 기술을 사용 하 여 작업 했습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-312">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="f650e-313">Scott은 독립 컨설턴트, 강사 및 기록기로 작동 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-313">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="f650e-314">최신 책은 [*24 시간 이내에 ASP.NET 2.0을 sams teach yourself*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)것입니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-314">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="f650e-315">mitchell@4GuysFromRolla.com에 도달할 수 있습니다 [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f650e-315">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="f650e-316">또는 블로그를 통해 [http://ScottOnWriting.NET](http://ScottOnWriting.NET)에서 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-316">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="f650e-317">특별히 감사 합니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-317">Special Thanks To</span></span>

<span data-ttu-id="f650e-318">이 자습서 시리즈는 많은 유용한 검토자가 검토 했습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-318">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="f650e-319">이 자습서에 대 한 리드 검토자는 Teresa Murphy 및 David Suru 였습니다.</span><span class="sxs-lookup"><span data-stu-id="f650e-319">Lead reviewers for this tutorial were Teresa Murphy and David Suru.</span></span> <span data-ttu-id="f650e-320">예정 된 MSDN 문서를 검토 하는 데 관심이 있나요?</span><span class="sxs-lookup"><span data-stu-id="f650e-320">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="f650e-321">그렇다면mitchell@4GuysFromRolla.com에서 줄을 삭제 [합니다.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f650e-321">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="f650e-322">[이전](wrapping-database-modifications-within-a-transaction-cs.md)
> [다음](batch-deleting-cs.md)</span><span class="sxs-lookup"><span data-stu-id="f650e-322">[Previous](wrapping-database-modifications-within-a-transaction-cs.md)
[Next](batch-deleting-cs.md)</span></span>
