---
uid: web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs
title: 일괄 업데이트 (C#)를 수행 합니다. | Microsoft Docs
author: rick-anderson
description: 완벽 하 게 편집할 만드는 방법 알아보기 DataList에 있는 모든 해당 항목의 편집 모드와 ' 모두 업데이트 ' 단추를 클릭 하 여 해당 값을 저장할 수 있습니다 합니다...
ms.author: riande
ms.date: 10/30/2006
ms.assetid: 57743ca7-5695-4e07-aed1-44b297f245a9
msc.legacyurl: /web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/performing-batch-updates-cs
msc.type: authoredcontent
ms.openlocfilehash: 388637d67594d6431a134673cf85b3b18098136e
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/17/2019
ms.locfileid: "59402754"
---
# <a name="performing-batch-updates-c"></a><span data-ttu-id="5429f-103">일괄 처리 업데이트 수행(C#)</span><span class="sxs-lookup"><span data-stu-id="5429f-103">Performing Batch Updates (C#)</span></span>

<span data-ttu-id="5429f-104">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="5429f-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="5429f-105">[샘플 앱을 다운로드](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_37_CS.exe) 또는 [PDF 다운로드](performing-batch-updates-cs/_static/datatutorial37cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="5429f-105">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_37_CS.exe) or [Download PDF](performing-batch-updates-cs/_static/datatutorial37cs1.pdf)</span></span>

> <span data-ttu-id="5429f-106">완벽 하 게 편집할 만드는 방법 알아보기 DataList에 있는 모든 해당 항목의 편집 모드 및 페이지의 "모두 업데이트" 단추를 클릭 하 여 해당 값을 저장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-106">Learn how to create a fully-editable DataList where all of its items are in edit mode and whose values can be saved by clicking an "Update All" button on the page.</span></span>


## <a name="introduction"></a><span data-ttu-id="5429f-107">소개</span><span class="sxs-lookup"><span data-stu-id="5429f-107">Introduction</span></span>

<span data-ttu-id="5429f-108">에 [이전 자습서](an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md) 는 항목 수준 DataList를 만드는 방법을 살펴보았습니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-108">In the [preceding tutorial](an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md) we examined how to create an item-level DataList.</span></span> <span data-ttu-id="5429f-109">표준 편집 가능한 GridView DataList에서 각 항목에 포함 된 같은 편집 단추를 클릭 하면 항목 편집할 수 없게 합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-109">Like the standard editable GridView, each item in the DataList included an Edit button that, when clicked, would make the item editable.</span></span> <span data-ttu-id="5429f-110">이 항목 수준만 가끔 업데이트 되는 데이터에 적합 합니다 편집 하는 동안 많은 레코드를 편집 하려면 사용자 특정 사용 사례 시나리오에 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-110">While this item-level editing works well for data that is only updated occasionally, certain use case scenarios require the user to edit many records.</span></span> <span data-ttu-id="5429f-111">사용자 수십 개의 레코드를 편집 해야 하 고, 편집을 클릭 하 고, 해당 변경 하 고, 각각에 대 한 업데이트를 클릭 해야 하는 경우 자신의 생산성 클릭 양을 방해가 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-111">If a user needs to edit dozens of records and is forced to click Edit, make their changes, and click Update for each one, the amount of clicking can hamper her productivity.</span></span> <span data-ttu-id="5429f-112">이러한 상황에서는 더 나은 옵션을 제공 하는 것을 완벽 하 게 편집할 DataList 곳 *모든* 해당 항목에 편집 모드와 페이지에서 모두 업데이트 단추를 클릭 하 여 해당 값을 편집할 수 있습니다 (그림 1 참조).</span><span class="sxs-lookup"><span data-stu-id="5429f-112">In such situations, a better option is to provide a fully-editable DataList, one where *all* of its items are in edit mode and whose values can be edited by clicking an Update All button on the page (see Figure 1).</span></span>


<span data-ttu-id="5429f-113">[![완벽 하 게 편집 가능한 DataList의 각 항목을 수정할 수 있습니다.](performing-batch-updates-cs/_static/image2.png)](performing-batch-updates-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="5429f-113">[![Each Item in a Fully Editable DataList can be Modified](performing-batch-updates-cs/_static/image2.png)](performing-batch-updates-cs/_static/image1.png)</span></span>

<span data-ttu-id="5429f-114">**그림 1**: 완벽 하 게 편집 가능한 DataList의 각 항목을 수정할 수 있습니다 ([클릭 하 여 큰 이미지 보기](performing-batch-updates-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="5429f-114">**Figure 1**: Each Item in a Fully Editable DataList can be Modified ([Click to view full-size image](performing-batch-updates-cs/_static/image3.png))</span></span>


<span data-ttu-id="5429f-115">이 자습서에서는 사용자가 완벽 하 게 편집할 DataList를 사용 하 여 공급 업체 주소 정보를 업데이트할 수 있게 하는 방법을 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-115">In this tutorial we'll examine how to enable users to update suppliers address information using a fully editable DataList.</span></span>

## <a name="step-1-create-the-editable-user-interface-in-the-datalist-s-itemtemplate"></a><span data-ttu-id="5429f-116">1단계: DataList의 ItemTemplate의 편집 가능한 사용자 인터페이스 만들기</span><span class="sxs-lookup"><span data-stu-id="5429f-116">Step 1: Create the Editable User Interface in the DataList s ItemTemplate</span></span>

<span data-ttu-id="5429f-117">이전 자습서에서는 표준, 항목 수준 편집 가능한 DataList를 만드는 것을 사용 했던 두 템플릿:</span><span class="sxs-lookup"><span data-stu-id="5429f-117">In the preceding tutorial, where we creating a standard, item-level editable DataList, we used two templates:</span></span>

- <span data-ttu-id="5429f-118">`ItemTemplate` 읽기 전용 사용자 인터페이스 (각 제품 s 이름과 가격을 표시 하는 것에 대 한 레이블 웹 컨트롤)를 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-118">`ItemTemplate` contained the read-only user interface (the Label Web controls for displaying each product s name and price).</span></span>
- <span data-ttu-id="5429f-119">`EditItemTemplate` 편집 모드 사용자 인터페이스 (두 개의 텍스트 웹 컨트롤)를 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-119">`EditItemTemplate` contained the edit mode user interface (the two TextBox Web controls).</span></span>

<span data-ttu-id="5429f-120">DataList s `EditItemIndex` 속성은 무엇을 나타냅니다 `DataListItem` (있는 경우)를 사용 하 여 렌더링 되는 `EditItemTemplate`합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-120">The DataList s `EditItemIndex` property dictates what `DataListItem` (if any) is rendered using the `EditItemTemplate`.</span></span> <span data-ttu-id="5429f-121">특히 합니다 `DataListItem` 해당 `ItemIndex` 값과 s DataList 일치 `EditItemIndex` 속성은 사용 하 여 렌더링 됩니다는 `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="5429f-121">In particular, the `DataListItem` whose `ItemIndex` value matches the DataList s `EditItemIndex` property is rendered using the `EditItemTemplate`.</span></span> <span data-ttu-id="5429f-122">이 모델에는 완벽 하 게 편집할 DataList를 만들 때 시간만 폭포 간격에 하나의 항목을 편집할 수 있습니다 하는 경우에 작동 합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-122">This model works well when only one item can be edited at a time, but falls apart when creating a fully-editable DataList.</span></span>

<span data-ttu-id="5429f-123">완벽 하 게 편집할 DataList에 대 한 원하는 *모든* 의 `DataListItem` 를 편집할 수 있는 인터페이스를 사용 하 여 렌더링 합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-123">For a fully editable DataList, we want *all* of the `DataListItem` s to render using the editable interface.</span></span> <span data-ttu-id="5429f-124">이 수행 하는 가장 간단한 방법에서 편집할 수 있는 인터페이스를 정의 하는 것은 `ItemTemplate`합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-124">The simplest way to accomplish this is to define the editable interface in the `ItemTemplate`.</span></span> <span data-ttu-id="5429f-125">공급 업체 주소 정보를 수정 하는 것에 대 한 편집 가능한 인터페이스 주소, 도시 및 국가 값에 대 한 텍스트 및 텍스트 상자와 공급 업체 이름을 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-125">For modifying the suppliers address information, the editable interface contains the supplier name as text and then TextBoxes for the address, city, and country values.</span></span>

<span data-ttu-id="5429f-126">열어서 시작 합니다 `BatchUpdate.aspx` 페이지에서 DataList 컨트롤을 추가 하 고 설정 해당 `ID` 속성을 `Suppliers`입니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-126">Start by opening the `BatchUpdate.aspx` page, add a DataList control, and set its `ID` property to `Suppliers`.</span></span> <span data-ttu-id="5429f-127">DataList s 스마트 태그에서 이라는 새 ObjectDataSource 컨트롤을 추가 하도록 선택할 `SuppliersDataSource`합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-127">From the DataList s smart tag, opt to add a new ObjectDataSource control named `SuppliersDataSource`.</span></span>


<span data-ttu-id="5429f-128">[![SuppliersDataSource 라는 새로운 ObjectDataSource는 만들기](performing-batch-updates-cs/_static/image5.png)](performing-batch-updates-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="5429f-128">[![Create a New ObjectDataSource Named SuppliersDataSource](performing-batch-updates-cs/_static/image5.png)](performing-batch-updates-cs/_static/image4.png)</span></span>

<span data-ttu-id="5429f-129">**그림 2**: 명명 된 새 ObjectDataSource 만들려면 `SuppliersDataSource` ([큰 이미지를 보려면 클릭](performing-batch-updates-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="5429f-129">**Figure 2**: Create a New ObjectDataSource Named `SuppliersDataSource` ([Click to view full-size image](performing-batch-updates-cs/_static/image6.png))</span></span>


<span data-ttu-id="5429f-130">ObjectDataSource를 사용 하 여 데이터를 검색할 구성 합니다 `SuppliersBLL` s 클래스 `GetSuppliers()` 메서드 (그림 3 참조).</span><span class="sxs-lookup"><span data-stu-id="5429f-130">Configure the ObjectDataSource to retrieve data using the `SuppliersBLL` class s `GetSuppliers()` method (see Figure 3).</span></span> <span data-ttu-id="5429f-131">이전 자습서에서가 아니라 ObjectDataSource 통해 공급 업체 정보를 업데이트와 마찬가지로 비즈니스 논리 계층와 직접 협업할 수 했습니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-131">As with the preceding tutorial, rather than updating the supplier information through the ObjectDataSource, we'll work directly with the Business Logic Layer.</span></span> <span data-ttu-id="5429f-132">따라서 업데이트 탭에서 드롭 다운 목록 (없음)을 설정 (그림 4 참조).</span><span class="sxs-lookup"><span data-stu-id="5429f-132">Therefore, set the drop-down list to (None) in the UPDATE tab (see Figure 4).</span></span>


<span data-ttu-id="5429f-133">[![GetSuppliers() 메서드를 사용 하 여 공급 업체 정보를 검색 합니다.](performing-batch-updates-cs/_static/image8.png)](performing-batch-updates-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="5429f-133">[![Retrieve Supplier Information Using the GetSuppliers() Method](performing-batch-updates-cs/_static/image8.png)](performing-batch-updates-cs/_static/image7.png)</span></span>

<span data-ttu-id="5429f-134">**그림 3**: 사용 하 여 공급 업체 정보를 검색 합니다 `GetSuppliers()` 메서드 ([큰 이미지를 보려면 클릭](performing-batch-updates-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="5429f-134">**Figure 3**: Retrieve Supplier Information Using the `GetSuppliers()` Method ([Click to view full-size image](performing-batch-updates-cs/_static/image9.png))</span></span>


<span data-ttu-id="5429f-135">[![(없음) 드롭다운 목록에서 업데이트 탭 설정](performing-batch-updates-cs/_static/image11.png)](performing-batch-updates-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="5429f-135">[![Set the Drop-Down List to (None) in the UPDATE Tab](performing-batch-updates-cs/_static/image11.png)](performing-batch-updates-cs/_static/image10.png)</span></span>

<span data-ttu-id="5429f-136">**그림 4**: (없음) 드롭다운 목록에서 업데이트 탭 설정 ([클릭 하 여 큰 이미지 보기](performing-batch-updates-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="5429f-136">**Figure 4**: Set the Drop-Down List to (None) in the UPDATE Tab ([Click to view full-size image](performing-batch-updates-cs/_static/image12.png))</span></span>


<span data-ttu-id="5429f-137">마법사를 완료 한 후 Visual Studio를 자동으로 생성 DataList의 `ItemTemplate` Label 웹 컨트롤의 데이터 소스에서 반환 된 각 데이터 필드를 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-137">After completing the wizard, Visual Studio automatically generates the DataList s `ItemTemplate` to display each data field returned by the data source in a Label Web control.</span></span> <span data-ttu-id="5429f-138">이 템플릿을 편집 인터페이스 대신 제공 하도록 수정 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-138">We need to modify this template so that it provides the editing interface instead.</span></span> <span data-ttu-id="5429f-139">`ItemTemplate` DataList s 스마트 태그에서 템플릿 편집 옵션을 사용 하 여 디자이너를 통해 또는 선언적 구문을 통해 직접 사용자 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-139">The `ItemTemplate` can be customized through the Designer using the Edit Templates option from the DataList s smart tag or directly through the declarative syntax.</span></span>

<span data-ttu-id="5429f-140">시간을 내어 공급자의 이름을 텍스트로 표시 되지만 공급자의의 주소, 도시 및 국가 값에 대 한 텍스트를 포함 하는 편집 인터페이스를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-140">Take a moment to create an editing interface that displays the supplier s name as text, but includes TextBoxes for the supplier s address, city, and country values.</span></span> <span data-ttu-id="5429f-141">다음과 같이 변경한 후 페이지 s 선언적 구문을 다음과 비슷하게 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-141">After making these changes, your page s declarative syntax should look similar to the following:</span></span>


[!code-aspx[Main](performing-batch-updates-cs/samples/sample1.aspx)]

> [!NOTE]
> <span data-ttu-id="5429f-142">이전 자습서에서는이 자습서에서는 DataList 보기 상태로 사용할 수 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-142">As with the preceding tutorial, the DataList in this tutorial must have its view state enabled.</span></span>


<span data-ttu-id="5429f-143">`ItemTemplate` 있나요 두 개의 새 CSS 클래스를 사용 하 여 m `SupplierPropertyLabel` 및 `SupplierPropertyValue`를 추가할를 `Styles.css` 클래스와 동일한 스타일 설정을 사용 하도록 구성 합니다 `ProductPropertyLabel` 및 `ProductPropertyValue` CSS 클래스.</span><span class="sxs-lookup"><span data-stu-id="5429f-143">In the `ItemTemplate` I m using two new CSS classes, `SupplierPropertyLabel` and `SupplierPropertyValue`, which have been added to the `Styles.css` class and configured to use the same style settings as the `ProductPropertyLabel` and `ProductPropertyValue` CSS classes.</span></span>


[!code-css[Main](performing-batch-updates-cs/samples/sample2.css)]

<span data-ttu-id="5429f-144">다음과 같이 변경한 후 브라우저를 통해이 페이지를 방문 합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-144">After making these changes, visit this page through a browser.</span></span> <span data-ttu-id="5429f-145">그림 5에서 볼 수 있듯이 각 DataList 항목 공급자 이름을 텍스트로 표시 하 고 주소, 도시 및 국가 표시 하려면 텍스트 상자를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-145">As Figure 5 shows, each DataList item displays the supplier name as text and uses TextBoxes to display the address, city, and country.</span></span>


<span data-ttu-id="5429f-146">[![DataList에서 각 공급자는 편집 가능](performing-batch-updates-cs/_static/image14.png)](performing-batch-updates-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="5429f-146">[![Each Supplier in the DataList is Editable](performing-batch-updates-cs/_static/image14.png)](performing-batch-updates-cs/_static/image13.png)</span></span>

<span data-ttu-id="5429f-147">**그림 5**: 각 공급 업체 DataList의 편집 가능은 ([클릭 하 여 큰 이미지 보기](performing-batch-updates-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="5429f-147">**Figure 5**: Each Supplier in the DataList is Editable ([Click to view full-size image](performing-batch-updates-cs/_static/image15.png))</span></span>


## <a name="step-2-adding-an-update-all-button"></a><span data-ttu-id="5429f-148">2단계: 업데이트를 모든 단추 추가</span><span class="sxs-lookup"><span data-stu-id="5429f-148">Step 2: Adding an Update All Button</span></span>

<span data-ttu-id="5429f-149">그림 5에 각 공급 업체에 해당 주소, 도시 및 국가 필드 텍스트 상자에 표시 하는 동안 현재 업데이트 단추가 없는 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-149">While each supplier in Figure 5 has its address, city, and country fields displayed in a TextBox, there currently is no Update button available.</span></span> <span data-ttu-id="5429f-150">항목당 업데이트 단추 대신 완벽 하 게 편집할 DataLists를 사용 하 여 일반적으로 단일 모두 업데이트 단추에 없는 페이지를 클릭 하면 업데이트 *모든* DataList의 레코드입니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-150">Rather than having an Update button per item, with fully editable DataLists there is typically a single Update All button on the page that, when clicked, updates *all* of the records in the DataList.</span></span> <span data-ttu-id="5429f-151">이 자습서에 대 한 s를 (단추 중 하나를 클릭 하면 동일한 효과 갖습니다) 하지만 두 개의 단추-맨 아래에 여러 개 있는 페이지의 맨 위에 있는 한 모든 업데이트를 추가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-151">For this tutorial, let s add two Update All buttons - one at the top of the page and one at the bottom (although clicking either button will have the same effect).</span></span>

<span data-ttu-id="5429f-152">DataList 및 집합 위에 단추 웹 컨트롤을 추가 하 여 시작 해당 `ID` 속성을 `UpdateAll1`입니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-152">Start by adding a Button Web control above the DataList and set its `ID` property to `UpdateAll1`.</span></span> <span data-ttu-id="5429f-153">다음으로, DataList, 아래에 두 번째 단추 웹 컨트롤을 추가 설정 해당 `ID` 에 `UpdateAll2`입니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-153">Next, add the second Button Web control beneath the DataList, setting its `ID` to `UpdateAll2`.</span></span> <span data-ttu-id="5429f-154">설정 된 `Text` 모두 업데이트 하려면 두 개의 단추에 대 한 속성입니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-154">Set the `Text` properties for the two Buttons to Update All.</span></span> <span data-ttu-id="5429f-155">마지막으로, 두 단추에 대 한 이벤트 처리기를 만들 `Click` 이벤트입니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-155">Lastly, create event handlers for both Buttons `Click` events.</span></span> <span data-ttu-id="5429f-156">각 이벤트 처리기에서 업데이트 논리를 복제 하는 대신 let s 세 번째 메서드에 논리를 리팩터링할 `UpdateAllSupplierAddresses`, 단순히이 세 번째 메서드를 호출 하는 이벤트 처리기를 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-156">Rather than duplicating the update logic in each of the event handlers, let s refactor that logic to a third method, `UpdateAllSupplierAddresses`, having the event handlers simply invoking this third method.</span></span>


[!code-csharp[Main](performing-batch-updates-cs/samples/sample3.cs)]

<span data-ttu-id="5429f-157">그림 6에서는 모두 업데이트 단추를 추가한 후 페이지를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-157">Figure 6 shows the page after the Update All buttons have been added.</span></span>


<span data-ttu-id="5429f-158">[![두 업데이트 모두 단추가 페이지에 추가 되었습니다.](performing-batch-updates-cs/_static/image17.png)](performing-batch-updates-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="5429f-158">[![Two Update All Buttons have been Added to the Page](performing-batch-updates-cs/_static/image17.png)](performing-batch-updates-cs/_static/image16.png)</span></span>

<span data-ttu-id="5429f-159">**그림 6**: 두 업데이트 모두 단추가 페이지에 추가 되었습니다 ([클릭 하 여 큰 이미지 보기](performing-batch-updates-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="5429f-159">**Figure 6**: Two Update All Buttons have been Added to the Page ([Click to view full-size image](performing-batch-updates-cs/_static/image18.png))</span></span>


## <a name="step-3-updating-all-of-the-suppliers-address-information"></a><span data-ttu-id="5429f-160">3단계: 공급 업체 주소 정보를 모두 업데이트</span><span class="sxs-lookup"><span data-stu-id="5429f-160">Step 3: Updating All of the Suppliers Address Information</span></span>

<span data-ttu-id="5429f-161">모든 편집 인터페이스를 표시 하는 항목에 DataList s 및 모든 업데이트 단추를 추가 하 여 모든 유지는 코드를 작성 하려면 일괄 처리 업데이트를 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-161">With all of the DataList s items displaying the editing interface and with the addition of the Update All buttons, all that remains is writing the code to perform the batch update.</span></span> <span data-ttu-id="5429f-162">특히, s DataList 항목 및 호출을 반복 해야 합니다 `SuppliersBLL` s 클래스 `UpdateSupplierAddress` 메서드 각각에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-162">Specifically, we need to loop through the DataList s items and call the `SuppliersBLL` class s `UpdateSupplierAddress` method for each one.</span></span>

<span data-ttu-id="5429f-163">컬렉션인 `DataListItem` DataList의 DataList를 통해 액세스할 수는 구성 인스턴스 [ `Items` 속성](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.items.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-163">The collection of `DataListItem` instances that makeup the DataList can be accessed via the DataList s [`Items` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalist.items.aspx).</span></span> <span data-ttu-id="5429f-164">에 대 한 참조를 사용 하 여는 `DataListItem`, 해당 것이 나옵니다 `SupplierID` 에서 합니다 `DataKeys` 컬렉션 및 프로그래밍 방식으로 텍스트 웹 컨트롤 내 참조는 `ItemTemplate` 다음 코드에서 볼 수 있듯이:</span><span class="sxs-lookup"><span data-stu-id="5429f-164">With a reference to a `DataListItem`, we can grab the corresponding `SupplierID` from the `DataKeys` collection and programmatically reference the TextBox Web controls within the `ItemTemplate` as the following code illustrates:</span></span>


[!code-csharp[Main](performing-batch-updates-cs/samples/sample4.cs)]

<span data-ttu-id="5429f-165">모두 업데이트 단추 중 하나를 클릭할 때를 `UpdateAllSupplierAddresses` 메서드는 각 반복 `DataListItem` 에 `Suppliers` DataList 및 호출 합니다 `SuppliersBLL` s 클래스 `UpdateSupplierAddress` 해당 값을 전달 하는 메서드.</span><span class="sxs-lookup"><span data-stu-id="5429f-165">When the user clicks one of the Update All buttons, the `UpdateAllSupplierAddresses` method iterates through each `DataListItem` in the `Suppliers` DataList and calls the `SuppliersBLL` class s `UpdateSupplierAddress` method, passing in the corresponding values.</span></span> <span data-ttu-id="5429f-166">주소, 도시 또는 국가 전달 되지 않은 입력 값의 값인 `Nothing` 하 `UpdateSupplierAddress` 데이터베이스의 결과입니다 (빈 문자열의 경우) 하는 대신 `NULL` 기본 s 레코드 필드에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-166">A non-entered value for address, city, or country passes is a value of `Nothing` to `UpdateSupplierAddress` (rather than a blank string), which results in a database `NULL` for the underlying record s fields.</span></span>

> [!NOTE]
> <span data-ttu-id="5429f-167">향상 된 기능으로 일괄 처리 업데이트 수행 된 후 몇 가지 확인 메시지를 제공 하는 페이지에 상태 레이블 웹 컨트롤을 추가 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-167">As an enhancement, you may want to add a status Label Web control to the page that provides some confirmation message after the batch update is performed.</span></span>


## <a name="updating-only-those-addresses-that-have-been-modified"></a><span data-ttu-id="5429f-168">수정 된 주소에만 업데이트</span><span class="sxs-lookup"><span data-stu-id="5429f-168">Updating Only Those Addresses That Have Been Modified</span></span>

<span data-ttu-id="5429f-169">이 자습서 호출에 사용 된 일괄 처리 업데이트 알고리즘 합니다 `UpdateSupplierAddress` 에 대 한 메서드 *모든* 공급자가 해당 주소 정보가 변경 되었는지 여부에 관계 없이 DataList, 합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-169">The batch update algorithm used for this tutorial calls the `UpdateSupplierAddress` method for *every* supplier in the DataList, regardless of whether their address information has been changed.</span></span> <span data-ttu-id="5429f-170">이러한 시각 업데이트 일반적으로 성능 문제를가 아닌 중 데이터베이스 테이블에 변경 내용을 다시 감사 하는 경우 불필요 한 레코드도 이어질 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-170">While such blind updates aren't usually a performance issue, they can lead to superfluous records if you re auditing changes to the database table.</span></span> <span data-ttu-id="5429f-171">예를 들어 트리거를 사용 하 여 모든 기록 `UPDATE` s를 `Suppliers` 사용자 하나 수행 여부에 관계 없이 시스템에서 각 공급자에 대 한 새 감사 레코드를 만들 수는 모두 업데이트 단추를 클릭할 때마다 감사 테이블에 테이블 변경 내용입니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-171">For example, if you use triggers to record all `UPDATE` s to the `Suppliers` table to an auditing table, every time a user clicks the Update All button a new audit record will be created for each supplier in the system, regardless of whether the user made any changes.</span></span>

<span data-ttu-id="5429f-172">ADO.NET DataTable 및 DataAdapter 클래스를 데이터베이스 통신만 수정, 삭제 및 새 레코드를 결과 일괄 처리 업데이트를 지원 하도록 설계 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-172">The ADO.NET DataTable and DataAdapter classes are designed to support batch updates where only modified, deleted, and new records results in any database communication.</span></span> <span data-ttu-id="5429f-173">DataTable의 각 행에는 [ `RowState` 속성](https://msdn.microsoft.com/library/system.data.datarow.rowstate.aspx) 는 행에서 수정, 삭제 하는 DataTable에 추가 되었습니다 그대로 유지 하는지 여부를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-173">Each row in the DataTable has a [`RowState` property](https://msdn.microsoft.com/library/system.data.datarow.rowstate.aspx) that indicates whether the row has been added to the DataTable, deleted from it, modified, or remains unchanged.</span></span> <span data-ttu-id="5429f-174">DataTable을 채울 처음 때 모든 행 변경 되지 않은 상태로 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-174">When a DataTable is initially populated, all rows are marked unchanged.</span></span> <span data-ttu-id="5429f-175">수정 된 행을 표시 행 s 열의 모든 값을 변경 합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-175">Changing the value of any of the row s columns marks the row as modified.</span></span>

<span data-ttu-id="5429f-176">에 `SuppliersBLL` 에 단일 공급 업체 레코드의 첫 번째 읽어 지정 된 공급자가의 주소 정보를 업데이트 하는 클래스를 `SuppliersDataTable` 설정한 후 합니다 `Address`를 `City`, 및 `Country` 다음 코드를 사용 하 여 열 값:</span><span class="sxs-lookup"><span data-stu-id="5429f-176">In the `SuppliersBLL` class we update the specified supplier s address information by first reading in the single supplier record into a `SuppliersDataTable` and then set the `Address`, `City`, and `Country` column values using the following code:</span></span>


[!code-csharp[Main](performing-batch-updates-cs/samples/sample5.cs)]

<span data-ttu-id="5429f-177">이 코드에서는 잡이 전달 된 주소, 도시 및 국가 값을 할당 합니다 `SuppliersRow` 에 `SuppliersDataTable` 값이 변경 되었는지 여부에 관계 없이 합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-177">This code naively assigns the passed-in address, city, and country values to the `SuppliersRow` in the `SuppliersDataTable` regardless of whether or not the values have changed.</span></span> <span data-ttu-id="5429f-178">이러한 수정으로 인해 합니다 `SuppliersRow` s `RowState` 속성을 수정 하는 것으로 표시 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-178">These modifications cause the `SuppliersRow` s `RowState` property to be marked as modified.</span></span> <span data-ttu-id="5429f-179">때 데이터 액세스 계층 s `Update` 메서드를 호출 하는 발견 된 `SupplierRow` 수정 되었고 그 따라서 보냅니다는 `UPDATE` 명령을 데이터베이스에 합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-179">When the Data Access Layer s `Update` method is called, it sees that the `SupplierRow` has been modified and therefore sends an `UPDATE` command to the database.</span></span>

<span data-ttu-id="5429f-180">그러나 Imagine, 할당할만 전달 된 주소, 도시 및 국가 값에서 다를 경우이 메서드에 코드를 추가 했습니다는 `SuppliersRow` s 기존 값입니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-180">Imagine, however, that we added code to this method to only assign the passed-in address, city, and country values if they differ from the `SuppliersRow` s existing values.</span></span> <span data-ttu-id="5429f-181">주소, 도시 및 국가 있는 기존 데이터와 동일한 경우에는 변경 되지 하며 `SupplierRow` s `RowState` 왼쪽으로 표시 된 그대로입니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-181">In the case where the address, city, and country are the same as the existing data, no changes will be made and the `SupplierRow` s `RowState` will be left marked as unchanged.</span></span> <span data-ttu-id="5429f-182">결과 경우 DAL s `Update` 메서드를 호출 하기 때문에 없는 데이터베이스 전화를 걸 수는 `SuppliersRow` 수정 되지 않았습니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-182">The net result is that when the DAL s `Update` method is called, no database call will be made because the `SuppliersRow` has not been modified.</span></span>

<span data-ttu-id="5429f-183">이 변경은 적용 하려면 맹목적으로 전달 된 주소, 도시 및 다음 코드를 사용 하 여 국가 값을 할당 하는 문을 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-183">To enact this change, replace the statements that blindly assign the passed-in address, city, and country values with the following code:</span></span>


[!code-csharp[Main](performing-batch-updates-cs/samples/sample6.cs)]

<span data-ttu-id="5429f-184">이 추가 코드를 DAL s `Update` 메서드 보냅니다는 `UPDATE` 주소와 관련 된 값이 변경 된 레코드만 데이터베이스에는 문입니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-184">With this added code, the DAL s `Update` method sends an `UPDATE` statement to the database for only those records whose address-related values have changed.</span></span>

<span data-ttu-id="5429f-185">또는 데이터베이스 데이터와 전달 된 주소 필드 간에 차이점이 여부를 추적 하 고 수 있었습니다, 없는 경우 DAL s에 대 한 호출을 무시 하기만 `Update` 메서드.</span><span class="sxs-lookup"><span data-stu-id="5429f-185">Alternatively, we could keep track of whether there are any differences between the passed-in address fields and the database data and, if there are none, simply bypass the call to the DAL s `Update` method.</span></span> <span data-ttu-id="5429f-186">이 방법은 DB를 사용 하 여 다시 있습니다 직접 메서드, DB 직접 메서드 되지 않으면 전달 된 경우는 `SuppliersRow` 인스턴스입니다 `RowState` 데이터베이스 호출에 실제로 필요한 지 여부를 확인 하려면 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-186">This approach works well if you re using the DB direct method, since the DB direct method isn t passed a `SuppliersRow` instance whose `RowState` can be checked to determine whether a database call is actually needed.</span></span>

> [!NOTE]
> <span data-ttu-id="5429f-187">각 시간을 `UpdateSupplierAddress` 메서드가 호출 되 면 업데이트 된 레코드에 대 한 정보를 검색할 데이터베이스에 호출 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-187">Each time the `UpdateSupplierAddress` method is invoked, a call is made to the database to retrieve information about the updated record.</span></span> <span data-ttu-id="5429f-188">그런 다음 데이터에서 변경한 경우 다른 데이터베이스로 호출 테이블 행을 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-188">Then, if there are any changes in data, another call to the database is made to update the table row.</span></span> <span data-ttu-id="5429f-189">이 워크플로 만들어 최적화할 수 있습니다는 `UpdateSupplierAddress` 허용 하는 메서드 오버 로드는 `EmployeesDataTable` 인스턴스가 있다고 *모든* 의 변경 사항는 `BatchUpdate.aspx` 페이지.</span><span class="sxs-lookup"><span data-stu-id="5429f-189">This workflow could be optimized by creating an `UpdateSupplierAddress` method overload that accepts an `EmployeesDataTable` instance that has *all* of the changes from the `BatchUpdate.aspx` page.</span></span> <span data-ttu-id="5429f-190">그런 다음 모든 레코드를 가져오려면 데이터베이스를 한 번 호출 선택하실는 `Suppliers` 테이블입니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-190">Then, it could make one call to the database to get all of the records from the `Suppliers` table.</span></span> <span data-ttu-id="5429f-191">두 개의 결과 집합을 열거할 수 다음 하 고 변경 사항이 발생 하는 레코드만 업데이트할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-191">The two resultsets could then be enumerated and only those records where changes have occurred could be updated.</span></span>


## <a name="summary"></a><span data-ttu-id="5429f-192">요약</span><span class="sxs-lookup"><span data-stu-id="5429f-192">Summary</span></span>

<span data-ttu-id="5429f-193">이 자습서에서는 여러 공급 업체에 대 한 주소 정보를 신속 하 게 수정 하려면 사용자가 완벽 하 게 편집할 DataList를 만드는 방법에 살펴보았습니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-193">In this tutorial we saw how to create a fully editable DataList, allowing a user to quickly modify the address information for multiple suppliers.</span></span> <span data-ttu-id="5429f-194">DataList s에서에서 공급자의의 주소, 도시 및 국가 값에 대 한 텍스트 웹 컨트롤의 편집 인터페이스를 정의 하 여 시작 `ItemTemplate`합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-194">We started by defining the editing interface a TextBox Web control for the supplier s address, city, and country values in the DataList s `ItemTemplate`.</span></span> <span data-ttu-id="5429f-195">다음으로, 위쪽 및 아래쪽 DataList 모두 업데이트 단추를 추가 했습니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-195">Next, we added Update All buttons above and below the DataList.</span></span> <span data-ttu-id="5429f-196">사용자가 자신의 변경 하 고 업데이트 모든 단추 중 하나를 클릭 한 후는 `DataListItem` s 열거를 호출 하는 `SuppliersBLL` s 클래스 `UpdateSupplierAddress` 메서드.</span><span class="sxs-lookup"><span data-stu-id="5429f-196">After a user has made his changes and clicked one of the Update All buttons, the `DataListItem` s are enumerated and a call to the `SuppliersBLL` class s `UpdateSupplierAddress` method is made.</span></span>

<span data-ttu-id="5429f-197">즐거운 프로그래밍!</span><span class="sxs-lookup"><span data-stu-id="5429f-197">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="5429f-198">저자 소개</span><span class="sxs-lookup"><span data-stu-id="5429f-198">About the Author</span></span>

<span data-ttu-id="5429f-199">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), 7 ASP/ASP.NET 서적의 저자 이자 설립자입니다 [4GuysFromRolla.com](http://www.4guysfromrolla.com), 1998 Microsoft 웹 기술을 사용 하 여 왔습니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-199">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="5429f-200">Scott는 독립 컨설턴트, 강사, 그리고 기록기로 작동합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-200">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="5429f-201">최근 저서는 [ *Sams 설명 직접 ASP.NET 2.0 24 시간 동안의*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-201">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="5429f-202">그에 도달할 수 있습니다 [ mitchell@4GuysFromRolla.com합니다.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="5429f-202">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="5429f-203">찾을 수 있는 저자의 블로그를 통해 또는 [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET)합니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-203">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="5429f-204">특별히 감사</span><span class="sxs-lookup"><span data-stu-id="5429f-204">Special Thanks To</span></span>

<span data-ttu-id="5429f-205">이 자습서 시리즈는 많은 유용한 검토자가 검토 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-205">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="5429f-206">이 자습서에 대 한 선행 검토자 Zack Jones와 박 단은 Pespisa 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="5429f-206">Lead reviewers for this tutorial were Zack Jones and Ken Pespisa.</span></span> <span data-ttu-id="5429f-207">내 향후 MSDN 문서를 검토에 관심이 있으십니까?</span><span class="sxs-lookup"><span data-stu-id="5429f-207">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="5429f-208">그렇다면 삭제 나에서 선 [ mitchell@4GuysFromRolla.com합니다.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="5429f-208">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="5429f-209">[이전](an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md)
> [다음](handling-bll-and-dal-level-exceptions-cs.md)</span><span class="sxs-lookup"><span data-stu-id="5429f-209">[Previous](an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md)
[Next](handling-bll-and-dal-level-exceptions-cs.md)</span></span>
