---
uid: web-forms/overview/data-access/advanced-data-access-scenarios/using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs
title: 기존 저장 프로시저 사용에 대 한 형식화 된 데이터 집합의 Tableadapter (C#) | Microsoft Docs
author: rick-anderson
description: 이전 자습서에서 TableAdapter 마법사를 사용 하 여 새 저장된 프로시저를 생성 하는 방법을 알게 되었습니다. 이 자습서에서는 설명 하는 방법 같은 TableAdapter...
ms.author: riande
ms.date: 07/18/2007
ms.assetid: 440bef2a-1641-4238-99e3-8e2d44e7d94c
msc.legacyurl: /web-forms/overview/data-access/advanced-data-access-scenarios/using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs
msc.type: authoredcontent
ms.openlocfilehash: 3c825b61734a7987d919ff40d6641471117a11dc
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/17/2019
ms.locfileid: "59416677"
---
# <a name="using-existing-stored-procedures-for-the-typed-datasets-tableadapters-c"></a><span data-ttu-id="881aa-104">형식화된 데이터 세트의 TableAdapter에 대한 기존 저장 프로시저 사용(C#)</span><span class="sxs-lookup"><span data-stu-id="881aa-104">Using Existing Stored Procedures for the Typed DataSet's TableAdapters (C#)</span></span>

<span data-ttu-id="881aa-105">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="881aa-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="881aa-106">[코드를 다운로드](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_68_CS.zip) 또는 [PDF 다운로드](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/datatutorial68cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="881aa-106">[Download Code](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_68_CS.zip) or [Download PDF](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/datatutorial68cs1.pdf)</span></span>

> <span data-ttu-id="881aa-107">이전 자습서에서 TableAdapter 마법사를 사용 하 여 새 저장된 프로시저를 생성 하는 방법을 알게 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-107">In the previous tutorial we learned how to use the TableAdapter Wizard to generate new stored procedures.</span></span> <span data-ttu-id="881aa-108">이 자습서에서는 기존 저장된 프로시저 함께 동일한 TableAdapter 마법사를 사용 하는 방법을 알아봅니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-108">In this tutorial we learn how the same TableAdapter Wizard can work with existing stored procedures.</span></span> <span data-ttu-id="881aa-109">데이터베이스에 새 저장된 프로시저를 수동으로 추가 하는 방법을 알아볼 것입니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-109">We also learn how to manually add new stored procedures to our database.</span></span>


## <a name="introduction"></a><span data-ttu-id="881aa-110">소개</span><span class="sxs-lookup"><span data-stu-id="881aa-110">Introduction</span></span>

<span data-ttu-id="881aa-111">에 [이전 자습서](creating-new-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) 형식화 된 데이터 집합의 Tableadapter를 구성 하 수 액세스 임시 보다는 SQL 문으로 저장된 프로시저를 사용 하는 방법에 대해 살펴보았습니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-111">In the [preceding tutorial](creating-new-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) we saw how the Typed DataSet s TableAdapters could be configured to use stored procedures to access data rather than ad-hoc SQL statements.</span></span> <span data-ttu-id="881aa-112">특히 TableAdapter 마법사에서 자동으로 이러한 저장된 프로시저를 만드는 방법을 살펴보았습니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-112">In particular, we examined how to have the TableAdapter wizard automatically create these stored procedures.</span></span> <span data-ttu-id="881aa-113">ASP.NET 2.0으로 레거시 응용 프로그램을 이식 하는 경우 또는 기존 데이터 모델을 해결 하는 ASP.NET 2.0 웹 사이트를 빌드할 때 데이터베이스에 이미 필요한 저장된 프로시저를 포함 하는 것이 경우가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-113">When porting a legacy application to ASP.NET 2.0 or when building an ASP.NET 2.0 website around an existing data model, chances are that the database already contains the stored procedures we need.</span></span> <span data-ttu-id="881aa-114">또는 수동으로 또는 저장된 프로시저를 자동으로 생성 하는 TableAdapter 마법사 이외의 일부 도구를 통해 저장된 프로시저를 만들 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-114">Alternatively, you may prefer to create your stored procedures by hand or through some tool other than the TableAdapter wizard that auto-generates your stored procedures.</span></span>

<span data-ttu-id="881aa-115">이 자습서에서는 기존 저장된 프로시저를 사용 하도록 TableAdapter를 구성 하는 방법을 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-115">In this tutorial we will look at how to configure the TableAdapter to use existing stored procedures.</span></span> <span data-ttu-id="881aa-116">Northwind 데이터베이스에 기본 제공 저장된 프로시저는 작은 집합이 있는 경우 이후도 살펴보겠습니다 Visual Studio 환경을 통해 데이터베이스에 새 저장된 프로시저를 수동으로 추가 하는 데 필요한 단계입니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-116">Since the Northwind database only has a small set of built-in stored procedures, we will also look at the steps needed to manually add new stored procedures to the database through the Visual Studio environment.</span></span> <span data-ttu-id="881aa-117">Let s 시작!</span><span class="sxs-lookup"><span data-stu-id="881aa-117">Let s get started!</span></span>

> [!NOTE]
> <span data-ttu-id="881aa-118">에 [트랜잭션 내에서 데이터베이스 수정 내용을 래핑](../working-with-batched-data/wrapping-database-modifications-within-a-transaction-cs.md) 자습서 트랜잭션을 지원 하도록 TableAdapter에 메서드를 추가 했습니다 (`BeginTransaction`, `CommitTransaction`등).</span><span class="sxs-lookup"><span data-stu-id="881aa-118">In the [Wrapping Database Modifications within a Transaction](../working-with-batched-data/wrapping-database-modifications-within-a-transaction-cs.md) tutorial we added methods to the TableAdapter to support transactions (`BeginTransaction`, `CommitTransaction`, and so on).</span></span> <span data-ttu-id="881aa-119">또는 트랜잭션 데이터 액세스 계층 코드를 수정 해야 하는 저장된 프로시저 내에서 완전히 관리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-119">Alternatively, transactions can be managed entirely within a stored procedure, which requires no modifications to the Data Access Layer code.</span></span> <span data-ttu-id="881aa-120">이 자습서에서는 트랜잭션의 범위 내에서 저장된 프로시저의 문을 실행 하는 데 사용 하는 T-SQL 명령을 살펴봅니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-120">In this tutorial we'll explore the T-SQL commands used to execute a stored procedure s statements within the scope of a transaction.</span></span>


## <a name="step-1-adding-stored-procedures-to-the-northwind-database"></a><span data-ttu-id="881aa-121">1단계: Northwind 데이터베이스에 저장된 프로시저에 추가</span><span class="sxs-lookup"><span data-stu-id="881aa-121">Step 1: Adding Stored Procedures to the Northwind Database</span></span>

<span data-ttu-id="881aa-122">Visual Studio에서는 쉽게 데이터베이스에 새 저장된 프로시저를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-122">Visual Studio makes it easy to add new stored procedures to a database.</span></span> <span data-ttu-id="881aa-123">Let s의 모든 열을 반환 하는 Northwind 데이터베이스에 새 저장된 프로시저를 추가 합니다 `Products` 테이블에 있는 특정 `CategoryID` 값입니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-123">Let s add a new stored procedure to the Northwind database that returns all columns from the `Products` table for those that have a particular `CategoryID` value.</span></span> <span data-ttu-id="881aa-124">서버 탐색기 창에서 해당 폴더-데이터베이스 다이어그램, 테이블, 뷰 등-표시 되도록 Northwind 데이터베이스를 확장 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-124">From the Server Explorer window, expand the Northwind database so that its folders - Database Diagrams, Tables, Views, and so forth - are displayed.</span></span> <span data-ttu-id="881aa-125">이전 자습서에서 보았듯이 Stored Procedures 폴더에 데이터베이스 s 기존 저장된 프로시저를 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-125">As we saw in the preceding tutorial, the Stored Procedures folder contains the database s existing stored procedures.</span></span> <span data-ttu-id="881aa-126">새 저장된 프로시저를 추가 하려면 저장 프로시저 폴더를 마우스 오른쪽 단추로 클릭 하 고 상황에 맞는 메뉴에서 새 저장 프로시저 추가 옵션을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-126">To add a new stored procedure, simply right-click the Stored Procedures folder and choose the Add New Stored Procedure option from the context menu.</span></span>


<span data-ttu-id="881aa-127">[![저장된 프로시저 폴더를 마우스 오른쪽 단추로 클릭 하 고 새 저장된 프로시저를 추가 합니다.](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image2.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="881aa-127">[![Right-Click the Stored Procedures Folder and Add a New Stored Procedure](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image2.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image1.png)</span></span>

<span data-ttu-id="881aa-128">**그림 1**: 저장 프로시저 폴더를 마우스 오른쪽 단추로 클릭 하 고 새 저장 프로시저를 추가 ([클릭 하 여 큰 이미지 보기](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="881aa-128">**Figure 1**: Right-Click the Stored Procedures Folder and Add a New Stored Procedure ([Click to view full-size image](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image3.png))</span></span>


<span data-ttu-id="881aa-129">그림 1에서 볼 수 있듯이 새 저장 프로시저 추가 옵션을 선택 하면 스크립트 창이 열립니다 Visual Studio에서 저장된 프로시저를 만드는 데 필요한 SQL 스크립트의 개요를 사용 하 여.</span><span class="sxs-lookup"><span data-stu-id="881aa-129">As Figure 1 shows, selecting the Add New Stored Procedure option opens a script window in Visual Studio with the outline of the SQL script needed to create the stored procedure.</span></span> <span data-ttu-id="881aa-130">이 스크립트를 구체화 하지만 시점에서 저장된 프로시저에 추가할 데이터베이스를 실행 하는 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-130">It is our job to flesh out this script and execute it, at which point the stored procedure will be added to the database.</span></span>

<span data-ttu-id="881aa-131">다음 스크립트를 입력 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-131">Enter the following script:</span></span>


[!code-sql[Main](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/samples/sample1.sql)]

<span data-ttu-id="881aa-132">이 스크립트를 실행 하는 경우 명명 된 Northwind 데이터베이스에 새 저장된 프로시저를 추가 `Products_SelectByCategoryID`합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-132">This script, when executed, will add a new stored procedure to the Northwind database named `Products_SelectByCategoryID`.</span></span> <span data-ttu-id="881aa-133">단일 입력된 매개 변수를 허용 하는이 저장된 프로시저 (`@CategoryID`, 형식 `int`) 하 고 일치 하는 이러한 제품에 대 한 필드를 모두 반환 `CategoryID` 값입니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-133">This stored procedure accepts a single input parameter (`@CategoryID`, of type `int`) and it returns all of the fields for those products with a matching `CategoryID` value.</span></span>

<span data-ttu-id="881aa-134">이를 실행할 `CREATE PROCEDURE` 스크립트 및 데이터베이스에 저장된 프로시저를 추가, 도구 모음에서 저장 아이콘을 클릭 하거나 Ctrl + S를 누릅니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-134">To execute this `CREATE PROCEDURE` script and add the stored procedure to the database, click the Save icon in the toolbar or hit Ctrl+S.</span></span> <span data-ttu-id="881aa-135">이렇게 한 후, Stored Procedures 폴더 새로 고침을 보여 주는 새로 만든 저장 프로시저입니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-135">After doing so, the Stored Procedures folder refreshes, showing the newly created stored procedure.</span></span> <span data-ttu-id="881aa-136">또한 창에서 스크립트의 미묘한 바뀝니다 `CREATE PROCEDURE dbo.Products_SelectProductByCategoryID` 하 `ALTER PROCEDURE` `dbo.Products_SelectProductByCategoryID`합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-136">Also, the script in the window will change subtlety from `CREATE PROCEDURE dbo.Products_SelectProductByCategoryID` to `ALTER PROCEDURE` `dbo.Products_SelectProductByCategoryID`.</span></span> <span data-ttu-id="881aa-137">`CREATE PROCEDURE` 데이터베이스에 새 저장된 프로시저를 추가 하는 동안 `ALTER PROCEDURE` 기존 항목을 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-137">`CREATE PROCEDURE` adds a new stored procedure to the database, while `ALTER PROCEDURE` updates an existing one.</span></span> <span data-ttu-id="881aa-138">스크립트의 시작 부분에 변경 되었으므로 `ALTER PROCEDURE`, 입력 매개 변수 또는 SQL 문이 저장된 프로시저를 변경 및 저장 아이콘을 클릭 하면 이러한 변경 내용으로 저장된 프로시저를 업데이트 됩니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-138">Since the start of the script has changed to `ALTER PROCEDURE`, changing the stored procedures input parameters or SQL statements and clicking the Save icon will update the stored procedure with these changes.</span></span>

<span data-ttu-id="881aa-139">그림 2 표시 한 후 Visual Studio는 `Products_SelectByCategoryID` 저장된 프로시저가 저장 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-139">Figure 2 shows Visual Studio after the `Products_SelectByCategoryID` stored procedure has been saved.</span></span>


<span data-ttu-id="881aa-140">[![저장된 프로시저 Products_SelectByCategoryID 데이터베이스에 추가 되었습니다.](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image5.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="881aa-140">[![The Stored Procedure Products_SelectByCategoryID Has Been Added to the Database](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image5.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image4.png)</span></span>

<span data-ttu-id="881aa-141">**그림 2**: 저장 프로시저 `Products_SelectByCategoryID` 데이터베이스에 추가 되었습니다 ([큰 이미지를 보려면 클릭](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="881aa-141">**Figure 2**: The Stored Procedure `Products_SelectByCategoryID` Has Been Added to the Database ([Click to view full-size image](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image6.png))</span></span>


## <a name="step-2-configuring-the-tableadapter-to-use-an-existing-stored-procedure"></a><span data-ttu-id="881aa-142">2단계: 기존 저장된 프로시저를 사용 하 여 TableAdapter를 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-142">Step 2: Configuring the TableAdapter to Use an Existing Stored Procedure</span></span>

<span data-ttu-id="881aa-143">이제는 `Products_SelectByCategoryID` 저장된 프로시저에 추가한 데이터베이스를 해당 메서드 중 하나를 호출 하면이 저장된 프로시저를 사용 하 여 데이터 액세스 계층을 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-143">Now that the `Products_SelectByCategoryID` stored procedure has been added to the database, we can configure our Data Access Layer to use this stored procedure when one of its methods is invoked.</span></span> <span data-ttu-id="881aa-144">추가 특히를 `GetProductsByCategoryID(categoryID)` 메서드를를 `ProductsTableAdapter` 에 `NorthwindWithSprocs` 호출 하는 입력 데이터 집합은 `Products_SelectByCategoryID` 방금 만든 저장 프로시저.</span><span class="sxs-lookup"><span data-stu-id="881aa-144">In particular, we will add a `GetProductsByCategoryID(categoryID)` method to the `ProductsTableAdapter` in the `NorthwindWithSprocs` Typed DataSet that calls the `Products_SelectByCategoryID` stored procedure we just created.</span></span>

<span data-ttu-id="881aa-145">열어서 시작 합니다 `NorthwindWithSprocs` 데이터 집합입니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-145">Start by opening the `NorthwindWithSprocs` DataSet.</span></span> <span data-ttu-id="881aa-146">마우스 오른쪽 단추로 클릭는 `ProductsTableAdapter` TableAdapter 쿼리 구성 마법사를 시작 하려면 쿼리 추가 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-146">Right-click on the `ProductsTableAdapter` and choose Add Query to launch the TableAdapter Query Configuration wizard.</span></span> <span data-ttu-id="881aa-147">에 [이전 자습서](creating-new-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) 우리 회사에 새 저장된 프로시저를 만드는 TableAdapter가 하기로 했습니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-147">In the [preceding tutorial](creating-new-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) we opted to have the TableAdapter create a new stored procedure for us.</span></span> <span data-ttu-id="881aa-148">그러나이 자습서에서는 하려는 새 TableAdapter 메서드는 기존 연결 `Products_SelectByCategoryID` 저장 프로시저입니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-148">For this tutorial, however, we want to wire the new TableAdapter method to the existing `Products_SelectByCategoryID` stored procedure.</span></span> <span data-ttu-id="881aa-149">따라서 마법사가 첫 번째 단계에서 사용 하 여 기존 저장된 프로시저 옵션을 선택 하 고 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-149">Therefore, choose the Use existing stored procedure option from the wizard s first step and then click Next.</span></span>


<span data-ttu-id="881aa-150">[![기존 저장된 프로시저 옵션 사용 선택](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image8.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="881aa-150">[![Choose the Use existing stored procedure Option](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image8.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image7.png)</span></span>

<span data-ttu-id="881aa-151">**그림 3**: 저장 된 프로시저 옵션을 사용 하 여 기존 선택 ([클릭 하 여 큰 이미지 보기](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="881aa-151">**Figure 3**: Choose the Use existing stored procedure Option ([Click to view full-size image](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image9.png))</span></span>


<span data-ttu-id="881aa-152">다음 화면 드롭 다운 목록을 채울 s 데이터베이스를 사용 하 여 저장된 프로시저를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-152">The following screen provides a drop-down list populated with the database s stored procedures.</span></span> <span data-ttu-id="881aa-153">저장된 프로시저를 선택 하는 입력된 매개 변수를 왼쪽 및 오른쪽 (있는 경우)를 반환 하는 데이터 필드를 나열 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-153">Selecting a stored procedure lists its input parameters on the left and the data fields returned (if any) on the right.</span></span> <span data-ttu-id="881aa-154">선택 된 `Products_SelectByCategoryID` 저장 프로시저 목록에서 다음을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-154">Choose the `Products_SelectByCategoryID` stored procedure from the list and click Next.</span></span>


<span data-ttu-id="881aa-155">[![선택 된 Products_SelectByCategoryID 저장 프로시저](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image11.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="881aa-155">[![Pick the Products_SelectByCategoryID Stored Procedure](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image11.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image10.png)</span></span>

<span data-ttu-id="881aa-156">**그림 4**: 선택 된 `Products_SelectByCategoryID` 저장 프로시저 ([큰 이미지를 보려면 클릭](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="881aa-156">**Figure 4**: Pick the `Products_SelectByCategoryID` Stored Procedure ([Click to view full-size image](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image12.png))</span></span>


<span data-ttu-id="881aa-157">다음 화면에서는 어떤 종류의 데이터는 저장된 프로시저에서 반환 하 고 대답을 여기 TableAdapter가 메서드에서 반환 되는 형식을 결정 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-157">The next screen asks us what kind of data is returned by the stored procedure and our answer here determines the type returned by the TableAdapter s method.</span></span> <span data-ttu-id="881aa-158">예를 들어 경우 테이블 형식 데이터가 반환 됩니다 나타내고 귀하는 메서드는 반환 된 `ProductsDataTable` 인스턴스는 저장된 프로시저에서 반환 된 레코드를 사용 하 여 채워집니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-158">For example, if we indicate that tabular data is returned, the method will return a `ProductsDataTable` instance populated with the records returned by the stored procedure.</span></span> <span data-ttu-id="881aa-159">이와 달리이 저장된 프로시저는 단일 값을 반환 하는지를 나타내고 귀하 TableAdapter 반환 됩니다는 `object` 는 저장된 프로시저에서 반환 된 첫 번째 레코드의 첫 번째 열에 값이 할당 됩니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-159">In contrast, if we indicate that this stored procedure returns a single value the TableAdapter will return an `object` that is assigned the value in the first column of the first record returned by the stored procedure.</span></span>

<span data-ttu-id="881aa-160">이후를 `Products_SelectByCategoryID` 저장된 프로시저는 특정 범주에 속하는 첫 번째 응답-표 형식 데이터를 선택 하 고 다음을 클릭 하는 모든 제품을 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-160">Since the `Products_SelectByCategoryID` stored procedure returns all products that belong to a particular category, choose the first answer - Tabular data - and click Next.</span></span>


<span data-ttu-id="881aa-161">[![저장된 프로시저가 반환 테이블 형식 데이터를 나타냅니다.](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image14.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="881aa-161">[![Indicate that the Stored Procedure Returns Tabular Data](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image14.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image13.png)</span></span>

<span data-ttu-id="881aa-162">**그림 5**: 저장 프로시저가 반환 하는 테이블 형식 데이터를 나타냅니다 ([클릭 하 여 큰 이미지 보기](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="881aa-162">**Figure 5**: Indicate that the Stored Procedure Returns Tabular Data ([Click to view full-size image](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image15.png))</span></span>


<span data-ttu-id="881aa-163">에 이러한 메서드의 이름을 뒤 메서드 패턴 사용을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-163">All that remains is to indicate what method patterns to use followed by the names for these methods.</span></span> <span data-ttu-id="881aa-164">두고 모두 채우기는 DataTable 반환 DataTable 옵션을 선택 하지만 메서드를 이름 바꾸기 `FillByCategoryID` 고 `GetProductsByCategoryID`입니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-164">Leave both the Fill a DataTable and Return a DataTable options checked, but rename the methods to `FillByCategoryID` and `GetProductsByCategoryID`.</span></span> <span data-ttu-id="881aa-165">마법사가 수행할 작업의 요약을 검토 하려면 다음을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-165">Then click Next to review a summary of the tasks the wizard will perform.</span></span> <span data-ttu-id="881aa-166">모든 항목이 올바르면 마침을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-166">If everything looks correct, click Finish.</span></span>


<span data-ttu-id="881aa-167">[![메서드 FillByCategoryID 이름과 GetProductsByCategoryID](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image17.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="881aa-167">[![Name the Methods FillByCategoryID and GetProductsByCategoryID](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image17.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image16.png)</span></span>

<span data-ttu-id="881aa-168">**그림 6**: 메서드 이름을 `FillByCategoryID` 하 고 `GetProductsByCategoryID` ([클릭 하 여 큰 이미지 보기](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="881aa-168">**Figure 6**: Name the Methods `FillByCategoryID` and `GetProductsByCategoryID` ([Click to view full-size image](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image18.png))</span></span>


> [!NOTE]
> <span data-ttu-id="881aa-169">방금 만든 TableAdapter 메서드 `FillByCategoryID` 하 고 `GetProductsByCategoryID`, 형식 입력된 매개 변수를 예상 `int`합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-169">The TableAdapter methods we just created, `FillByCategoryID` and `GetProductsByCategoryID`, expect an input parameter of type `int`.</span></span> <span data-ttu-id="881aa-170">이 입력된 매개 변수 값을 통해 저장 프로시저로 전달 됩니다 해당 `@CategoryID` 매개 변수입니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-170">This input parameter value is passed into the stored procedure via its `@CategoryID` parameter.</span></span> <span data-ttu-id="881aa-171">수정 하는 경우는 `Products_SelectByCategory` 저장 프로시저 s 매개 변수 또한 이러한 TableAdapter 메서드 매개 변수를 업데이트 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-171">If you modify the `Products_SelectByCategory` stored procedure s parameters, you'll need to also update the parameters for these TableAdapter methods.</span></span> <span data-ttu-id="881aa-172">에 설명 된 대로 합니다 [이전 자습서](creating-new-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md), 두 가지 방법 중 하나로이 작업을 수행할 수 있습니다: 수동으로 추가 하거나 제거 하 여 매개 변수 또는 매개 변수 컬렉션에서 TableAdapter 마법사를 다시 실행 하 여 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-172">As discussed in the [previous tutorial](creating-new-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md), this can be done in one of two ways: by manually adding or removing parameters from the parameters collection or by rerunning the TableAdapter wizard.</span></span>


## <a name="step-3-adding-agetproductsbycategoryidcategoryidmethod-to-the-bll"></a><span data-ttu-id="881aa-173">3단계: 추가 된`GetProductsByCategoryID(categoryID)`BLL 방법</span><span class="sxs-lookup"><span data-stu-id="881aa-173">Step 3: Adding a`GetProductsByCategoryID(categoryID)`Method to the BLL</span></span>

<span data-ttu-id="881aa-174">사용 하 여는 `GetProductsByCategoryID` DAL 메서드 완료를 다음 단계는 비즈니스 논리 계층에서이 메서드에 대 한 액세스를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-174">With the `GetProductsByCategoryID` DAL method complete, the next step is to provide access to this method in the Business Logic Layer.</span></span> <span data-ttu-id="881aa-175">열기는 `ProductsBLLWithSprocs` 클래스 파일 및 다음 메서드를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-175">Open the `ProductsBLLWithSprocs` class file and add the following method:</span></span>


[!code-csharp[Main](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/samples/sample2.cs)]

<span data-ttu-id="881aa-176">이 BLL 메서드는 단순히 반환 합니다 `ProductsDataTable` 에서 반환 된 합니다 `ProductsTableAdapter` s `GetProductsByCategoryID` 메서드.</span><span class="sxs-lookup"><span data-stu-id="881aa-176">This BLL method simply returns the `ProductsDataTable` returned from the `ProductsTableAdapter` s `GetProductsByCategoryID` method.</span></span> <span data-ttu-id="881aa-177">`DataObjectMethodAttribute` 특성 ObjectDataSource가의 데이터 소스 구성 마법사에서 사용 하는 메타 데이터를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-177">The `DataObjectMethodAttribute` attribute provides metadata used by the ObjectDataSource s Configure Data Source wizard.</span></span> <span data-ttu-id="881aa-178">특히,이 메서드는 선택 탭의 드롭 다운 목록에 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-178">In particular, this method will appear in the SELECT tab s drop-down list.</span></span>

## <a name="step-4-displaying-products-by-category"></a><span data-ttu-id="881aa-179">4단계: 범주별으로 제품 표시</span><span class="sxs-lookup"><span data-stu-id="881aa-179">Step 4: Displaying Products by Category</span></span>

<span data-ttu-id="881aa-180">새로 추가 된 테스트할 `Products_SelectByCategoryID` 저장된 프로시저 및 해당 BLL 및 DAL 메서드 s DropDownList 및 GridView를 포함 하는 ASP.NET 페이지를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-180">To test the newly added `Products_SelectByCategoryID` stored procedure and the corresponding DAL and BLL methods, let s create an ASP.NET page that contains a DropDownList and a GridView.</span></span> <span data-ttu-id="881aa-181">DropDownList는 GridView는 선택한 범주에 속하는 제품을 표시 하는 동안 모든 데이터베이스에 범주가 나열 됩니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-181">The DropDownList will list all of the categories in the database while the GridView will display the products belonging to the selected category.</span></span>

> [!NOTE]
> <span data-ttu-id="881aa-182">우리가 만든 ve 마스터/세부 인터페이스 Dropdownlist를 사용 하 여 이전 자습서에서입니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-182">We ve created master/detail interfaces using DropDownLists in previous tutorials.</span></span> <span data-ttu-id="881aa-183">마스터/세부 정보 보고서를 이러한 구현에 대 한 자세한 설명에 대 한 참조를 [마스터/세부 정보 필터링으로 DropDownList](../masterdetail/master-detail-filtering-with-a-dropdownlist-cs.md) 자습서입니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-183">For a more in-depth look at implementing such a master/detail report, refer to the [Master/Detail Filtering With a DropDownList](../masterdetail/master-detail-filtering-with-a-dropdownlist-cs.md) tutorial.</span></span>


<span data-ttu-id="881aa-184">엽니다는 `ExistingSprocs.aspx` 페이지에서 `AdvancedDAL` 폴더 및 디자이너 도구 상자에서 끌어서 DropDownList 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-184">Open the `ExistingSprocs.aspx` page in the `AdvancedDAL` folder and drag a DropDownList from the Toolbox onto the Designer.</span></span> <span data-ttu-id="881aa-185">집합 DropDownList s `ID` 속성을 `Categories` 및 해당 `AutoPostBack` 속성을 `true`입니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-185">Set the DropDownList s `ID` property to `Categories` and its `AutoPostBack` property to `true`.</span></span> <span data-ttu-id="881aa-186">다음으로, 스마트 태그를 바인딩할 DropDownList 라는 새로운 ObjectDataSource는 `CategoriesDataSource`합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-186">Next, from its smart tag, bind the DropDownList to a new ObjectDataSource named `CategoriesDataSource`.</span></span> <span data-ttu-id="881aa-187">해당 데이터를 검색할 수 있도록 ObjectDataSource를 구성 합니다 `CategoriesBLL` s 클래스 `GetCategories` 메서드.</span><span class="sxs-lookup"><span data-stu-id="881aa-187">Configure the ObjectDataSource so that it retrieves its data from the `CategoriesBLL` class s `GetCategories` method.</span></span> <span data-ttu-id="881aa-188">UPDATE, INSERT에서에서 드롭 다운 목록을 설정 하 고 탭 (없음)를 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-188">Set the drop-down lists in the UPDATE, INSERT, and DELETE tabs to (None) .</span></span>


<span data-ttu-id="881aa-189">[![S CategoriesBLL 클래스 GetCategories 메서드에서 데이터를 검색 합니다.](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image20.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="881aa-189">[![Retrieve Data from the CategoriesBLL Class s GetCategories Method](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image20.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image19.png)</span></span>

<span data-ttu-id="881aa-190">**그림 7**: 데이터를 검색 합니다 `CategoriesBLL` s 클래스 `GetCategories` 메서드 ([클릭 하 여 큰 이미지 보기](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="881aa-190">**Figure 7**: Retrieve Data from the `CategoriesBLL` Class s `GetCategories` Method ([Click to view full-size image](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image21.png))</span></span>


<span data-ttu-id="881aa-191">[![UPDATE, INSERT 드롭 다운 목록을 설정 하 고 탭 삭제 (없음)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image23.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="881aa-191">[![Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE Tabs to (None)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image23.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image22.png)</span></span>

<span data-ttu-id="881aa-192">**그림 8**: 설정 드롭다운 목록에서 업데이트, 삽입 및 삭제 하는 탭 (없음) ([클릭 하 여 큰 이미지 보기](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="881aa-192">**Figure 8**: Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE Tabs to (None) ([Click to view full-size image](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image24.png))</span></span>


<span data-ttu-id="881aa-193">ObjectDataSource 마법사를 완료 한 후 표시할 DropDownList를 구성 합니다 `CategoryName` 데이터 필드 사용 하는 `CategoryID` 필드를 `Value` 각각에 대 한 `ListItem`.</span><span class="sxs-lookup"><span data-stu-id="881aa-193">After completing the ObjectDataSource wizard, configure the DropDownList to display the `CategoryName` data field and to use the `CategoryID` field as the `Value` for each `ListItem`.</span></span>

<span data-ttu-id="881aa-194">이 시점에서 DropDownList 및 ObjectDataSource가 선언적 태그 해야 다음과 비슷합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-194">At this point, the DropDownList and ObjectDataSource s declarative markup should similar to the following:</span></span>


[!code-aspx[Main](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/samples/sample3.aspx)]

<span data-ttu-id="881aa-195">그런 다음 GridView를 디자이너로 끌어, DropDownList 아래에 배치 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-195">Next, drag a GridView onto the Designer, placing it beneath the DropDownList.</span></span> <span data-ttu-id="881aa-196">집합 GridView s `ID` 하 `ProductsByCategory` 및 스마트 태그를 바인딩할 라는 새로운 ObjectDataSource는 `ProductsByCategoryDataSource`합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-196">Set the GridView s `ID` to `ProductsByCategory` and, from its smart tag, bind it to a new ObjectDataSource named `ProductsByCategoryDataSource`.</span></span> <span data-ttu-id="881aa-197">구성 합니다 `ProductsByCategoryDataSource` ObjectDataSource 사용 하는 `ProductsBLLWithSprocs` 하는 클래스를 사용 하 여 해당 데이터를 검색 합니다 `GetProductsByCategoryID(categoryID)` 메서드.</span><span class="sxs-lookup"><span data-stu-id="881aa-197">Configure the `ProductsByCategoryDataSource` ObjectDataSource to use the `ProductsBLLWithSprocs` class, having it retrieve its data using the `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="881aa-198">데이터를 표시 하려면이 GridView 사용만 되므로 UPDATE, INSERT에서에서 드롭 다운 목록을 설정 및 탭 (없음)을 삭제 하 고 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-198">Since this GridView will only be used to display data, set the drop-down lists in the UPDATE, INSERT, and DELETE tabs to (None) and click Next.</span></span>


<span data-ttu-id="881aa-199">[![ProductsBLLWithSprocs 클래스를 사용 하는 ObjectDataSource 구성](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image26.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="881aa-199">[![Configure the ObjectDataSource to Use the ProductsBLLWithSprocs Class](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image26.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image25.png)</span></span>

<span data-ttu-id="881aa-200">**그림 9**: ObjectDataSource를 사용 하 여 구성 합니다 `ProductsBLLWithSprocs` 클래스 ([큰 이미지를 보려면 클릭](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="881aa-200">**Figure 9**: Configure the ObjectDataSource to Use the `ProductsBLLWithSprocs` Class ([Click to view full-size image](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image27.png))</span></span>


<span data-ttu-id="881aa-201">[![GetProductsByCategoryID(categoryID) 메서드에서 데이터를 검색 합니다.](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image29.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="881aa-201">[![Retrieve Data from the GetProductsByCategoryID(categoryID) Method](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image29.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image28.png)</span></span>

<span data-ttu-id="881aa-202">**그림 10**: 데이터를 검색 합니다 `GetProductsByCategoryID(categoryID)` 메서드 ([큰 이미지를 보려면 클릭](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="881aa-202">**Figure 10**: Retrieve Data from the `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image30.png))</span></span>


<span data-ttu-id="881aa-203">[선택] 탭에서 선택한 메서드에서 마법사의 마지막 단계에서는 매개 변수의 원본에 대 한 요청 하므로 매개 변수를 예상 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-203">The method chosen in the SELECT tab expects a parameter, so the final step of the wizard prompts us for the parameter s source.</span></span> <span data-ttu-id="881aa-204">매개 변수 원본 드롭다운 목록 컨트롤에 설정 하 고 선택 된 `Categories` ControlID 드롭 다운 목록에서 제어 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-204">Set the Parameter source drop-down list to Control and choose the `Categories` control from the ControlID drop-down list.</span></span> <span data-ttu-id="881aa-205">마법사를 완료 하려면 마침을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-205">Click Finish to complete the wizard.</span></span>


<span data-ttu-id="881aa-206">[![범주 DropDownList를 사용 하 여 categoryID 매개 변수 원본으로](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image32.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="881aa-206">[![Use the Categories DropDownList as the Source of the categoryID Parameter](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image32.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image31.png)</span></span>

<span data-ttu-id="881aa-207">**그림 11**: 사용 된 `Categories` DropDownList의 원본으로는 `categoryID` 매개 변수 ([전체 크기 이미지를 보려면 클릭](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="881aa-207">**Figure 11**: Use the `Categories` DropDownList as the Source of the `categoryID` Parameter ([Click to view full-size image](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image33.png))</span></span>


<span data-ttu-id="881aa-208">ObjectDataSource 마법사를 완료 하면 Visual Studio가 BoundFields 및는 CheckBoxField 제품 데이터 필드에 대해 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-208">Upon completing the ObjectDataSource wizard, Visual Studio will add BoundFields and a CheckBoxField for each of the product data fields.</span></span> <span data-ttu-id="881aa-209">자유롭게 하다 면 이러한 필드를 사용자 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-209">Feel free to customize these fields as you see fit.</span></span>

<span data-ttu-id="881aa-210">브라우저를 통해 페이지를 방문 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-210">Visit the page through a browser.</span></span> <span data-ttu-id="881aa-211">경우 표에 나열 된 해당 제품과 음료 범주를 선택 하는 페이지를 방문 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-211">When visiting the page the Beverages category is selected and the corresponding products listed in the grid.</span></span> <span data-ttu-id="881aa-212">그림 12로, 다른 범주에 드롭다운 목록을 변경, 포스트백을 발생 시키는 나타나며 새로 선택한 범주의 제품 표를 다시 로드 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-212">Changing the drop-down list to an alternative category, as Figure 12 shows, causes a postback and reloads the grid with the products of the newly selected category.</span></span>


<span data-ttu-id="881aa-213">[![제품 생성 범주에 표시 됩니다.](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image35.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="881aa-213">[![The Products in the Produce Category are Displayed](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image35.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image34.png)</span></span>

<span data-ttu-id="881aa-214">**그림 12**: 제품 생성 범주에 표시 됩니다 ([클릭 하 여 큰 이미지 보기](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="881aa-214">**Figure 12**: The Products in the Produce Category are Displayed ([Click to view full-size image](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image36.png))</span></span>


## <a name="step-5-wrapping-a-stored-procedure-s-statements-within-the-scope-of-a-transaction"></a><span data-ttu-id="881aa-215">5단계: 트랜잭션의 범위 내에서 저장된 프로시저의 문 배치</span><span class="sxs-lookup"><span data-stu-id="881aa-215">Step 5: Wrapping a Stored Procedure s Statements Within the Scope of a Transaction</span></span>

<span data-ttu-id="881aa-216">에 [트랜잭션 내에서 데이터베이스 수정 내용을 래핑](../working-with-batched-data/wrapping-database-modifications-within-a-transaction-cs.md) 일련의 트랜잭션 범위 내에서 데이터베이스 수정 문 수행 하는 기술을 논의 하는 자습서입니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-216">In the [Wrapping Database Modifications within a Transaction](../working-with-batched-data/wrapping-database-modifications-within-a-transaction-cs.md) tutorial we discussed techniques for performing a series of database modification statements within the scope of a transaction.</span></span> <span data-ttu-id="881aa-217">모두 성공 하거나 트랜잭션 산하 수행 수정 하는 재현 율 또는 원자성을 보장 하는 모든 실패 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-217">Recall that the modifications performed under the umbrella of a transaction either all succeed or all fail, guaranteeing atomicity.</span></span> <span data-ttu-id="881aa-218">트랜잭션 사용에 대 한 기술에는 다음이 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-218">Techniques for using transactions include:</span></span>

- <span data-ttu-id="881aa-219">클래스를 사용 하 여 `System.Transactions` 네임 스페이스</span><span class="sxs-lookup"><span data-stu-id="881aa-219">Using the classes in the `System.Transactions` namespace,</span></span>
- <span data-ttu-id="881aa-220">과 같은 ADO.NET 클래스를 사용 하 여 데이터 액세스 계층을 가진 `SqlTransaction`, 및</span><span class="sxs-lookup"><span data-stu-id="881aa-220">Having the Data Access Layer use ADO.NET classes like `SqlTransaction`, and</span></span>
- <span data-ttu-id="881aa-221">저장된 프로시저 내에서 직접 T-SQL 트랜잭션 명령 추가</span><span class="sxs-lookup"><span data-stu-id="881aa-221">Adding the T-SQL transaction commands directly within the stored procedure</span></span>

<span data-ttu-id="881aa-222">합니다 *트랜잭션 내에서 데이터베이스 수정 내용을 래핑* DAL에서 ADO.NET 클래스를 사용 하는 자습서입니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-222">The *Wrapping Database Modifications within a Transaction* tutorial used the ADO.NET classes in the DAL.</span></span> <span data-ttu-id="881aa-223">이 자습서의 나머지 부분에서는 저장된 프로시저 내에서 T-SQL 명령을 사용 하 여 트랜잭션을 관리 하는 방법을 검사 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-223">The remainder of this tutorial examines how to manage a transaction using T-SQL commands from within a stored procedure.</span></span>

<span data-ttu-id="881aa-224">수동으로 시작, 커밋 및 트랜잭션 롤백에 대 한 세 가지 주요 SQL 명령은 `BEGIN TRANSACTION`, `COMMIT TRANSACTION`, 및 `ROLLBACK TRANSACTION`, 각각.</span><span class="sxs-lookup"><span data-stu-id="881aa-224">The three key SQL commands for manually starting, committing, and rolling back a transaction are `BEGIN TRANSACTION`, `COMMIT TRANSACTION`, and `ROLLBACK TRANSACTION`, respectively.</span></span> <span data-ttu-id="881aa-225">다음 패턴을 적용 해야 하는 저장된 프로시저 내에서 트랜잭션을 사용 하 여 ADO.NET 방식의 경우 같은:</span><span class="sxs-lookup"><span data-stu-id="881aa-225">Like with the ADO.NET approach, when using transactions from within a stored procedure we need to apply the following pattern:</span></span>

1. <span data-ttu-id="881aa-226">트랜잭션 시작을 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-226">Indicate the start of a transaction.</span></span>
2. <span data-ttu-id="881aa-227">트랜잭션을 구성 하는 SQL 문을 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-227">Execute the SQL statements that comprise the transaction.</span></span>
3. <span data-ttu-id="881aa-228">2 단계에서 트랜잭션 롤백하고에서에서 문 중 하나에서 오류가 발생 하는 경우</span><span class="sxs-lookup"><span data-stu-id="881aa-228">If there is an error in any one of the statements from Step 2, rollback the transaction</span></span>
4. <span data-ttu-id="881aa-229">오류 없이 완료 단계 2에서 문의 모든 경우에 트랜잭션을 커밋하십시오.</span><span class="sxs-lookup"><span data-stu-id="881aa-229">If all of the statements from Step 2 complete without error, commit the transaction.</span></span>

<span data-ttu-id="881aa-230">다음 템플릿을 사용 하 여 T-SQL 구문에서이 패턴을 구현할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-230">This pattern can be implemented in T-SQL syntax using the following template:</span></span>


[!code-sql[Main](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/samples/sample4.sql)]

<span data-ttu-id="881aa-231">템플릿을 정의 하 여 시작을 `TRY...CATCH` 차단, SQL Server 2005로 새 구문입니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-231">The template starts by defining a `TRY...CATCH` block, a construct new to SQL Server 2005.</span></span> <span data-ttu-id="881aa-232">와 마찬가지로 `try...catch` C#에서 SQL 차단 `TRY...CATCH` 블록에서 문을 실행 합니다 `TRY` 블록입니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-232">Like with `try...catch` blocks in C#, the SQL `TRY...CATCH` block executes the statements in the `TRY` block.</span></span> <span data-ttu-id="881aa-233">문일에서 오류가 발생 하면 즉시 제어가 이동 하 여 `CATCH` 블록.</span><span class="sxs-lookup"><span data-stu-id="881aa-233">If any statement raises an error, control is immediately transferred to the `CATCH` block.</span></span>

<span data-ttu-id="881aa-234">해당 구성의 트랜잭션을 SQL 문을 실행 하는 오류가 없는 경우는 `COMMIT TRANSACTION` 문을 변경 내용을 커밋하고 트랜잭션을 완료 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-234">If there are no errors executing the SQL statements that makeup the transaction, the `COMMIT TRANSACTION` statement commits the changes and completes the transaction.</span></span> <span data-ttu-id="881aa-235">하지만 오류가 발생 결과 문 중 하나는 경우는 `ROLLBACK TRANSACTION` 에서 `CATCH` 블록 트랜잭션의 시작 하기 전에 해당 상태로 데이터베이스를 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-235">If, however, one of the statements results in an error, the `ROLLBACK TRANSACTION` in the `CATCH` block returns the database to its state prior to the start of the transaction.</span></span> <span data-ttu-id="881aa-236">저장된 프로시저를 사용 하 여 오류를 발생 합니다 [RAISERROR 명령을](https://msdn.microsoft.com/library/ms178592.aspx), 유발 하는 `SqlException` 응용 프로그램에서 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-236">The stored procedure also raises an error using the [RAISERROR command](https://msdn.microsoft.com/library/ms178592.aspx), which causes a `SqlException` to be raised in the application.</span></span>

> [!NOTE]
> <span data-ttu-id="881aa-237">이후를 `TRY...CATCH` 블록은 새 SQL Server 2005로, 이전 버전의 Microsoft SQL Server를 사용 하는 경우에 위의 템플릿이 작동 하지 것입니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-237">Since the `TRY...CATCH` block is new to SQL Server 2005, the above template will not work if you are using older versions of Microsoft SQL Server.</span></span> <span data-ttu-id="881aa-238">SQL Server 2005를 사용 하지 않는 경우를 참조 하세요 [SQL Server 저장 프로시저에서 트랜잭션을 관리](http://www.4guysfromrolla.com/webtech/080305-1.shtml) 다른 버전의 SQL Server를 사용 하 여 작동 하는 템플릿에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-238">If you are not using SQL Server 2005, consult [Managing Transactions in SQL Server Stored Procedures](http://www.4guysfromrolla.com/webtech/080305-1.shtml) for a template that will work with other versions of SQL Server.</span></span>


<span data-ttu-id="881aa-239">S를 구체적인 예제를 살펴볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-239">Let s look at a concrete example.</span></span> <span data-ttu-id="881aa-240">외래 키 제약 조건 사이 존재 합니다 `Categories` 및 `Products` 테이블, 즉 각 `CategoryID` 필드에 `Products` 테이블에 매핑해야 합니다.는 `CategoryID` 값는 `Categories` 테이블.</span><span class="sxs-lookup"><span data-stu-id="881aa-240">A foreign key constraint exists between the `Categories` and `Products` tables, meaning that each `CategoryID` field in the `Products` table must map to a `CategoryID` value in the `Categories` table.</span></span> <span data-ttu-id="881aa-241">같은 제품에 연결 된 범주를 삭제 하는 동안이 제약 조건을 위반 하는 모든 작업은 foreign key 제약 조건 위반 하 게 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-241">Any action that would violate this constraint, such as attempting to delete a category that has associated products, results in a foreign key constraint violation.</span></span> <span data-ttu-id="881aa-242">이 확인 하려면 이진 데이터 섹션을 사용 하 여 작업에서 업데이트 및 삭제 기존 이진 데이터 예제를 다시 방문 (`~/BinaryData/UpdatingAndDeleting.aspx`).</span><span class="sxs-lookup"><span data-stu-id="881aa-242">To verify this, revisit the Updating and Deleting Existing Binary Data example in the Working with Binary Data section (`~/BinaryData/UpdatingAndDeleting.aspx`).</span></span> <span data-ttu-id="881aa-243">이 페이지 (그림 13 참조) 편집 및 삭제 단추와 함께 시스템의 각 범주에 나열 하지만 삭제는 foreign key 제약 조건 위반으로 인해 실패 음료-등의 제품-연결 된 범주를 삭제 하려고 하면 (그림 14 참조).</span><span class="sxs-lookup"><span data-stu-id="881aa-243">This page lists each category in the system along with Edit and Delete buttons (see Figure 13), but if you attempt to delete a category that has associated products - such as Beverages - the delete fails due to a foreign key constraint violation (see Figure 14).</span></span>


<span data-ttu-id="881aa-244">[![각 범주는 편집 및 삭제 단추를 사용 하 여 GridView에 표시 됩니다.](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image38.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="881aa-244">[![Each Category is Displayed in a GridView with Edit and Delete Buttons](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image38.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image37.png)</span></span>

<span data-ttu-id="881aa-245">**그림 13**: 각 범주는 편집 및 삭제 단추를 사용 하 여 GridView에 표시 됩니다 ([클릭 하 여 큰 이미지 보기](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="881aa-245">**Figure 13**: Each Category is Displayed in a GridView with Edit and Delete Buttons ([Click to view full-size image](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image39.png))</span></span>


<span data-ttu-id="881aa-246">[![기존 제품에는 범주를 삭제할 수 없습니다.](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image41.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="881aa-246">[![You Cannot Delete a Category that has Existing Products](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image41.png)](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image40.png)</span></span>

<span data-ttu-id="881aa-247">**그림 14**: 기존 제품에는 범주를 삭제할 수 없습니다 ([클릭 하 여 큰 이미지 보기](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="881aa-247">**Figure 14**: You Cannot Delete a Category that has Existing Products ([Click to view full-size image](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image42.png))</span></span>


<span data-ttu-id="881aa-248">그러나 범주 제품 연결 여부에 관계 없이 삭제할 수 있도록 한다고 가정해 보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-248">Imagine, though, that we want to allow categories to be deleted regardless of whether they have associated products.</span></span> <span data-ttu-id="881aa-249">제품 범주 삭제도 기존 제품을 삭제 한다고 가정해 보겠습니다 (다른 옵션은 단순히 해당 제품을 설정 하는 것 이지만 `CategoryID` 값을 `NULL`).</span><span class="sxs-lookup"><span data-stu-id="881aa-249">Should a category with products be deleted, imagine that we want to also delete its existing products (although another option would be to simply set its products `CategoryID` values to `NULL`).</span></span> <span data-ttu-id="881aa-250">외래 키 제약 조건의 cascade 규칙을 통해이 기능을 구현할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-250">This functionality could be implemented through the cascade rules of the foreign key constraint.</span></span> <span data-ttu-id="881aa-251">또는 허용 하는 저장된 프로시저를 만들 수는 `@CategoryID` 입력된 매개 변수를 호출 하면 명시적으로 삭제 합니다. 모든 연결 된 제품 및 다음 지정된 된 범주를 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-251">Alternatively, we could create a stored procedure that accepts a `@CategoryID` input parameter and, when invoked, explicitly deletes all of the associated products and then the specified category.</span></span>

<span data-ttu-id="881aa-252">이러한 저장된 프로시저는 첫 번째 시도 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-252">Our first attempt at such a stored procedure might look like the following:</span></span>


[!code-sql[Main](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/samples/sample5.sql)]

<span data-ttu-id="881aa-253">관련된 제품 및 범주를 확실 하 게 삭제 됩니다을 하는 동안이 그렇게 할 수 없습니다 트랜잭션의 산하 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-253">While this will definitely delete the associated products and category, it does not do so under the umbrella of a transaction.</span></span> <span data-ttu-id="881aa-254">일부 다른 외래 키 제약 조건 인지 imagine `Categories` 특정의 삭제를 못하도록 하는 `@CategoryID` 값입니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-254">Imagine that there is some other foreign key constraint on `Categories` that would prohibit the deletion of a particular `@CategoryID` value.</span></span> <span data-ttu-id="881aa-255">이 경우 모든 제품 삭제 될 것 이라는 범주를 삭제 하기 전에 문제가입니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-255">The problem is that in such a case all of the products will be deleted before we attempt to delete the category.</span></span> <span data-ttu-id="881aa-256">결과 이러한 범주에 대 한이 저장된 프로시저는 제거는 모든 제품 범주가 여전히에 관련 된 일부 다른 테이블의 레코드를 유지 하는 동안.</span><span class="sxs-lookup"><span data-stu-id="881aa-256">The net result is that for such a category, this stored procedure would remove all of its products while the category remained since it still has related records in some other table.</span></span>

<span data-ttu-id="881aa-257">그러나 저장된 프로시저 된 래핑되지 경우 트랜잭션의 범위 내에서를 삭제 합니다 `Products` 테이블 롤백되지 실패 한 삭제 제시간 `Categories`입니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-257">If the stored procedure were wrapped within the scope of a transaction, however, the deletes to the `Products` table would be rolled back in the face of a failed delete on `Categories`.</span></span> <span data-ttu-id="881aa-258">다음 저장된 프로시저 스크립트를 두 간의 원자성을 보장 하려면 트랜잭션을 사용 `DELETE` 문:</span><span class="sxs-lookup"><span data-stu-id="881aa-258">The following stored procedure script uses a transaction to assure atomicity between the two `DELETE` statements:</span></span>


[!code-sql[Main](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/samples/sample6.sql)]

<span data-ttu-id="881aa-259">추가할 잠시는 `Categories_Delete` 저장 프로시저를 Northwind 데이터베이스입니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-259">Take a moment to add the `Categories_Delete` stored procedure to the Northwind database.</span></span> <span data-ttu-id="881aa-260">데이터베이스에 저장된 프로시저를 추가 하는 방법은 1 단계를 다시 참조 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-260">Refer back to Step 1 for instructions on adding stored procedures to a database.</span></span>

## <a name="step-6-updating-thecategoriestableadapter"></a><span data-ttu-id="881aa-261">6단계: 업데이트는`CategoriesTableAdapter`</span><span class="sxs-lookup"><span data-stu-id="881aa-261">Step 6: Updating the`CategoriesTableAdapter`</span></span>

<span data-ttu-id="881aa-262">Ve 동안 추가 `Categories_Delete` DAL 데이터베이스에 저장된 프로시저는 임시 SQL 문을 사용 하 여 삭제를 수행 하도록 현재 구성 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-262">While we ve added the `Categories_Delete` stored procedure to the database, the DAL is currently configured to use ad-hoc SQL statements to perform the delete.</span></span> <span data-ttu-id="881aa-263">업데이트 해야 합니다 `CategoriesTableAdapter` 하 고 사용 하도록 지시 하는 `Categories_Delete` 저장 프로시저를 대신 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-263">We need to update the `CategoriesTableAdapter` and instruct it to use the `Categories_Delete` stored procedure instead.</span></span>

> [!NOTE]
> <span data-ttu-id="881aa-264">이 자습서의 앞부분에서 사용 하 여 작업을 `NorthwindWithSprocs` 데이터 집합입니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-264">Earlier in this tutorial we were working with the `NorthwindWithSprocs` DataSet.</span></span> <span data-ttu-id="881aa-265">단일 엔터티를만 집합이 없는 `ProductsDataTable`, 범주를 사용 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-265">But that DataSet only has a single entity, `ProductsDataTable`, and we need to work with categories.</span></span> <span data-ttu-id="881aa-266">따라서 참조 데이터 액세스 계층 I m을 이야기할 때이 자습서의 나머지 부분에 대 한 합니다 `Northwind` 데이터 집합에서 처음 만든 것을 [데이터 액세스 레이어 만들기](../introduction/creating-a-data-access-layer-cs.md) 자습서.</span><span class="sxs-lookup"><span data-stu-id="881aa-266">Therefore, for the remainder of this tutorial when I talk about the Data Access Layer I m referring to the `Northwind` DataSet, the one that we first created in the [Creating a Data Access Layer](../introduction/creating-a-data-access-layer-cs.md) tutorial.</span></span>


<span data-ttu-id="881aa-267">열기 Northwind 데이터 집합을 선택 합니다 `CategoriesTableAdapter`, 속성 창으로 이동 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-267">Open the Northwind DataSet, select the `CategoriesTableAdapter`, and go to the Properties window.</span></span> <span data-ttu-id="881aa-268">속성 창 목록을 합니다 `InsertCommand`, `UpdateCommand`를 `DeleteCommand`, 및 `SelectCommand` 해당 이름 및 연결 정보 뿐만 아니라 TableAdapter를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-268">The Properties window lists the `InsertCommand`, `UpdateCommand`, `DeleteCommand`, and `SelectCommand` used by the TableAdapter, as well as its name and connection information.</span></span> <span data-ttu-id="881aa-269">확장을 `DeleteCommand` 속성을 해당 세부 정보를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="881aa-269">Expand the `DeleteCommand` property to see its details.</span></span> <span data-ttu-id="881aa-270">그림 15와 같이 `DeleteCommand` s `CommandType` 텍스트를 보내도록 지시 하는 텍스트 속성을 `CommandText` 임시 SQL 쿼리로 속성.</span><span class="sxs-lookup"><span data-stu-id="881aa-270">As Figure 15 shows, the `DeleteCommand` s `CommandType` property is set to Text, which instructs it to send the text in the `CommandText` property as an ad-hoc SQL query.</span></span>


![속성 창에서 해당 속성을 보려면 디자이너에서의 CategoriesTableAdapter 선택](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image43.png)

<span data-ttu-id="881aa-272">**그림 15**: 선택 된 `CategoriesTableAdapter` 속성 창에서 해당 속성을 보려면 디자이너에서</span><span class="sxs-lookup"><span data-stu-id="881aa-272">**Figure 15**: Select the `CategoriesTableAdapter` in the Designer to View Its Properties in the Properties Window</span></span>


<span data-ttu-id="881aa-273">이러한 설정을 변경 하려면 속성 창에서 (DeleteCommand) 텍스트를 선택 하 고 드롭다운 목록에서 (새로 만들기)를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-273">To change these settings, select the (DeleteCommand) text in the Properties window and choose (New) from the drop-down list.</span></span> <span data-ttu-id="881aa-274">에 대 한 설정을 지웁니다 합니다 `CommandText`, `CommandType`, 및 `Parameters` 속성입니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-274">This will clear out the settings for the `CommandText`, `CommandType`, and `Parameters` properties.</span></span> <span data-ttu-id="881aa-275">다음으로 설정 합니다 `CommandType` 속성을 `StoredProcedure` 저장된 프로시저에 대 한 이름을 입력 하 고는 `CommandText` (`dbo.Categories_Delete`).</span><span class="sxs-lookup"><span data-stu-id="881aa-275">Next, set the `CommandType` property to `StoredProcedure` and then type in the name of the stored procedure for the `CommandText` (`dbo.Categories_Delete`).</span></span> <span data-ttu-id="881aa-276">먼저 순에서 속성을 입력 해야 하는 경우는 `CommandType` 차례로 `CommandText` -Visual Studio에서 매개 변수 컬렉션을 자동으로 채워집니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-276">If you make sure to enter the properties in this order - first the `CommandType` and then the `CommandText` - Visual Studio will automatically populate the Parameters collection.</span></span> <span data-ttu-id="881aa-277">이러한 속성에이 순서를 입력 하지 않으면를 사용 하는 경우에 수동으로 매개 변수 컬렉션 편집기를 통해 매개 변수를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-277">If you do not enter these properties in this order, you will have to manually add the parameters through the Parameters Collection Editor.</span></span> <span data-ttu-id="881aa-278">두 경우 모두 해당 s (그림 16 참조)는 올바른 매개 변수 설정을 변경 내용이 있는지 확인 하는 매개 변수 컬렉션 편집기를 표시 하려면 매개 변수 속성의 줄임표를 클릭 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-278">In either case, it s prudent to click on the ellipses in the Parameters property to bring up the Parameters Collection Editor to verify that the correct parameter settings changes have been made (see Figure 16).</span></span> <span data-ttu-id="881aa-279">대화 상자에서 매개 변수를 표시 되지 않으면 추가 합니다 `@CategoryID` 매개 변수 수동으로 (추가할 필요가 없습니다를 `@RETURN_VALUE` 매개 변수).</span><span class="sxs-lookup"><span data-stu-id="881aa-279">If you do not see any parameters in the dialog box, add the `@CategoryID` parameter manually (you do not need to add the `@RETURN_VALUE` parameter).</span></span>


![매개 변수 설정이 올바른지 확인 합니다.](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs/_static/image44.png)

<span data-ttu-id="881aa-281">**그림 16**: 매개 변수 설정이 올바른지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-281">**Figure 16**: Ensure That the Parameters Settings are Correct</span></span>


<span data-ttu-id="881aa-282">DAL를 업데이트 하면 범주를 삭제 하면 자동으로 모든 연결 된 제품 삭제를 트랜잭션의 산하 이렇게 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-282">Once the DAL has been updated, deleting a category will automatically delete all of its associated products and do so under the umbrella of a transaction.</span></span> <span data-ttu-id="881aa-283">이 확인 하려면 업데이트 및 삭제 하면 기존 이진 데이터 페이지로 반환 하 고 범주 중 하나에 대 한 삭제 단추를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-283">To verify this, return to the Updating and Deleting Existing Binary Data page and click the Delete button for one of the categories.</span></span> <span data-ttu-id="881aa-284">한 번의 클릭으로 마우스의 범주와 모든 연결 된 제품 삭제 됩니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-284">With one single click of the mouse, the category and all of its associated products will be deleted.</span></span>

> [!NOTE]
> <span data-ttu-id="881aa-285">테스트 하기 전에 `Categories_Delete` 저장된 프로시저는 선택한 범주와 제품을 삭제 하는 것이 좋습니다 데이터베이스의 백업 복사본.</span><span class="sxs-lookup"><span data-stu-id="881aa-285">Before testing the `Categories_Delete` stored procedure, which will delete a number of products along with the selected category, it might be prudent to make a backup copy of your database.</span></span> <span data-ttu-id="881aa-286">사용 중인 경우는 `NORTHWND.MDF` 데이터베이스에 `App_Data`, 단순히 Visual Studio를 닫고의 MDF 및 LDF 파일을 복사 `App_Data` 다른 폴더로 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-286">If you are using the `NORTHWND.MDF` database in `App_Data`, simply close Visual Studio and copy the MDF and LDF files in `App_Data` to some other folder.</span></span> <span data-ttu-id="881aa-287">기능을 테스트 한 후 Visual Studio를 닫으면 데이터베이스를 복원할 수 및 현재 MDF 및 LDF 대체 파일 `App_Data` 백업 복사본을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-287">After testing the functionality, you can restore the database by closing Visual Studio and replacing the current MDF and LDF files in `App_Data` with the backup copies.</span></span>


## <a name="summary"></a><span data-ttu-id="881aa-288">요약</span><span class="sxs-lookup"><span data-stu-id="881aa-288">Summary</span></span>

<span data-ttu-id="881aa-289">TableAdapter가의 마법사는 자동으로 우리 회사에 저장된 프로시저를 생성 하지만, 경우에서는 이미 만든 이러한 저장된 프로시저가 있는 수도 만들고 수동으로 또는 다른 도구를 사용 하 여 대신 경우가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-289">While the TableAdapter s wizard will automatically generate stored procedures for us, there are times when we might already have such stored procedures created or want to create them manually or with other tools instead.</span></span> <span data-ttu-id="881aa-290">이러한 시나리오를 수용할 수 있도록 TableAdapter 기존 저장된 프로시저를 가리키도록 구성할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-290">To accommodate such scenarios, the TableAdapter can also be configured to point to an existing stored procedure.</span></span> <span data-ttu-id="881aa-291">이 자습서에서는 Visual Studio 환경을 통해 데이터베이스에 저장된 프로시저를 수동으로 추가 하는 방법 및 이러한 저장된 프로시저를 TableAdapter가의 메서드를 연결 하는 방법을 살펴보았습니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-291">In this tutorial we looked at how to manually add stored procedures to a database through the Visual Studio environment and how to wire the TableAdapter s methods to these stored procedures.</span></span> <span data-ttu-id="881aa-292">에서는 T-SQL 명령 및 스크립트 패턴 시작, 커밋 및 저장된 프로시저 내에서 트랜잭션을 롤백하는 데에 검사 합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-292">We also examined the T-SQL commands and script pattern used for starting, committing, and rolling back transactions from within a stored procedure.</span></span>

<span data-ttu-id="881aa-293">즐거운 프로그래밍!</span><span class="sxs-lookup"><span data-stu-id="881aa-293">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="881aa-294">저자 소개</span><span class="sxs-lookup"><span data-stu-id="881aa-294">About the Author</span></span>

<span data-ttu-id="881aa-295">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), 7 ASP/ASP.NET 서적의 저자 이자 설립자입니다 [4GuysFromRolla.com](http://www.4guysfromrolla.com), 1998 Microsoft 웹 기술을 사용 하 여 왔습니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-295">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="881aa-296">Scott는 독립 컨설턴트, 강사, 그리고 기록기로 작동합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-296">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="881aa-297">최근 저서는 [ *Sams 설명 직접 ASP.NET 2.0 24 시간 동안의*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-297">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="881aa-298">그에 도달할 수 있습니다 [ mitchell@4GuysFromRolla.com합니다.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="881aa-298">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="881aa-299">찾을 수 있는 저자의 블로그를 통해 또는 [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET)합니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-299">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="881aa-300">특별히 감사</span><span class="sxs-lookup"><span data-stu-id="881aa-300">Special Thanks To</span></span>

<span data-ttu-id="881aa-301">이 자습서 시리즈는 많은 유용한 검토자가 검토 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-301">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="881aa-302">이 자습서에 대 한 선행 검토자 Hilton Geisenow, S ren Jacob Lauritsen 및 Teresa Murphy 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="881aa-302">Lead reviewers for this tutorial were Hilton Geisenow, S ren Jacob Lauritsen, and Teresa Murphy.</span></span> <span data-ttu-id="881aa-303">내 향후 MSDN 문서를 검토에 관심이 있으십니까?</span><span class="sxs-lookup"><span data-stu-id="881aa-303">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="881aa-304">그렇다면 삭제 나에서 선 [ mitchell@4GuysFromRolla.com합니다.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="881aa-304">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="881aa-305">[이전](creating-new-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md)
> [다음](updating-the-tableadapter-to-use-joins-cs.md)</span><span class="sxs-lookup"><span data-stu-id="881aa-305">[Previous](creating-new-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md)
[Next](updating-the-tableadapter-to-use-joins-cs.md)</span></span>
