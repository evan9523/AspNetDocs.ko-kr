---
uid: web-forms/overview/older-versions-getting-started/master-pages/interacting-with-the-content-page-from-the-master-page-cs
title: 마스터 페이지에서 콘텐츠 페이지와 상호 작용 (C#) | Microsoft Docs
author: rick-anderson
description: 마스터 페이지의 코드에서 콘텐츠 페이지의 메서드를 호출 하 고 속성을 설정 하는 방법을 살펴봅니다.
ms.author: riande
ms.date: 07/11/2008
ms.assetid: 3282df5e-516c-4972-8666-313828b90fb5
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/interacting-with-the-content-page-from-the-master-page-cs
msc.type: authoredcontent
ms.openlocfilehash: 2cf57665aa584285351d874267949d61db69c7fc
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74635675"
---
# <a name="interacting-with-the-content-page-from-the-master-page-c"></a><span data-ttu-id="301b5-103">마스터 페이지에서 콘텐츠 페이지와 상호 작용(C#)</span><span class="sxs-lookup"><span data-stu-id="301b5-103">Interacting with the Content Page from the Master Page (C#)</span></span>

<span data-ttu-id="301b5-104">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="301b5-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="301b5-105">[코드 다운로드](https://download.microsoft.com/download/1/8/4/184e24fa-fcc8-47fa-ac99-4b6a52d41e97/ASPNET_MasterPages_Tutorial_07_CS.zip) 또는 [PDF 다운로드](https://download.microsoft.com/download/e/b/4/eb4abb10-c416-4ba4-9899-32577715b1bd/ASPNET_MasterPages_Tutorial_07_CS.pdf)</span><span class="sxs-lookup"><span data-stu-id="301b5-105">[Download Code](https://download.microsoft.com/download/1/8/4/184e24fa-fcc8-47fa-ac99-4b6a52d41e97/ASPNET_MasterPages_Tutorial_07_CS.zip) or [Download PDF](https://download.microsoft.com/download/e/b/4/eb4abb10-c416-4ba4-9899-32577715b1bd/ASPNET_MasterPages_Tutorial_07_CS.pdf)</span></span>

> <span data-ttu-id="301b5-106">마스터 페이지의 코드에서 콘텐츠 페이지의 메서드를 호출 하 고 속성을 설정 하는 방법을 살펴봅니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-106">Examines how to call methods, set properties, etc. of the Content Page from code in the Master Page.</span></span>

## <a name="introduction"></a><span data-ttu-id="301b5-107">소개</span><span class="sxs-lookup"><span data-stu-id="301b5-107">Introduction</span></span>

<span data-ttu-id="301b5-108">이전 자습서에서는 콘텐츠 페이지를 프로그래밍 방식으로 마스터 페이지와 상호 작용 하는 방법을 살펴보았습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-108">The preceding tutorial examined how to have the content page programmatically interact with its master page.</span></span> <span data-ttu-id="301b5-109">가장 최근에 추가 된 5 개 제품에 나열 된 GridView 컨트롤을 포함 하도록 마스터 페이지를 업데이트 했습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-109">Recall that we updated the master page to include a GridView control that listed the five most recently added products.</span></span> <span data-ttu-id="301b5-110">그런 다음 사용자가 새 제품을 추가할 수 있는 콘텐츠 페이지를 만들었습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-110">We then created a content page from which the user could add a new product.</span></span> <span data-ttu-id="301b5-111">새 제품을 추가할 때 콘텐츠 페이지는 방금 추가 된 제품을 포함 하도록 GridView를 새로 고치도록 마스터 페이지에 지시 하는 데 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-111">Upon adding a new product, the content page needed to instruct the master page to refresh its GridView so that it would include the just-added product.</span></span> <span data-ttu-id="301b5-112">이 기능은 GridView에 바인딩된 데이터를 새로 고친 후 콘텐츠 페이지에서 해당 메서드를 호출 하는 마스터 페이지에 공용 메서드를 추가 하 여 수행 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-112">This functionality was accomplished by adding a public method to the master page that refreshed the data bound to the GridView, and then invoking that method from the content page.</span></span>

<span data-ttu-id="301b5-113">콘텐츠 페이지에서 가장 일반적으로 발생 하는 콘텐츠 및 마스터 페이지 상호 작용의 형태입니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-113">The most common form of content and master page interaction originates from the content page.</span></span> <span data-ttu-id="301b5-114">그러나 마스터 페이지에서 현재 콘텐츠 페이지의 작업을 rouse 수 있으며, 사용자가 콘텐츠 페이지에도 표시 되는 데이터를 수정할 수 있는 사용자 인터페이스 요소를 마스터 페이지에 포함 하는 경우 이러한 기능이 필요할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-114">However, it is possible for the master page to rouse the current content page into action, and such functionality may be needed if the master page contains user interface elements that enable users to modify data that is also displayed on the content page.</span></span> <span data-ttu-id="301b5-115">GridView 컨트롤의 제품 정보를 표시 하는 콘텐츠 페이지와 클릭 하면 모든 제품의 가격을 두 배로 늘리는 단추 컨트롤이 포함 된 마스터 페이지를 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-115">Consider a content page that displays the products information in a GridView control and a master page that includes a Button control that, when clicked, doubles the prices of all products.</span></span> <span data-ttu-id="301b5-116">이전 자습서의 예제와 마찬가지로, 새 가격을 표시 하도록 이중 가격 단추를 클릭 한 후 GridView를 새로 고쳐야 하지만,이 시나리오에서는 콘텐츠 페이지를 작업으로 rouse는 데 필요한 마스터 페이지입니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-116">Much like the example in the preceding tutorial, the GridView needs to be refreshed after the double price Button is clicked so that it displays the new prices, but in this scenario it's the master page that needs to rouse the content page into action.</span></span>

<span data-ttu-id="301b5-117">이 자습서에서는 콘텐츠 페이지에서 마스터 페이지 호출 기능을 정의 하는 방법을 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-117">This tutorial explores how to have the master page invoke functionality defined in the content page.</span></span>

### <a name="instigating-programmatic-interaction-via-an-event-and-event-handlers"></a><span data-ttu-id="301b5-118">이벤트 및 이벤트 처리기를 통해 프로그래밍 방식으로 상호 작용 Instigating</span><span class="sxs-lookup"><span data-stu-id="301b5-118">Instigating Programmatic Interaction via an Event and Event Handlers</span></span>

<span data-ttu-id="301b5-119">마스터 페이지에서 콘텐츠 페이지 기능을 호출 하는 것은 다른 방법 보다 더 어렵습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-119">Invoking content page functionality from a master page is more challenging than the other way around.</span></span> <span data-ttu-id="301b5-120">콘텐츠 페이지에는 단일 마스터 페이지가 있으므로 콘텐츠 페이지에서 프로그래밍 방식으로 상호 작용을 instigating 때 어떤 공용 메서드 및 속성이 삭제 되는지 알고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-120">Because a content page has a single master page, when instigating the programmatic interaction from the content page we know what public methods and properties are at our disposal.</span></span> <span data-ttu-id="301b5-121">그러나 마스터 페이지에는 각각 고유한 속성 및 메서드 집합을 포함 하는 다양 한 콘텐츠 페이지가 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-121">A master page, however, can have many different content pages, each with its own set of properties and methods.</span></span> <span data-ttu-id="301b5-122">이렇게 하면 런타임 시까지 호출 될 내용 페이지를 모를 때 콘텐츠 페이지에서 일부 작업을 수행 하기 위해 마스터 페이지에서 코드를 작성할 수 있나요?</span><span class="sxs-lookup"><span data-stu-id="301b5-122">How, then, can we write code in the master page to perform some action in its content page when we don't know what content page will be invoked until runtime?</span></span>

<span data-ttu-id="301b5-123">Button 컨트롤과 같은 ASP.NET 웹 컨트롤을 고려 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-123">Consider an ASP.NET Web control, such as the Button control.</span></span> <span data-ttu-id="301b5-124">단추 컨트롤은 원하는 수의 ASP.NET 페이지에 나타날 수 있으며, 클릭 된 페이지에 경고할 수 있는 메커니즘이 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-124">A Button control can appear on any number of ASP.NET pages and needs a mechanism by which it can alert the page that it has been clicked.</span></span> <span data-ttu-id="301b5-125">이는 *이벤트*를 사용 하 여 수행 됩니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-125">This is accomplished using *events*.</span></span> <span data-ttu-id="301b5-126">특히 단추 컨트롤이 클릭 될 때 `Click` 이벤트를 발생 시킵니다. 단추를 포함 하는 ASP.NET 페이지는 *이벤트 처리기*를 통해 해당 알림에 선택적으로 응답할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-126">In particular, the Button control raises its `Click` event when it is clicked; the ASP.NET page that contains the Button can optionally respond to that notification via an *event handler*.</span></span>

<span data-ttu-id="301b5-127">동일한 패턴을 사용 하 여 해당 콘텐츠 페이지에서 마스터 페이지 트리거 기능을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-127">This same pattern can be used to have a master page trigger functionality in its content pages:</span></span>

1. <span data-ttu-id="301b5-128">마스터 페이지에 이벤트를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-128">Add an event to the master page.</span></span>
2. <span data-ttu-id="301b5-129">마스터 페이지가 해당 콘텐츠 페이지와 통신 해야 할 때마다 이벤트를 발생 시킵니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-129">Raise the event whenever the master page needs to communicate with its content page.</span></span> <span data-ttu-id="301b5-130">예를 들어 마스터 페이지가 해당 콘텐츠 페이지에 사용자가 두 배로 증가 하는 것을 경고 해야 하는 경우 가격은 두 배가 되 면 즉시 이벤트가 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-130">For example, if the master page needs to alert its content page that the user has doubled the prices, its event would be raised immediately after the prices have been doubled.</span></span>
3. <span data-ttu-id="301b5-131">일부 작업을 수행 해야 하는 해당 콘텐츠 페이지에서 이벤트 처리기를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-131">Create an event handler in those content pages that need to take some action.</span></span>

<span data-ttu-id="301b5-132">이 자습서의 나머지 부분에서는 소개에 설명 된 예제를 구현 합니다. 즉, 데이터베이스의 제품을 나열 하는 콘텐츠 페이지와 가격을 double 하는 단추 컨트롤이 포함 된 마스터 페이지입니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-132">This remainder of this tutorial implements the example outlined in the Introduction; namely, a content page that lists the products in the database and a master page that includes a Button control to double the prices.</span></span>

## <a name="step-1-displaying-products-in-a-content-page"></a><span data-ttu-id="301b5-133">1 단계: 콘텐츠 페이지에서 제품 표시</span><span class="sxs-lookup"><span data-stu-id="301b5-133">Step 1: Displaying Products in a Content Page</span></span>

<span data-ttu-id="301b5-134">비즈니스의 첫 번째 순서는 Northwind 데이터베이스의 제품을 나열 하는 콘텐츠 페이지를 만드는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-134">Our first order of business is to create a content page that lists the products from the Northwind database.</span></span> <span data-ttu-id="301b5-135">(이전 자습서의 프로젝트에 Northwind 데이터베이스를 추가 하 여 [*콘텐츠 페이지에서 마스터 페이지와 상호 작용*](interacting-with-the-master-page-from-the-content-page-cs.md)했습니다.) 먼저 `Products.aspx`이라는 `~/Admin` 폴더에 새 ASP.NET 페이지를 추가 하 고 `Site.master` 마스터 페이지에 바인딩해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-135">(We added the Northwind database to the project in the preceding tutorial, [*Interacting with the Master Page from the Content Page*](interacting-with-the-master-page-from-the-content-page-cs.md).) Start by adding a new ASP.NET page to the `~/Admin` folder named `Products.aspx`, making sure to bind it to the `Site.master` master page.</span></span> <span data-ttu-id="301b5-136">그림 1에서는이 페이지가 웹 사이트에 추가 된 후의 솔루션 탐색기 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-136">Figure 1 shows the Solution Explorer after this page has been added to the website.</span></span>

<span data-ttu-id="301b5-137">[관리 폴더에 새 ASP.NET 페이지를 추가 ![](interacting-with-the-content-page-from-the-master-page-cs/_static/image2.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="301b5-137">[![Add a New ASP.NET Page to the Admin Folder](interacting-with-the-content-page-from-the-master-page-cs/_static/image2.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image1.png)</span></span>

<span data-ttu-id="301b5-138">**그림 01**: `Admin` 폴더에 새 ASP.NET 페이지 추가 ([전체 크기 이미지를 보려면 클릭](interacting-with-the-content-page-from-the-master-page-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="301b5-138">**Figure 01**: Add a New ASP.NET Page to the `Admin` Folder ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image3.png))</span></span>

<span data-ttu-id="301b5-139">[*마스터 페이지에서 제목, 메타 태그 및 기타 HTML 헤더 지정*](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) 자습서에서 명시적으로 설정 하지 않은 경우 페이지의 제목을 생성 하는 `BasePage` 이라는 사용자 지정 기본 페이지 클래스를 만들었습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-139">Recall that in the [*Specifying the Title, Meta Tags, and Other HTML Headers in the Master Page*](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) tutorial we created a custom base page class named `BasePage` that generates the page's title if it is not explicitly set.</span></span> <span data-ttu-id="301b5-140">`Products.aspx` 페이지의 코드 숨김으로 클래스로 이동 하 여 `BasePage` (`System.Web.UI.Page`대신)에서 파생 되도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-140">Go to the `Products.aspx` page's code-behind class and have it derive from `BasePage` (instead of from `System.Web.UI.Page`).</span></span>

<span data-ttu-id="301b5-141">마지막으로이 단원에 대 한 항목을 포함 하도록 `Web.sitemap` 파일을 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-141">Finally, update the `Web.sitemap` file to include an entry for this lesson.</span></span> <span data-ttu-id="301b5-142">마스터 페이지 상호 작용 단원에 대 한 콘텐츠 `<siteMapNode>` 아래에 다음 태그를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-142">Add the following markup beneath the `<siteMapNode>` for the Content to Master Page Interaction lesson:</span></span>

[!code-xml[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample1.xml)]

<span data-ttu-id="301b5-143">이 `<siteMapNode>` 요소를 추가 하는 방법은 단원 목록에 반영 되어 있습니다 (그림 5 참조).</span><span class="sxs-lookup"><span data-stu-id="301b5-143">The addition of this `<siteMapNode>` element is reflected in the Lessons list (see Figure 5).</span></span>

<span data-ttu-id="301b5-144">`Products.aspx`로 돌아갑니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-144">Return to `Products.aspx`.</span></span> <span data-ttu-id="301b5-145">`MainContent`에 대 한 콘텐츠 컨트롤에서 GridView 컨트롤을 추가 하 고 이름을 `ProductsGrid`로 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-145">In the Content control for `MainContent`, add a GridView control and name it `ProductsGrid`.</span></span> <span data-ttu-id="301b5-146">GridView를 `ProductsDataSource`라는 새 SqlDataSource 컨트롤에 바인딩합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-146">Bind the GridView to a new SqlDataSource control named `ProductsDataSource`.</span></span>

<span data-ttu-id="301b5-147">[GridView를 새 SqlDataSource 컨트롤에 바인딩 ![](interacting-with-the-content-page-from-the-master-page-cs/_static/image5.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="301b5-147">[![Bind the GridView to a New SqlDataSource Control](interacting-with-the-content-page-from-the-master-page-cs/_static/image5.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image4.png)</span></span>

<span data-ttu-id="301b5-148">**그림 02**: GridView를 새 SqlDataSource 컨트롤에 바인딩 ([전체 크기 이미지를 보려면 클릭](interacting-with-the-content-page-from-the-master-page-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="301b5-148">**Figure 02**: Bind the GridView to a New SqlDataSource Control  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image6.png))</span></span>

<span data-ttu-id="301b5-149">Northwind 데이터베이스를 사용 하도록 마법사를 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-149">Configure the wizard so that it uses the Northwind database.</span></span> <span data-ttu-id="301b5-150">이전 자습서를 수행한 경우에는 `Web.config`에 `NorthwindConnectionString` 라는 연결 문자열이 이미 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-150">If you worked through the previous tutorial then you should already have a connection string named `NorthwindConnectionString` in `Web.config`.</span></span> <span data-ttu-id="301b5-151">그림 3에 표시 된 것 처럼 드롭다운 목록에서이 연결 문자열을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-151">Choose this connection string from the drop-down list, as shown in Figure 3.</span></span>

<span data-ttu-id="301b5-152">[Northwind 데이터베이스를 사용 하도록 SqlDataSource를 구성 ![](interacting-with-the-content-page-from-the-master-page-cs/_static/image8.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="301b5-152">[![Configure the SqlDataSource to Use the Northwind Database](interacting-with-the-content-page-from-the-master-page-cs/_static/image8.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image7.png)</span></span>

<span data-ttu-id="301b5-153">**그림 03**: Northwind 데이터베이스를 사용 하도록 SqlDataSource 구성 ([전체 크기 이미지를 보려면 클릭](interacting-with-the-content-page-from-the-master-page-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="301b5-153">**Figure 03**: Configure the SqlDataSource to Use the Northwind Database  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image9.png))</span></span>

<span data-ttu-id="301b5-154">그런 다음 드롭다운 목록에서 Products 테이블을 선택 하 고 `ProductName` 및 `UnitPrice` 열을 반환 하 여 데이터 소스 컨트롤의 `SELECT` 문을 지정 합니다 (그림 4 참조).</span><span class="sxs-lookup"><span data-stu-id="301b5-154">Next, specify the data source control's `SELECT` statement by choosing the Products table from the drop-down list and returning the `ProductName` and `UnitPrice` columns (see Figure 4).</span></span> <span data-ttu-id="301b5-155">다음을 클릭 하 고 마침을 클릭 하 여 데이터 원본 구성 마법사를 완료 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-155">Click Next and then Finish to complete the Configure Data Source wizard.</span></span>

<span data-ttu-id="301b5-156">[Products 테이블에서 ProductName 및 UnitPrice 필드를 반환 ![](interacting-with-the-content-page-from-the-master-page-cs/_static/image11.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="301b5-156">[![Return the ProductName and UnitPrice Fields from the Products Table](interacting-with-the-content-page-from-the-master-page-cs/_static/image11.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image10.png)</span></span>

<span data-ttu-id="301b5-157">**그림 04**: `Products` 테이블의 `ProductName` 및 `UnitPrice` 필드 반환 ([전체 크기 이미지를 보려면 클릭](interacting-with-the-content-page-from-the-master-page-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="301b5-157">**Figure 04**: Return the `ProductName` and `UnitPrice` Fields from the `Products` Table  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image12.png))</span></span>

<span data-ttu-id="301b5-158">이것이 전부입니다!</span><span class="sxs-lookup"><span data-stu-id="301b5-158">That's all there is to it!</span></span> <span data-ttu-id="301b5-159">마법사를 완료 한 후 Visual Studio에서는 두 개의 BoundFields를 GridView에 추가 하 여 SqlDataSource 컨트롤에서 반환 된 두 필드를 미러링합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-159">After completing the wizard Visual Studio adds two BoundFields to the GridView to mirror the two fields returned by the SqlDataSource control.</span></span> <span data-ttu-id="301b5-160">GridView 및 SqlDataSource 컨트롤의 태그는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-160">The GridView and SqlDataSource controls' markup follows.</span></span> <span data-ttu-id="301b5-161">그림 5는 브라우저를 통해 볼 때의 결과를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-161">Figure 5 shows the results when viewed through a browser.</span></span>

[!code-aspx[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample2.aspx)]

<span data-ttu-id="301b5-162">[각 제품 및 해당 가격이 GridView에 나열 ![](interacting-with-the-content-page-from-the-master-page-cs/_static/image14.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="301b5-162">[![Each Product and its Price is Listed in the GridView](interacting-with-the-content-page-from-the-master-page-cs/_static/image14.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image13.png)</span></span>

<span data-ttu-id="301b5-163">**그림 05**: 각 제품과 가격은 GridView에 나열 됩니다 ([전체 크기 이미지를 보려면 클릭](interacting-with-the-content-page-from-the-master-page-cs/_static/image15.png)).</span><span class="sxs-lookup"><span data-stu-id="301b5-163">**Figure 05**: Each Product and its Price is Listed in the GridView  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image15.png))</span></span>

> [!NOTE]
> <span data-ttu-id="301b5-164">GridView의 모양을 자유롭게 정리 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-164">Feel free to clean up the appearance of the GridView.</span></span> <span data-ttu-id="301b5-165">표시 되는 UnitPrice 값의 서식을 통화로 지정 하 고 배경색 및 글꼴을 사용 하 여 표의 모양을 개선 하는 것도 여기에 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-165">Some suggestions include formatting the displayed UnitPrice value as a currency and using background colors and fonts to improve the grid's appearance.</span></span> <span data-ttu-id="301b5-166">ASP.NET에서 데이터를 표시 하 고 서식 지정 하는 방법에 대 한 자세한 내용은 [데이터 자습서 시리즈 작업](../../data-access/index.md)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="301b5-166">For more information on displaying and formatting data in ASP.NET, refer to my [Working with Data tutorial series](../../data-access/index.md).</span></span>

## <a name="step-2-adding-a-double-prices-button-to-the-master-page"></a><span data-ttu-id="301b5-167">2 단계: 마스터 페이지에 이중 가격 단추 추가</span><span class="sxs-lookup"><span data-stu-id="301b5-167">Step 2: Adding a Double Prices Button to the Master Page</span></span>

<span data-ttu-id="301b5-168">다음 작업은 클릭 하면 데이터베이스에 있는 모든 제품의 가격을 두 배로 하는 단추 웹 컨트롤을 마스터 페이지에 추가 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-168">Our next task is to add a Button Web control to the master page that, when clicked, will double the price of all products in the database.</span></span> <span data-ttu-id="301b5-169">`Site.master` 마스터 페이지를 열고 도구 상자의 단추를 디자이너로 끌어 온 다음 이전 자습서에서 추가한 `RecentProductsDataSource` SqlDataSource 컨트롤 아래에 배치 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-169">Open the `Site.master` master page and drag a Button from the Toolbox onto the Designer, placing it beneath the `RecentProductsDataSource` SqlDataSource control we added in the previous tutorial.</span></span> <span data-ttu-id="301b5-170">단추의 `ID` 속성을 `DoublePrice`로 설정 하 고 `Text` 속성을 "이중 제품 가격"으로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-170">Set the Button's `ID` property to `DoublePrice` and its `Text` property to "Double Product Prices".</span></span>

<span data-ttu-id="301b5-171">다음으로, `DoublePricesDataSource`의 이름을 지정 하 여 SqlDataSource 컨트롤을 마스터 페이지에 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-171">Next, add a SqlDataSource control to the master page, naming it `DoublePricesDataSource`.</span></span> <span data-ttu-id="301b5-172">이 SqlDataSource는 `UPDATE` 문을 실행 하 여 모든 가격을 두 배로 하는 데 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-172">This SqlDataSource will be used to execute the `UPDATE` statement to double all prices.</span></span> <span data-ttu-id="301b5-173">특히 `ConnectionString` 및 `UpdateCommand` 속성을 적절 한 연결 문자열과 `UPDATE` 문으로 설정 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-173">Specifically, we need to set its `ConnectionString` and `UpdateCommand` properties to the appropriate connection string and `UPDATE` statement.</span></span> <span data-ttu-id="301b5-174">그런 다음 `DoublePrice` 단추를 클릭 하면이 SqlDataSource 컨트롤의 `Update` 메서드를 호출 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-174">Then we need to call this SqlDataSource control's `Update` method when the `DoublePrice` Button is clicked.</span></span> <span data-ttu-id="301b5-175">`ConnectionString` 및 `UpdateCommand` 속성을 설정 하려면 SqlDataSource 컨트롤을 선택한 다음 속성 창으로 이동 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-175">To set the `ConnectionString` and `UpdateCommand` properties, select the SqlDataSource control and then go to the Properties window.</span></span> <span data-ttu-id="301b5-176">`ConnectionString` 속성은 드롭다운 목록에서 `Web.config`에 이미 저장 되어 있는 연결 문자열을 나열 합니다. 그림 6에 표시 된 것 처럼 `NorthwindConnectionString` 옵션을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-176">The `ConnectionString` property lists those connection strings already stored in `Web.config` in a drop-down list; choose the `NorthwindConnectionString` option as shown in Figure 6.</span></span>

<span data-ttu-id="301b5-177">[NorthwindConnectionString를 사용 하도록 SqlDataSource를 구성 ![](interacting-with-the-content-page-from-the-master-page-cs/_static/image17.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="301b5-177">[![Configure the SqlDataSource to Use the NorthwindConnectionString](interacting-with-the-content-page-from-the-master-page-cs/_static/image17.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image16.png)</span></span>

<span data-ttu-id="301b5-178">**그림 06**: `NorthwindConnectionString`을 사용 하도록 SqlDataSource 구성 ([전체 크기 이미지를 보려면 클릭](interacting-with-the-content-page-from-the-master-page-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="301b5-178">**Figure 06**: Configure the SqlDataSource to Use the `NorthwindConnectionString` ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image18.png))</span></span>

<span data-ttu-id="301b5-179">`UpdateCommand` 속성을 설정 하려면 속성 창에서 UpdateQuery 옵션을 찾습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-179">To set the `UpdateCommand` property, locate the UpdateQuery option in the Properties window.</span></span> <span data-ttu-id="301b5-180">이 속성을 선택 하면 타원이 있는 단추가 표시 됩니다. 그림 7에 표시 된 명령 및 매개 변수 편집기 대화 상자를 표시 하려면이 단추를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-180">This property, when selected, displays a button with ellipses; click this button to display the Command and Parameter Editor dialog box shown in Figure 7.</span></span> <span data-ttu-id="301b5-181">대화 상자의 텍스트 상자에 다음 `UPDATE` 문을 입력 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-181">Type the following `UPDATE` statement into the dialog box's textbox:</span></span>

[!code-sql[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample3.sql)]

<span data-ttu-id="301b5-182">이 문은 실행 될 때 `Products` 테이블의 각 레코드에 대 한 `UnitPrice` 값을 두 배로 받습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-182">This statement, when executed, will double the `UnitPrice` value for each record in the `Products` table.</span></span>

<span data-ttu-id="301b5-183">[SqlDataSource의 UpdateCommand 속성 ![설정](interacting-with-the-content-page-from-the-master-page-cs/_static/image20.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="301b5-183">[![Set SqlDataSource's UpdateCommand Property](interacting-with-the-content-page-from-the-master-page-cs/_static/image20.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image19.png)</span></span>

<span data-ttu-id="301b5-184">**그림 07**: SqlDataSource의 `UpdateCommand` 속성 설정 ([전체 크기 이미지를 보려면 클릭](interacting-with-the-content-page-from-the-master-page-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="301b5-184">**Figure 07**: Set SqlDataSource's `UpdateCommand` Property  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image21.png))</span></span>

<span data-ttu-id="301b5-185">이러한 속성을 설정한 후에는 Button 및 SqlDataSource 컨트롤의 선언적 태그가 다음과 같이 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-185">After setting these properties, your Button and SqlDataSource controls' declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample4.aspx)]

<span data-ttu-id="301b5-186">`DoublePrice` 단추를 클릭 하면 `Update` 메서드를 호출 하는 것만 남았습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-186">All that remains is to call its `Update` method when the `DoublePrice` Button is clicked.</span></span> <span data-ttu-id="301b5-187">`DoublePrice` 단추에 대 한 `Click` 이벤트 처리기를 만들고 다음 코드를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-187">Create a `Click` event handler for the `DoublePrice` Button and add the following code:</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample5.cs)]

<span data-ttu-id="301b5-188">이 기능을 테스트 하려면 1 단계에서 만든 `~/Admin/Products.aspx` 페이지를 방문 하 고 "이중 제품 가격" 단추를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-188">To test this functionality, visit the `~/Admin/Products.aspx` page we created in Step 1 and click the "Double Product Prices" button.</span></span> <span data-ttu-id="301b5-189">단추를 클릭 하면 포스트백이 발생 하 고 `DoublePrice` 단추의 `Click` 이벤트 처리기가 실행 되어 모든 제품의 가격이 배가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-189">Clicking the button causes a postback and executes the `DoublePrice` Button's `Click` event handler, doubling the prices of all products.</span></span> <span data-ttu-id="301b5-190">그러면 페이지가 다시 렌더링 되 고 태그가 반환 되 고 브라우저에 다시 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-190">The page is then re-rendered and the markup is returned and re-displayed in the browser.</span></span> <span data-ttu-id="301b5-191">그러나 콘텐츠 페이지의 GridView에는 "이중 제품 가격" 단추가 클릭 되기 전과 동일한 가격이 나열 됩니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-191">The GridView in the content page, however, lists the same prices as before the "Double Product Prices" button was clicked.</span></span> <span data-ttu-id="301b5-192">이는 처음에 GridView에 로드 된 데이터의 상태가 뷰 상태에 저장 되기 때문입니다. 그렇지 않으면 지시 하지 않는 한 다시 게시 시 다시 로드 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-192">This is because the data initially loaded in the GridView had its state stored in view state, so it's not reloaded on postbacks unless instructed otherwise.</span></span> <span data-ttu-id="301b5-193">다른 페이지를 방문 하 여 `~/Admin/Products.aspx` 페이지로 돌아가면 업데이트 된 가격이 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-193">If you visit a different page and then return to the `~/Admin/Products.aspx` page you'll see the updated prices.</span></span>

## <a name="step-3-raising-an-event-when-the-prices-are-doubled"></a><span data-ttu-id="301b5-194">3 단계: 가격이 두 배가 될 때 이벤트 발생</span><span class="sxs-lookup"><span data-stu-id="301b5-194">Step 3: Raising an Event When the Prices are Doubled</span></span>

<span data-ttu-id="301b5-195">`~/Admin/Products.aspx` 페이지의 GridView에는 즉시 가격이 두 배가 반영 되지 않으므로 사용자는 "이중 제품 가격" 단추를 클릭 하지 않았거나 작동 하지 당연히 생각할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-195">Because the GridView in the `~/Admin/Products.aspx` page does not immediately reflect the price doubling, a user may understandably think that they did not click the "Double Product Prices" button, or that it didn't work.</span></span> <span data-ttu-id="301b5-196">단추를 몇 번 더 클릭 하 여 가격을 다시 두 번 시도할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-196">They may try clicking the button a few more times, doubling the prices again and again.</span></span> <span data-ttu-id="301b5-197">이 문제를 해결 하려면 콘텐츠 페이지에서 표가 두 배가 되는 즉시 새 가격을 표시 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-197">To fix this we need to have the grid in the content page display the new prices immediately after they are doubled.</span></span>

<span data-ttu-id="301b5-198">이 자습서의 앞부분에서 설명한 것 처럼 사용자가 `DoublePrice` 단추를 클릭할 때마다 마스터 페이지에서 이벤트를 발생 시켜야 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-198">As discussed earlier in this tutorial, we need to raise an event in the master page whenever the user clicks the `DoublePrice` Button.</span></span> <span data-ttu-id="301b5-199">이벤트는 특정 클래스 (이벤트 게시자)가 다른 클래스 집합 (이벤트 구독자)에 게 다른 클래스 집합을 알리는 방법입니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-199">An event is a way for one class (an event publisher) to notify another a set of other classes (the event subscribers) that something interesting has occurred.</span></span> <span data-ttu-id="301b5-200">이 예제에서 마스터 페이지는 이벤트 게시자입니다. `DoublePrice` 단추를 클릭 했을 때 관심 있는 콘텐츠 페이지는 구독자입니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-200">In this example, the master page is the event publisher; those content pages that care about when the `DoublePrice` Button is clicked are the subscribers.</span></span>

<span data-ttu-id="301b5-201">클래스는 발생 하는 이벤트에 대 한 응답으로 실행 되는 메서드인 *이벤트 처리기*를 만들어 이벤트를 구독 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-201">A class subscribes to an event by creating an *event handler*, which is a method that is executed in response to the event being raised.</span></span> <span data-ttu-id="301b5-202">게시자는 *이벤트 대리자*를 정의 하 여 발생 하는 이벤트를 정의 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-202">The publisher defines the events he raises by defining an *event delegate*.</span></span> <span data-ttu-id="301b5-203">이벤트 대리자는 이벤트 처리기에서 허용 해야 하는 입력 매개 변수를 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-203">The event delegate specifies what input parameters the event handler must accept.</span></span> <span data-ttu-id="301b5-204">.NET Framework에서 이벤트 대리자는 값을 반환 하지 않고 두 개의 입력 매개 변수를 허용 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-204">In the .NET Framework, event delegates do not return any value and accept two input parameters:</span></span>

- <span data-ttu-id="301b5-205">이벤트 소스를 식별 하는 `Object`및</span><span class="sxs-lookup"><span data-stu-id="301b5-205">An `Object`, which identifies the event source, and</span></span>
- <span data-ttu-id="301b5-206">에서 파생 된 클래스 `System.EventArgs`</span><span class="sxs-lookup"><span data-stu-id="301b5-206">A class derived from `System.EventArgs`</span></span>

<span data-ttu-id="301b5-207">이벤트 처리기에 전달 되는 두 번째 매개 변수에는 이벤트에 대 한 추가 정보가 포함 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-207">The second parameter passed to an event handler can include additional information about the event.</span></span> <span data-ttu-id="301b5-208">기본 `EventArgs` 클래스가 정보를 함께 전달 하지 않지만 .NET Framework에는 `EventArgs`를 확장 하 고 추가 속성을 포함 하는 여러 클래스가 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-208">While the base `EventArgs` class does not pass along any information, the .NET Framework includes a number of classes that extend `EventArgs` and encompass additional properties.</span></span> <span data-ttu-id="301b5-209">예를 들어 `CommandEventArgs` 인스턴스는 `Command` 이벤트에 응답 하는 이벤트 처리기에 전달 되 고 두 개의 정보 속성인 `CommandArgument` 및 `CommandName`를 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-209">For example, a `CommandEventArgs` instance is passed to event handlers that respond to the `Command` event, and includes two informational properties: `CommandArgument` and `CommandName`.</span></span>

> [!NOTE]
> <span data-ttu-id="301b5-210">이벤트 생성, 발생 및 처리에 대 한 자세한 내용은 간단한 영어로 표시 되는 이벤트 [및 대리자](https://msdn.microsoft.com/library/17sde2xt.aspx) 및 [이벤트 대리자](http://www.codeproject.com/KB/cs/eventdelegates.aspx)를 참조 하십시오.</span><span class="sxs-lookup"><span data-stu-id="301b5-210">For more information on creating, raising, and handling events, see [Events and Delegates](https://msdn.microsoft.com/library/17sde2xt.aspx) and [Event Delegates in Simple English](http://www.codeproject.com/KB/cs/eventdelegates.aspx).</span></span>

<span data-ttu-id="301b5-211">이벤트를 정의 하려면 다음 구문을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-211">To define an event use the following syntax:</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample6.cs)]

<span data-ttu-id="301b5-212">사용자가 `DoublePrice` 단추를 클릭 하 고 다른 추가 정보를 함께 전달 하지 않아도 되는 경우에만 콘텐츠 페이지에 경고를 발생 시킬 수 있으므로 이벤트 대리자 `EventHandler`를 사용할 수 있습니다 .이 대리자는 두 번째 매개 변수로 `System.EventArgs`형식의 개체를 수락 하는 이벤트 처리기를 정의 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-212">Because we only need to alert the content page when the user has clicked the `DoublePrice` Button and do not need to pass along any other additional information, we can use the event delegate `EventHandler`, which defines an event handler that accepts as its second parameter an object of type `System.EventArgs`.</span></span> <span data-ttu-id="301b5-213">마스터 페이지에서 이벤트를 만들려면 마스터 페이지의 코드 뒤에 다음 코드 줄을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-213">To create the event in the master page, add the following line of code to the master page's code-behind class:</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample7.cs)]

<span data-ttu-id="301b5-214">위의 코드는 `PricesDoubled`이라는 마스터 페이지에 공용 이벤트를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-214">The above code adds a public event to the master page named `PricesDoubled`.</span></span> <span data-ttu-id="301b5-215">이제 가격이 두 배가 된 후에이 이벤트를 발생 시켜야 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-215">We now need to raise this event after the prices have been doubled.</span></span> <span data-ttu-id="301b5-216">이벤트를 발생 시키려면 다음 구문을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-216">To raise an event use the following syntax:</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample8.cs)]

<span data-ttu-id="301b5-217">여기서 *발신자* 및 *eventArgs* 는 구독자의 이벤트 처리기에 전달 하려는 값입니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-217">Where *sender* and *eventArgs* are the values you want to pass to the subscriber's event handler.</span></span>

<span data-ttu-id="301b5-218">다음 코드를 사용 하 여 `DoublePrice` `Click` 이벤트 처리기를 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-218">Update the `DoublePrice` `Click` event handler with the following code:</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample9.cs)]

<span data-ttu-id="301b5-219">이전 처럼 `Click` 이벤트 처리기는 `DoublePricesDataSource` SqlDataSource 컨트롤의 `Update` 메서드를 호출 하 여 모든 제품의 가격을 두 배로 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-219">As before, the `Click` event handler starts by calling the `DoublePricesDataSource` SqlDataSource control's `Update` method to double the prices of all products.</span></span> <span data-ttu-id="301b5-220">다음에는 이벤트 처리기에 두 가지 추가 사항이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-220">Following that there are two additions to the event handler.</span></span> <span data-ttu-id="301b5-221">먼저 `RecentProducts` GridView의 데이터를 새로 고칩니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-221">First, the `RecentProducts` GridView's data is refreshed.</span></span> <span data-ttu-id="301b5-222">이 GridView는 이전 자습서의 마스터 페이지에 추가 되었으며 최근에 추가 된 5 개 제품을 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-222">This GridView was added to the master page in the preceding tutorial and displays the five most recently-added products.</span></span> <span data-ttu-id="301b5-223">이 표를 새로 고쳐 이러한 5 개 제품에 대 한 단 두 개의 가격이 표시 되도록 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-223">We need to refresh this grid so that it shows the just-doubled prices for these five products.</span></span> <span data-ttu-id="301b5-224">그런 다음 `PricesDoubled` 이벤트가 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-224">Following that, the `PricesDoubled` event is raised.</span></span> <span data-ttu-id="301b5-225">마스터 페이지 자체 (`this`)에 대 한 참조가 이벤트 소스로 이벤트 처리기에 전송 되 고 빈 `EventArgs` 개체가 이벤트 인수로 전송 됩니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-225">A reference to the master page itself (`this`) is sent to the event handler as the event source and an empty `EventArgs` object is sent as the event arguments.</span></span>

## <a name="step-4-handling-the-event-in-the-content-page"></a><span data-ttu-id="301b5-226">4 단계: 콘텐츠 페이지에서 이벤트 처리</span><span class="sxs-lookup"><span data-stu-id="301b5-226">Step 4: Handling the Event in the Content Page</span></span>

<span data-ttu-id="301b5-227">이 시점에서 `DoublePrice` 단추 컨트롤을 클릭할 때마다 마스터 페이지가 `PricesDoubled` 이벤트를 발생 시킵니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-227">At this point the master page raises its `PricesDoubled` event whenever the `DoublePrice` Button control is clicked.</span></span> <span data-ttu-id="301b5-228">그러나이는 전투의 절반에 불과합니다. 구독자에서 이벤트를 처리 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-228">However, this is only half the battle - we still need to handle the event in the subscriber.</span></span> <span data-ttu-id="301b5-229">이벤트 처리기를 만들고 이벤트를 발생 시킬 때 이벤트 처리기가 실행 되도록 이벤트 처리기를 만들고 이벤트 연결 코드를 추가 하는 두 단계로 이루어집니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-229">This involves two steps: creating the event handler and adding event wiring code so that when the event is raised the event handler is executed.</span></span>

<span data-ttu-id="301b5-230">먼저 `Master_PricesDoubled`이라는 이벤트 처리기를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-230">Start by creating an event handler named `Master_PricesDoubled`.</span></span> <span data-ttu-id="301b5-231">마스터 페이지에서 `PricesDoubled` 이벤트를 정의 하는 방법 때문에 이벤트 처리기의 두 입력 매개 변수는 각각 `Object` 및 `EventArgs`형식 이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-231">Because of how we defined the `PricesDoubled` event in the master page the event handler's two input parameters must be of types `Object` and `EventArgs`, respectively.</span></span> <span data-ttu-id="301b5-232">이벤트 처리기에서 `ProductsGrid` GridView의 `DataBind` 메서드를 호출 하 여 데이터를 표에 다시 바인딩합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-232">In the event handler call the `ProductsGrid` GridView's `DataBind` method to rebind the data to the grid.</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample10.cs)]

<span data-ttu-id="301b5-233">이벤트 처리기에 대 한 코드가 완성 되었지만 마스터 페이지의 `PricesDoubled` 이벤트를이 이벤트 처리기에 연결 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-233">The code for the event handler is complete but we've yet to wire the master page's `PricesDoubled` event to this event handler.</span></span> <span data-ttu-id="301b5-234">구독자는 다음 구문을 통해 이벤트를 이벤트 처리기에 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-234">The subscriber wires an event to an event handler via the following syntax:</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample11.cs)]

<span data-ttu-id="301b5-235">*게시자* 는 이벤트 *eventName*을 제공 하는 개체에 대 한 참조 이며 *methodName* 은 *eventdelegate*에 해당 하는 서명이 있는 구독자에 정의 된 이벤트 처리기의 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-235">*publisher* is a reference to the object that offers the event *eventName*, and *methodName* is the name of the event handler defined in the subscriber that has a signature corresponding to the *eventDelegate*.</span></span> <span data-ttu-id="301b5-236">즉, 이벤트 대리자가 `EventHandler`되는 경우 *methodName* 은 값을 반환 하지 않는 구독자의 메서드 이름 이어야 하 고 각각 `Object` 및 `EventArgs`형식의 두 입력 매개 변수를 허용 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-236">In other words, if the event delegate is `EventHandler`, then *methodName* must be the name of a method in the subscriber that does not return a value and accepts two input parameters of types `Object` and `EventArgs`, respectively.</span></span>

<span data-ttu-id="301b5-237">이 이벤트 연결 코드는 첫 번째 페이지 방문 및 후속 포스트백에서 실행 되어야 하며, 이벤트가 발생할 수 있는 시점 보다 이전 페이지 수명 주기에서 발생 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-237">This event wiring code must be executed on the first page visit and subsequent postbacks and should occur at a point in the page lifecycle that precedes when the event may be raised.</span></span> <span data-ttu-id="301b5-238">이벤트 배선 코드를 추가 하는 데 좋은 시간은 PreInit 단계에 있습니다 .이 단계는 페이지 수명 주기 초기에 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-238">A good time to add event wiring code is in the PreInit stage, which occurs very early in the page lifecycle.</span></span>

<span data-ttu-id="301b5-239">`~/Admin/Products.aspx`를 열고 `Page_PreInit` 이벤트 처리기를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-239">Open `~/Admin/Products.aspx` and create a `Page_PreInit` event handler:</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample12.cs)]

<span data-ttu-id="301b5-240">이 배선 코드를 완료 하려면 콘텐츠 페이지에서 마스터 페이지에 대 한 프로그래밍 방식 참조가 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-240">In order to complete this wiring code we need a programmatic reference to the master page from the content page.</span></span> <span data-ttu-id="301b5-241">위의 자습서에 설명 된 것 처럼이 작업을 수행 하는 방법에는 두 가지가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-241">As noted in the previous tutorial, there are two ways to do this:</span></span>

- <span data-ttu-id="301b5-242">느슨하게 형식화 된 `Page.Master` 속성을 적절 한 마스터 페이지 형식으로 캐스팅 하거나</span><span class="sxs-lookup"><span data-stu-id="301b5-242">By casting the loosely-typed `Page.Master` property to the appropriate master page type, or</span></span>
- <span data-ttu-id="301b5-243">`.aspx` 페이지에 `@MasterType` 지시문을 추가한 다음 강력한 형식의 `Master` 속성을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-243">By adding a `@MasterType` directive in the `.aspx` page and then using the strongly-typed `Master` property.</span></span>

<span data-ttu-id="301b5-244">후자를 사용 하는 방법을 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-244">Let's use the latter approach.</span></span> <span data-ttu-id="301b5-245">페이지의 선언적 태그 위에 다음 `@MasterType` 지시문을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-245">Add the following `@MasterType` directive to the top of the page's declarative markup:</span></span>

[!code-aspx[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample13.aspx)]

<span data-ttu-id="301b5-246">그런 다음 `Page_PreInit` 이벤트 처리기에서 다음 이벤트 배선 코드를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-246">Then add the following event wiring code in the `Page_PreInit` event handler:</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample14.cs)]

<span data-ttu-id="301b5-247">이 코드를 사용 하면 `DoublePrice` 단추를 클릭할 때마다 콘텐츠 페이지의 GridView가 새로 고쳐집니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-247">With this code in place, the GridView in the content page is refreshed whenever the `DoublePrice` Button is clicked.</span></span>

<span data-ttu-id="301b5-248">그림 8 및 9에서는이 동작을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-248">Figures 8 and 9 illustrate this behavior.</span></span> <span data-ttu-id="301b5-249">그림 8에서는 처음 방문할 때 페이지를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-249">Figure 8 shows the page when first visited.</span></span> <span data-ttu-id="301b5-250">`RecentProducts` GridView (마스터 페이지의 왼쪽 열에 있는)와 `ProductsGrid` GridView (내용 페이지)의 가격 값을 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-250">Note that price values in both the `RecentProducts` GridView (in the left column of the master page) and the `ProductsGrid` GridView (in the content page).</span></span> <span data-ttu-id="301b5-251">그림 9는 `DoublePrice` 단추를 클릭 하면 바로 동일한 화면을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-251">Figure 9 shows the same screen immediately after the `DoublePrice` Button has been clicked.</span></span> <span data-ttu-id="301b5-252">여기에서 볼 수 있듯이 새 가격은 두 GridViews에 즉시 반영 됩니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-252">As you can see, the new prices are instantaneously reflected in both GridViews.</span></span>

<span data-ttu-id="301b5-253">[초기 가격 값을 ![합니다.](interacting-with-the-content-page-from-the-master-page-cs/_static/image23.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="301b5-253">[![The Initial Price Values](interacting-with-the-content-page-from-the-master-page-cs/_static/image23.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image22.png)</span></span>

<span data-ttu-id="301b5-254">**그림 08**: 초기 가격 값 ([전체 크기 이미지를 보려면 클릭](interacting-with-the-content-page-from-the-master-page-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="301b5-254">**Figure 08**: The Initial Price Values  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image24.png))</span></span>

<span data-ttu-id="301b5-255">[![하는 두 개의 가격이 모두 GridViews에 표시 됩니다.](interacting-with-the-content-page-from-the-master-page-cs/_static/image26.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="301b5-255">[![The Just-Doubled Prices are Displayed in the GridViews](interacting-with-the-content-page-from-the-master-page-cs/_static/image26.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image25.png)</span></span>

<span data-ttu-id="301b5-256">**그림 09**: Gridviews에 표시 되는 두 개의 가격 ([전체 크기 이미지를 보려면 클릭](interacting-with-the-content-page-from-the-master-page-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="301b5-256">**Figure 09**: The Just-Doubled Prices are Displayed in the GridViews  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image27.png))</span></span>

## <a name="summary"></a><span data-ttu-id="301b5-257">요약</span><span class="sxs-lookup"><span data-stu-id="301b5-257">Summary</span></span>

<span data-ttu-id="301b5-258">이상적으로는 마스터 페이지와 해당 콘텐츠 페이지가 서로 완전히 분리 되며 상호 작용 수준이 필요 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-258">Ideally, a master page and its content pages are completely separate from one another and require no level of interaction.</span></span> <span data-ttu-id="301b5-259">그러나 마스터 페이지 또는 콘텐츠 페이지에서 수정할 수 있는 데이터를 표시 하는 마스터 페이지 또는 콘텐츠 페이지가 있는 경우에는 표시를 업데이트할 수 있도록 데이터를 수정할 때 마스터 페이지에서 콘텐츠 페이지에 경고를 표시 하거나 그 반대로 표시 해야 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-259">However, if you have a master page or content page that displays data that can be modified from the master page or content page, then you may need to have the master page alert the content page (or vice-a-versa) when data is modified so that the display can be updated.</span></span> <span data-ttu-id="301b5-260">이전 자습서에서는 콘텐츠 페이지를 프로그래밍 방식으로 마스터 페이지와 상호 작용 하는 방법을 살펴보았습니다. 이 자습서에서는 마스터 페이지가 상호 작용을 시작 하는 방법을 살펴보았습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-260">In the preceding tutorial we saw how to have a content page programmatically interact with its master page; in this tutorial we looked at how to have a master page initiate the interaction.</span></span>

<span data-ttu-id="301b5-261">콘텐츠 또는 마스터 페이지에서 콘텐츠 및 마스터 페이지를 프로그래밍 방식으로 조작할 수 있지만 사용 되는 상호 작용 패턴은 발생에 따라 달라 집니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-261">While programmatic interaction between a content and master page can originate from either the content or master page, the interaction pattern used depends on the origination.</span></span> <span data-ttu-id="301b5-262">차이점은 콘텐츠 페이지에 마스터 페이지가 하나 있지만 마스터 페이지에 다양 한 콘텐츠 페이지가 있을 수 있기 때문입니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-262">The differences are due to the fact that a content page has a single master page, but a master page can have many different content pages.</span></span> <span data-ttu-id="301b5-263">마스터 페이지가 콘텐츠 페이지와 직접 상호 작용 하는 대신 마스터 페이지에서 이벤트를 발생 시켜 일부 작업이 수행 되었음을 알리는 것이 더 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-263">Rather than having a master page directly interact with a content page, a better approach is to have the master page raise an event to signal that some action has taken place.</span></span> <span data-ttu-id="301b5-264">작업에 대 한 중요 한 콘텐츠 페이지에서는 이벤트 처리기를 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-264">Those content pages that care about the action can create event handlers.</span></span>

<span data-ttu-id="301b5-265">행복 한 프로그래밍</span><span class="sxs-lookup"><span data-stu-id="301b5-265">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="301b5-266">추가 정보</span><span class="sxs-lookup"><span data-stu-id="301b5-266">Further Reading</span></span>

<span data-ttu-id="301b5-267">이 자습서에서 설명 하는 항목에 대 한 자세한 내용은 다음 리소스를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="301b5-267">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="301b5-268">ASP.NET에서 데이터 액세스 및 업데이트</span><span class="sxs-lookup"><span data-stu-id="301b5-268">Accessing and Updating Data in ASP.NET</span></span>](http://aspnet.4guysfromrolla.com/articles/011106-1.aspx)
- [<span data-ttu-id="301b5-269">이벤트 및 대리자</span><span class="sxs-lookup"><span data-stu-id="301b5-269">Events and Delegates</span></span>](https://msdn.microsoft.com/library/17sde2xt.aspx)
- [<span data-ttu-id="301b5-270">콘텐츠 및 마스터 페이지 간에 정보 전달</span><span class="sxs-lookup"><span data-stu-id="301b5-270">Passing Information Between Content and Master Pages</span></span>](http://aspnet.4guysfromrolla.com/articles/013107-1.aspx)
- [<span data-ttu-id="301b5-271">ASP.NET 자습서에서 데이터 작업</span><span class="sxs-lookup"><span data-stu-id="301b5-271">Working with Data in ASP.NET Tutorials</span></span>](../../data-access/index.md)

### <a name="about-the-author"></a><span data-ttu-id="301b5-272">작성자 정보</span><span class="sxs-lookup"><span data-stu-id="301b5-272">About the Author</span></span>

<span data-ttu-id="301b5-273">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml)는 여러 ASP/ASP. NET books의 작성자와 4GuysFromRolla.com의 창립자가 1998부터 Microsoft 웹 기술을 사용 하 여 작업 했습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-273">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="301b5-274">Scott은 독립 컨설턴트, 강사 및 기록기로 작동 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-274">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="301b5-275">최신 책은 [*24 시간 이내에 ASP.NET 3.5을 sams teach yourself*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco)것입니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-275">His latest book is [*Sams Teach Yourself ASP.NET 3.5 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span></span> <span data-ttu-id="301b5-276">Scott은 [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) 또는 [http://ScottOnWriting.NET](http://scottonwriting.net/)의 블로그를 통해 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-276">Scott can be reached at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="301b5-277">특별히 감사 합니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-277">Special Thanks To</span></span>

<span data-ttu-id="301b5-278">이 자습서 시리즈는 많은 유용한 검토자가 검토 했습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-278">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="301b5-279">이 자습서의 리드 검토자는 Suchi Banerjee.</span><span class="sxs-lookup"><span data-stu-id="301b5-279">Lead reviewer for this tutorial was Suchi Banerjee.</span></span> <span data-ttu-id="301b5-280">예정 된 MSDN 문서를 검토 하는 데 관심이 있나요?</span><span class="sxs-lookup"><span data-stu-id="301b5-280">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="301b5-281">그렇다면 [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) 에 줄을 놓습니다.</span><span class="sxs-lookup"><span data-stu-id="301b5-281">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="301b5-282">[이전](interacting-with-the-master-page-from-the-content-page-cs.md)
> [다음](master-pages-and-asp-net-ajax-cs.md)</span><span class="sxs-lookup"><span data-stu-id="301b5-282">[Previous](interacting-with-the-master-page-from-the-content-page-cs.md)
[Next](master-pages-and-asp-net-ajax-cs.md)</span></span>
