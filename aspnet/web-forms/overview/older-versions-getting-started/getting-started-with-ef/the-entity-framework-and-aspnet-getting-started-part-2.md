---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-2
title: Entity Framework 4.0 Database First 및 ASP.NET 4 Web Forms 시작-2 부 | Microsoft Docs
author: tdykstra
description: Contoso 대학 샘플 웹 응용 프로그램은 Entity Framework를 사용 하 여 ASP.NET Web Forms 응용 프로그램을 만드는 방법을 보여 줍니다. 응용 프로그램 샘플은 ...
ms.author: riande
ms.date: 12/03/2010
ms.assetid: fb63a326-a4ae-4b0c-a4f5-412327197216
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-2
msc.type: authoredcontent
ms.openlocfilehash: bd6a2e29e6f0df04e39be29160e2e08cc99c4706
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78456449"
---
# <a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-2"></a><span data-ttu-id="853f9-104">Entity Framework 4.0 Database First 및 ASP.NET 4 Web Forms 시작-2 부</span><span class="sxs-lookup"><span data-stu-id="853f9-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 2</span></span>

<span data-ttu-id="853f9-105">만든 사람 [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="853f9-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="853f9-106">Contoso 대학 샘플 웹 응용 프로그램은 Entity Framework 4.0 및 Visual Studio 2010를 사용 하 여 ASP.NET Web Forms 응용 프로그램을 만드는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="853f9-107">자습서 시리즈에 대 한 자세한 내용은 [시리즈의 첫 번째 자습서](the-entity-framework-and-aspnet-getting-started-part-1.md) 를 참조 하십시오.</span><span class="sxs-lookup"><span data-stu-id="853f9-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>

## <a name="the-entitydatasource-control"></a><span data-ttu-id="853f9-108">EntityDataSource 컨트롤</span><span class="sxs-lookup"><span data-stu-id="853f9-108">The EntityDataSource Control</span></span>

<span data-ttu-id="853f9-109">이전 자습서에서는 웹 사이트, 데이터베이스 및 데이터 모델을 만들었습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-109">In the previous tutorial you created a web site, a database, and a data model.</span></span> <span data-ttu-id="853f9-110">이 자습서에서는 ASP.NET에서 제공 하는 `EntityDataSource` 컨트롤을 사용 하 여 Entity Framework 데이터 모델을 쉽게 사용할 수 있도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-110">In this tutorial you work with the `EntityDataSource` control that ASP.NET provides in order to make it easy to work with an Entity Framework data model.</span></span> <span data-ttu-id="853f9-111">학생 데이터를 표시 하 고 편집 하는 `GridView` 컨트롤, 새 학생을 추가 하기 위한 `DetailsView` 컨트롤, 부서를 선택 하기 위한 `DropDownList` 컨트롤을 만듭니다 .이 컨트롤은 나중에 관련 과정을 표시 하는 데 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-111">You'll create a `GridView` control for displaying and editing student data, a `DetailsView` control for adding new students, and a `DropDownList` control for selecting a department (which you'll use later for displaying associated courses).</span></span>

<span data-ttu-id="853f9-112">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-112">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image1.png)</span></span>

<span data-ttu-id="853f9-113">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-113">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image3.png)</span></span>

<span data-ttu-id="853f9-114">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-114">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image5.png)</span></span>

<span data-ttu-id="853f9-115">이 응용 프로그램에서는 데이터베이스를 업데이트 하는 페이지에 입력 유효성 검사를 추가 하지 않으며, 일부 오류 처리는 프로덕션 응용 프로그램에서 필요한 것 만큼 강력 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-115">Note that in this application you won't be adding input validation to pages that update the database, and some of the error handling will not be as robust as would be required in a production application.</span></span> <span data-ttu-id="853f9-116">그러면 자습서가 Entity Framework에 초점을 맞춘 상태로 유지 되며 너무 오래 지속 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-116">That keeps the tutorial focused on the Entity Framework and keeps it from getting too long.</span></span> <span data-ttu-id="853f9-117">이러한 기능을 응용 프로그램에 추가 하는 방법에 대 한 자세한 내용은 [ASP.NET 페이지 및 응용 프로그램에서 ASP.NET 웹 페이지 및 오류 처리](https://msdn.microsoft.com/library/w16865z6.aspx) [에서 사용자 입력 유효성 검사](https://msdn.microsoft.com/library/7kh55542.aspx) 를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="853f9-117">For details about how to add these features to your application, see [Validating User Input in ASP.NET Web Pages](https://msdn.microsoft.com/library/7kh55542.aspx) and [Error Handling in ASP.NET Pages and Applications](https://msdn.microsoft.com/library/w16865z6.aspx).</span></span>

## <a name="adding-and-configuring-the-entitydatasource-control"></a><span data-ttu-id="853f9-118">EntityDataSource 컨트롤 추가 및 구성</span><span class="sxs-lookup"><span data-stu-id="853f9-118">Adding and Configuring the EntityDataSource Control</span></span>

<span data-ttu-id="853f9-119">먼저 `People` 엔터티 집합에서 `Person` 엔터티를 읽도록 `EntityDataSource` 컨트롤을 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-119">You'll begin by configuring an `EntityDataSource` control to read `Person` entities from the `People` entity set.</span></span>

<span data-ttu-id="853f9-120">Visual Studio가 열려 있고 1 부에서 만든 프로젝트로 작업 하 고 있는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-120">Make sure you have Visual Studio open and that you're working with the project you created in part 1.</span></span> <span data-ttu-id="853f9-121">데이터 모델을 만든 이후 또는 마지막으로 변경한 이후 프로젝트를 빌드하지 않은 경우 지금 프로젝트를 빌드합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-121">If you haven't built the project since you created the data model or since the last change you made to it, build the project now.</span></span> <span data-ttu-id="853f9-122">프로젝트를 빌드할 때 까지는 디자이너에서 데이터 모델에 대 한 변경 내용을 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-122">Changes to the data model are not made available to the designer until the project is built.</span></span>

<span data-ttu-id="853f9-123">**마스터 페이지 템플릿을 사용 하 여 Web Form** 을 사용 하 여 새 웹 페이지를 만들고 이름을 *학생과 .aspx*로 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-123">Create a new web page using the **Web Form using Master Page** template, and name it *Students.aspx*.</span></span>

<span data-ttu-id="853f9-124">[![Image23](the-entity-framework-and-aspnet-getting-started-part-2/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-124">[![Image23](the-entity-framework-and-aspnet-getting-started-part-2/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image7.png)</span></span>

<span data-ttu-id="853f9-125">마스터 페이지로 *site.master* 를 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-125">Specify *Site.Master* as the master page.</span></span> <span data-ttu-id="853f9-126">이러한 자습서에 대해 만든 모든 페이지는이 마스터 페이지를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-126">All of the pages you create for these tutorials will use this master page.</span></span>

<span data-ttu-id="853f9-127">[![Image24](the-entity-framework-and-aspnet-getting-started-part-2/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-127">[![Image24](the-entity-framework-and-aspnet-getting-started-part-2/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image9.png)</span></span>

<span data-ttu-id="853f9-128">다음 예제와 같이 **소스** 뷰에서 `Content2`이라는 `Content` 컨트롤에 `h2` 제목을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-128">In **Source** view, add an `h2` heading to the `Content` control named `Content2`, as shown in the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample1.aspx)]

<span data-ttu-id="853f9-129">**도구 상자**의 **데이터** 탭에서 `EntityDataSource` 컨트롤을 페이지로 끌고, 머리글 아래에 놓고, ID를 `StudentsEntityDataSource`로 변경 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-129">From the **Data** tab of the **Toolbox**, drag an `EntityDataSource` control to the page, drop it below the heading, and change the ID to `StudentsEntityDataSource`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample2.aspx)]

<span data-ttu-id="853f9-130">**디자인** 뷰로 전환 하 고, 데이터 소스 컨트롤의 스마트 태그를 클릭 한 다음 데이터 **원본 구성** 을 클릭 하 여 **데이터 원본 구성** 마법사를 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-130">Switch to **Design** view, click the data source control's smart tag, and then click **Configure Data Source** to launch the **Configure Data Source** wizard.</span></span>

<span data-ttu-id="853f9-131">[![Image01](the-entity-framework-and-aspnet-getting-started-part-2/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-131">[![Image01](the-entity-framework-and-aspnet-getting-started-part-2/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image11.png)</span></span>

<span data-ttu-id="853f9-132">**ObjectContext 구성** 마법사 단계에서 **명명 된 연결**에 대 한 값으로 **SchoolEntities** 을 선택 하 고 **DefaultContainerName** 값으로 **SchoolEntities** 를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-132">In the **Configure ObjectContext** wizard step, select **SchoolEntities** as the value for **Named Connection**, and select **SchoolEntities** as the **DefaultContainerName** value.</span></span> <span data-ttu-id="853f9-133">그런 후 **Next** 를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-133">Then click **Next**.</span></span>

<span data-ttu-id="853f9-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-2/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-2/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image13.png)</span></span>

<span data-ttu-id="853f9-135">참고:이 시점에서 다음과 같은 대화 상자가 표시 되 면 계속 하기 전에 프로젝트를 빌드해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-135">Note: If you get the following dialog box at this point, you have to build the project before proceeding.</span></span>

<span data-ttu-id="853f9-136">[![Image25](the-entity-framework-and-aspnet-getting-started-part-2/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-136">[![Image25](the-entity-framework-and-aspnet-getting-started-part-2/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image15.png)</span></span>

<span data-ttu-id="853f9-137">**데이터 선택 구성** 단계에서 **EntitySetName**에 대 한 값으로 **사용자** 를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-137">In the **Configure Data Selection** step, select **People** as the value for **EntitySetName**.</span></span> <span data-ttu-id="853f9-138">**선택**에서 ll **선택** 확인란을 선택 했는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-138">Under **Select**, make sure the **Select A** ll check box is selected.</span></span> <span data-ttu-id="853f9-139">그런 다음 업데이트 및 삭제를 사용 하도록 설정 하는 옵션을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-139">Then select the options to enable update and delete.</span></span> <span data-ttu-id="853f9-140">완료 되 면 **마침**을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-140">When you're done, click **Finish**.</span></span>

<span data-ttu-id="853f9-141">[![Image03](the-entity-framework-and-aspnet-getting-started-part-2/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-141">[![Image03](the-entity-framework-and-aspnet-getting-started-part-2/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image17.png)</span></span>

## <a name="configuring-database-rules-to-allow-deletion"></a><span data-ttu-id="853f9-142">삭제할 수 있도록 데이터베이스 규칙 구성</span><span class="sxs-lookup"><span data-stu-id="853f9-142">Configuring Database Rules to Allow Deletion</span></span>

<span data-ttu-id="853f9-143">사용자가 `Person` 테이블에서 학생을 삭제할 수 있는 페이지를 만듭니다 (`Course`, `StudentGrade`및 `OfficeAssignment`).</span><span class="sxs-lookup"><span data-stu-id="853f9-143">You'll be creating a page that lets users delete students from the `Person` table, which has three relationships with other tables (`Course`, `StudentGrade`, and `OfficeAssignment`).</span></span> <span data-ttu-id="853f9-144">기본적으로 데이터베이스는 다른 테이블 중 하나에 관련 행이 있는 경우 `Person`의 행을 삭제 하는 것을 방지 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-144">By default, the database will prevent you from deleting a row in `Person` if there are related rows in one of the other tables.</span></span> <span data-ttu-id="853f9-145">관련 행을 수동으로 삭제 하거나 `Person` 행을 삭제할 때 데이터베이스에서 자동으로 삭제 하도록 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-145">You can manually delete the related rows first, or you can configure the database to delete them automatically when you delete a `Person` row.</span></span> <span data-ttu-id="853f9-146">이 자습서에서 학생 레코드의 경우 관련 데이터를 자동으로 삭제 하도록 데이터베이스를 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-146">For student records in this tutorial, you'll configure the database to delete the related data automatically.</span></span> <span data-ttu-id="853f9-147">학습자는 `StudentGrade` 테이블에만 관련 행을 포함할 수 있기 때문에 세 관계 중 하나만 구성 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-147">Because students can have related rows only in the `StudentGrade` table, you need to configure only one of the three relationships.</span></span>

<span data-ttu-id="853f9-148">이 자습서와 관련 된 프로젝트에서 다운로드 한 *School .mdf* 파일을 사용 하는 경우 이러한 구성 변경이 이미 수행 되었기 때문에이 섹션을 건너뛸 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-148">If you're using the *School.mdf* file that you downloaded from the project that goes with this tutorial, you can skip this section because these configuration changes have already been done.</span></span> <span data-ttu-id="853f9-149">스크립트를 실행 하 여 데이터베이스를 만든 경우에는 다음 절차를 수행 하 여 데이터베이스를 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-149">If you created the database by running a script, configure the database by performing the following procedures.</span></span>

<span data-ttu-id="853f9-150">**서버 탐색기**에서 1 부에서 만든 데이터베이스 다이어그램을 엽니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-150">In **Server Explorer**, open the database diagram that you created in part 1.</span></span> <span data-ttu-id="853f9-151">`Person`와 `StudentGrade` 사이의 관계를 마우스 오른쪽 단추로 클릭 한 다음 **속성**을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-151">Right-click the relationship between `Person` and `StudentGrade` (the line between tables), and then select **Properties**.</span></span>

<span data-ttu-id="853f9-152">[![Image04](the-entity-framework-and-aspnet-getting-started-part-2/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-152">[![Image04](the-entity-framework-and-aspnet-getting-started-part-2/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image19.png)</span></span>

<span data-ttu-id="853f9-153">**속성** 창에서 **삽입 및 업데이트 사양** 을 확장 하 고 **DeleteRule** 속성을 **Cascade**로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-153">In the **Properties** window, expand **INSERT and UPDATE Specification** and set the **DeleteRule** property to **Cascade**.</span></span>

<span data-ttu-id="853f9-154">[![Image05](the-entity-framework-and-aspnet-getting-started-part-2/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-154">[![Image05](the-entity-framework-and-aspnet-getting-started-part-2/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image21.png)</span></span>

<span data-ttu-id="853f9-155">다이어그램을 저장 하 고 닫습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-155">Save and close the diagram.</span></span> <span data-ttu-id="853f9-156">데이터베이스를 업데이트할지 여부를 묻는 메시지가 표시 되 면 **예**를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-156">If you're asked whether you want to update the database, click **Yes**.</span></span>

<span data-ttu-id="853f9-157">모델에서 메모리에 있는 엔터티가 데이터베이스에서 수행 하는 작업과 동기화 되도록 하려면 데이터 모델에서 해당 규칙을 설정 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-157">To make sure that the model keeps entities that are in memory in sync with what the database is doing, you must set corresponding rules in the data model.</span></span> <span data-ttu-id="853f9-158">*SchoolModel*를 열고 `Person`와 `StudentGrade`사이의 연결 선을 마우스 오른쪽 단추로 클릭 한 다음 **속성**을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-158">Open *SchoolModel.edmx*, right-click the association line between `Person` and `StudentGrade`, and then select **Properties**.</span></span>

<span data-ttu-id="853f9-159">[![Image21](the-entity-framework-and-aspnet-getting-started-part-2/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-159">[![Image21](the-entity-framework-and-aspnet-getting-started-part-2/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image23.png)</span></span>

<span data-ttu-id="853f9-160">**속성** 창에서 **End1 OnDelete** 를 **Cascade**로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-160">In the **Properties** window, set **End1 OnDelete** to **Cascade**.</span></span>

<span data-ttu-id="853f9-161">[![Image22](the-entity-framework-and-aspnet-getting-started-part-2/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-161">[![Image22](the-entity-framework-and-aspnet-getting-started-part-2/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image25.png)</span></span>

<span data-ttu-id="853f9-162">*SchoolModel* 파일을 저장 하 고 닫은 다음 프로젝트를 다시 빌드합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-162">Save and close the *SchoolModel.edmx* file, and then rebuild the project.</span></span>

<span data-ttu-id="853f9-163">일반적으로 데이터베이스가 변경 되 면 모델을 동기화 하는 방법에 대 한 몇 가지 옵션을 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-163">In general, when the database changes, you have several choices for how to sync up the model:</span></span>

- <span data-ttu-id="853f9-164">특정 종류의 변경 (예: 테이블, 뷰 또는 저장 프로시저 추가 또는 새로 고침)의 경우 디자이너를 마우스 오른쪽 단추로 클릭 하 고 **데이터베이스에서 모델 업데이트** 를 선택 하 여 디자이너가 자동으로 변경을 수행 하도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-164">For certain kinds of changes (such as adding or refreshing tables, views, or stored procedures), right-click in the designer and select **Update Model from Database** to have the designer make the changes automatically.</span></span>
- <span data-ttu-id="853f9-165">데이터 모델을 다시 생성 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-165">Regenerate the data model.</span></span>
- <span data-ttu-id="853f9-166">다음과 같이 수동 업데이트를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-166">Make manual updates like this one.</span></span>

<span data-ttu-id="853f9-167">이 경우 모델을 다시 생성 하거나 관계 변경의 영향을 받는 테이블을 새로 고칠 수 있지만, 필드 이름 변경을 다시 수행 해야 합니다 (`FirstName`에서 `FirstMidName`로).</span><span class="sxs-lookup"><span data-stu-id="853f9-167">In this case, you could have regenerated the model or refreshed the tables affected by the relationship change, but then you'd have to make the field-name change again (from `FirstName` to `FirstMidName`).</span></span>

## <a name="using-a-gridview-control-to-read-and-update-entities"></a><span data-ttu-id="853f9-168">GridView 컨트롤을 사용 하 여 엔터티 읽기 및 업데이트</span><span class="sxs-lookup"><span data-stu-id="853f9-168">Using a GridView Control to Read and Update Entities</span></span>

<span data-ttu-id="853f9-169">이 섹션에서는 `GridView` 컨트롤을 사용 하 여 학생을 표시, 업데이트 또는 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-169">In this section you'll use a `GridView` control to display, update, or delete students.</span></span>

<span data-ttu-id="853f9-170">을 열거나 *학습자* 로 전환 하 여 **디자인** 뷰로 전환 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-170">Open or switch to *Students.aspx* and switch to **Design** view.</span></span> <span data-ttu-id="853f9-171">**도구 상자**의 **데이터** 탭에서 `GridView` 컨트롤을 `EntityDataSource` 컨트롤의 오른쪽으로 끌고 `StudentsGridView`이름을로 지정한 다음 스마트 태그를 클릭 하 고 **StudentsEntityDataSource** 를 데이터 원본으로 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-171">From the **Data** tab of the **Toolbox**, drag a `GridView` control to the right of the `EntityDataSource` control, name it `StudentsGridView`, click the smart tag, and then select **StudentsEntityDataSource** as the data source.</span></span>

<span data-ttu-id="853f9-172">[![Image06](the-entity-framework-and-aspnet-getting-started-part-2/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-172">[![Image06](the-entity-framework-and-aspnet-getting-started-part-2/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image27.png)</span></span>

<span data-ttu-id="853f9-173">**스키마 새로 고침** (확인 메시지가 표시 되 면 **예** 를 클릭)을 클릭 하 고 **페이징 사용**, **정렬 사용**, **편집 사용**, **삭제 사용**을 차례로 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-173">Click **Refresh Schema** (click **Yes** if you're prompted to confirm), then click **Enable Paging**, **Enable Sorting**, **Enable Editing**, and **Enable Deleting**.</span></span>

<span data-ttu-id="853f9-174">**열 편집**을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-174">Click **Edit Columns**.</span></span>

<span data-ttu-id="853f9-175">[![Image10](the-entity-framework-and-aspnet-getting-started-part-2/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-175">[![Image10](the-entity-framework-and-aspnet-getting-started-part-2/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image29.png)</span></span>

<span data-ttu-id="853f9-176">**선택한 필드** 상자에서 **PersonID**, **LastName**및 **HireDate**를 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-176">In the **Selected fields** box, delete **PersonID**, **LastName**, and **HireDate**.</span></span> <span data-ttu-id="853f9-177">일반적으로 사용자에 게는 레코드 키가 표시 되지 않으며 고용 날짜는 학생에 게는 없으므로 이름 필드 중 하나만 있으면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-177">You typically don't display a record key to users, hire date is not relevant to students, and you'll put both parts of the name in one field, so you only need one of the name fields.)</span></span>

<span data-ttu-id="853f9-178">[![Image11](the-entity-framework-and-aspnet-getting-started-part-2/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-178">[![Image11](the-entity-framework-and-aspnet-getting-started-part-2/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image31.png)</span></span>

<span data-ttu-id="853f9-179">**FirstMidName** 필드를 선택한 다음 **이 필드를 templatefield로 변환로 변환**을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-179">Select the **FirstMidName** field and then click **Convert this field into a TemplateField**.</span></span>

<span data-ttu-id="853f9-180">**EnrollmentDate**에 대해 동일한 작업을 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-180">Do the same for **EnrollmentDate**.</span></span>

<span data-ttu-id="853f9-181">[![Image13](the-entity-framework-and-aspnet-getting-started-part-2/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-181">[![Image13](the-entity-framework-and-aspnet-getting-started-part-2/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image33.png)</span></span>

<span data-ttu-id="853f9-182">**확인** 을 클릭 한 다음 **원본** 뷰로 전환 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-182">Click **OK** and then switch to **Source** view.</span></span> <span data-ttu-id="853f9-183">나머지 변경 내용은 태그에서 직접 수행 하는 것이 더 쉽습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-183">The remaining changes will be easier to do directly in markup.</span></span> <span data-ttu-id="853f9-184">이제 `GridView` 컨트롤 태그는 다음 예제와 같습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-184">The `GridView` control markup now looks like the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample3.aspx)]

<span data-ttu-id="853f9-185">명령 필드 뒤의 첫 번째 열은 현재 이름을 표시 하는 템플릿 필드입니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-185">The first column after the command field is a template field that currently displays the first name.</span></span> <span data-ttu-id="853f9-186">이 템플릿 필드의 태그를 다음 예제와 같이 변경 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-186">Change the markup for this template field to look like the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample4.aspx)]

<span data-ttu-id="853f9-187">표시 모드에서 두 개의 `Label` 컨트롤은 성과 이름을 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-187">In display mode, two `Label` controls display the first and last name.</span></span> <span data-ttu-id="853f9-188">편집 모드에서는 이름과 성을 변경할 수 있도록 두 개의 입력란이 제공 됩니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-188">In edit mode, two text boxes are provided so you can change the first and last name.</span></span> <span data-ttu-id="853f9-189">표시 모드의 `Label` 컨트롤과 마찬가지로, 데이터베이스에 직접 연결 되는 ASP.NET 데이터 소스 컨트롤을 사용 하는 것과 동일 하 게 `Bind` 및 `Eval` 식을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-189">As with the `Label` controls in display mode, you use `Bind` and `Eval` expressions exactly as you would with ASP.NET data source controls that connect directly to databases.</span></span> <span data-ttu-id="853f9-190">유일한 차이점은 데이터베이스 열 대신 엔터티 속성을 지정 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-190">The only difference is that you're specifying entity properties instead of database columns.</span></span>

<span data-ttu-id="853f9-191">마지막 열은 등록 날짜를 표시 하는 템플릿 필드입니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-191">The last column is a template field that displays the enrollment date.</span></span> <span data-ttu-id="853f9-192">이 필드에 대 한 태그를 다음 예제와 같이 변경 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-192">Change the markup for this field to look like the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample5.aspx)]

<span data-ttu-id="853f9-193">표시 및 편집 모드에서 형식 문자열 "{0, d}"는 날짜를 "간단한 날짜" 형식으로 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-193">In both display and edit mode, the format string "{0,d}" causes the date to be displayed in the "short date" format.</span></span> <span data-ttu-id="853f9-194">이 자습서에 표시 된 화면 이미지와 다르게이 형식을 표시 하도록 컴퓨터를 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-194">(Your computer might be configured to display this format differently from the screen images shown in this tutorial.)</span></span>

<span data-ttu-id="853f9-195">이러한 각 템플릿 필드에서 디자이너는 기본적으로 `Bind` 식을 사용 했지만 `ItemTemplate` 요소의 `Eval` 식으로 변경 했습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-195">Notice that in each of these template fields, the designer used a `Bind` expression by default, but you've changed that to an `Eval` expression in the `ItemTemplate` elements.</span></span> <span data-ttu-id="853f9-196">`Bind` 식은 코드에서 데이터에 액세스 해야 하는 경우 데이터를 `GridView` 컨트롤 속성에서 사용할 수 있도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-196">The `Bind` expression makes the data available in `GridView` control properties in case you need to access the data in code.</span></span> <span data-ttu-id="853f9-197">이 페이지에서는 코드에서이 데이터에 액세스할 필요가 없으므로 보다 효율적인 `Eval`를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-197">In this page you don't need to access this data in code, so you can use `Eval`, which is more efficient.</span></span> <span data-ttu-id="853f9-198">자세한 내용은 데이터 [컨트롤에서 데이터 가져오기](https://weblogs.asp.net/davidfowler/archive/2008/12/12/getting-your-data-out-of-the-data-controls.aspx)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="853f9-198">For more information, see [Getting your data out of the data controls](https://weblogs.asp.net/davidfowler/archive/2008/12/12/getting-your-data-out-of-the-data-controls.aspx).</span></span>

## <a name="revising-entitydatasource-control-markup-to-improve-performance"></a><span data-ttu-id="853f9-199">EntityDataSource 컨트롤 태그를 수정 하 여 성능 향상</span><span class="sxs-lookup"><span data-stu-id="853f9-199">Revising EntityDataSource Control Markup to Improve Performance</span></span>

<span data-ttu-id="853f9-200">`EntityDataSource` 컨트롤에 대 한 태그에서 `ConnectionString` 및 `DefaultContainerName` 특성을 제거 하 고이를 `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` 특성으로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-200">In the markup for the `EntityDataSource` control, remove the `ConnectionString` and `DefaultContainerName` attributes and replace them with a `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` attribute.</span></span> <span data-ttu-id="853f9-201">이는 개체 컨텍스트 클래스에서 하드 코딩 된 연결을 사용 해야 하는 경우를 제외 하 고 `EntityDataSource` 컨트롤을 만들 때마다 수행 해야 하는 변경 내용입니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-201">This is a change you should make every time you create an `EntityDataSource` control, unless you need to use a connection that is different from the one that's hard-coded in the object context class.</span></span> <span data-ttu-id="853f9-202">`ContextTypeName` 특성을 사용 하면 다음과 같은 이점이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-202">Using the `ContextTypeName` attribute provides the following benefits:</span></span>

- <span data-ttu-id="853f9-203">성능 향상.</span><span class="sxs-lookup"><span data-stu-id="853f9-203">Better performance.</span></span> <span data-ttu-id="853f9-204">`EntityDataSource` 컨트롤은 `ConnectionString` 및 `DefaultContainerName` 특성을 사용 하 여 데이터 모델을 초기화할 때 모든 요청에 대해 메타 데이터를 로드 하기 위해 추가 작업을 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-204">When the `EntityDataSource` control initializes the data model using the `ConnectionString` and `DefaultContainerName` attributes, it performs additional work to load metadata on every request.</span></span> <span data-ttu-id="853f9-205">`ContextTypeName` 특성을 지정 하는 경우에는이 작업이 필요 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-205">This isn't necessary if you specify the `ContextTypeName` attribute.</span></span>
- <span data-ttu-id="853f9-206">지연 로드는 4.0 Entity Framework에서 생성 된 개체 컨텍스트 클래스 (예:이 자습서의 `SchoolEntities`)에서 기본적으로 설정 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-206">Lazy loading is turned on by default in generated object context classes (such as `SchoolEntities` in this tutorial) in Entity Framework 4.0.</span></span> <span data-ttu-id="853f9-207">즉, 필요한 경우 탐색 속성이 관련 데이터로 자동으로 로드 됩니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-207">This means that navigation properties are loaded with related data automatically right when you need it.</span></span> <span data-ttu-id="853f9-208">지연 로드는이 자습서의 뒷부분에서 자세히 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-208">Lazy loading is explained in more detail later in this tutorial.</span></span>
- <span data-ttu-id="853f9-209">개체 컨텍스트 클래스에 적용 한 사용자 지정 (이 경우 `SchoolEntities` 클래스)은 `EntityDataSource` 컨트롤을 사용 하는 컨트롤에 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-209">Any customizations that you've applied to the object context class (in this case, the `SchoolEntities` class) will be available to controls that use the `EntityDataSource` control.</span></span> <span data-ttu-id="853f9-210">개체 컨텍스트 클래스를 사용자 지정 하는 것은이 자습서 시리즈에서 다루지 않는 고급 항목입니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-210">Customizing the object context class is an advanced topic that is not covered in this tutorial series.</span></span> <span data-ttu-id="853f9-211">자세한 내용은 [생성 된 형식 Entity Framework 확장](https://msdn.microsoft.com/library/dd456844.aspx)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="853f9-211">For more information, see [Extending Entity Framework Generated Types](https://msdn.microsoft.com/library/dd456844.aspx).</span></span>

<span data-ttu-id="853f9-212">이제 태그는 다음 예제와 유사 합니다. 속성의 순서는 다를 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-212">The markup will now resemble the following example (the order of the properties might be different):</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample6.aspx)]

<span data-ttu-id="853f9-213">`EnableFlattening` 특성은 외래 키 열이 엔터티 속성으로 노출 되지 않기 때문에 이전 버전의 Entity Framework에서 필요한 기능을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-213">The `EnableFlattening` attribute refers to a feature that was needed in earlier versions of the Entity Framework because foreign key columns were not exposed as entity properties.</span></span> <span data-ttu-id="853f9-214">현재 버전을 사용 하면 *외래 키 연결*을 사용할 수 있습니다. 즉, foreign key 속성은 다대다 연결 모두에 대해 노출 됩니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-214">The current version makes it possible to use *foreign key associations*, which means foreign key properties are exposed for all but many-to-many associations.</span></span> <span data-ttu-id="853f9-215">엔터티에 외래 키 속성과 [복합 형식이](https://msdn.microsoft.com/library/bb738472.aspx)없는 경우이 특성을 `False`로 설정 된 상태로 둘 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-215">If your entities have foreign key properties and no [complex types](https://msdn.microsoft.com/library/bb738472.aspx), you can leave this attribute set to `False`.</span></span> <span data-ttu-id="853f9-216">기본값은 `True`이므로 태그에서 특성을 제거 하지 마십시오.</span><span class="sxs-lookup"><span data-stu-id="853f9-216">Don't remove the attribute from the markup, because the default value is `True`.</span></span> <span data-ttu-id="853f9-217">자세한 내용은 [개체 평면화 (EntityDataSource)](https://msdn.microsoft.com/library/ee404746.aspx)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="853f9-217">For more information, see [Flattening Objects (EntityDataSource)](https://msdn.microsoft.com/library/ee404746.aspx).</span></span>

<span data-ttu-id="853f9-218">페이지를 실행 하면 학생 및 직원 목록이 표시 됩니다 (다음 자습서에서 학생만 필터링 함).</span><span class="sxs-lookup"><span data-stu-id="853f9-218">Run the page and you see a list of students and employees (you'll filter for just students in the next tutorial).</span></span> <span data-ttu-id="853f9-219">이름 및 성이 함께 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-219">The first name and last name are displayed together.</span></span>

<span data-ttu-id="853f9-220">[![Image07](the-entity-framework-and-aspnet-getting-started-part-2/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-220">[![Image07](the-entity-framework-and-aspnet-getting-started-part-2/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image35.png)</span></span>

<span data-ttu-id="853f9-221">표시를 정렬 하려면 열 이름을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-221">To sort the display, click a column name.</span></span>

<span data-ttu-id="853f9-222">아무 행에서 나 **편집** 을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-222">Click **Edit** in any row.</span></span> <span data-ttu-id="853f9-223">텍스트 상자가 표시 되며, 여기서 성과 이름을 변경할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-223">Text boxes are displayed where you can change the first and last name.</span></span>

<span data-ttu-id="853f9-224">[![Image08](the-entity-framework-and-aspnet-getting-started-part-2/_static/image38.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-224">[![Image08](the-entity-framework-and-aspnet-getting-started-part-2/_static/image38.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image37.png)</span></span>

<span data-ttu-id="853f9-225">**삭제** 단추도 작동 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-225">The **Delete** button also works.</span></span> <span data-ttu-id="853f9-226">등록 날짜가 있는 행에 대해 삭제를 클릭 하면 행이 사라집니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-226">Click delete for a row that has an enrollment date and the row disappears.</span></span> <span data-ttu-id="853f9-227">등록 날짜가 없는 행은 강사를 나타내며 참조 무결성 오류가 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-227">(Rows without an enrollment date represent instructors and you may get a referential integrity error.</span></span> <span data-ttu-id="853f9-228">다음 자습서에서는 학생만 포함 하도록이 목록을 필터링 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-228">In the next tutorial you'll filter this list to include just students.)</span></span>

## <a name="displaying-data-from-a-navigation-property"></a><span data-ttu-id="853f9-229">탐색 속성에서 데이터 표시</span><span class="sxs-lookup"><span data-stu-id="853f9-229">Displaying Data from a Navigation Property</span></span>

<span data-ttu-id="853f9-230">이제 각 학생이 등록 된 과정의 수를 알고 싶습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-230">Now suppose you want to know how many courses each student is enrolled in.</span></span> <span data-ttu-id="853f9-231">Entity Framework는 `Person` 엔터티의 `StudentGrades` 탐색 속성에 해당 정보를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-231">The Entity Framework provides that information in the `StudentGrades` navigation property of the `Person` entity.</span></span> <span data-ttu-id="853f9-232">데이터베이스 디자인은 등급이 할당 되지 않은 과정에서 학생 등록을 허용 하지 않기 때문에이 자습서에서는 과정에 연결 된 `StudentGrade` 테이블 행에 행이 있는 경우 과정에 등록 된 것과 동일한 것으로 간주할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-232">Because the database design does not allow a student to be enrolled in a course without having a grade assigned, for this tutorial you can assume that having a row in the `StudentGrade` table row that is associated with a course is the same as being enrolled in the course.</span></span> <span data-ttu-id="853f9-233">`Courses` 탐색 속성은 강사 전용입니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-233">(The `Courses` navigation property is only for instructors.)</span></span>

<span data-ttu-id="853f9-234">`EntityDataSource` 컨트롤의 `ContextTypeName` 특성을 사용 하는 경우 Entity Framework는 해당 속성에 액세스할 때 탐색 속성에 대 한 정보를 자동으로 검색 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-234">When you use the `ContextTypeName` attribute of the `EntityDataSource` control, the Entity Framework automatically retrieves information for a navigation property when you access that property.</span></span> <span data-ttu-id="853f9-235">이를 *지연 로드*라고 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-235">This is called *lazy loading*.</span></span> <span data-ttu-id="853f9-236">그러나이는 추가 정보가 필요할 때마다 데이터베이스에 대 한 별도의 호출을 생성 하므로 비효율적 일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-236">However, this can be inefficient, because it results in a separate call to the database each time additional information is needed.</span></span> <span data-ttu-id="853f9-237">`EntityDataSource` 컨트롤에서 반환 하는 모든 엔터티에 대 한 탐색 속성의 데이터가 필요한 경우 데이터베이스에 대 한 단일 호출에서 엔터티 자체와 함께 관련 데이터를 검색 하는 것이 더 효율적입니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-237">If you need data from the navigation property for every entity returned by the `EntityDataSource` control, it's more efficient to retrieve the related data along with the entity itself in a single call to the database.</span></span> <span data-ttu-id="853f9-238">이를 *즉시 로드*라고 하며, `EntityDataSource` 컨트롤의 `Include` 속성을 설정 하 여 탐색 속성에 대 한 즉시 로드를 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-238">This is called *eager loading*, and you specify eager loading for a navigation property by setting the `Include` property of the `EntityDataSource` control.</span></span>

<span data-ttu-id="853f9-239">*학습자*에서는 모든 학생에 대 한 과정의 수를 표시 하 여 즉시 로드를 선택 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-239">In *Students.aspx*, you want to show the number of courses for every student, so eager loading is the best choice.</span></span> <span data-ttu-id="853f9-240">모든 학생을 표시 했지만 일부에 대해서만 강좌 수를 표시 하는 경우 (태그 외에 일부 코드를 작성 해야 함) 지연 로드를 선택 하는 것이 더 적합할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-240">If you were displaying all students but showing the number of courses only for a few of them (which would require writing some code in addition to the markup), lazy loading might be a better choice.</span></span>

<span data-ttu-id="853f9-241">을 열거나 *학습자*로 전환 하 고, **디자인** 뷰로 전환 하 고, `StudentsEntityDataSource`를 선택 하 고, **속성** 창에서 **Include** 속성을 **StudentGrades**로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-241">Open or switch to *Students.aspx*, switch to **Design** view, select `StudentsEntityDataSource`, and in the **Properties** window set the **Include** property to **StudentGrades**.</span></span> <span data-ttu-id="853f9-242">여러 탐색 속성을 가져오려는 경우에는 이름을 쉼표로 구분 하 여 지정할 수 있습니다 (예: **StudentGrades, 강좌**).</span><span class="sxs-lookup"><span data-stu-id="853f9-242">(If you wanted to get multiple navigation properties, you could specify their names separated by commas — for example, **StudentGrades, Courses**.)</span></span>

<span data-ttu-id="853f9-243">[![Image19](the-entity-framework-and-aspnet-getting-started-part-2/_static/image40.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-243">[![Image19](the-entity-framework-and-aspnet-getting-started-part-2/_static/image40.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image39.png)</span></span>

<span data-ttu-id="853f9-244">**원본** 뷰로 전환 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-244">Switch to **Source** view.</span></span> <span data-ttu-id="853f9-245">`StudentsGridView` 컨트롤의 마지막 `asp:TemplateField` 요소 뒤에 다음 새 템플릿 필드를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-245">In the `StudentsGridView` control, after the last `asp:TemplateField` element, add the following new template field:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample7.aspx)]

<span data-ttu-id="853f9-246">`Eval` 식에서 `StudentGrades`탐색 속성을 참조할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-246">In the `Eval` expression, you can reference the navigation property `StudentGrades`.</span></span> <span data-ttu-id="853f9-247">이 속성에는 컬렉션이 포함 되어 있기 때문에 학생이 등록 된 과정 수를 표시 하는 데 사용할 수 있는 `Count` 속성이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-247">Because this property contains a collection, it has a `Count` property that you can use to display the number of courses in which the student is enrolled.</span></span> <span data-ttu-id="853f9-248">이후 자습서에서는 컬렉션 대신 단일 엔터티를 포함 하는 탐색 속성의 데이터를 표시 하는 방법을 알아봅니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-248">In a later tutorial you'll see how to display data from navigation properties that contain single entities instead of collections.</span></span> <span data-ttu-id="853f9-249">`BoundField` 요소를 사용 하 여 탐색 속성의 데이터를 표시할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-249">(Note that you cannot use `BoundField` elements to display data from navigation properties.)</span></span>

<span data-ttu-id="853f9-250">페이지를 실행 하면 각 학생이 등록 된 과정의 수를 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-250">Run the page and you now see how many courses each student is enrolled in.</span></span>

<span data-ttu-id="853f9-251">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image42.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-251">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image42.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image41.png)</span></span>

## <a name="using-a-detailsview-control-to-insert-entities"></a><span data-ttu-id="853f9-252">DetailsView 컨트롤을 사용 하 여 엔터티 삽입</span><span class="sxs-lookup"><span data-stu-id="853f9-252">Using a DetailsView Control to Insert Entities</span></span>

<span data-ttu-id="853f9-253">다음 단계는 새 학생을 추가할 수 있는 `DetailsView` 컨트롤을 포함 하는 페이지를 만드는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-253">The next step is to create a page that has a `DetailsView` control that will let you add new students.</span></span> <span data-ttu-id="853f9-254">브라우저를 닫은 다음, *site.master* 마스터 페이지를 사용 하 여 새 웹 페이지를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-254">Close the browser and then create a new web page using the *Site.Master* master page.</span></span> <span data-ttu-id="853f9-255">*StudentsAdd*페이지 이름을 지정한 다음 **소스** 뷰로 전환 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-255">Name the page *StudentsAdd.aspx*, and then switch to **Source** view.</span></span>

<span data-ttu-id="853f9-256">다음 태그를 추가 하 여 `Content2`이라는 `Content` 컨트롤에 대 한 기존 태그를 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-256">Add the following markup to replace the existing markup for the `Content` control named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample8.aspx)]

<span data-ttu-id="853f9-257">이 태그를 사용 하면 *학습자*에서 만든 것과 비슷한 `EntityDataSource` 컨트롤을 만들 수 있습니다. 단, 삽입할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-257">This markup creates an `EntityDataSource` control that is similar to the one you created in *Students.aspx*, except it enables insertion.</span></span> <span data-ttu-id="853f9-258">`GridView` 컨트롤과 마찬가지로 `DetailsView` 컨트롤의 바인딩된 필드는 엔터티 속성을 참조 하는 경우를 제외 하 고는 데이터베이스에 직접 연결 하는 데이터 컨트롤의 경우와 동일 하 게 코딩 됩니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-258">As with the `GridView` control, the bound fields of the `DetailsView` control are coded exactly as they would be for a data control that connects directly to a database, except that they reference entity properties.</span></span> <span data-ttu-id="853f9-259">이 경우 `DetailsView` 컨트롤은 행을 삽입 하는 데만 사용 되므로 기본 모드를 `Insert`으로 설정 했습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-259">In this case, the `DetailsView` control is used only for inserting rows, so you have set the default mode to `Insert`.</span></span>

<span data-ttu-id="853f9-260">페이지를 실행 하 고 새 학생을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-260">Run the page and add a new student.</span></span>

<span data-ttu-id="853f9-261">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image44.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-261">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image44.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image43.png)</span></span>

<span data-ttu-id="853f9-262">새 학생을 삽입 한 후에는 아무 작업도 수행 되지 않지만 이제 *학습자*를 실행 하는 경우 새 학생 정보를 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-262">Nothing will happen after you insert a new student, but if you now run *Students.aspx*, you'll see the new student information.</span></span>

## <a name="displaying-data-in-a-drop-down-list"></a><span data-ttu-id="853f9-263">드롭다운 목록에 데이터 표시</span><span class="sxs-lookup"><span data-stu-id="853f9-263">Displaying Data in a Drop-Down List</span></span>

<span data-ttu-id="853f9-264">다음 단계에서는 `EntityDataSource` 컨트롤을 사용 하 여 `DropDownList` 컨트롤을 엔터티 집합에 대 한 databind 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-264">In the following steps you'll databind a `DropDownList` control to an entity set using an `EntityDataSource` control.</span></span> <span data-ttu-id="853f9-265">자습서의이 부분에서는이 목록에서 많은 작업을 수행 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-265">In this part of the tutorial, you won't do much with this list.</span></span> <span data-ttu-id="853f9-266">그러나 후속 부분에서이 목록을 사용 하 여 사용자가 부서를 선택 하 여 부서와 연결 된 과정을 표시할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-266">In subsequent parts, though, you'll use the list to let users select a department to display courses associated with the department.</span></span>

<span data-ttu-id="853f9-267">*Default.aspx*라는 새 웹 페이지를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-267">Create a new web page named *Courses.aspx*.</span></span> <span data-ttu-id="853f9-268">**소스** 뷰에서 이름이 `Content2`인 `Content` 컨트롤에 제목을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-268">In **Source** view, add a heading to the `Content` control that's named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample9.aspx)]

<span data-ttu-id="853f9-269">**디자인** 뷰에서 이전 처럼 페이지에 `EntityDataSource` 컨트롤을 추가 합니다. 단,이 시간 이름을 `DepartmentsEntityDataSource`.</span><span class="sxs-lookup"><span data-stu-id="853f9-269">In **Design** view, add an `EntityDataSource` control to the page as you did before, except this time name it `DepartmentsEntityDataSource`.</span></span> <span data-ttu-id="853f9-270">**EntitySetName** 값으로 **부서** 를 선택 하 고 **DepartmentID** 및 **Name** 속성만 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-270">Select **Departments** as the **EntitySetName** value, and select only the **DepartmentID** and **Name** properties.</span></span>

<span data-ttu-id="853f9-271">[![Image15](the-entity-framework-and-aspnet-getting-started-part-2/_static/image46.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-271">[![Image15](the-entity-framework-and-aspnet-getting-started-part-2/_static/image46.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image45.png)</span></span>

<span data-ttu-id="853f9-272">**도구 상자**의 **표준** 탭에서 `DropDownList` 컨트롤을 페이지로 끌고, `DepartmentsDropDownList`이름을로 설정 하 고, 스마트 태그를 클릭 하 고, **데이터 소스 선택** 을 선택 하 여 **DataSource 구성 마법사**를 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-272">From the **Standard** tab of the **Toolbox**, drag a `DropDownList` control to the page, name it `DepartmentsDropDownList`, click the smart tag, and select **Choose Data Source** to start the **DataSource Configuration Wizard**.</span></span>

<span data-ttu-id="853f9-273">[![Image16](the-entity-framework-and-aspnet-getting-started-part-2/_static/image48.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-273">[![Image16](the-entity-framework-and-aspnet-getting-started-part-2/_static/image48.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image47.png)</span></span>

<span data-ttu-id="853f9-274">**데이터 원본 선택** 단계에서 **DepartmentsEntityDataSource** 를 데이터 원본으로 선택 하 고 **스키마 새로 고침**을 클릭 한 다음, 표시할 데이터 필드로 **이름** 을 선택 하 고 값 데이터 필드로 **DepartmentID** 를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-274">In the **Choose a Data Source** step, select **DepartmentsEntityDataSource** as the data source, click **Refresh Schema**, and then select **Name** as the data field to display and **DepartmentID** as the value data field.</span></span> <span data-ttu-id="853f9-275">**확인**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-275">Click **OK**.</span></span>

<span data-ttu-id="853f9-276">[![Image17](the-entity-framework-and-aspnet-getting-started-part-2/_static/image50.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-276">[![Image17](the-entity-framework-and-aspnet-getting-started-part-2/_static/image50.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image49.png)</span></span>

<span data-ttu-id="853f9-277">Entity Framework를 사용 하 여 컨트롤의 데이터를 바인딩하는 데 사용 하는 메서드는 엔터티와 엔터티 속성을 지정 하는 경우를 제외 하 고는 다른 ASP.NET 데이터 소스 컨트롤과 동일 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-277">The method you use to databind the control using the Entity Framework is the same as with other ASP.NET data source controls except you're specifying entities and entity properties.</span></span>

<span data-ttu-id="853f9-278">**원본** 뷰로 전환 하 고 `DropDownList` 컨트롤 바로 앞에 "부서 선택:"을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-278">Switch to **Source** view and add "Select a department:" immediately before the `DropDownList` control.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample10.aspx)]

<span data-ttu-id="853f9-279">이 시점에서 `ConnectionString` 및 `DefaultContainerName` 특성을 `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` 특성으로 바꿔서 `EntityDataSource` 컨트롤에 대 한 태그를 변경 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-279">As a reminder, change the markup for the `EntityDataSource` control at this point by replacing the `ConnectionString` and `DefaultContainerName` attributes with a `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` attribute.</span></span> <span data-ttu-id="853f9-280">`EntityDataSource` 컨트롤 태그를 변경 하기 전에 데이터 소스 컨트롤에 연결 된 데이터 바인딩된 컨트롤을 만들 때까지 기다리는 것이 좋습니다. 변경 후 디자이너는 데이터 바인딩된 컨트롤에 **새로 고침 스키마** 옵션을 제공 하지 않기 때문입니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-280">It's often best to wait until after you've created the data-bound control that is linked to the data source control before you change the `EntityDataSource` control markup, because after you make the change, the designer will not provide you with a **Refresh Schema** option in the data-bound control.</span></span>

<span data-ttu-id="853f9-281">페이지를 실행 하 고 드롭다운 목록에서 부서를 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-281">Run the page and you can select a department from the drop-down list.</span></span>

<span data-ttu-id="853f9-282">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image52.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image51.png)</span><span class="sxs-lookup"><span data-stu-id="853f9-282">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image52.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image51.png)</span></span>

<span data-ttu-id="853f9-283">이렇게 하면 `EntityDataSource` 컨트롤 사용에 대 한 소개를 완료 합니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-283">This completes the introduction to using the `EntityDataSource` control.</span></span> <span data-ttu-id="853f9-284">일반적으로이 컨트롤을 사용 하는 것은 테이블 및 열 대신 엔터티와 속성을 참조 한다는 점을 제외 하 고는 다른 ASP.NET 데이터 원본 컨트롤과 작업 하는 것과는 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-284">Working with this control is generally no different from working with other ASP.NET data source controls, except that you reference entities and properties instead of tables and columns.</span></span> <span data-ttu-id="853f9-285">단, 탐색 속성에 액세스 하려는 경우는 예외입니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-285">The only exception is when you want to access navigation properties.</span></span> <span data-ttu-id="853f9-286">다음 자습서에서는 데이터를 필터링, 그룹화 및 정렬 하는 경우 `EntityDataSource` 컨트롤과 함께 사용 하는 구문이 다른 데이터 소스 컨트롤과 다를 수 있다는 것을 알 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="853f9-286">In the next tutorial you'll see that the syntax you use with `EntityDataSource` control might also differ from other data source controls when you filter, group, and order data.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="853f9-287">[이전](the-entity-framework-and-aspnet-getting-started-part-1.md)
> [다음](the-entity-framework-and-aspnet-getting-started-part-3.md)</span><span class="sxs-lookup"><span data-stu-id="853f9-287">[Previous](the-entity-framework-and-aspnet-getting-started-part-1.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-3.md)</span></span>
