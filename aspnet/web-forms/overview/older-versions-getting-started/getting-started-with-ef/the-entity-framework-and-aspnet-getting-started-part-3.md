---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-3
title: Entity Framework 4.0 Database First 및 ASP.NET 4 Web Forms 시작-3 단계 | Microsoft Docs
author: tdykstra
description: Contoso 대학 샘플 웹 응용 프로그램은 Entity Framework를 사용 하 여 ASP.NET Web Forms 응용 프로그램을 만드는 방법을 보여 줍니다. 응용 프로그램 샘플은 ...
ms.author: riande
ms.date: 12/03/2010
ms.assetid: ccdc3f8c-2568-40a7-8f8b-3c23d2e05388
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-3
msc.type: authoredcontent
ms.openlocfilehash: 88debb11a9157dce9ff000b1cb459b876dbceaf3
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78522641"
---
# <a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-3"></a><span data-ttu-id="ef3e1-104">Entity Framework 4.0 Database First 및 ASP.NET 4 Web Forms 시작-3 부</span><span class="sxs-lookup"><span data-stu-id="ef3e1-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 3</span></span>

<span data-ttu-id="ef3e1-105">만든 사람 [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="ef3e1-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="ef3e1-106">Contoso 대학 샘플 웹 응용 프로그램은 Entity Framework 4.0 및 Visual Studio 2010를 사용 하 여 ASP.NET Web Forms 응용 프로그램을 만드는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="ef3e1-107">자습서 시리즈에 대 한 자세한 내용은 [시리즈의 첫 번째 자습서](the-entity-framework-and-aspnet-getting-started-part-1.md) 를 참조 하십시오.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>

## <a name="filtering-ordering-and-grouping-data"></a><span data-ttu-id="ef3e1-108">데이터 필터링, 정렬 및 그룹화</span><span class="sxs-lookup"><span data-stu-id="ef3e1-108">Filtering, Ordering, and Grouping Data</span></span>

<span data-ttu-id="ef3e1-109">이전 자습서에서는 데이터를 표시 하 고 편집 하는 `EntityDataSource` 컨트롤을 사용 했습니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-109">In the previous tutorial you used the `EntityDataSource` control to display and edit data.</span></span> <span data-ttu-id="ef3e1-110">이 자습서에서는 데이터를 필터링, 정렬 및 그룹화 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-110">In this tutorial you'll filter, order, and group data.</span></span> <span data-ttu-id="ef3e1-111">`EntityDataSource` 컨트롤의 속성을 설정 하 여이 작업을 수행 하는 경우 구문은 다른 데이터 소스 컨트롤과 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-111">When you do this by setting properties of the `EntityDataSource` control, the syntax is different from other data source controls.</span></span> <span data-ttu-id="ef3e1-112">그러나 이러한 차이를 최소화 하기 위해 `QueryExtender` 컨트롤을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-112">As you'll see, however, you can use the `QueryExtender` control to minimize these differences.</span></span>

<span data-ttu-id="ef3e1-113">학생을 필터링 하 고 이름을 기준으로 정렬 하 고 이름으로 검색 하려면 *학습자* 페이지를 변경 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-113">You'll change the *Students.aspx* page to filter for students, sort by name, and search on name.</span></span> <span data-ttu-id="ef3e1-114">또한 코스 *.aspx* 페이지를 변경 하 여 선택한 부서에 대 한 과정을 표시 하 고 이름으로 과정을 검색 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-114">You'll also change the *Courses.aspx* page to display courses for the selected department and search for courses by name.</span></span> <span data-ttu-id="ef3e1-115">마지막으로 *About .aspx* 페이지에 학생 통계를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-115">Finally, you'll add student statistics to the *About.aspx* page.</span></span>

<span data-ttu-id="ef3e1-116">[![Image02](the-entity-framework-and-aspnet-getting-started-part-3/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="ef3e1-116">[![Image02](the-entity-framework-and-aspnet-getting-started-part-3/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image1.png)</span></span>

<span data-ttu-id="ef3e1-117">[![Image11](the-entity-framework-and-aspnet-getting-started-part-3/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="ef3e1-117">[![Image11](the-entity-framework-and-aspnet-getting-started-part-3/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image3.png)</span></span>

<span data-ttu-id="ef3e1-118">[![Image10](the-entity-framework-and-aspnet-getting-started-part-3/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="ef3e1-118">[![Image10](the-entity-framework-and-aspnet-getting-started-part-3/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image5.png)</span></span>

<span data-ttu-id="ef3e1-119">[![Image14](the-entity-framework-and-aspnet-getting-started-part-3/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="ef3e1-119">[![Image14](the-entity-framework-and-aspnet-getting-started-part-3/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image7.png)</span></span>

## <a name="using-the-entitydatasource-where-property-to-filter-data"></a><span data-ttu-id="ef3e1-120">EntityDataSource "Where" 속성을 사용 하 여 데이터 필터링</span><span class="sxs-lookup"><span data-stu-id="ef3e1-120">Using the EntityDataSource "Where" Property to Filter Data</span></span>

<span data-ttu-id="ef3e1-121">이전 자습서에서 만든 *학생용 .aspx* 페이지를 엽니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-121">Open the *Students.aspx* page that you created in the previous tutorial.</span></span> <span data-ttu-id="ef3e1-122">현재 구성 된 대로 페이지의 `GridView` 컨트롤에 `People` 엔터티 집합의 모든 이름이 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-122">As currently configured, the `GridView` control in the page displays all the names from the `People` entity set.</span></span> <span data-ttu-id="ef3e1-123">그러나 null이 아닌 등록 날짜가 있는 엔터티 `Person` 선택 하 여 찾을 수 있는 학생만 표시 하려고 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-123">However, you want to show only students, which you can find by selecting `Person` entities that have non-null enrollment dates.</span></span>

<span data-ttu-id="ef3e1-124">**디자인** 뷰로 전환 하 고 `EntityDataSource` 컨트롤을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-124">Switch to **Design** view and select the `EntityDataSource` control.</span></span> <span data-ttu-id="ef3e1-125">**속성** 창에서 `Where` 속성을 `it.EnrollmentDate is not null`로 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-125">In the **Properties** window, set the `Where` property to `it.EnrollmentDate is not null`.</span></span>

<span data-ttu-id="ef3e1-126">[![Image01](the-entity-framework-and-aspnet-getting-started-part-3/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="ef3e1-126">[![Image01](the-entity-framework-and-aspnet-getting-started-part-3/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image9.png)</span></span>

<span data-ttu-id="ef3e1-127">`EntityDataSource` 컨트롤의 `Where` 속성에서 사용 하는 구문은 Entity SQL입니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-127">The syntax you use in the `Where` property of the `EntityDataSource` control is Entity SQL.</span></span> <span data-ttu-id="ef3e1-128">Entity SQL는 Transact-sql과 유사 하지만 데이터베이스 개체가 아닌 엔터티에서 사용 하도록 사용자 지정 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-128">Entity SQL is similar to Transact-SQL, but it's customized for use with entities rather than database objects.</span></span> <span data-ttu-id="ef3e1-129">식 `it.EnrollmentDate is not null`에서 `it` 단어는 쿼리에서 반환 되는 엔터티에 대 한 참조를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-129">In the expression `it.EnrollmentDate is not null`, the word `it` represents a reference to the entity returned by the query.</span></span> <span data-ttu-id="ef3e1-130">따라서 `it.EnrollmentDate`는 `EntityDataSource` 컨트롤이 반환 하는 `Person` 엔터티의 `EnrollmentDate` 속성을 참조 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-130">Therefore, `it.EnrollmentDate` refers to the `EnrollmentDate` property of the `Person` entity that the `EntityDataSource` control returns.</span></span>

<span data-ttu-id="ef3e1-131">페이지를 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-131">Run the page.</span></span> <span data-ttu-id="ef3e1-132">학생 목록에는 이제 학생만 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-132">The students list now contains only students.</span></span> <span data-ttu-id="ef3e1-133">등록 날짜를 표시 하지 않는 행은 표시 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-133">(There are no rows displayed where there's no enrollment date.)</span></span>

<span data-ttu-id="ef3e1-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-3/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="ef3e1-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-3/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image11.png)</span></span>

## <a name="using-the-entitydatasource-orderby-property-to-order-data"></a><span data-ttu-id="ef3e1-135">EntityDataSource "OrderBy" 속성을 사용 하 여 데이터 정렬</span><span class="sxs-lookup"><span data-stu-id="ef3e1-135">Using the EntityDataSource "OrderBy" Property to Order Data</span></span>

<span data-ttu-id="ef3e1-136">또한이 목록이 처음 표시 될 때 이름 순서로 표시 되도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-136">You also want this list to be in name order when it's first displayed.</span></span> <span data-ttu-id="ef3e1-137">*학습자* 페이지가 **디자인** 뷰에서 열려 있는 상태에서 `EntityDataSource` 컨트롤을 선택한 상태로 **속성** 창에서 **OrderBy** 속성을 `it.LastName`로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-137">With the *Students.aspx* page still open in **Design** view, and with the `EntityDataSource` control still selected, in the **Properties** window set the **OrderBy** property to `it.LastName`.</span></span>

<span data-ttu-id="ef3e1-138">[![Image05](the-entity-framework-and-aspnet-getting-started-part-3/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="ef3e1-138">[![Image05](the-entity-framework-and-aspnet-getting-started-part-3/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image13.png)</span></span>

<span data-ttu-id="ef3e1-139">페이지를 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-139">Run the page.</span></span> <span data-ttu-id="ef3e1-140">학생 목록은 이제 성을 기준으로 정렬 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-140">The students list is now in order by last name.</span></span>

<span data-ttu-id="ef3e1-141">[![Image04](the-entity-framework-and-aspnet-getting-started-part-3/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="ef3e1-141">[![Image04](the-entity-framework-and-aspnet-getting-started-part-3/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image15.png)</span></span>

## <a name="using-a-control-parameter-to-set-the-where-property"></a><span data-ttu-id="ef3e1-142">컨트롤 매개 변수를 사용 하 여 "Where" 속성 설정</span><span class="sxs-lookup"><span data-stu-id="ef3e1-142">Using a Control Parameter to Set the "Where" Property</span></span>

<span data-ttu-id="ef3e1-143">다른 데이터 소스 컨트롤과 마찬가지로 `Where` 속성에 매개 변수 값을 전달할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-143">As with other data source controls, you can pass parameter values to the `Where` property.</span></span> <span data-ttu-id="ef3e1-144">자습서의 2 부에서 만든 *과정 .aspx* 페이지에서이 방법을 사용 하 여 사용자가 드롭다운 목록에서 선택한 부서와 관련 된 과정을 표시할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-144">On the *Courses.aspx* page that you created in part 2 of the tutorial, you can use this method to display courses that are associated with the department that a user selects from the drop-down list.</span></span>

<span data-ttu-id="ef3e1-145">*코스 .aspx* 를 열고 **디자인** 뷰로 전환 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-145">Open *Courses.aspx* and switch to **Design** view.</span></span> <span data-ttu-id="ef3e1-146">페이지에 두 번째 `EntityDataSource` 컨트롤을 추가 하 고 이름을 `CoursesEntityDataSource`에 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-146">Add a second `EntityDataSource` control to the page, and name it `CoursesEntityDataSource`.</span></span> <span data-ttu-id="ef3e1-147">`SchoolEntities` 모델에 연결 하 고 **EntitySetName** 값으로 `Courses`를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-147">Connect it to the `SchoolEntities` model, and select `Courses` as the **EntitySetName** value.</span></span>

<span data-ttu-id="ef3e1-148">**속성** 창의 **Where** 속성 상자에서 줄임표를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-148">In the **Properties** window, click the ellipsis in the **Where** property box.</span></span> <span data-ttu-id="ef3e1-149">**속성** 창을 사용 하기 전에 `CoursesEntityDataSource` 컨트롤이 계속 선택 되어 있는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-149">(Make sure the `CoursesEntityDataSource` control is still selected before using the **Properties** window.)</span></span>

<span data-ttu-id="ef3e1-150">[![Image06](the-entity-framework-and-aspnet-getting-started-part-3/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="ef3e1-150">[![Image06](the-entity-framework-and-aspnet-getting-started-part-3/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image17.png)</span></span>

<span data-ttu-id="ef3e1-151">**식 편집기** 대화 상자가 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-151">The **Expression Editor** dialog box is displayed.</span></span> <span data-ttu-id="ef3e1-152">이 대화 상자에서 **제공 된 매개 변수를 기반으로 Where 식 자동 생성**을 선택 하 고 **매개 변수 추가**를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-152">In this dialog box, select **Automatically generate the Where expression based on the provided parameters**, and then click **Add Parameter**.</span></span> <span data-ttu-id="ef3e1-153">매개 변수의 이름을 `DepartmentID`하 고 **Control** 을 **매개 변수 원본** 값으로 선택 하 고 **DepartmentsDropDownList** 를 **ControlID** 값으로 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-153">Name the parameter `DepartmentID`, select **Control** as the **Parameter source** value, and select **DepartmentsDropDownList** as the **ControlID** value.</span></span>

<span data-ttu-id="ef3e1-154">[![Image07](the-entity-framework-and-aspnet-getting-started-part-3/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="ef3e1-154">[![Image07](the-entity-framework-and-aspnet-getting-started-part-3/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image19.png)</span></span>

<span data-ttu-id="ef3e1-155">**고급 속성 표시**를 클릭 하 고 **식 편집기** 대화 상자의 **속성** 창에서 `Type` 속성을 `Int32`로 변경 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-155">Click **Show advanced properties**, and in the **Properties** window of the **Expression Editor** dialog box, change the `Type` property to `Int32`.</span></span>

<span data-ttu-id="ef3e1-156">[![Image15](the-entity-framework-and-aspnet-getting-started-part-3/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="ef3e1-156">[![Image15](the-entity-framework-and-aspnet-getting-started-part-3/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image21.png)</span></span>

<span data-ttu-id="ef3e1-157">완료되면 **확인**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-157">When you're done, click **OK**.</span></span>

<span data-ttu-id="ef3e1-158">드롭다운 목록 아래에서 페이지에 `GridView` 컨트롤을 추가 하 고 이름을 `CoursesGridView`로 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-158">Below the drop-down list, add a `GridView` control to the page and name it `CoursesGridView`.</span></span> <span data-ttu-id="ef3e1-159">`CoursesEntityDataSource` 데이터 소스 컨트롤에 연결 하 고, **스키마 새로 고침**을 클릭 하 고, **열 편집**을 클릭 하 고, `DepartmentID` 열을 제거 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-159">Connect it to the `CoursesEntityDataSource` data source control, click **Refresh Schema**, click **Edit Columns**, and remove the `DepartmentID` column.</span></span> <span data-ttu-id="ef3e1-160">`GridView` 컨트롤 태그는 다음 예제와 유사 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-160">The `GridView` control markup resembles the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample1.aspx)]

<span data-ttu-id="ef3e1-161">사용자가 드롭다운 목록에서 선택한 부서를 변경 하는 경우 관련 과정 목록이 자동으로 변경 되는 것을 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-161">When the user changes the selected department in the drop-down list, you want the list of associated courses to change automatically.</span></span> <span data-ttu-id="ef3e1-162">이렇게 하려면 드롭다운 목록을 선택 하 고 **속성** 창에서 `AutoPostBack` 속성을 `True`로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-162">To make this happen, select the drop-down list, and in the **Properties** window set the `AutoPostBack` property to `True`.</span></span>

<span data-ttu-id="ef3e1-163">[![Image08](the-entity-framework-and-aspnet-getting-started-part-3/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="ef3e1-163">[![Image08](the-entity-framework-and-aspnet-getting-started-part-3/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image23.png)</span></span>

<span data-ttu-id="ef3e1-164">이제 디자이너 사용을 완료 했으므로 **원본** 뷰로 전환 하 고 `CoursesEntityDataSource` 컨트롤의 `ConnectionString` 및 `DefaultContainer` name 속성을 `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` 특성으로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-164">Now that you're finished using the designer, switch to **Source** view and replace the `ConnectionString` and `DefaultContainer` name properties of the `CoursesEntityDataSource` control with the `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` attribute.</span></span> <span data-ttu-id="ef3e1-165">완료 되 면 컨트롤의 태그는 다음 예제와 같이 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-165">When you're done, the markup for the control will look like the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample2.aspx)]

<span data-ttu-id="ef3e1-166">페이지를 실행 하 고 드롭다운 목록을 사용 하 여 다른 부서를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-166">Run the page and use the drop-down list to select different departments.</span></span> <span data-ttu-id="ef3e1-167">선택한 부서에서 제공 하는 강좌가 `GridView` 컨트롤에 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-167">Only courses that are offered by the selected department are displayed in the `GridView` control.</span></span>

<span data-ttu-id="ef3e1-168">[![Image09](the-entity-framework-and-aspnet-getting-started-part-3/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="ef3e1-168">[![Image09](the-entity-framework-and-aspnet-getting-started-part-3/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image25.png)</span></span>

## <a name="using-the-entitydatasource-groupby-property-to-group-data"></a><span data-ttu-id="ef3e1-169">EntityDataSource "GroupBy" 속성을 사용 하 여 데이터 그룹화</span><span class="sxs-lookup"><span data-stu-id="ef3e1-169">Using the EntityDataSource "GroupBy" Property to Group Data</span></span>

<span data-ttu-id="ef3e1-170">Contoso 대학이 정보 페이지에 몇 가지 학생 통계를 추가 하려고 한다고 가정 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-170">Suppose Contoso University wants to put some student-body statistics on its About page.</span></span> <span data-ttu-id="ef3e1-171">특히 등록 된 날짜별로 학생 수의 분석을 표시 하려고 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-171">Specifically, it wants to show a breakdown of numbers of students by the date they enrolled.</span></span>

<span data-ttu-id="ef3e1-172">*Default.aspx*를 열고 **소스** 뷰에서 `BodyContent` 컨트롤의 기존 내용을 `h2` 태그 간에 "학생 본문 통계"로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-172">Open *About.aspx*, and in **Source** view, replace the existing contents of the `BodyContent` control with "Student Body Statistics" between `h2` tags:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample3.aspx)]

<span data-ttu-id="ef3e1-173">제목 뒤에 `EntityDataSource` 컨트롤을 추가 하 고 이름을 `StudentStatisticsEntityDataSource`로 이름을로 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-173">After the heading, add an `EntityDataSource` control and name it `StudentStatisticsEntityDataSource`.</span></span> <span data-ttu-id="ef3e1-174">`SchoolEntities`에 연결 하 고, `People` 엔터티 집합을 선택 하 고, 마법사에서 **선택** 상자를 변경 되지 않은 상태로 둡니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-174">Connect it to `SchoolEntities`, select the `People` entity set, and leave the **Select** box in the wizard unchanged.</span></span> <span data-ttu-id="ef3e1-175">**속성** 창에서 다음 속성을 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-175">Set the following properties in the **Properties** window:</span></span>

- <span data-ttu-id="ef3e1-176">학생용 으로만 필터링 하려면 `Where` 속성을 `it.EnrollmentDate is not null`로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-176">To filter for students only, set the `Where` property to `it.EnrollmentDate is not null`.</span></span>
- <span data-ttu-id="ef3e1-177">등록 날짜를 기준으로 결과를 그룹화 하려면 `GroupBy` 속성을 `it.EnrollmentDate`로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-177">To group the results by the enrollment date, set the `GroupBy` property to `it.EnrollmentDate`.</span></span>
- <span data-ttu-id="ef3e1-178">등록 날짜와 학생 수를 선택 하려면 `Select` 속성을 `it.EnrollmentDate, Count(it.EnrollmentDate) AS NumberOfStudents`로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-178">To select the enrollment date and the number of students, set the `Select` property to `it.EnrollmentDate, Count(it.EnrollmentDate) AS NumberOfStudents`.</span></span>
- <span data-ttu-id="ef3e1-179">등록 날짜를 기준으로 결과를 정렬 하려면 `OrderBy` 속성을 `it.EnrollmentDate`로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-179">To order the results by the enrollment date, set the `OrderBy` property to `it.EnrollmentDate`.</span></span>

<span data-ttu-id="ef3e1-180">**소스** 뷰에서 `ConnectionString` 및 `DefaultContainer` name 속성을 `ContextTypeName` 속성으로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-180">In **Source** view, replace the `ConnectionString` and `DefaultContainer` name properties with a `ContextTypeName` property.</span></span> <span data-ttu-id="ef3e1-181">이제 `EntityDataSource` 컨트롤 태그는 다음 예제와 유사 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-181">The `EntityDataSource` control markup now resembles the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample4.aspx)]

<span data-ttu-id="ef3e1-182">`Select`, `GroupBy`및 `Where` 속성의 구문은 현재 엔터티를 지정 하는 `it` 키워드를 제외 하 고 Transact-sql과 비슷합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-182">The syntax of the `Select`, `GroupBy`, and `Where` properties resembles Transact-SQL except for the `it` keyword that specifies the current entity.</span></span>

<span data-ttu-id="ef3e1-183">다음 태그를 추가 하 여 데이터를 표시 하는 `GridView` 컨트롤을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-183">Add the following markup to create a `GridView` control to display the data.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample5.aspx)]

<span data-ttu-id="ef3e1-184">페이지를 실행 하 여 등록 날짜별 학생 수를 보여 주는 목록을 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-184">Run the page to see a list showing the number of students by enrollment date.</span></span>

<span data-ttu-id="ef3e1-185">[![Image10](the-entity-framework-and-aspnet-getting-started-part-3/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="ef3e1-185">[![Image10](the-entity-framework-and-aspnet-getting-started-part-3/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image27.png)</span></span>

## <a name="using-the-queryextender-control-for-filtering-and-ordering"></a><span data-ttu-id="ef3e1-186">필터링 및 정렬에 QueryExtender 컨트롤 사용</span><span class="sxs-lookup"><span data-stu-id="ef3e1-186">Using the QueryExtender Control for Filtering and Ordering</span></span>

<span data-ttu-id="ef3e1-187">`QueryExtender` 컨트롤은 태그에서 필터링 및 정렬을 지정 하는 방법을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-187">The `QueryExtender` control provides a way to specify filtering and sorting in markup.</span></span> <span data-ttu-id="ef3e1-188">구문은 사용 중인 DBMS (데이터베이스 관리 시스템)와는 독립적입니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-188">The syntax is independent of the database management system (DBMS) you're using.</span></span> <span data-ttu-id="ef3e1-189">또한 일반적으로 Entity Framework와는 독립적 이며 탐색 속성에 사용 하는 구문이 Entity Framework에 고유 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-189">It's also generally independent of the Entity Framework, with the exception that syntax you use for navigation properties is unique to the Entity Framework.</span></span>

<span data-ttu-id="ef3e1-190">자습서의이 부분에서는 `QueryExtender` 컨트롤을 사용 하 여 데이터를 필터링 하 고 정렬 하며, order by 필드 중 하나가 탐색 속성이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-190">In this part of the tutorial you'll use a `QueryExtender` control to filter and order data, and one of the order-by fields will be a navigation property.</span></span>

<span data-ttu-id="ef3e1-191">(태그 대신 코드를 사용 하 여 `EntityDataSource` 컨트롤에 의해 자동으로 생성 되는 쿼리를 확장 하려는 경우 `QueryCreated` 이벤트를 처리 하 여 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-191">(If you prefer to use code instead of markup to extend the queries that are automatically generated by the `EntityDataSource` control, you can do that by handling the `QueryCreated` event.</span></span> <span data-ttu-id="ef3e1-192">`QueryExtender` 컨트롤이 `EntityDataSource` 컨트롤 쿼리도 확장 하는 방법입니다.)</span><span class="sxs-lookup"><span data-stu-id="ef3e1-192">This is how the `QueryExtender` control extends `EntityDataSource` control queries also.)</span></span>

<span data-ttu-id="ef3e1-193">*Default.aspx* 페이지를 열고 이전에 추가한 태그 아래에서 다음 태그를 삽입 하 여 머리글, 검색 문자열을 입력할 수 있는 텍스트 상자, 검색 단추 및 `Courses` 엔터티 집합에 바인딩된 `EntityDataSource` 컨트롤을 삽입 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-193">Open the *Courses.aspx* page, and below the markup you added previously, insert the following markup to create a heading, a text box for entering search strings, a search button, and an `EntityDataSource` control that's bound to the `Courses` entity set.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample6.aspx)]

<span data-ttu-id="ef3e1-194">`EntityDataSource` 컨트롤의 `Include` 속성이 `Department`으로 설정 되어 있는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-194">Notice that the `EntityDataSource` control's `Include` property is set to `Department`.</span></span> <span data-ttu-id="ef3e1-195">데이터베이스에서 `Course` 테이블에는 부서 이름이 포함 되지 않습니다. `DepartmentID` 외래 키 열이 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-195">In the database, the `Course` table does not contain the department name; it contains a `DepartmentID` foreign key column.</span></span> <span data-ttu-id="ef3e1-196">데이터베이스를 직접 쿼리 하는 경우 과정 데이터와 함께 부서 이름을 가져오려면 `Course` 및 `Department` 테이블에 조인 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-196">If you were querying the database directly, to get the department name along with course data, you would have to join the `Course` and `Department` tables.</span></span> <span data-ttu-id="ef3e1-197">`Include` 속성을 `Department`로 설정 하면 Entity Framework에서 `Course` 엔터티를 가져올 때 관련 `Department` 엔터티를 가져오는 작업을 수행 하도록 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-197">By setting the `Include` property to `Department`, you specify that the Entity Framework should do the work of getting the related `Department` entity when it gets a `Course` entity.</span></span> <span data-ttu-id="ef3e1-198">그런 다음 `Department` 엔터티는 `Course` 엔터티의 `Department` 탐색 속성에 저장 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-198">The `Department` entity is then stored in the `Department` navigation property of the `Course` entity.</span></span> <span data-ttu-id="ef3e1-199">기본적으로 데이터 모델 디자이너에 의해 생성 된 `SchoolEntities` 클래스는 필요한 경우 관련 데이터를 검색 하 고, 데이터 소스 컨트롤을 해당 클래스에 바인딩한 후에는 `Include` 속성을 설정 하지 않아도 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-199">(By default, the `SchoolEntities` class that was generated by the data model designer retrieves related data when it's needed, and you've bound the data source control to that class, so setting the `Include` property is not necessary.</span></span> <span data-ttu-id="ef3e1-200">그러나이 메서드를 설정 하면 페이지의 성능이 향상 됩니다. 그렇지 않으면 Entity Framework는 데이터베이스에 대 한 별도의 호출을 수행 하 여 `Course` 엔터티 및 관련 된 `Department` 엔터티에 대 한 데이터를 검색 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-200">However, setting it improves performance of the page, because otherwise the Entity Framework would make separate calls to the database to retrieve data for the `Course` entities and for the related `Department` entities.)</span></span>

<span data-ttu-id="ef3e1-201">방금 만든 `EntityDataSource` 컨트롤 뒤에 다음 태그를 삽입 하 여 해당 `EntityDataSource` 컨트롤에 바인딩되는 `QueryExtender` 컨트롤을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-201">After the `EntityDataSource` control you just created, insert the following markup to create a `QueryExtender` control that's bound to that `EntityDataSource` control.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample7.aspx)]

<span data-ttu-id="ef3e1-202">`SearchExpression` 요소는 제목이 텍스트 상자에 입력 한 값과 일치 하는 과정을 선택 하도록 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-202">The `SearchExpression` element specifies that you want to select courses whose titles match the value entered in the text box.</span></span> <span data-ttu-id="ef3e1-203">`SearchType` 속성이 `StartsWith`를 지정 하기 때문에 텍스트 상자에 입력 된 문자 수만 비교 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-203">Only as many characters as are entered in the text box will be compared, because the `SearchType` property specifies `StartsWith`.</span></span>

<span data-ttu-id="ef3e1-204">`OrderByExpression` 요소는 결과 집합을 부서 이름 내의 과정 제목별로 정렬 하도록 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-204">The `OrderByExpression` element specifies that the result set will be ordered by course title within department name.</span></span> <span data-ttu-id="ef3e1-205">부서 이름 지정 방법: `Department.Name`.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-205">Notice how department name is specified: `Department.Name`.</span></span> <span data-ttu-id="ef3e1-206">`Course` 엔터티와 `Department` 엔터티 간의 연결은 일 대 일 이므로 `Department` 탐색 속성은 `Department` 엔터티를 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-206">Because the association between the `Course` entity and the `Department` entity is one-to-one, the `Department` navigation property contains a `Department` entity.</span></span> <span data-ttu-id="ef3e1-207">이 관계가 일 대 다 관계인 경우 속성은 컬렉션을 포함 합니다. 부서 이름을 가져오려면 `Department` 엔터티의 `Name` 속성을 지정 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-207">(If this were a one-to-many relationship, the property would contain a collection.) To get the department name, you must specify the `Name` property of the `Department` entity.</span></span>

<span data-ttu-id="ef3e1-208">마지막으로, `GridView` 컨트롤을 추가 하 여 과정 목록을 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-208">Finally, add a `GridView` control to display the list of courses:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample8.aspx)]

<span data-ttu-id="ef3e1-209">첫 번째 열은 부서 이름을 표시 하는 템플릿 필드입니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-209">The first column is a template field that displays the department name.</span></span> <span data-ttu-id="ef3e1-210">데이터 바인딩 식은 `QueryExtender` 컨트롤에서 살펴본 것 처럼 `Department.Name`를 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-210">The databinding expression specifies `Department.Name`, just as you saw in the `QueryExtender` control.</span></span>

<span data-ttu-id="ef3e1-211">페이지를 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-211">Run the page.</span></span> <span data-ttu-id="ef3e1-212">초기 표시에서는 부서별로 모든 과정의 목록을 표시 한 다음 코스 제목별로 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-212">The initial display shows a list of all courses in order by department and then by course title.</span></span>

<span data-ttu-id="ef3e1-213">[![Image11](the-entity-framework-and-aspnet-getting-started-part-3/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="ef3e1-213">[![Image11](the-entity-framework-and-aspnet-getting-started-part-3/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image29.png)</span></span>

<span data-ttu-id="ef3e1-214">"M"을 입력 하 고 **검색** 을 클릭 하 여 제목이 "m"으로 시작 하는 모든 과정을 확인 합니다 (검색은 대/소문자를 구분 하지 않음).</span><span class="sxs-lookup"><span data-stu-id="ef3e1-214">Enter an "m" and click **Search** to see all courses whose titles begin with "m" (the search is not case sensitive).</span></span>

<span data-ttu-id="ef3e1-215">[![Image12](the-entity-framework-and-aspnet-getting-started-part-3/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="ef3e1-215">[![Image12](the-entity-framework-and-aspnet-getting-started-part-3/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image31.png)</span></span>

## <a name="using-the-like-operator-to-filter-data"></a><span data-ttu-id="ef3e1-216">"Like" 연산자를 사용 하 여 데이터 필터링</span><span class="sxs-lookup"><span data-stu-id="ef3e1-216">Using the "Like" Operator to Filter Data</span></span>

<span data-ttu-id="ef3e1-217">`Like` 컨트롤의 `EntityDataSource` 속성에서 `Where` 연산자를 사용 하 여 `QueryExtender` 컨트롤의 `StartsWith`, `Contains`및 `EndsWith` 검색 형식과 비슷한 효과를 달성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-217">You can achieve an effect similar to the `QueryExtender` control's `StartsWith`, `Contains`, and `EndsWith` search types by using a `Like` operator in the `EntityDataSource` control's `Where` property.</span></span> <span data-ttu-id="ef3e1-218">자습서의이 부분에서는 `Like` 연산자를 사용 하 여 이름별로 학생을 검색 하는 방법을 알아봅니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-218">In this part of the tutorial, you'll see how to use the `Like` operator to search for a student by name.</span></span>

<span data-ttu-id="ef3e1-219">**소스** 뷰에서 *학습자* 를 엽니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-219">Open *Students.aspx* in **Source** view.</span></span> <span data-ttu-id="ef3e1-220">`GridView` 컨트롤 뒤에 다음 태그를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-220">After the `GridView` control, add the following markup:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample9.aspx)]

<span data-ttu-id="ef3e1-221">이 태그는 `Where` 속성 값을 제외 하 고 앞에서 살펴본 것과 비슷합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-221">This markup is similar to what you've seen earlier except for the `Where` property value.</span></span> <span data-ttu-id="ef3e1-222">`Where` 식의 두 번째 부분에서는 텍스트 상자에 입력 된 항목에 대해 성과 이름을 모두 검색 하는 부분 문자열 검색 (`LIKE %FirstMidName% or LIKE %LastName%`)을 정의 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-222">The second part of the `Where` expression defines a substring search (`LIKE %FirstMidName% or LIKE %LastName%`) that searches both the first and last names for whatever is entered in the text box.</span></span>

<span data-ttu-id="ef3e1-223">페이지를 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-223">Run the page.</span></span> <span data-ttu-id="ef3e1-224">`StudentName` 매개 변수의 기본값은 "%" 이므로 처음에는 모든 학생이 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-224">Initially you see all of the students because the default value for the `StudentName` parameter is "%".</span></span>

<span data-ttu-id="ef3e1-225">[![Image13](the-entity-framework-and-aspnet-getting-started-part-3/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="ef3e1-225">[![Image13](the-entity-framework-and-aspnet-getting-started-part-3/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image33.png)</span></span>

<span data-ttu-id="ef3e1-226">텍스트 상자에 문자 "g"를 입력 하 고 **검색**을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-226">Enter the letter "g" in the text box and click **Search**.</span></span> <span data-ttu-id="ef3e1-227">첫 번째 또는 마지막 이름에 "g"가 있는 학생의 목록이 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-227">You see a list of students that have a "g" in either the first or last name.</span></span>

<span data-ttu-id="ef3e1-228">[![Image14](the-entity-framework-and-aspnet-getting-started-part-3/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="ef3e1-228">[![Image14](the-entity-framework-and-aspnet-getting-started-part-3/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image35.png)</span></span>

<span data-ttu-id="ef3e1-229">이제 개별 테이블에서 데이터를 표시, 업데이트, 필터링, 정렬 및 그룹화 했습니다.</span><span class="sxs-lookup"><span data-stu-id="ef3e1-229">You've now displayed, updated, filtered, ordered, and grouped data from individual tables.</span></span> <span data-ttu-id="ef3e1-230">다음 자습서에서는 관련 데이터를 사용 하 여 작업을 시작 합니다 (마스터-세부 시나리오).</span><span class="sxs-lookup"><span data-stu-id="ef3e1-230">In the next tutorial you'll begin to work with related data (master-detail scenarios).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="ef3e1-231">[이전](the-entity-framework-and-aspnet-getting-started-part-2.md)
> [다음](the-entity-framework-and-aspnet-getting-started-part-4.md)</span><span class="sxs-lookup"><span data-stu-id="ef3e1-231">[Previous](the-entity-framework-and-aspnet-getting-started-part-2.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-4.md)</span></span>
