---
uid: web-forms/overview/older-versions-security/membership/storing-additional-user-information-cs
title: 추가 사용자 정보 저장 (C#) | Microsoft Docs
author: rick-anderson
description: 이 자습서에서는 매우 기본적인 방명록 응용 프로그램을 빌드하여이 질문에 대 한 답변을 제공 합니다. 이 작업을 수행 하는 동안 modeli에 대해 다른 옵션을 살펴보겠습니다.
ms.author: riande
ms.date: 01/18/2008
ms.assetid: 1642132a-1ca5-4872-983f-ab59fc8865d3
msc.legacyurl: /web-forms/overview/older-versions-security/membership/storing-additional-user-information-cs
msc.type: authoredcontent
ms.openlocfilehash: 24b96e86bc93e03d2639b73e35ed1fd1271bac5a
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74641041"
---
# <a name="storing-additional-user-information-c"></a><span data-ttu-id="f4b6c-104">추가 사용자 정보 저장(C#)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-104">Storing Additional User Information (C#)</span></span>

<span data-ttu-id="f4b6c-105">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="f4b6c-106">[코드 다운로드](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_08_CS.zip) 또는 [PDF 다운로드](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial08_ExtraUserInfo_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-106">[Download Code](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_08_CS.zip) or [Download PDF](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial08_ExtraUserInfo_cs.pdf)</span></span>

> <span data-ttu-id="f4b6c-107">이 자습서에서는 매우 기본적인 방명록 응용 프로그램을 빌드하여이 질문에 대 한 답변을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-107">In this tutorial we will answer this question by building a very rudimentary guestbook application.</span></span> <span data-ttu-id="f4b6c-108">이 작업을 수행 하는 경우 데이터베이스에서 사용자 정보를 모델링 하는 다양 한 옵션을 살펴본 다음이 데이터를 멤버 프레임 프레임 워크에서 만든 사용자 계정에 연결 하는 방법을 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-108">In doing so, we will look at different options for modeling user information in a database, and then see how to associate this data with the user accounts created by the Membership framework.</span></span>

## <a name="introduction"></a><span data-ttu-id="f4b6c-109">소개</span><span class="sxs-lookup"><span data-stu-id="f4b6c-109">Introduction</span></span>

<span data-ttu-id="f4b6c-110">ASP. NET의 멤버 자격 프레임 워크는 사용자를 관리 하기 위한 유연한 인터페이스를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-110">ASP.NET's Membership framework offers a flexible interface for managing users.</span></span> <span data-ttu-id="f4b6c-111">멤버 자격 API는 자격 증명의 유효성을 검사 하 고, 현재 로그온 한 사용자에 대 한 정보를 검색 하 고, 새 사용자 계정을 만들고, 사용자 계정을 삭제 하는 메서드를 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-111">The Membership API includes methods for validating credentials, retrieving information about the currently logged on user, creating a new user account, and deleting a user account, among others.</span></span> <span data-ttu-id="f4b6c-112">멤버 자격 프레임 워크의 각 사용자 계정에는 자격 증명의 유효성을 검사 하 고 필수 사용자 계정 관련 작업을 수행 하는 데 필요한 속성만 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-112">Each user account in the Membership framework contains only the properties needed for validating credentials and performing essential user account-related tasks.</span></span> <span data-ttu-id="f4b6c-113">이는 멤버 자격 프레임 워크의 사용자 계정을 모델링 하는 [`MembershipUser` 클래스](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx)의 메서드 및 속성에 의해 복합적 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-113">This is evidenced by the methods and properties of the [`MembershipUser` class](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx), which models a user account in the Membership framework.</span></span> <span data-ttu-id="f4b6c-114">이 클래스에는 [`UserName`](https://msdn.microsoft.com/library/system.web.security.membershipuser.username.aspx), [`Email`](https://msdn.microsoft.com/library/system.web.security.membershipuser.email.aspx)및 [`IsLockedOut`](https://msdn.microsoft.com/library/system.web.security.membershipuser.islockedout.aspx)와 같은 속성과 [`GetPassword`](https://msdn.microsoft.com/library/system.web.security.membershipuser.getpassword.aspx) 및 [`UnlockUser`](https://msdn.microsoft.com/library/system.web.security.membershipuser.unlockuser.aspx)같은 메서드가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-114">This class has properties like [`UserName`](https://msdn.microsoft.com/library/system.web.security.membershipuser.username.aspx), [`Email`](https://msdn.microsoft.com/library/system.web.security.membershipuser.email.aspx), and [`IsLockedOut`](https://msdn.microsoft.com/library/system.web.security.membershipuser.islockedout.aspx), and methods like [`GetPassword`](https://msdn.microsoft.com/library/system.web.security.membershipuser.getpassword.aspx) and [`UnlockUser`](https://msdn.microsoft.com/library/system.web.security.membershipuser.unlockuser.aspx).</span></span>

<span data-ttu-id="f4b6c-115">응용 프로그램에서 멤버 자격 프레임 워크에 포함 되지 않은 추가 사용자 정보를 저장 해야 하는 경우가 종종 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-115">Oftentimes, applications need to store additional user information not included in the Membership framework.</span></span> <span data-ttu-id="f4b6c-116">예를 들어 온라인 대리점에서 각 사용자에 게 배송 및 대금 청구 주소, 지불 정보, 배달 기본 설정 및 연락처 전화 번호를 저장 하도록 허용 해야 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-116">For example, an online retailer might need to let each user store her shipping and billing addresses, payment information, delivery preferences, and contact phone number.</span></span> <span data-ttu-id="f4b6c-117">또한 시스템의 각 순서는 특정 사용자 계정에 연결 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-117">Furthermore, each order in the system is associated with a particular user account.</span></span>

<span data-ttu-id="f4b6c-118">`MembershipUser` 클래스는 `PhoneNumber` 또는 `DeliveryPreferences` 또는 `PastOrders`같은 속성을 포함 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-118">The `MembershipUser` class does not include properties like `PhoneNumber` or `DeliveryPreferences` or `PastOrders`.</span></span> <span data-ttu-id="f4b6c-119">응용 프로그램에 필요한 사용자 정보를 추적 하 고 멤버 자격 프레임 워크와 통합 하려면 어떻게 해야 하나요?</span><span class="sxs-lookup"><span data-stu-id="f4b6c-119">So how do we track the user information needed by the application and have it integrate with the Membership framework?</span></span> <span data-ttu-id="f4b6c-120">이 자습서에서는 매우 기본적인 방명록 응용 프로그램을 빌드하여이 질문에 대 한 답변을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-120">In this tutorial we will answer this question by building a very rudimentary guestbook application.</span></span> <span data-ttu-id="f4b6c-121">이 작업을 수행 하는 경우 데이터베이스에서 사용자 정보를 모델링 하는 다양 한 옵션을 살펴본 다음이 데이터를 멤버 프레임 프레임 워크에서 만든 사용자 계정에 연결 하는 방법을 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-121">In doing so, we will look at different options for modeling user information in a database, and then see how to associate this data with the user accounts created by the Membership framework.</span></span> <span data-ttu-id="f4b6c-122">시작 하겠습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-122">Let's get started!</span></span>

## <a name="step-1-creating-the-guestbook-applications-data-model"></a><span data-ttu-id="f4b6c-123">1 단계: 방명록 응용 프로그램의 데이터 모델 만들기</span><span class="sxs-lookup"><span data-stu-id="f4b6c-123">Step 1: Creating the Guestbook Application's Data Model</span></span>

<span data-ttu-id="f4b6c-124">데이터베이스에서 사용자 정보를 캡처하여 멤버 자격 프레임 워크에서 만든 사용자 계정에 연결 하는 데 사용할 수 있는 다양 한 기술이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-124">There are a variety of techniques that can be employed to capture user information in a database and associate it with the user accounts created by the Membership framework.</span></span> <span data-ttu-id="f4b6c-125">이러한 기술을 보여 주기 위해 자습서 웹 응용 프로그램을 보강 하 여 일종의 사용자 관련 데이터를 캡처하도록 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-125">In order to illustrate these techniques, we will need to augment the tutorial web application so that it captures some sort of user-related data.</span></span> <span data-ttu-id="f4b6c-126">현재 응용 프로그램의 데이터 모델에는 `SqlMembershipProvider`에 필요한 응용 프로그램 서비스 테이블만 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-126">(Currently, the application's data model contains only the application services tables needed by the `SqlMembershipProvider`.)</span></span>

<span data-ttu-id="f4b6c-127">인증 된 사용자가 주석을 남길 수 있는 매우 간단한 방명록 응용 프로그램을 만들어 보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-127">Let's create a very simple guestbook application where an authenticated user can leave a comment.</span></span> <span data-ttu-id="f4b6c-128">방명록 메모를 저장 하는 것 외에도 각 사용자가 자신의 집 마을, 홈페이지 및 서명을 저장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-128">In addition to storing guestbook comments, let's allow each user to store his home town, homepage, and signature.</span></span> <span data-ttu-id="f4b6c-129">제공 된 경우 사용자의 홈 타운, 홈 페이지 및 서명이 방명록에 남아 있는 각 메시지에 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-129">If provided, the user's home town, homepage, and signature will appear on each message he has left in the guestbook.</span></span>

### <a name="adding-theguestbookcommentstable"></a><span data-ttu-id="f4b6c-130">`GuestbookComments`테이블 추가</span><span class="sxs-lookup"><span data-stu-id="f4b6c-130">Adding the`GuestbookComments`Table</span></span>

<span data-ttu-id="f4b6c-131">방명록 주석을 캡처하려면 `CommentId`, `Subject`, `Body`, `CommentDate`등의 열이 있는 `GuestbookComments` 라는 데이터베이스 테이블을 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-131">In order to capture the guestbook comments, we need to create a database table named `GuestbookComments` that has columns like `CommentId`, `Subject`, `Body`, and `CommentDate`.</span></span> <span data-ttu-id="f4b6c-132">또한 `GuestbookComments` 테이블의 각 레코드가 주석을 떠난 사용자를 참조 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-132">We also need to have each record in the `GuestbookComments` table reference the user who left the comment.</span></span>

<span data-ttu-id="f4b6c-133">이 테이블을 데이터베이스에 추가 하려면 Visual Studio의 데이터베이스 탐색기로 이동 하 여 `SecurityTutorials` 데이터베이스로 드릴 다운 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-133">To add this table to our database, go to the Database Explorer in Visual Studio and drill down into the `SecurityTutorials` database.</span></span> <span data-ttu-id="f4b6c-134">Tables 폴더를 마우스 오른쪽 단추로 클릭 하 고 새 테이블 추가를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-134">Right-click on the Tables folder and choose Add New Table.</span></span> <span data-ttu-id="f4b6c-135">그러면 새 테이블의 열을 정의할 수 있는 인터페이스가 나타납니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-135">This brings up an interface that allows us to define the columns for the new table.</span></span>

<span data-ttu-id="f4b6c-136">[SecurityTutorials 데이터베이스에 새 테이블을 추가 ![](storing-additional-user-information-cs/_static/image2.png)](storing-additional-user-information-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-136">[![Add a New Table to the SecurityTutorials Database](storing-additional-user-information-cs/_static/image2.png)](storing-additional-user-information-cs/_static/image1.png)</span></span>

<span data-ttu-id="f4b6c-137">**그림 1**: `SecurityTutorials` 데이터베이스에 새 테이블 추가 ([전체 크기 이미지를 보려면 클릭](storing-additional-user-information-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="f4b6c-137">**Figure 1**: Add a New Table to the `SecurityTutorials` Database  ([Click to view full-size image](storing-additional-user-information-cs/_static/image3.png))</span></span>

<span data-ttu-id="f4b6c-138">그런 다음 `GuestbookComments`의 열을 정의 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-138">Next, define the `GuestbookComments`'s columns.</span></span> <span data-ttu-id="f4b6c-139">`uniqueidentifier`형식의 `CommentId` 이라는 열을 추가 하 여 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-139">Start by adding a column named `CommentId` of type `uniqueidentifier`.</span></span> <span data-ttu-id="f4b6c-140">이 열은 방명록의 각 주석을 고유 하 게 식별 하므로 `NULL` s를 허용 하지 않고 테이블의 기본 키로 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-140">This column will uniquely identify each comment in the guestbook, so disallow `NULL` s and mark it as the table's primary key.</span></span> <span data-ttu-id="f4b6c-141">각 `INSERT`에서 `CommentId` 필드에 값을 제공 하는 대신 열의 기본값을 `NEWID()`로 설정 하 여 `INSERT`의이 필드에 대해 새 `uniqueidentifier` 값이 자동으로 생성 되도록 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-141">Rather than providing a value for the `CommentId` field on each `INSERT`, we can indicate that a new `uniqueidentifier` value should be automatically generated for this field on `INSERT` by setting the column's default value to `NEWID()`.</span></span> <span data-ttu-id="f4b6c-142">이 첫 번째 필드를 추가한 후 기본 키로 표시 하 고 설정의 기본값을 설정 하면 화면이 그림 2에 표시 된 화면과 유사 하 게 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-142">After adding this first field, marking it as the primary key, and settings its default value, your screen should look similar to the screen shot shown in Figure 2.</span></span>

<span data-ttu-id="f4b6c-143">[CommentId 라는 기본 열을 추가 ![](storing-additional-user-information-cs/_static/image5.png)](storing-additional-user-information-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-143">[![Add a Primary Column Named CommentId](storing-additional-user-information-cs/_static/image5.png)](storing-additional-user-information-cs/_static/image4.png)</span></span>

<span data-ttu-id="f4b6c-144">**그림 2**: `CommentId` 이라는 기본 열 추가 ([전체 크기 이미지를 보려면 클릭](storing-additional-user-information-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="f4b6c-144">**Figure 2**: Add a Primary Column Named `CommentId` ([Click to view full-size image](storing-additional-user-information-cs/_static/image6.png))</span></span>

<span data-ttu-id="f4b6c-145">그런 다음 `nvarchar(50)` 형식의 `Subject` 이라는 열을 추가 하 고, `nvarchar(MAX)`형식의 `Body` 이라는 열을 추가 합니다. 두 열 모두에서 `NULL`을 허용 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-145">Next, add a column named `Subject` of type `nvarchar(50)` and a column named `Body` of type `nvarchar(MAX)`, disallowing `NULL` s in both columns.</span></span> <span data-ttu-id="f4b6c-146">그런 다음 `datetime`형식의 `CommentDate` 이라는 열을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-146">Following that, add a column named `CommentDate` of type `datetime`.</span></span> <span data-ttu-id="f4b6c-147">`NULL` s를 허용 하지 않고 `CommentDate` 열의 기본값을 `getdate()`로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-147">Disallow `NULL` s and set the `CommentDate` column's default value to `getdate()`.</span></span>

<span data-ttu-id="f4b6c-148">사용자 계정을 각 방명록 주석과 연결 하는 열을 추가 하는 것만 남았습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-148">All that remains is to add a column that associates a user account with each guestbook comment.</span></span> <span data-ttu-id="f4b6c-149">한 가지 옵션은 `nvarchar(256)`형식의 `UserName` 이라는 열을 추가 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-149">One option would be to add a column named `UserName` of type `nvarchar(256)`.</span></span> <span data-ttu-id="f4b6c-150">이는 `SqlMembershipProvider`이외의 멤버 자격 공급자를 사용 하는 경우 적합 한 선택입니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-150">This is a suitable choice when using a Membership provider other than the `SqlMembershipProvider`.</span></span> <span data-ttu-id="f4b6c-151">그러나이 자습서 시리즈와 같이 `SqlMembershipProvider`사용 하는 경우 `aspnet_Users` 테이블의 `UserName` 열은 고유 하지 않을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-151">But when using the `SqlMembershipProvider`, as we are in this tutorial series, the `UserName` column in the `aspnet_Users` table is not guaranteed to be unique.</span></span> <span data-ttu-id="f4b6c-152">`aspnet_Users` 테이블의 기본 키는 `UserId` 이며 `uniqueidentifier`형식입니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-152">The `aspnet_Users` table's primary key is `UserId` and is of type `uniqueidentifier`.</span></span> <span data-ttu-id="f4b6c-153">따라서 `GuestbookComments` 테이블에 `uniqueidentifier` 형식의 `UserId` 라는 열이 있어야 합니다 (`NULL` 값 허용 안 함).</span><span class="sxs-lookup"><span data-stu-id="f4b6c-153">Therefore, the `GuestbookComments` table needs a column named `UserId` of type `uniqueidentifier` (disallowing `NULL` values).</span></span> <span data-ttu-id="f4b6c-154">계속 진행 하 여이 열을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-154">Go ahead and add this column.</span></span>

> [!NOTE]
> <span data-ttu-id="f4b6c-155">[*SQL Server의 멤버 자격 스키마 만들기*](creating-the-membership-schema-in-sql-server-cs.md) 자습서에서 설명 했 듯이 멤버 자격 프레임 워크는 여러 사용자 계정을 사용 하 여 여러 웹 응용 프로그램에서 동일한 사용자 저장소를 공유할 수 있도록 설계 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-155">As we discussed in the [*Creating the Membership Schema in SQL Server*](creating-the-membership-schema-in-sql-server-cs.md) tutorial, the Membership framework is designed to enable multiple web applications with different user accounts to share the same user store.</span></span> <span data-ttu-id="f4b6c-156">사용자 계정을 여러 응용 프로그램으로 분할 하 여이를 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-156">It does this by partitioning user accounts into different applications.</span></span> <span data-ttu-id="f4b6c-157">각 사용자 이름이 응용 프로그램 내에서 고유 하 게 보장 되는 동안 동일한 사용자 저장소를 사용 하는 다른 응용 프로그램에서 동일한 사용자 이름을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-157">And while each username is guaranteed to be unique within an application, the same username may be used in different applications using the same user store.</span></span> <span data-ttu-id="f4b6c-158">`UserName` 및 `ApplicationId` 필드의 `aspnet_Users` 테이블에는 복합 `UNIQUE` 제약 조건이 있지만 하나는 `UserName` 필드에만 적용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-158">There is a composite `UNIQUE` constraint in the `aspnet_Users` table on the `UserName` and `ApplicationId` fields, but not one on just the `UserName` field.</span></span> <span data-ttu-id="f4b6c-159">따라서 aspnet\_사용자 테이블에 동일한 `UserName` 값을 가진 둘 이상의 레코드가 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-159">Consequently, it is possible for the aspnet\_Users table to have two (or more) records with the same `UserName` value.</span></span> <span data-ttu-id="f4b6c-160">그러나 `aspnet_Users` 테이블의 `UserId` 필드에는 기본 키 이므로 `UNIQUE` 제약 조건이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-160">There is, however, a `UNIQUE` constraint on the `aspnet_Users` table's `UserId` field (since it is the primary key).</span></span> <span data-ttu-id="f4b6c-161">`UNIQUE` 제약 조건은 `GuestbookComments`와 `aspnet_Users` 테이블 사이에 foreign key 제약 조건을 설정할 수 없기 때문에 중요 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-161">A `UNIQUE` constraint is important because without it we cannot establish a foreign key constraint between the `GuestbookComments` and `aspnet_Users` tables.</span></span>

<span data-ttu-id="f4b6c-162">`UserId` 열을 추가한 후 도구 모음에서 저장 아이콘을 클릭 하 여 테이블을 저장 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-162">After adding the `UserId` column, save the table by clicking on the Save icon in the Toolbar.</span></span> <span data-ttu-id="f4b6c-163">새 테이블의 이름을 `GuestbookComments`합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-163">Name the new table `GuestbookComments`.</span></span>

<span data-ttu-id="f4b6c-164">`GuestbookComments` 테이블을 사용 하 여에 참석 하는 마지막 문제가 있습니다. `GuestbookComments.UserId` 열과 `aspnet_Users.UserId` 열 사이에 [foreign key 제약 조건을](https://msdn.microsoft.com/library/ms175464.aspx) 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-164">We have one last issue to attend to with the `GuestbookComments` table: we need to create a [foreign key constraint](https://msdn.microsoft.com/library/ms175464.aspx) between the `GuestbookComments.UserId` column and the `aspnet_Users.UserId` column.</span></span> <span data-ttu-id="f4b6c-165">이렇게 하려면 도구 모음에서 관계 아이콘을 클릭 하 여 외래 키 관계 대화 상자를 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-165">To achieve this, click the Relationship icon in the Toolbar to launch the Foreign Key Relationships dialog box.</span></span> <span data-ttu-id="f4b6c-166">또는 테이블 디자이너 메뉴로 이동 하 고 관계를 선택 하 여이 대화 상자를 시작할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-166">(Alternatively, you can launch this dialog box by going to the Table Designer menu and choosing Relationships.)</span></span>

<span data-ttu-id="f4b6c-167">외래 키 관계 대화 상자의 왼쪽 아래 모퉁이에 있는 추가 단추를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-167">Click the Add button in the lower left corner of the Foreign Key Relationships dialog box.</span></span> <span data-ttu-id="f4b6c-168">이렇게 하면 관계에 참여 하는 테이블을 정의 해야 하지만 새 foreign key 제약 조건이 추가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-168">This will add a new foreign key constraint, although we still need to define the tables that participate in the relationship.</span></span>

<span data-ttu-id="f4b6c-169">[외래 키 관계 대화 상자를 사용 하 여 테이블의 Foreign Key 제약 조건을 관리할 ![](storing-additional-user-information-cs/_static/image8.png)](storing-additional-user-information-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-169">[![Use the Foreign Key Relationships Dialog Box to Manage a Table's Foreign Key Constraints](storing-additional-user-information-cs/_static/image8.png)](storing-additional-user-information-cs/_static/image7.png)</span></span>

<span data-ttu-id="f4b6c-170">**그림 3**: 외래 키 관계 대화 상자를 사용 하 여 테이블의 Foreign Key 제약 조건 관리 ([전체 크기 이미지를 보려면 클릭](storing-additional-user-information-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="f4b6c-170">**Figure 3**: Use the Foreign Key Relationships Dialog Box to Manage a Table's Foreign Key Constraints  ([Click to view full-size image](storing-additional-user-information-cs/_static/image9.png))</span></span>

<span data-ttu-id="f4b6c-171">그런 다음 오른쪽의 "테이블 및 열 사양" 행에서 줄임표 아이콘을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-171">Next, click the ellipses icon in the "Table and Columns Specifications" row on the right.</span></span> <span data-ttu-id="f4b6c-172">그러면 테이블 및 열 대화 상자가 시작 되며 여기에서 기본 키 테이블 및 열과 `GuestbookComments` 테이블의 외래 키 열을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-172">This will launch the Tables and Columns dialog box, from which we can specify the primary key table and column and the foreign key column from the `GuestbookComments` table.</span></span> <span data-ttu-id="f4b6c-173">특히 기본 키 테이블 및 열로 `aspnet_Users` 및 `UserId`를 선택 하 고 `GuestbookComments` 테이블에서 외래 키 열로 `UserId` 합니다 (그림 4 참조).</span><span class="sxs-lookup"><span data-stu-id="f4b6c-173">In particular, select `aspnet_Users` and `UserId` as the primary key table and column, and `UserId` from the `GuestbookComments` table as the foreign key column (see Figure 4).</span></span> <span data-ttu-id="f4b6c-174">기본 및 외래 키 테이블 및 열을 정의한 후 확인을 클릭 하 여 외래 키 관계 대화 상자로 돌아갑니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-174">After defining the primary and foreign key tables and columns, click OK to return to the Foreign Key Relationships dialog box.</span></span>

<span data-ttu-id="f4b6c-175">[aspnet_Users와 ![된 메모 테이블 사이에 외래 키 제약 조건을 설정 합니다.](storing-additional-user-information-cs/_static/image11.png)](storing-additional-user-information-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-175">[![Establish a Foreign Key Constraint Between the aspnet_Users and GuesbookComments Tables](storing-additional-user-information-cs/_static/image11.png)](storing-additional-user-information-cs/_static/image10.png)</span></span>

<span data-ttu-id="f4b6c-176">**그림 4**: `aspnet_Users`와 `GuesbookComments` 테이블 간의 Foreign Key 제약 조건 설정 ([전체 크기 이미지를 보려면 클릭](storing-additional-user-information-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="f4b6c-176">**Figure 4**: Establish a Foreign Key Constraint Between the `aspnet_Users` and `GuesbookComments` Tables  ([Click to view full-size image](storing-additional-user-information-cs/_static/image12.png))</span></span>

<span data-ttu-id="f4b6c-177">이 시점에서 foreign key 제약 조건이 설정 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-177">At this point the foreign key constraint has been established.</span></span> <span data-ttu-id="f4b6c-178">이 제약 조건이 있으면 존재 하지 않는 사용자 계정을 참조 하는 방명록 항목이 되지 않도록 보장 하 여 두 테이블 간의 [관계 무결성](http://en.wikipedia.org/wiki/Referential_integrity) 을 보장 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-178">The presence of this constraint ensures [relational integrity](http://en.wikipedia.org/wiki/Referential_integrity) between the two tables by guaranteeing that there will never be a guestbook entry referring to a non-existent user account.</span></span> <span data-ttu-id="f4b6c-179">기본적으로 foreign key 제약 조건은 해당 자식 레코드가 있는 경우 부모 레코드를 삭제 하지 못하게 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-179">By default, a foreign key constraint will disallow a parent record to be deleted if there are corresponding child records.</span></span> <span data-ttu-id="f4b6c-180">즉, 사용자가 하나 이상의 방명록 주석을 만든 다음 해당 사용자 계정을 삭제 하려고 하면 해당 방명록 주석이 먼저 삭제 되지 않는 한 삭제 작업이 실패 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-180">That is, if a user makes one or more guestbook comments, and then we attempt to delete that user account, the delete will fail unless his guestbook comments are deleted first.</span></span>

<span data-ttu-id="f4b6c-181">부모 레코드를 삭제할 때 연결 된 자식 레코드를 자동으로 삭제 하도록 Foreign key 제약 조건을 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-181">Foreign key constraints can be configured to automatically delete the associated child records when a parent record is deleted.</span></span> <span data-ttu-id="f4b6c-182">즉, 사용자의 사용자 계정이 삭제 될 때 사용자의 방명록 항목이 자동으로 삭제 되도록 foreign key 제약 조건을 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-182">In other words, we can setup this foreign key constraint so that a user's guestbook entries are automatically deleted when her user account is deleted.</span></span> <span data-ttu-id="f4b6c-183">이를 수행 하려면 "삽입 및 업데이트 사양" 섹션을 확장 하 고 "규칙 삭제" 속성을 Cascade로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-183">To accomplish this, expand the "INSERT And UPDATE Specification" section and set the "Delete Rule" property to Cascade.</span></span>

<span data-ttu-id="f4b6c-184">[Foreign Key 제약 조건을 Cascade 삭제로 구성 ![](storing-additional-user-information-cs/_static/image14.png)](storing-additional-user-information-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-184">[![Configure the Foreign Key Constraint to Cascade Deletes](storing-additional-user-information-cs/_static/image14.png)](storing-additional-user-information-cs/_static/image13.png)</span></span>

<span data-ttu-id="f4b6c-185">**그림 5**: Cascade delete에 대해 Foreign Key 제약 조건 구성 ([전체 크기 이미지를 보려면 클릭](storing-additional-user-information-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="f4b6c-185">**Figure 5**: Configure the Foreign Key Constraint to Cascade Deletes  ([Click to view full-size image](storing-additional-user-information-cs/_static/image15.png))</span></span>

<span data-ttu-id="f4b6c-186">Foreign key 제약 조건을 저장 하려면 닫기 단추를 클릭 하 여 외래 키 관계를 종료 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-186">To save the foreign key constraint, click the Close button to exit out of the Foreign Key Relationships.</span></span> <span data-ttu-id="f4b6c-187">그런 다음 도구 모음에서 저장 아이콘을 클릭 하 여 테이블과이 관계를 저장 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-187">Then click the Save icon in the Toolbar to save the table and the this relationship.</span></span>

### <a name="storing-the-users-home-town-homepage-and-signature"></a><span data-ttu-id="f4b6c-188">사용자의 홈 타운, 홈페이지 및 서명 저장</span><span class="sxs-lookup"><span data-stu-id="f4b6c-188">Storing the User's Home Town, Homepage, and Signature</span></span>

<span data-ttu-id="f4b6c-189">`GuestbookComments` 표에서는 사용자 계정과 일 대 다 관계를 공유 하는 정보를 저장 하는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-189">The `GuestbookComments` table illustrates how to store information that shares a one-to-many relationship with user accounts.</span></span> <span data-ttu-id="f4b6c-190">각 사용자 계정에는 연결 된 설명이 임의로 포함 될 수 있으므로이 관계는 각 주석을 특정 사용자에 게 다시 연결 하는 열을 포함 하는 테이블을 만들어 모델링 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-190">Since each user account may have an arbitrary number of associated comments, this relationship is modeled by creating a table to hold the set of comments that includes a column that links back each comment to a particular user.</span></span> <span data-ttu-id="f4b6c-191">`SqlMembershipProvider`를 사용 하는 경우이 링크는 `uniqueidentifier` 형식의 `UserId` 열과이 열과 `aspnet_Users.UserId`간의 foreign key 제약 조건을 만들어 설정 하는 것이 가장 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-191">When using the `SqlMembershipProvider`, this link is best established by creating a column named `UserId` of type `uniqueidentifier` and a foreign key constraint between this column and `aspnet_Users.UserId`.</span></span>

<span data-ttu-id="f4b6c-192">이제 각 사용자 계정에 세 개의 열을 연결 하 여 사용자의 홈 타운, 홈 페이지 및 서명을 저장 해야 합니다 .이는 방명록 메모에 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-192">We now need to associate three columns with each user account to store the user's home town, homepage, and signature, which will appear in his guestbook comments.</span></span> <span data-ttu-id="f4b6c-193">이 작업을 수행 하는 방법에는 여러 가지가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-193">There are number of different ways to accomplish this:</span></span>

- <span data-ttu-id="f4b6c-194"><strong>`aspnet_Users`</strong> <strong>또는</strong> <strong>`aspnet_Membership`</strong>테이블 <strong>에 새 열을 추가</strong> <strong>합니다.</strong></span><span class="sxs-lookup"><span data-stu-id="f4b6c-194"><strong>Add new columns to the</strong><strong>`aspnet_Users`</strong><strong>or</strong><strong>`aspnet_Membership`</strong><strong>tables.</strong></span></span> <span data-ttu-id="f4b6c-195">`SqlMembershipProvider`에서 사용 하는 스키마를 수정 하기 때문에이 방법은 사용 하지 않는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-195">I would not recommend this approach because it modifies the schema used by the `SqlMembershipProvider`.</span></span> <span data-ttu-id="f4b6c-196">이 의사 결정은 haunt으로 돌아올 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-196">This decision may come back to haunt you down the road.</span></span> <span data-ttu-id="f4b6c-197">ASP.NET의 이후 버전에서 다른 `SqlMembershipProvider` 스키마를 사용 하는 경우를 예로 들 수가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-197">For example, what if a future version of ASP.NET uses a different `SqlMembershipProvider` schema.</span></span> <span data-ttu-id="f4b6c-198">Microsoft는 ASP.NET 2.0 `SqlMembershipProvider` 데이터를 새 스키마로 마이그레이션하는 도구를 포함할 수 있지만 ASP.NET 2.0 `SqlMembershipProvider` 스키마를 수정한 경우에는 이러한 변환을 수행할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-198">Microsoft may include a tool to migrate the ASP.NET 2.0 `SqlMembershipProvider` data to the new schema, but if you have modified the ASP.NET 2.0 `SqlMembershipProvider` schema, such a conversion may not be possible.</span></span>

- <span data-ttu-id="f4b6c-199">**ASP를 사용 합니다. 가정용 마을, 홈페이지 및 서명에 대 한 프로필 속성을 정의 하는 NET의 프로필 프레임 워크입니다.**</span><span class="sxs-lookup"><span data-stu-id="f4b6c-199">**Use ASP.NET's Profile framework, defining a profile property for the home town, homepage, and signature.**</span></span> <span data-ttu-id="f4b6c-200">ASP.NET에는 추가 사용자별 데이터를 저장 하도록 디자인 된 프로필 프레임 워크가 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-200">ASP.NET includes a Profile framework that is designed to store additional user-specific data.</span></span> <span data-ttu-id="f4b6c-201">멤버 프레임 워크와 마찬가지로 프로필 프레임 워크는 공급자 모델 위에 빌드됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-201">Like the Membership framework, the Profile framework is built atop the provider model.</span></span> <span data-ttu-id="f4b6c-202">.NET Framework는 SQL Server 데이터베이스에 프로필 데이터를 저장 하는 `SqlProfileProvider`와 함께 제공 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-202">The .NET Framework ships with a `SqlProfileProvider` sthat stores profile data in a SQL Server database.</span></span> <span data-ttu-id="f4b6c-203">실제로 데이터베이스에는 <a id="_msoanchor_2"> </a> [*SQL Server 자습서에서 멤버 자격 스키마 만들기*](creating-the-membership-schema-in-sql-server-cs.md) 에서 응용 프로그램 서비스를 다시 추가할 때 추가 된 `SqlProfileProvider` (`aspnet_Profile`)에서 이미 사용 된 테이블이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-203">In fact, our database already has the table used by the `SqlProfileProvider` (`aspnet_Profile`), as it was added when we added the application services back in the <a id="_msoanchor_2"></a>[*Creating the Membership Schema in SQL Server*](creating-the-membership-schema-in-sql-server-cs.md) tutorial.</span></span>   
  <span data-ttu-id="f4b6c-204">프로필 프레임 워크의 주요 혜택은 개발자가 `Web.config`에서 프로필 속성을 정의할 수 있다는 것입니다. 즉, 프로필 데이터를 기본 데이터 저장소로 serialize 하기 위해 코드를 작성할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-204">The main benefit of the Profile framework is that it allows for developers to define the profile properties in `Web.config` – no code needs to be written to serialize the profile data to and from the underlying data store.</span></span> <span data-ttu-id="f4b6c-205">간단히 말해 프로필 속성 집합을 정의 하 고 코드에서 작업 하는 것이 매우 쉽습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-205">In short, it is incredibly easy to define a set of profile properties and to work with them in code.</span></span> <span data-ttu-id="f4b6c-206">그러나 버전을 관리 하는 경우 프로필 시스템을 사용 하는 것이 매우 바람직 하므로, 나중에 새 사용자 지정 속성을 추가 하거나 기존 속성을 제거 하거나 수정할 수 있는 응용 프로그램이 있는 경우 프로필 프레임 워크는  최상의 옵션입니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-206">However, the Profile system leaves a lot to be desired when it comes to versioning, so if you have an application where you expect new user-specific properties to be added at a later time, or existing ones to be removed or modified, then the Profile framework may not be the best option.</span></span> <span data-ttu-id="f4b6c-207">또한 `SqlProfileProvider`는 프로필 속성을 매우 비 정규화 된 방식으로 저장 하 여 프로필 데이터에 대해 직접 쿼리를 실행할 수 없게 합니다 (예: 뉴욕의 홈 타운을 가진 사용자 수).</span><span class="sxs-lookup"><span data-stu-id="f4b6c-207">Moreover, the `SqlProfileProvider` stores the profile properties in a highly denormalized fashion, making it next to impossible to run queries directly against the profile data (such as, how many users have a home town of New York).</span></span>   
  <span data-ttu-id="f4b6c-208">프로필 프레임 워크에 대 한 자세한 내용은이 자습서의 끝부분에 있는 "추가 판독값" 섹션을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-208">For more information on the Profile framework, consult the "Further Readings" section at the end of this tutorial.</span></span>

- <span data-ttu-id="f4b6c-209"><strong>데이터베이스의 새 테이블에 이러한 3 개의 열을 추가 하 고이 테이블과`aspnet_Users`사이에 일 대 일 관계를 설정</strong> <strong>합니다.</strong></span><span class="sxs-lookup"><span data-stu-id="f4b6c-209"><strong>Add these three columns to a new table in the database and establish a one-to-one relationship between this table and</strong><strong>`aspnet_Users`</strong><strong>.</strong></span></span> <span data-ttu-id="f4b6c-210">이 방법은 프로필 프레임 워크 보다 약간 더 많은 작업을 수행 하지만 데이터베이스에서 추가 사용자 속성을 모델링 하는 방법에 대 한 최대 유연성을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-210">This approach involves a bit more work than with the Profile framework, but offers maximum flexibility in how the additional user properties are modeled in the database.</span></span> <span data-ttu-id="f4b6c-211">이 옵션은이 자습서에서 사용 하는 옵션입니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-211">This is the option we will use in this tutorial.</span></span>

<span data-ttu-id="f4b6c-212">`UserProfiles` 라는 새 테이블을 만들어 각 사용자에 대 한 홈 타운, 홈 페이지 및 서명을 저장 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-212">We will create a new table called `UserProfiles` to save the home town, homepage, and signature for each user.</span></span> <span data-ttu-id="f4b6c-213">데이터베이스 탐색기 창의 Tables 폴더를 마우스 오른쪽 단추로 클릭 하 고 새 테이블을 만들도록 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-213">Right-click on the Tables folder in the Database Explorer window and choose to create a new table.</span></span> <span data-ttu-id="f4b6c-214">첫 번째 열의 이름을 `UserId` 하 고 해당 형식을 `uniqueidentifier`로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-214">Name the first column `UserId` and set its type to `uniqueidentifier`.</span></span> <span data-ttu-id="f4b6c-215">`NULL` 값을 허용 하지 않고 열을 기본 키로 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-215">Disallow `NULL` values and mark the column as a primary key.</span></span> <span data-ttu-id="f4b6c-216">다음으로, `nvarchar(50)`형식의 `HomeTown` 이라는 열을 추가 합니다. `nvarchar(100)`형식의 `HomepageUrl` 및 형식의 시그니처를 `nvarchar(500)`합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-216">Next, add columns named: `HomeTown` of type `nvarchar(50)`; `HomepageUrl` of type `nvarchar(100)`; and Signature of type `nvarchar(500)`.</span></span> <span data-ttu-id="f4b6c-217">이러한 세 열은 모두 `NULL` 값을 허용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-217">Each of these three columns can accept a `NULL` value.</span></span>

<span data-ttu-id="f4b6c-218">[UserProfiles 테이블 ![만들려면](storing-additional-user-information-cs/_static/image17.png)](storing-additional-user-information-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-218">[![Create the UserProfiles Table](storing-additional-user-information-cs/_static/image17.png)](storing-additional-user-information-cs/_static/image16.png)</span></span>

<span data-ttu-id="f4b6c-219">**그림 6**: `UserProfiles` 테이블 만들기 ([전체 크기 이미지를 보려면 클릭](storing-additional-user-information-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="f4b6c-219">**Figure 6**: Create the `UserProfiles` Table  ([Click to view full-size image](storing-additional-user-information-cs/_static/image18.png))</span></span>

<span data-ttu-id="f4b6c-220">테이블을 저장 하 고 이름을 `UserProfiles`으로 이름을로 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-220">Save the table and name it `UserProfiles`.</span></span> <span data-ttu-id="f4b6c-221">마지막으로 `UserProfiles` 테이블의 `UserId` 필드와 `aspnet_Users.UserId` 필드 사이에 foreign key 제약 조건을 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-221">Lastly, establish a foreign key constraint between the `UserProfiles` table's `UserId` field and the `aspnet_Users.UserId` field.</span></span> <span data-ttu-id="f4b6c-222">`GuestbookComments` 테이블과 `aspnet_Users` 테이블 사이에 foreign key 제약 조건이 있는 것 처럼이 제약 조건을 cascade로 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-222">As we did with the foreign key constraint between the `GuestbookComments` and `aspnet_Users` tables, have this constraint cascade deletes.</span></span> <span data-ttu-id="f4b6c-223">`UserProfiles`의 `UserId` 필드가 기본 키 이기 때문에 각 사용자 계정에 대 한 `UserProfiles` 테이블에 레코드가 둘 이상 존재 하지 않게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-223">Since the `UserId` field in `UserProfiles` is the primary key, this ensures that there will be no more than one record in the `UserProfiles` table for each user account.</span></span> <span data-ttu-id="f4b6c-224">이 유형의 관계를 일 대 일 이라고 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-224">This type of relationship is referred to as one-to-one.</span></span>

<span data-ttu-id="f4b6c-225">이제 데이터 모델을 만들었으므로 사용할 준비가 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-225">Now that we have the data model created, we are ready to use it.</span></span> <span data-ttu-id="f4b6c-226">2 단계와 3 단계에서 현재 로그온 한 사용자가 자신의 집 마을, 홈페이지 및 서명 정보를 보고 편집할 수 있는 방법을 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-226">In Steps 2 and 3 we will look at how the currently logged on user can view and edit their home town, homepage, and signature information.</span></span> <span data-ttu-id="f4b6c-227">4 단계에서는 인증 된 사용자가 새 의견을 방명록에 제출 하 고 기존 문서를 볼 수 있도록 인터페이스를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-227">In Step 4 we will create the interface for authenticated users to submit new comments to the guestbook and view the existing ones.</span></span>

## <a name="step-2-displaying-the-users-home-town-homepage-and-signature"></a><span data-ttu-id="f4b6c-228">2 단계: 사용자의 홈 마을, 홈페이지 및 서명 표시</span><span class="sxs-lookup"><span data-stu-id="f4b6c-228">Step 2: Displaying the User's Home Town, Homepage, and Signature</span></span>

<span data-ttu-id="f4b6c-229">현재 로그온 한 사용자가 주택 마을, 홈페이지 및 서명 정보를 보고 편집할 수 있도록 하는 다양 한 방법이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-229">There are a variety of ways to allow the currently logged on user to view and edit his home town, homepage, and signature information.</span></span> <span data-ttu-id="f4b6c-230">TextBox 및 Label 컨트롤을 사용 하 여 사용자 인터페이스를 수동으로 만들거나 DetailsView 컨트롤과 같은 데이터 웹 컨트롤 중 하나를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-230">We could manually create the user interface with TextBox and Label controls or we could use one of the data Web controls, such as the DetailsView control.</span></span> <span data-ttu-id="f4b6c-231">데이터베이스 `SELECT` 및 `UPDATE` 문을 수행 하려면 페이지의 코드를 사용 하는 클래스에 ADO.NET 코드를 작성 하거나 SqlDataSource를 사용 하 여 선언적 방법을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-231">To perform the database `SELECT` and `UPDATE` statements we could write ADO.NET code in our page's code-behind class or, alternatively, employ a declarative approach with the SqlDataSource.</span></span> <span data-ttu-id="f4b6c-232">이상적으로 응용 프로그램에는 계층화 된 아키텍처가 포함 되어 있으므로 페이지의 코드 숨김이 아닌 클래스에서 프로그래밍 방식으로 호출 하거나 ObjectDataSource 컨트롤을 통해 선언적으로 호출할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-232">Ideally our application would contain a tiered architecture, which we could either invoke programmatically from the page's code-behind class or declaratively via the ObjectDataSource control.</span></span>

<span data-ttu-id="f4b6c-233">이 자습서 시리즈는 폼 인증, 권한 부여, 사용자 계정 및 역할에 중점을 두는 이러한 다양 한 데이터 액세스 옵션에 대해 자세히 설명 하거나 SQL 문을 직접 실행 하는 경우 계층화 된 아키텍처가 선호 되는 이유를 설명 하지 않습니다. ASP.NET 페이지에서</span><span class="sxs-lookup"><span data-stu-id="f4b6c-233">Since this tutorial series focuses on forms authentication, authorization, user accounts, and roles, there will not be a thorough discussion of these different data access options or why a tiered architecture is preferred over executing SQL statements directly from the ASP.NET page.</span></span> <span data-ttu-id="f4b6c-234">가장 빠르고 쉬운 옵션인 DetailsView 및 SqlDataSource를 사용 하는 방법을 살펴보겠습니다. 하지만 논의 된 개념은 대체 웹 컨트롤 및 데이터 액세스 논리에 적용 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-234">I am going to walk through using a DetailsView and SqlDataSource – the quickest and easiest option – but the concepts discussed can certainly be applied to alternative Web controls and data access logic.</span></span> <span data-ttu-id="f4b6c-235">ASP.NET의 데이터로 작업 하는 방법에 대 한 자세한 내용은 *[ASP.NET 2.0 자습서 시리즈의 데이터 사용 내 작업](../../data-access/index.md)* 을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-235">For more information on working with data in ASP.NET, refer to my *[Working with Data in ASP.NET 2.0](../../data-access/index.md)* tutorial series.</span></span>

<span data-ttu-id="f4b6c-236">`Membership` 폴더에서 `AdditionalUserInfo.aspx` 페이지를 열고 페이지에 DetailsView 컨트롤을 추가 하 고 `ID` 속성을 `UserProfile`로 설정 하 고 `Width` 및 `Height` 속성을 지웁니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-236">Open the `AdditionalUserInfo.aspx` page in the `Membership` folder and add a DetailsView control to the page, setting its `ID` property to `UserProfile` and clearing out its `Width` and `Height` properties.</span></span> <span data-ttu-id="f4b6c-237">DetailsView의 스마트 태그를 확장 하 고 새 데이터 소스 컨트롤에 바인딩하려는를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-237">Expand the DetailsView's Smart Tag and choose to bind it to a new data source control.</span></span> <span data-ttu-id="f4b6c-238">그러면 DataSource 구성 마법사가 시작 됩니다 (그림 7 참조).</span><span class="sxs-lookup"><span data-stu-id="f4b6c-238">This will launch the DataSource Configuration Wizard (see Figure 7).</span></span> <span data-ttu-id="f4b6c-239">첫 번째 단계에서는 데이터 원본 유형을 지정 하 라는 메시지를 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-239">The first step asks you to specify the data source type.</span></span> <span data-ttu-id="f4b6c-240">`SecurityTutorials` 데이터베이스에 직접 연결 하기 때문에 데이터베이스 아이콘을 선택 하 여 `ID`을 `UserProfileDataSource`로 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-240">Since we are going to connect directly to the `SecurityTutorials` database, choose the Database icon, specifying the `ID` as `UserProfileDataSource`.</span></span>

<span data-ttu-id="f4b6c-241">[UserProfileDataSource 라는 새 SqlDataSource 컨트롤을 추가 ![](storing-additional-user-information-cs/_static/image20.png)](storing-additional-user-information-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-241">[![Add a New SqlDataSource Control Named UserProfileDataSource](storing-additional-user-information-cs/_static/image20.png)](storing-additional-user-information-cs/_static/image19.png)</span></span>

<span data-ttu-id="f4b6c-242">**그림 7**: `UserProfileDataSource` 라는 새 SqlDataSource 컨트롤 추가 ([전체 크기 이미지를 보려면 클릭](storing-additional-user-information-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="f4b6c-242">**Figure 7**: Add a New SqlDataSource Control Named `UserProfileDataSource` ([Click to view full-size image](storing-additional-user-information-cs/_static/image21.png))</span></span>

<span data-ttu-id="f4b6c-243">다음 화면은 사용할 데이터베이스를 묻는 메시지를 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-243">The next screen prompts for the database to use.</span></span> <span data-ttu-id="f4b6c-244">`Web.config`에서 `SecurityTutorials` 데이터베이스에 대 한 연결 문자열을 이미 정의 했습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-244">We have already defined a connection string in `Web.config` for the `SecurityTutorials` database.</span></span> <span data-ttu-id="f4b6c-245">이 연결 문자열 이름 – `SecurityTutorialsConnectionString` – 드롭다운 목록에 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-245">This connection string name – `SecurityTutorialsConnectionString` – should be in the drop-down list.</span></span> <span data-ttu-id="f4b6c-246">이 옵션을 선택 하 고 다음을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-246">Select this option and click Next.</span></span>

<span data-ttu-id="f4b6c-247">[드롭다운 목록에서 SecurityTutorialsConnectionString를 선택 ![](storing-additional-user-information-cs/_static/image23.png)](storing-additional-user-information-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-247">[![Choose SecurityTutorialsConnectionString from the Drop-Down List](storing-additional-user-information-cs/_static/image23.png)](storing-additional-user-information-cs/_static/image22.png)</span></span>

<span data-ttu-id="f4b6c-248">**그림 8**: 드롭다운 목록에서 `SecurityTutorialsConnectionString` 선택 ([전체 크기 이미지를 보려면 클릭](storing-additional-user-information-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="f4b6c-248">**Figure 8**: Choose `SecurityTutorialsConnectionString` from the Drop-Down List  ([Click to view full-size image](storing-additional-user-information-cs/_static/image24.png))</span></span>

<span data-ttu-id="f4b6c-249">후속 화면에서는 쿼리할 테이블 및 열을 지정 하 라는 메시지를 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-249">The subsequent screen asks us to specify the table and columns to query.</span></span> <span data-ttu-id="f4b6c-250">드롭다운 목록에서 `UserProfiles` 테이블을 선택 하 고 모든 열을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-250">Choose the `UserProfiles` table from the drop-down list and check all of the columns.</span></span>

<span data-ttu-id="f4b6c-251">[UserProfiles 테이블에서 모든 열을 다시 가져올 ![](storing-additional-user-information-cs/_static/image26.png)](storing-additional-user-information-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-251">[![Bring Back All of the Columns from the UserProfiles Table](storing-additional-user-information-cs/_static/image26.png)](storing-additional-user-information-cs/_static/image25.png)</span></span>

<span data-ttu-id="f4b6c-252">**그림 9**: `UserProfiles` 테이블의 모든 열 다시 가져오기 ([전체 크기 이미지를 보려면 클릭](storing-additional-user-information-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="f4b6c-252">**Figure 9**: Bring Back All of the Columns from the `UserProfiles` Table  ([Click to view full-size image](storing-additional-user-information-cs/_static/image27.png))</span></span>

<span data-ttu-id="f4b6c-253">그림 9의 현재 쿼리는 `UserProfiles`의 *모든* 레코드를 반환 하지만 현재 로그온 한 사용자의 레코드에만 관심이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-253">The current query in Figure 9 returns *all* of the records in `UserProfiles`, but we are only interested in the currently logged on user's record.</span></span> <span data-ttu-id="f4b6c-254">`WHERE` 절을 추가 하려면 `WHERE` 단추를 클릭 하 여 `WHERE` 절 추가 대화 상자를 표시 합니다 (그림 10 참조).</span><span class="sxs-lookup"><span data-stu-id="f4b6c-254">To add a `WHERE` clause, click the `WHERE` button to bring up the Add `WHERE` Clause dialog box (see Figure 10).</span></span> <span data-ttu-id="f4b6c-255">여기에서 필터링 할 열, 연산자 및 필터 매개 변수의 소스를 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-255">Here you can select the column to filter on, the operator, and the source of the filter parameter.</span></span> <span data-ttu-id="f4b6c-256">열로 `UserId`를 선택 하 고 연산자로 "="를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-256">Select `UserId` as the column and "=" as the Operator.</span></span>

<span data-ttu-id="f4b6c-257">아쉽게도 현재 로그온 한 사용자의 `UserId` 값을 반환 하는 기본 제공 매개 변수 소스가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-257">Unfortunately there is no built-in parameter source to return the currently logged on user's `UserId` value.</span></span> <span data-ttu-id="f4b6c-258">이 값은 프로그래밍 방식으로 잡아 두어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-258">We will need to grab this value programmatically.</span></span> <span data-ttu-id="f4b6c-259">따라서 원본 드롭다운 목록을 "없음"으로 설정 하 고 추가 단추를 클릭 하 여 매개 변수를 추가한 다음 확인을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-259">Therefore, set the Source drop-down list to "None," click the Add button to add the parameter, and then click OK.</span></span>

<span data-ttu-id="f4b6c-260">[UserId 열에서 필터 매개 변수를 추가 ![](storing-additional-user-information-cs/_static/image29.png)](storing-additional-user-information-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-260">[![Add a Filter Parameter on the UserId Column](storing-additional-user-information-cs/_static/image29.png)](storing-additional-user-information-cs/_static/image28.png)</span></span>

<span data-ttu-id="f4b6c-261">**그림 10**: `UserId` 열에 필터 매개 변수 추가 ([전체 크기 이미지를 보려면 클릭](storing-additional-user-information-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="f4b6c-261">**Figure 10**: Add a Filter Parameter on the `UserId` Column  ([Click to view full-size image](storing-additional-user-information-cs/_static/image30.png))</span></span>

<span data-ttu-id="f4b6c-262">확인을 클릭 하면 그림 9에 표시 된 화면으로 돌아갑니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-262">After clicking OK you will be returned to the screen shown in Figure 9.</span></span> <span data-ttu-id="f4b6c-263">그러나 이번에는 화면 맨 아래에 있는 SQL 쿼리에 `WHERE` 절이 포함 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-263">This time, however, the SQL query at the bottom of the screen should include a `WHERE` clause.</span></span> <span data-ttu-id="f4b6c-264">다음을 클릭 하 여 "쿼리 테스트" 화면으로 이동 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-264">Click Next to move on to the "Test Query" screen.</span></span> <span data-ttu-id="f4b6c-265">여기에서 쿼리를 실행 하 고 결과를 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-265">Here you can run the query and see the results.</span></span> <span data-ttu-id="f4b6c-266">마침을 클릭하여 마법사를 완료합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-266">Click Finish to complete the wizard.</span></span>

<span data-ttu-id="f4b6c-267">DataSource 구성 마법사가 완료 되 면 Visual Studio에서 마법사에 지정 된 설정에 따라 SqlDataSource 컨트롤을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-267">Upon completing the DataSource Configuration Wizard, Visual Studio creates the SqlDataSource control based on the settings specified in the wizard.</span></span> <span data-ttu-id="f4b6c-268">또한 SqlDataSource의 `SelectCommand`에서 반환 하는 각 열에 대해 DetailsView에 BoundFields를 수동으로 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-268">Moreover, it manually adds BoundFields to the DetailsView for each column returned by the SqlDataSource's `SelectCommand`.</span></span> <span data-ttu-id="f4b6c-269">사용자가이 값을 알 필요가 없기 때문에 DetailsView에 `UserId` 필드를 표시할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-269">There's no need to show the `UserId` field in the DetailsView, since the user does not need to know this value.</span></span> <span data-ttu-id="f4b6c-270">이 필드는 DetailsView 컨트롤의 선언적 태그에서 직접 제거 하거나 스마트 태그에서 "필드 편집" 링크를 클릭 하 여 제거할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-270">You can remove this field directly from the DetailsView control's declarative markup or by clicking the "Edit Fields" link from its Smart Tag.</span></span>

<span data-ttu-id="f4b6c-271">이 시점에서 페이지의 선언 태그는 다음과 같이 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-271">At this point your page's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](storing-additional-user-information-cs/samples/sample1.aspx)]

<span data-ttu-id="f4b6c-272">데이터를 선택 하기 전에 프로그래밍 방식으로 SqlDataSource 컨트롤의 `UserId` 매개 변수를 현재 로그인 한 사용자의 `UserId`으로 설정 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-272">We need to programmatically set the SqlDataSource control's `UserId` parameter to the currently logged in user's `UserId` before the data is selected.</span></span> <span data-ttu-id="f4b6c-273">이 작업은 SqlDataSource의 `Selecting` 이벤트에 대 한 이벤트 처리기를 만들고 다음 코드를 추가 하 여 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-273">This can be accomplished by creating an event handler for the SqlDataSource's `Selecting` event and adding the following code there:</span></span>

[!code-csharp[Main](storing-additional-user-information-cs/samples/sample2.cs)]

<span data-ttu-id="f4b6c-274">위의 코드는 `Membership` 클래스의 `GetUser` 메서드를 호출 하 여 현재 로그온 한 사용자에 대 한 참조를 가져오는 것으로 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-274">The above code starts by obtaining a reference to the currently logged on user by calling the `Membership` class's `GetUser` method.</span></span> <span data-ttu-id="f4b6c-275">그러면 `ProviderUserKey` 속성이 `UserId`을 포함 하는 `MembershipUser` 개체가 반환 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-275">This returns a `MembershipUser` object, whose `ProviderUserKey` property contains the `UserId`.</span></span> <span data-ttu-id="f4b6c-276">그러면 `UserId` 값이 SqlDataSource의 `@UserId` 매개 변수에 할당 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-276">The `UserId` value is then assigned to the SqlDataSource's `@UserId` parameter.</span></span>

> [!NOTE]
> <span data-ttu-id="f4b6c-277">`Membership.GetUser()` 메서드는 현재 로그온 한 사용자에 대 한 정보를 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-277">The `Membership.GetUser()` method returns information about the currently logged on user.</span></span> <span data-ttu-id="f4b6c-278">익명 사용자가 페이지를 방문 하는 경우 `null`값이 반환 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-278">If an anonymous user is visiting the page, it will return a value of `null`.</span></span> <span data-ttu-id="f4b6c-279">이러한 경우 `ProviderUserKey` 속성을 읽으려고 할 때 다음 코드 줄에 `NullReferenceException` 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-279">In such a case, this will lead to a `NullReferenceException` on the following line of code when attempting to read the `ProviderUserKey` property.</span></span> <span data-ttu-id="f4b6c-280">물론 인증 된 사용자만이 폴더의 ASP.NET 리소스에 액세스할 수 있도록 이전 자습서에서 URL 권한 부여를 구성 했기 때문에 `AdditionalUserInfo.aspx` 페이지에서 `null` 값을 반환 하는 `Membership.GetUser()`에 대해 걱정할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-280">Of course, we don't have to worry about `Membership.GetUser()` returning a `null` value in the `AdditionalUserInfo.aspx` page because we configured URL authorization in a previous tutorial so that only authenticated users could access the ASP.NET resources in this folder.</span></span> <span data-ttu-id="f4b6c-281">익명 액세스가 허용 된 페이지에서 현재 로그온 한 사용자에 대 한 정보에 액세스 해야 하는 경우 해당 속성을 참조 하기 전에 `GetUser()` 메서드에서`null MembershipUser` 되지 않은 개체가 반환 되는지 확인 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-281">If you need to access information about the currently logged on user in a page where anonymous access is permitted, make sure to check that a non-`null MembershipUser` object is returned from the `GetUser()` method before referencing its properties.</span></span>

<span data-ttu-id="f4b6c-282">브라우저를 통해 `AdditionalUserInfo.aspx` 페이지를 방문 하는 경우 `UserProfiles` 테이블에 행을 추가 하기 때문에 빈 페이지가 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-282">If you visit the `AdditionalUserInfo.aspx` page through a browser you will see a blank page because we have yet to add any rows to the `UserProfiles` table.</span></span> <span data-ttu-id="f4b6c-283">6 단계에서는 새 사용자 계정을 만들 때 `UserProfiles` 테이블에 새 행을 자동으로 추가 하도록 CreateUserWizard 컨트롤을 사용자 지정 하는 방법을 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-283">In Step 6 we will look at how to customize the CreateUserWizard control to automatically add a new row to the `UserProfiles` table when a new user account is created.</span></span> <span data-ttu-id="f4b6c-284">그러나 지금은 테이블에서 레코드를 수동으로 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-284">For now, however, we will need to manually create a record in the table.</span></span>

<span data-ttu-id="f4b6c-285">Visual Studio에서 데이터베이스 탐색기로 이동 하 여 Tables 폴더를 확장 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-285">Navigate to the Database Explorer in Visual Studio and expand the Tables folder.</span></span> <span data-ttu-id="f4b6c-286">`aspnet_Users` 테이블을 마우스 오른쪽 단추로 클릭 하 고 "테이블 데이터 표시"를 선택 하 여 테이블의 레코드를 확인 합니다. `UserProfiles` 테이블에 대해 동일한 작업을 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-286">Right-click on the `aspnet_Users` table and choose "Show Table Data" to see the records in the table; do the same thing for the `UserProfiles` table.</span></span> <span data-ttu-id="f4b6c-287">그림 11은 세로로 바둑판식으로 배열 될 때 이러한 결과를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-287">Figure 11 shows these results when tiled vertically.</span></span> <span data-ttu-id="f4b6c-288">내 데이터베이스에는 현재 Bruce, Fred 및 Tito에 대 한 레코드를 `aspnet_Users` 있지만 `UserProfiles` 테이블에는 레코드가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-288">In my database there are currently `aspnet_Users` records for Bruce, Fred, and Tito, but no records in the `UserProfiles` table.</span></span>

<span data-ttu-id="f4b6c-289">[aspnet_Users 및 UserProfiles 테이블의 내용이 표시 ![](storing-additional-user-information-cs/_static/image32.png)](storing-additional-user-information-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-289">[![The Contents of the aspnet_Users and UserProfiles Tables are Displayed](storing-additional-user-information-cs/_static/image32.png)](storing-additional-user-information-cs/_static/image31.png)</span></span>

<span data-ttu-id="f4b6c-290">**그림 11**: `aspnet_Users` 및 `UserProfiles` 테이블의 내용이 표시 됩니다 ([전체 크기 이미지를 보려면 클릭](storing-additional-user-information-cs/_static/image33.png)).</span><span class="sxs-lookup"><span data-stu-id="f4b6c-290">**Figure 11**: The Contents of the `aspnet_Users` and `UserProfiles` Tables are Displayed  ([Click to view full-size image](storing-additional-user-information-cs/_static/image33.png))</span></span>

<span data-ttu-id="f4b6c-291">`HomeTown`, `HomepageUrl`및 `Signature` 필드에 대 한 값을 수동으로 입력 하 여 `UserProfiles` 테이블에 새 레코드를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-291">Add a new record to the `UserProfiles` table by manually typing in values for the `HomeTown`, `HomepageUrl`, and `Signature` fields.</span></span> <span data-ttu-id="f4b6c-292">새 `UserProfiles` 레코드에서 유효한 `UserId` 값을 가져오는 가장 쉬운 방법은 `aspnet_Users` 테이블의 특정 사용자 계정에서 `UserId` 필드를 선택 하 고 복사 하 여 `UserId`의 `UserProfiles`필드에 붙여 넣는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-292">The easiest way to get a valid `UserId` value in the new `UserProfiles` record is to select the `UserId` field from a particular user account in the `aspnet_Users` table and copy and paste it into the `UserId` field in `UserProfiles`.</span></span> <span data-ttu-id="f4b6c-293">그림 12에서는 Bruce에 대해 새 레코드가 추가 된 후의 `UserProfiles` 테이블을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-293">Figure 12 shows the `UserProfiles` table after a new record has been added for Bruce.</span></span>

<span data-ttu-id="f4b6c-294">[Bruce 용 UserProfiles에 레코드를 추가 ![](storing-additional-user-information-cs/_static/image35.png)](storing-additional-user-information-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-294">[![A Record was Added to UserProfiles for Bruce](storing-additional-user-information-cs/_static/image35.png)](storing-additional-user-information-cs/_static/image34.png)</span></span>

<span data-ttu-id="f4b6c-295">**그림 12**: bruce의 `UserProfiles`에 레코드가 추가 됨 ([전체 크기 이미지를 보려면 클릭](storing-additional-user-information-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="f4b6c-295">**Figure 12**: A Record was Added to `UserProfiles` for Bruce  ([Click to view full-size image](storing-additional-user-information-cs/_static/image36.png))</span></span>

<span data-ttu-id="f4b6c-296">Bruce로 로그인 한 `AdditionalUserInfo.aspx` 페이지로 돌아갑니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-296">Return to the `AdditionalUserInfo.aspx` page, logged in as Bruce.</span></span> <span data-ttu-id="f4b6c-297">그림 13에서 볼 수 있듯이 Bruce의 설정이 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-297">As Figure 13 shows, Bruce's settings are displayed.</span></span>

<span data-ttu-id="f4b6c-298">[현재 방문한 사용자의 설정에 대 한 ![표시 됩니다.](storing-additional-user-information-cs/_static/image38.png)](storing-additional-user-information-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-298">[![The Currently Visiting User is Shown His Settings](storing-additional-user-information-cs/_static/image38.png)](storing-additional-user-information-cs/_static/image37.png)</span></span>

<span data-ttu-id="f4b6c-299">**그림 13**: 현재 방문 중인 사용자에 대 한 설정이 표시 됩니다 ([전체 크기 이미지를 보려면 클릭](storing-additional-user-information-cs/_static/image39.png)).</span><span class="sxs-lookup"><span data-stu-id="f4b6c-299">**Figure 13**: The Currently Visiting User is Shown His Settings  ([Click to view full-size image](storing-additional-user-information-cs/_static/image39.png))</span></span>

> [!NOTE]
> <span data-ttu-id="f4b6c-300">계속 해 서 각 멤버 자격 사용자에 대 한 `UserProfiles` 테이블에서 레코드를 수동으로 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-300">Go ahead and manually add records in the `UserProfiles` table for each Membership user.</span></span> <span data-ttu-id="f4b6c-301">6 단계에서는 새 사용자 계정을 만들 때 `UserProfiles` 테이블에 새 행을 자동으로 추가 하도록 CreateUserWizard 컨트롤을 사용자 지정 하는 방법을 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-301">In Step 6 we will look at how to customize the CreateUserWizard control to automatically add a new row to the `UserProfiles` table when a new user account is created.</span></span>

## <a name="step-3-allowing-the-user-to-edit-his-home-town-homepage-and-signature"></a><span data-ttu-id="f4b6c-302">3 단계: 사용자가 자신의 집 마을, 홈페이지 및 서명을 편집할 수 있도록 허용</span><span class="sxs-lookup"><span data-stu-id="f4b6c-302">Step 3: Allowing the User to Edit His Home Town, Homepage, and Signature</span></span>

<span data-ttu-id="f4b6c-303">이 시점에서 현재 로그인 한 사용자는 홈 타운, 홈페이지 및 서명 설정을 볼 수 있지만 수정할 수는 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-303">At this point the currently logged in user can view their home town, homepage, and signature setting, but they cannot yet modify them.</span></span> <span data-ttu-id="f4b6c-304">데이터를 편집할 수 있도록 DetailsView 컨트롤을 업데이트 해 보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-304">Let's update the DetailsView control so that the data can be edited.</span></span>

<span data-ttu-id="f4b6c-305">가장 먼저 해야 할 일은 SqlDataSource에 대 한 `UpdateCommand`를 추가 하 고 실행할 `UPDATE` 문과 해당 매개 변수를 지정 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-305">The first thing we need to do is add an `UpdateCommand` for the SqlDataSource, specifying the `UPDATE` statement to execute and its corresponding parameters.</span></span> <span data-ttu-id="f4b6c-306">SqlDataSource를 선택 하 고 속성 창에서 UpdateQuery 속성 옆의 줄임표를 클릭 하 여 명령 및 매개 변수 편집기 대화 상자를 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-306">Select the SqlDataSource and, from the Properties window, click on the ellipses next to the UpdateQuery property to bring up the Command and Parameter Editor dialog box.</span></span> <span data-ttu-id="f4b6c-307">텍스트 상자에 다음 `UPDATE` 문을 입력 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-307">Enter the following `UPDATE` statement into the textbox:</span></span>

[!code-sql[Main](storing-additional-user-information-cs/samples/sample3.sql)]

<span data-ttu-id="f4b6c-308">그런 다음 "매개 변수 새로 고침" 단추를 클릭 합니다 .이 단추를 클릭 하면 `UPDATE` 문의 각 매개 변수에 대해 SqlDataSource 컨트롤의 `UpdateParameters` 컬렉션에서 매개 변수를 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-308">Next, click the "Refresh Parameters" button, which will create a parameter in the SqlDataSource control's `UpdateParameters` collection for each of the parameters in the `UPDATE` statement.</span></span> <span data-ttu-id="f4b6c-309">모든 매개 변수의 소스를 None으로 설정 하 고 확인 단추를 클릭 하 여 대화 상자를 완료 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-309">Leave the source for all of the parameters set to None and click the OK button to complete the dialog box.</span></span>

<span data-ttu-id="f4b6c-310">[SqlDataSource의 UpdateCommand 및 UpdateParameters 지정 ![](storing-additional-user-information-cs/_static/image41.png)](storing-additional-user-information-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-310">[![Specify the SqlDataSource's UpdateCommand and UpdateParameters](storing-additional-user-information-cs/_static/image41.png)](storing-additional-user-information-cs/_static/image40.png)</span></span>

<span data-ttu-id="f4b6c-311">**그림 14**: SqlDataSource의 `UpdateCommand` 및 `UpdateParameters` 지정 ([전체 크기 이미지를 보려면 클릭](storing-additional-user-information-cs/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="f4b6c-311">**Figure 14**: Specify the SqlDataSource's `UpdateCommand` and `UpdateParameters` ([Click to view full-size image](storing-additional-user-information-cs/_static/image42.png))</span></span>

<span data-ttu-id="f4b6c-312">SqlDataSource 컨트롤에 대 한 추가 작업으로 인해 DetailsView 컨트롤에서 편집을 지원할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-312">Due to the additions we made to the SqlDataSource control, the DetailsView control can now support editing.</span></span> <span data-ttu-id="f4b6c-313">DetailsView의 스마트 태그에서 "편집 사용" 확인란을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-313">From the DetailsView's Smart Tag, check the "Enable Editing" checkbox.</span></span> <span data-ttu-id="f4b6c-314">이렇게 하면 `ShowEditButton` 속성이 True로 설정 된 컨트롤의 `Fields` 컬렉션에 CommandField가 추가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-314">This adds a CommandField to the control's `Fields` collection with its `ShowEditButton` property set to True.</span></span> <span data-ttu-id="f4b6c-315">이렇게 하면 DetailsView이 읽기 전용 모드에서 표시 되 고 편집 모드로 표시 될 때 업데이트 및 취소 단추가 표시 될 때 편집 단추가 렌더링 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-315">This renders an Edit button when the DetailsView is displayed in read-only mode and Update and Cancel buttons when displayed in edit mode.</span></span> <span data-ttu-id="f4b6c-316">그러나 사용자가 편집을 클릭 하도록 요구 하는 대신 DetailsView 컨트롤의 [`DefaultMode` 속성](https://msdn.microsoft.com/library/system.web.ui.webcontrols.detailsview.defaultmode.aspx) 을 `Edit`로 설정 하 여 detailsview 렌더링을 "항상 편집 가능" 상태로 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-316">Rather than requiring the user to click Edit, though, we can have the DetailsView render in an "always editable" state by setting the DetailsView control's [`DefaultMode` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.detailsview.defaultmode.aspx) to `Edit`.</span></span>

<span data-ttu-id="f4b6c-317">이러한 변경 내용으로 DetailsView 컨트롤의 선언 태그는 다음과 유사 하 게 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-317">With these changes, your DetailsView control's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](storing-additional-user-information-cs/samples/sample4.aspx)]

<span data-ttu-id="f4b6c-318">CommandField 및 `DefaultMode` 속성이 추가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-318">Note the addition of the CommandField and the `DefaultMode` property.</span></span>

<span data-ttu-id="f4b6c-319">계속 해 서 브라우저를 통해이 페이지를 테스트 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-319">Go ahead and test this page through a browser.</span></span> <span data-ttu-id="f4b6c-320">`UserProfiles`에 해당 하는 레코드가 있는 사용자로 방문할 때 사용자의 설정이 편집 가능한 인터페이스로 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-320">When visiting with a user that has a corresponding record in `UserProfiles`, the user's settings are displayed in an editable interface.</span></span>

<span data-ttu-id="f4b6c-321">[![DetailsView은 편집 가능한 인터페이스를 렌더링 합니다.](storing-additional-user-information-cs/_static/image44.png)](storing-additional-user-information-cs/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-321">[![The DetailsView Renders an Editable Interface](storing-additional-user-information-cs/_static/image44.png)](storing-additional-user-information-cs/_static/image43.png)</span></span>

<span data-ttu-id="f4b6c-322">**그림 15**: DetailsView은 편집 가능한 인터페이스를 렌더링 합니다 ([전체 크기 이미지를 보려면 클릭](storing-additional-user-information-cs/_static/image45.png)).</span><span class="sxs-lookup"><span data-stu-id="f4b6c-322">**Figure 15**: The DetailsView Renders an Editable Interface  ([Click to view full-size image](storing-additional-user-information-cs/_static/image45.png))</span></span>

<span data-ttu-id="f4b6c-323">값을 변경 하 고 업데이트 단추를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-323">Try changing the values and clicking the Update button.</span></span> <span data-ttu-id="f4b6c-324">아무 작업도 수행 되지 않는 것으로 나타납니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-324">It appears as if nothing happens.</span></span> <span data-ttu-id="f4b6c-325">포스트백이 발생 하 고 값이 데이터베이스에 저장 되지만 저장이 발생 한 시각적 피드백이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-325">There is a postback and the values are saved to the database, but there's no visual feedback that the save occurred.</span></span>

<span data-ttu-id="f4b6c-326">이를 해결 하려면 Visual Studio로 돌아가서 DetailsView 위에 레이블 컨트롤을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-326">To remedy this, return to Visual Studio and add a Label control above the DetailsView.</span></span> <span data-ttu-id="f4b6c-327">해당 `ID` `SettingsUpdatedMessage`, `Text` 속성을 "사용자 설정이 업데이트 되었습니다."로 설정 하 고 `Visible` 및 `EnableViewState` 속성을 `false`로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-327">Set its `ID` to `SettingsUpdatedMessage`, its `Text` property to "Your settings have been updated," and its `Visible` and `EnableViewState` properties to `false`.</span></span>

[!code-aspx[Main](storing-additional-user-information-cs/samples/sample5.aspx)]

<span data-ttu-id="f4b6c-328">DetailsView이 업데이트 될 때마다 `SettingsUpdatedMessage` 레이블을 표시 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-328">We need to display the `SettingsUpdatedMessage` Label whenever the DetailsView is updated.</span></span> <span data-ttu-id="f4b6c-329">이 작업을 수행 하려면 DetailsView의 `ItemUpdated` 이벤트에 대 한 이벤트 처리기를 만들고 다음 코드를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-329">To accomplish this, create an event handler for the DetailsView's `ItemUpdated` event and add the following code:</span></span>

[!code-csharp[Main](storing-additional-user-information-cs/samples/sample6.cs)]

<span data-ttu-id="f4b6c-330">브라우저를 통해 `AdditionalUserInfo.aspx` 페이지로 돌아가 데이터를 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-330">Return to the `AdditionalUserInfo.aspx` page through a browser and update the data.</span></span> <span data-ttu-id="f4b6c-331">이번에는 유용한 상태 메시지가 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-331">This time, a helpful status message is displayed.</span></span>

<span data-ttu-id="f4b6c-332">[설정이 업데이트 되 면 짧은 메시지가 표시 ![](storing-additional-user-information-cs/_static/image47.png)](storing-additional-user-information-cs/_static/image46.png)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-332">[![A Short Message is Displayed When the Settings are Updated](storing-additional-user-information-cs/_static/image47.png)](storing-additional-user-information-cs/_static/image46.png)</span></span>

<span data-ttu-id="f4b6c-333">**그림 16**: 설정이 업데이트 되 면 짧은 메시지가 표시 됩니다 ([전체 크기 이미지를 보려면 클릭](storing-additional-user-information-cs/_static/image48.png)).</span><span class="sxs-lookup"><span data-stu-id="f4b6c-333">**Figure 16**: A Short Message is Displayed When the Settings are Updated  ([Click to view full-size image](storing-additional-user-information-cs/_static/image48.png))</span></span>

> [!NOTE]
> <span data-ttu-id="f4b6c-334">DetailsView 컨트롤의 편집 인터페이스는 원하는 것으로 유지 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-334">The DetailsView control's editing interface leaves a lot to be desired.</span></span> <span data-ttu-id="f4b6c-335">표준 크기의 텍스트 상자를 사용 하지만 서명 필드는 여러 줄 텍스트 상자 일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-335">It uses standard-sized textboxes, but the Signature field should probably be a multi-line textbox.</span></span> <span data-ttu-id="f4b6c-336">RegularExpressionValidator는 홈페이지 URL (입력 한 경우)이 "http://" 또는 "https://"로 시작 하는지 확인 하는 데 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-336">A RegularExpressionValidator should be used to ensure that the homepage URL, if entered, starts with "http://" or "https://".</span></span> <span data-ttu-id="f4b6c-337">또한 DetailsView 컨트롤의 `DefaultMode` 속성이 `Edit`로 설정 되어 있기 때문에 취소 단추는 아무것도 수행 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-337">Moreover, since the DetailsView control has its `DefaultMode` property set to `Edit`, the Cancel button does not do anything.</span></span> <span data-ttu-id="f4b6c-338">제거 하거나 클릭 하면 사용자를 다른 페이지 (예: `~/Default.aspx`)로 리디렉션할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-338">It should either be removed or, when clicked, redirect the user to some other page (such as `~/Default.aspx`).</span></span> <span data-ttu-id="f4b6c-339">이러한 향상 된 기능을 독자를 위한 연습으로 그대로 둡니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-339">I leave these enhancements as an exercise for the reader.</span></span>

### <a name="adding-a-link-to-theadditionaluserinfoaspxpage-in-the-master-page"></a><span data-ttu-id="f4b6c-340">마스터 페이지의`AdditionalUserInfo.aspx`페이지에 대 한 링크 추가</span><span class="sxs-lookup"><span data-stu-id="f4b6c-340">Adding a Link to the`AdditionalUserInfo.aspx`Page in the Master Page</span></span>

<span data-ttu-id="f4b6c-341">현재 웹 사이트는 `AdditionalUserInfo.aspx` 페이지에 대 한 링크를 제공 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-341">Currently, the website does not provide any links to the `AdditionalUserInfo.aspx` page.</span></span> <span data-ttu-id="f4b6c-342">이에 도달 하려면 페이지의 URL을 브라우저의 주소 표시줄에 직접 입력 하면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-342">The only way to reach it is to enter the page's URL directly into the browser's Address bar.</span></span> <span data-ttu-id="f4b6c-343">`Site.master` 마스터 페이지에서이 페이지에 대 한 링크를 추가 해 보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-343">Let's add a link to this page in the `Site.master` master page.</span></span>

<span data-ttu-id="f4b6c-344">마스터 페이지에는 인증 된 방문자와 익명 방문자에 대해 서로 다른 태그를 표시 하는 `LoginContent` ContentPlaceHolder에 LoginView 웹 컨트롤이 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-344">Recall that the master page contains a LoginView Web control in its `LoginContent` ContentPlaceHolder that displays different markup for authenticated and anonymous visitors.</span></span> <span data-ttu-id="f4b6c-345">`AdditionalUserInfo.aspx` 페이지에 대 한 링크를 포함 하도록 LoginView 컨트롤의 `LoggedInTemplate`를 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-345">Update the LoginView control's `LoggedInTemplate` to include a link to the `AdditionalUserInfo.aspx` page.</span></span> <span data-ttu-id="f4b6c-346">이러한 변경을 수행한 후에는 LoginView 컨트롤의 선언적 태그가 다음과 같이 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-346">After making these changes the LoginView control's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](storing-additional-user-information-cs/samples/sample7.aspx)]

<span data-ttu-id="f4b6c-347">`LoggedInTemplate`에 `lnkUpdateSettings` HyperLink 컨트롤이 추가 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-347">Note the addition of the `lnkUpdateSettings` HyperLink control to the `LoggedInTemplate`.</span></span> <span data-ttu-id="f4b6c-348">이 링크를 통해 인증 된 사용자는 빠르게 페이지로 이동 하 여 홈 마을, 홈페이지 및 서명 설정을 확인 하 고 수정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-348">With this link in place, authenticated users can quickly jump to the page to view and modify their home town, homepage, and signature settings.</span></span>

## <a name="step-4-adding-new-guestbook-comments"></a><span data-ttu-id="f4b6c-349">4 단계: 새 방명록 메모 추가</span><span class="sxs-lookup"><span data-stu-id="f4b6c-349">Step 4: Adding New Guestbook Comments</span></span>

<span data-ttu-id="f4b6c-350">`Guestbook.aspx` 페이지에서는 인증 된 사용자가 방명록을 보고 메모를 남길 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-350">The `Guestbook.aspx` page is where authenticated users can view the guestbook and leave a comment.</span></span> <span data-ttu-id="f4b6c-351">새 방명록 주석을 추가 하는 인터페이스를 만드는 것부터 시작 해 보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-351">Let's start with creating the interface to add new guestbook comments.</span></span>

<span data-ttu-id="f4b6c-352">Visual Studio에서 `Guestbook.aspx` 페이지를 열고 두 개의 TextBox 컨트롤로 구성 된 사용자 인터페이스 (새 주석의 제목 및 본문에 대 한 하나)를 생성 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-352">Open the `Guestbook.aspx` page in Visual Studio and construct a user interface consisting of two TextBox controls, one for the new comment's subject and one for its body.</span></span> <span data-ttu-id="f4b6c-353">첫 번째 TextBox 컨트롤의 `ID` 속성을 `Subject`로 설정 하 고 `Columns` 속성을 40으로 설정 합니다. 두 번째 `ID` `Body`, `TextMode` `MultiLine`및 `Width` 속성을 각각 "95%" 및 8로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-353">Set the first TextBox control's `ID` property to `Subject` and its `Columns` property to 40; set second's `ID` to `Body`, its `TextMode` to `MultiLine`, and its `Width` and `Rows` properties to "95%" and 8, respectively.</span></span> <span data-ttu-id="f4b6c-354">사용자 인터페이스를 완료 하려면 `PostCommentButton` 이라는 단추 웹 컨트롤을 추가 하 고 `Text` 속성을 "주석 게시"로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-354">To complete the user interface, add a Button Web control named `PostCommentButton` and set its `Text` property to "Post Your Comment".</span></span>

<span data-ttu-id="f4b6c-355">각 방명록 주석에는 제목과 본문이 필요 하므로 각 텍스트 상자에 대해 RequiredFieldValidator를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-355">Since each guestbook comment requires a subject and body, add a RequiredFieldValidator for each of the TextBoxes.</span></span> <span data-ttu-id="f4b6c-356">이러한 컨트롤의 `ValidationGroup` 속성을 "추가 주석"으로 설정 합니다. 마찬가지로 `PostCommentButton` 컨트롤의 `ValidationGroup` 속성을 "추가 주석"으로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-356">Set the `ValidationGroup` property of these controls to "EnterComment"; likewise, set the `PostCommentButton` control's `ValidationGroup` property to "EnterComment".</span></span> <span data-ttu-id="f4b6c-357">ASP에 대 한 자세한 내용 NET의 유효성 검사 컨트롤, [ASP.NET의 폼 유효성](http://www.4guysfromrolla.com/webtech/090200-1.shtml)검사, [ASP.NET 2.0의 유효성 검사 컨트롤 개로 나누어서](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx), [W3Schools](http://www.w3schools.com/)의 [유효성 검사 서버 컨트롤 자습서](http://www.w3schools.com/aspnet/aspnet_refvalidationcontrols.asp) 를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-357">For more information on ASP.NET's validation controls, check out [Form Validation in ASP.NET](http://www.4guysfromrolla.com/webtech/090200-1.shtml), [Dissecting the Validation Controls in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx), and the [Validation Server Controls Tutorial](http://www.w3schools.com/aspnet/aspnet_refvalidationcontrols.asp) on [W3Schools](http://www.w3schools.com/).</span></span>

<span data-ttu-id="f4b6c-358">사용자 인터페이스를 만든 후 페이지의 선언 태그는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-358">After crafting the user interface your page's declarative markup should look something like the following:</span></span>

[!code-aspx[Main](storing-additional-user-information-cs/samples/sample8.aspx)]

<span data-ttu-id="f4b6c-359">사용자 인터페이스가 완료 되 면 다음 태스크는 `PostCommentButton` 클릭 될 때 `GuestbookComments` 테이블에 새 레코드를 삽입 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-359">With the user interface complete, our next task is to insert a new record into the `GuestbookComments` table when the `PostCommentButton` is clicked.</span></span> <span data-ttu-id="f4b6c-360">이 작업은 다양 한 방법으로 수행할 수 있습니다. 단추의 `Click` 이벤트 처리기에 ADO.NET 코드를 작성할 수 있습니다. SqlDataSource 컨트롤을 페이지에 추가 하 고 `InsertCommand`구성한 다음 `Click` 이벤트 처리기에서 `Insert` 메서드를 호출할 수 있습니다. 또는 새 방명록 주석을 삽입 하 고 `Click` 이벤트 처리기에서이 기능을 호출 하는 중간 계층을 빌드할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-360">This can be accomplished in a number of ways: we can write ADO.NET code in the Button's `Click` event handler; we can add a SqlDataSource control to the page, configure its `InsertCommand`, and then call its `Insert` method from the `Click` event handler; or we could build a middle tier that was responsible for inserting new guestbook comments, and invoke this functionality from the `Click` event handler.</span></span> <span data-ttu-id="f4b6c-361">3 단계에서 SqlDataSource를 사용 하는 방법을 살펴보았으므로 여기에서 ADO.NET 코드를 사용 하겠습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-361">Since we looked at using a SqlDataSource in Step 3, let's use ADO.NET code here.</span></span>

> [!NOTE]
> <span data-ttu-id="f4b6c-362">Microsoft SQL Server 데이터베이스에서 프로그래밍 방식으로 데이터에 액세스 하는 데 사용 되는 ADO.NET 클래스는 `System.Data.SqlClient` 네임 스페이스에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-362">The ADO.NET classes used to programmatically access data from a Microsoft SQL Server database are located in the `System.Data.SqlClient` namespace.</span></span> <span data-ttu-id="f4b6c-363">이 네임 스페이스를 페이지의 코드 숨김이 아닌 클래스 (예: `using System.Data.SqlClient;`)로 가져와야 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-363">You may need to import this namespace into your page's code-behind class (i.e., `using System.Data.SqlClient;`).</span></span>

<span data-ttu-id="f4b6c-364">`PostCommentButton`의 `Click` 이벤트에 대 한 이벤트 처리기를 만들고 다음 코드를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-364">Create an event handler for the `PostCommentButton`'s `Click` event and add the following code:</span></span>

[!code-csharp[Main](storing-additional-user-information-cs/samples/sample9.cs)]

<span data-ttu-id="f4b6c-365">`Click` 이벤트 처리기는 사용자가 제공한 데이터가 유효한 지 확인 하 여 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-365">The `Click` event handler starts by checking that the user-supplied data is valid.</span></span> <span data-ttu-id="f4b6c-366">그렇지 않으면 이벤트 처리기는 레코드를 삽입 하기 전에 종료 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-366">If it is not, the event handler exits before inserting a record.</span></span> <span data-ttu-id="f4b6c-367">제공 된 데이터가 유효한 것으로 가정 하면 현재 로그온 한 사용자의 `UserId` 값을 검색 하 여 `currentUserId` 지역 변수에 저장 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-367">Assuming the supplied data is valid, the currently logged on user's `UserId` value is retrieved and stored in the `currentUserId` local variable.</span></span> <span data-ttu-id="f4b6c-368">`GuestbookComments`에 레코드를 삽입할 때 `UserId` 값을 제공 해야 하기 때문에이 값이 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-368">This value is needed because we must supply a `UserId` value when inserting a record into `GuestbookComments`.</span></span>

<span data-ttu-id="f4b6c-369">그런 다음 `SecurityTutorials` 데이터베이스에 대 한 연결 문자열을 `Web.config`에서 검색 하 고 `INSERT` SQL 문을 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-369">Following that, the connection string for the `SecurityTutorials` database is retrieved from `Web.config` and the `INSERT` SQL statement is specified.</span></span> <span data-ttu-id="f4b6c-370">그런 다음 `SqlConnection` 개체를 만들어 엽니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-370">A `SqlConnection` object is then created and opened.</span></span> <span data-ttu-id="f4b6c-371">다음으로 `SqlCommand` 개체가 생성 되 고 `INSERT` 쿼리에 사용 되는 매개 변수의 값이 할당 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-371">Next, a `SqlCommand` object is constructed and the values for the parameters used in the `INSERT` query are assigned.</span></span> <span data-ttu-id="f4b6c-372">그런 다음 `INSERT` 문이 실행 되 고 연결이 닫혔습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-372">The `INSERT` statement is then executed and the connection closed.</span></span> <span data-ttu-id="f4b6c-373">이벤트 처리기의 끝에서 사용자의 값이 다시 게시를 통해 유지 되지 않도록 `Subject` 및 `Body` 텍스트 상자 `Text` 속성이 지워집니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-373">At the end of the event handler, the `Subject` and `Body` TextBoxes' `Text` properties are cleared out so that the user's values are not persisted across the postback.</span></span>

<span data-ttu-id="f4b6c-374">계속 해 서 브라우저에서이 페이지를 테스트 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-374">Go ahead and test out this page in a browser.</span></span> <span data-ttu-id="f4b6c-375">이 페이지는 `Membership` 폴더에 있으므로 익명 방문자는 액세스할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-375">Since this page is in the `Membership` folder it is not accessible to anonymous visitors.</span></span> <span data-ttu-id="f4b6c-376">따라서 아직 로그온 하지 않은 경우에는 먼저 로그온 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-376">Therefore, you will need to first log on (if you have not already).</span></span> <span data-ttu-id="f4b6c-377">`Subject` 및 `Body` 텍스트 상자에 값을 입력 하 고 `PostCommentButton` 단추를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-377">Enter a value into the `Subject` and `Body` TextBoxes and click the `PostCommentButton` button.</span></span> <span data-ttu-id="f4b6c-378">이렇게 하면 `GuestbookComments`에 새 레코드가 추가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-378">This will cause a new record to be added to `GuestbookComments`.</span></span> <span data-ttu-id="f4b6c-379">다시 게시 하는 경우 제공한 제목과 본문은 텍스트 상자에서 초기화 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-379">On postback, the subject and body you provided are wiped from the TextBoxes.</span></span>

<span data-ttu-id="f4b6c-380">`PostCommentButton` 단추를 클릭 한 후에는 설명이 방명록에 추가 되었다는 시각적 피드백이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-380">After clicking the `PostCommentButton` button there is no visual feedback that the comment was added to the guestbook.</span></span> <span data-ttu-id="f4b6c-381">5 단계에서 수행 하는 기존 방명록 주석을 표시 하려면이 페이지를 업데이트 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-381">We still need to update this page to display the existing guestbook comments, which we will do in Step 5.</span></span> <span data-ttu-id="f4b6c-382">이를 완료 한 후에는 적절 한 시각적 피드백을 제공 하는 주석 목록에 방금 추가 된 주석이 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-382">Once we accomplish that, the just-added comment will appear in the list of comments, providing adequate visual feedback.</span></span> <span data-ttu-id="f4b6c-383">지금은 `GuestbookComments` 테이블의 내용을 검사 하 여 방명록 주석이 저장 되었는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-383">For now, confirm that your guestbook comment was saved by examining the contents of the `GuestbookComments` table.</span></span>

<span data-ttu-id="f4b6c-384">그림 17에서는 두 개의 주석이 남아 있는 후 `GuestbookComments` 테이블의 내용을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-384">Figure 17 shows the contents of the `GuestbookComments` table after two comments have been left.</span></span>

<span data-ttu-id="f4b6c-385">[![GuestbookComments 테이블에서 방명록 주석을 볼 수 있습니다.](storing-additional-user-information-cs/_static/image50.png)](storing-additional-user-information-cs/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-385">[![You Can See the Guestbook Comments in the GuestbookComments Table](storing-additional-user-information-cs/_static/image50.png)](storing-additional-user-information-cs/_static/image49.png)</span></span>

<span data-ttu-id="f4b6c-386">**그림 17**: `GuestbookComments` 표에서 방명록 주석을 볼 수 있습니다 ([전체 크기 이미지를 보려면 클릭](storing-additional-user-information-cs/_static/image51.png)).</span><span class="sxs-lookup"><span data-stu-id="f4b6c-386">**Figure 17**: You Can See the Guestbook Comments in the `GuestbookComments` Table  ([Click to view full-size image](storing-additional-user-information-cs/_static/image51.png))</span></span>

> [!NOTE]
> <span data-ttu-id="f4b6c-387">사용자가 잠재적으로 위험한 태그 (예: HTML)가 포함 된 방명록 주석을 삽입 하려고 하면 ASP.NET는 `HttpRequestValidationException`을 throw 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-387">If a user attempts to insert a guestbook comment that contains potentially dangerous markup – such as HTML – ASP.NET will throw an `HttpRequestValidationException`.</span></span> <span data-ttu-id="f4b6c-388">이 예외에 대 한 자세한 내용, 예외가 throw 된 이유 및 사용자가 잠재적으로 위험한 값을 제출할 수 있도록 허용 하는 방법에 대 한 자세한 내용은 [요청 유효성 검사 백서](../../../../whitepapers/request-validation.md)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-388">To learn more about this exception, why it's thrown, and how to permit users to submit potentially dangerous values, consult the [Request Validation Whitepaper](../../../../whitepapers/request-validation.md).</span></span>

## <a name="step-5-listing-the-existing-guestbook-comments"></a><span data-ttu-id="f4b6c-389">5 단계: 기존 방명록 설명 나열</span><span class="sxs-lookup"><span data-stu-id="f4b6c-389">Step 5: Listing the Existing Guestbook Comments</span></span>

<span data-ttu-id="f4b6c-390">`Guestbook.aspx` 페이지를 방문 하는 사용자는 의견을 남겨 둘 뿐만 아니라 방명록의 기존 주석도 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-390">In addition to leaving comments, a user visiting the `Guestbook.aspx` page should also be able to view the guestbook's existing comments.</span></span> <span data-ttu-id="f4b6c-391">이를 수행 하려면 `CommentList` 이라는 ListView 컨트롤을 페이지 맨 아래에 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-391">To accomplish this, add a ListView control named `CommentList` to the bottom of the page.</span></span>

> [!NOTE]
> <span data-ttu-id="f4b6c-392">ListView 컨트롤은 ASP.NET 버전 3.5의 새로운 버전입니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-392">The ListView control is new to ASP.NET version 3.5.</span></span> <span data-ttu-id="f4b6c-393">사용자 지정이 가능 하 고 유연한 레이아웃으로 항목의 목록을 표시 하도록 설계 되었지만 GridView와 같이 기본 제공 되는 편집, 삽입, 삭제, 페이징 및 정렬 기능을 계속 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-393">It is designed to display a list of items in a very customizable and flexible layout, yet still offer built-in editing, inserting, deleting, paging, and sorting functionality like the GridView.</span></span> <span data-ttu-id="f4b6c-394">ASP.NET 2.0를 사용 하는 경우 DataList 또는 Repeater 컨트롤을 대신 사용 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-394">If you are using ASP.NET 2.0, you will need to use the DataList or Repeater control instead.</span></span> <span data-ttu-id="f4b6c-395">ListView를 사용 하는 방법에 대 한 자세한 내용은 [Scott Guthrie](https://weblogs.asp.net/scottgu/)의 블로그 항목, [Asp: listview 컨트롤](https://weblogs.asp.net/scottgu/archive/2007/08/10/the-asp-listview-control-part-1-building-a-product-listing-page-with-clean-css-ui.aspx)및 내 문서에서 [listview 컨트롤을 사용 하 여 데이터 표시](http://aspnet.4guysfromrolla.com/articles/122607-1.aspx)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-395">For more information on using the ListView, see [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s blog entry, [The asp:ListView Control](https://weblogs.asp.net/scottgu/archive/2007/08/10/the-asp-listview-control-part-1-building-a-product-listing-page-with-clean-css-ui.aspx), and my article, [Displaying Data with the ListView Control](http://aspnet.4guysfromrolla.com/articles/122607-1.aspx).</span></span>

<span data-ttu-id="f4b6c-396">ListView의 스마트 태그를 열고 데이터 소스 선택 드롭다운 목록에서 컨트롤을 새 데이터 소스에 바인딩합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-396">Open the ListView's Smart Tag and, from the Choose Data Source drop-down list, bind the control to a new data source.</span></span> <span data-ttu-id="f4b6c-397">2 단계에서 살펴본 것 처럼이 경우 데이터 소스 구성 마법사가 시작 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-397">As we saw in Step 2, this will launch the Data Source Configuration Wizard.</span></span> <span data-ttu-id="f4b6c-398">데이터베이스 아이콘을 선택 하 고, 생성 된 SqlDataSource `CommentsDataSource`의 이름을로, 확인을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-398">Select the Database icon, name the resulting SqlDataSource `CommentsDataSource`, and click OK.</span></span> <span data-ttu-id="f4b6c-399">그런 다음 드롭다운 목록에서 `SecurityTutorialsConnectionString` 연결 문자열을 선택 하 고 다음을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-399">Next, select the `SecurityTutorialsConnectionString` connection string from the drop-down list and click Next.</span></span>

<span data-ttu-id="f4b6c-400">2 단계에서이 시점에는 드롭다운 목록에서 `UserProfiles` 테이블을 선택 하 고 반환할 열을 선택 하 여 쿼리할 데이터를 지정 했습니다 (그림 9 참조).</span><span class="sxs-lookup"><span data-stu-id="f4b6c-400">At this point in Step 2 we specified the data to query by picking the `UserProfiles` table from the drop-down list and selecting the columns to return (refer back to Figure 9).</span></span> <span data-ttu-id="f4b6c-401">그러나 이번에는 `GuestbookComments`의 레코드 뿐만 아니라 commenter의 주택 마을, 홈페이지, 서명 및 사용자 이름과 같은 레코드를 복원 하는 SQL 문을 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-401">This time, however, we want to craft a SQL statement that pulls back not only the records from `GuestbookComments`, but also the commenter's home town, homepage, signature, and username.</span></span> <span data-ttu-id="f4b6c-402">따라서 "사용자 지정 SQL 문 또는 저장 프로시저 지정" 라디오 단추를 선택 하 고 다음을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-402">Therefore, select the "Specify a custom SQL statement or stored procedure" radio button and click Next.</span></span>

<span data-ttu-id="f4b6c-403">그러면 "사용자 지정 문 또는 저장 프로시저 정의" 화면이 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-403">This will bring up the "Define Custom Statements or Stored Procedures" screen.</span></span> <span data-ttu-id="f4b6c-404">쿼리 작성기 단추를 클릭 하 여 쿼리를 그래픽으로 작성 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-404">Click the Query Builder button to graphically build the query.</span></span> <span data-ttu-id="f4b6c-405">쿼리 하려는 테이블을 지정 하 라는 메시지를 표시 하 여 쿼리 작성기를 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-405">The Query Builder starts by prompting us to specify the tables we want to query from.</span></span> <span data-ttu-id="f4b6c-406">`GuestbookComments`, `UserProfiles`및 `aspnet_Users` 테이블을 선택 하 고 확인을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-406">Select the `GuestbookComments`, `UserProfiles`, and `aspnet_Users` tables and click OK.</span></span> <span data-ttu-id="f4b6c-407">이렇게 하면 세 개의 테이블이 모두 디자인 화면에 추가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-407">This will add all three tables to the design surface.</span></span> <span data-ttu-id="f4b6c-408">`GuestbookComments`, `UserProfiles`및 `aspnet_Users` 테이블 사이에 foreign key 제약 조건이 있으므로 쿼리 작성기는 이러한 테이블을 자동으로 `JOIN` 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-408">Since there are foreign key constraints amongst the `GuestbookComments`, `UserProfiles`, and `aspnet_Users` tables, the Query Builder automatically `JOIN` s these tables.</span></span>

<span data-ttu-id="f4b6c-409">계속 해 서 반환할 열을 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-409">All that remains is to specify the columns to return.</span></span> <span data-ttu-id="f4b6c-410">`GuestbookComments` 테이블에서 `Subject`, `Body`및 `CommentDate` 열을 선택 합니다. `UserProfiles` 테이블에서 `HomeTown`, `HomepageUrl`및 `Signature` 열을 반환 합니다. `aspnet_Users`에서 `UserName`을 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-410">From the `GuestbookComments` table select the `Subject`, `Body`, and `CommentDate` columns; return the `HomeTown`, `HomepageUrl`, and `Signature` columns from the `UserProfiles` table; and return `UserName` from `aspnet_Users`.</span></span> <span data-ttu-id="f4b6c-411">또한 가장 최근의 게시물이 먼저 반환 되도록 `SELECT` 쿼리의 끝에 "`ORDER BY CommentDate DESC`"를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-411">Also, add "`ORDER BY CommentDate DESC`" to the end of the `SELECT` query so that the most recent posts are returned first.</span></span> <span data-ttu-id="f4b6c-412">이러한 항목을 선택 하면 쿼리 작성기 인터페이스가 그림 18의 스크린샷 처럼 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-412">After making these selections, your Query Builder interface should look similar to the screen shot in Figure 18.</span></span>

<span data-ttu-id="f4b6c-413">[![생성 된 쿼리가 GuestbookComments, UserProfiles 및 aspnet_Users 테이블에 조인 합니다.](storing-additional-user-information-cs/_static/image53.png)](storing-additional-user-information-cs/_static/image52.png)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-413">[![The Constructed Query JOINs the GuestbookComments, UserProfiles, and aspnet_Users Tables](storing-additional-user-information-cs/_static/image53.png)](storing-additional-user-information-cs/_static/image52.png)</span></span>

<span data-ttu-id="f4b6c-414">**그림 18**: 생성 된 쿼리 `JOIN` `GuestbookComments`, `UserProfiles`및 `aspnet_Users` 테이블 ([전체 크기 이미지를 보려면 클릭](storing-additional-user-information-cs/_static/image54.png))</span><span class="sxs-lookup"><span data-stu-id="f4b6c-414">**Figure 18**: The Constructed Query `JOIN` s the `GuestbookComments`, `UserProfiles`, and `aspnet_Users` Tables  ([Click to view full-size image](storing-additional-user-information-cs/_static/image54.png))</span></span>

<span data-ttu-id="f4b6c-415">확인을 클릭 하 여 쿼리 작성기 창을 닫고 "사용자 지정 문 또는 저장 프로시저 정의" 화면으로 돌아갑니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-415">Click OK to close the Query Builder window and return to the "Define Custom Statements or Stored Procedures" screen.</span></span> <span data-ttu-id="f4b6c-416">다음을 클릭 하 여 "쿼리 테스트" 화면으로 이동 합니다. 여기서 쿼리 테스트 단추를 클릭 하 여 쿼리 결과를 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-416">Click Next to advance to the "Test Query" screen, where you may view the query results by clicking the Test Query button.</span></span> <span data-ttu-id="f4b6c-417">준비가 되 면 마침을 클릭 하 여 데이터 원본 구성 마법사를 완료 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-417">When you're ready, click Finish to complete the Configure Data Source wizard.</span></span>

<span data-ttu-id="f4b6c-418">2 단계에서 데이터 원본 구성 마법사를 완료 하면 `SelectCommand`에서 반환 된 각 열에 대해 BoundField를 포함 하도록 연결 된 DetailsView 컨트롤의 `Fields` 컬렉션이 업데이트 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-418">When we completed the Configure Data Source wizard in Step 2, the associated DetailsView control's `Fields` collection was updated to include a BoundField for each column returned by the `SelectCommand`.</span></span> <span data-ttu-id="f4b6c-419">그러나 ListView는 변경 되지 않은 상태로 유지 됩니다. 여전히 레이아웃을 정의 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-419">The ListView, however, remains unchanged; we still need to define its layout.</span></span> <span data-ttu-id="f4b6c-420">ListView의 레이아웃은 선언적 태그 또는 해당 스마트 태그의 "ListView 구성" 옵션을 통해 수동으로 생성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-420">The ListView's layout can be constructed manually through its declarative markup or from the "Configure ListView" option in its Smart Tag.</span></span> <span data-ttu-id="f4b6c-421">일반적으로 태그를 직접 정의 하는 것이 좋습니다. 그러나 가장 자연 스러운 메서드를 사용 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-421">I usually prefer defining the markup by hand, but use whatever method is most natural to you.</span></span>

<span data-ttu-id="f4b6c-422">내 ListView 컨트롤에 대해 다음 `LayoutTemplate`, `ItemTemplate`및 `ItemSeparatorTemplate`를 사용 하 여 종료 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-422">I ended up using the following `LayoutTemplate`, `ItemTemplate`, and `ItemSeparatorTemplate` for my ListView control:</span></span>

[!code-aspx[Main](storing-additional-user-information-cs/samples/sample10.aspx)]

<span data-ttu-id="f4b6c-423">`LayoutTemplate`는 컨트롤이 내보내는 태그를 정의 하는 반면 `ItemTemplate`는 SqlDataSource에서 반환 된 각 항목을 렌더링 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-423">The `LayoutTemplate` defines the markup emitted by the control, while the `ItemTemplate` renders each item returned by the SqlDataSource.</span></span> <span data-ttu-id="f4b6c-424">`ItemTemplate`의 결과 태그는 `LayoutTemplate`의 `itemPlaceholder` 컨트롤에 배치 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-424">The `ItemTemplate`'s resulting markup is placed in the `LayoutTemplate`'s `itemPlaceholder` control.</span></span> <span data-ttu-id="f4b6c-425">`itemPlaceholder`외에도 `LayoutTemplate`에는 DataPager 컨트롤이 포함 되어 있습니다 .이 컨트롤은 ListView에서 페이지당 10 개의 방명록 주석 (기본값)만 표시 하도록 제한 하 고 페이징 인터페이스를 렌더링 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-425">In addition to the `itemPlaceholder`, the `LayoutTemplate` includes a DataPager control, which limits the ListView to showing just 10 guestbook comments per page (the default) and renders a paging interface.</span></span>

<span data-ttu-id="f4b6c-426">내 `ItemTemplate`는 각 방명록 주석의 제목을 제목 아래에 있는 `<h4>` 요소에 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-426">My `ItemTemplate` displays each guestbook comment's subject in an `<h4>` element with the body situated below the subject.</span></span> <span data-ttu-id="f4b6c-427">본문을 표시 하는 데 사용 되는 구문은 `Eval("Body")` databinding 문에 의해 반환 된 데이터를 가져와 문자열로 변환 하 고 줄 바꿈을 `<br />` 요소로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-427">Note that syntax used for displaying the body takes the data returned by the `Eval("Body")` databinding statement, converts it to a string, and replaces line breaks with the `<br />` element.</span></span> <span data-ttu-id="f4b6c-428">HTML에서 공백을 무시 하므로 주석을 제출할 때 입력 된 줄 바꿈을 표시 하기 위해이 변환이 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-428">This conversion is needed in order to show the line breaks entered when submitting the comment since whitespace is ignored by HTML.</span></span> <span data-ttu-id="f4b6c-429">사용자의 서명은 기울임꼴로 표시 되 고, 사용자의 홈 타운, 홈 페이지에 대 한 링크, 주석이 작성 된 날짜 및 시간, 주석을 떠난 사람의 사용자 이름 등이 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-429">The user's signature is displayed beneath the body in italics, followed by the user's home town, a link to his homepage, the date and time the comment was made, and the username of the person who left the comment.</span></span>

<span data-ttu-id="f4b6c-430">잠시 시간을 사용 하 여 브라우저를 통해 페이지를 봅니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-430">Take a moment to view the page through a browser.</span></span> <span data-ttu-id="f4b6c-431">여기에 표시 된 5 단계에서 방명록에 추가한 의견이 표시 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-431">You should see the comments that you added to the guestbook in Step 5 displayed here.</span></span>

<span data-ttu-id="f4b6c-432">[이제 방명록 ![방명록의 주석을 표시 합니다.](storing-additional-user-information-cs/_static/image56.png)](storing-additional-user-information-cs/_static/image55.png)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-432">[![Guestbook.aspx Now Displays the Guestbook's Comments](storing-additional-user-information-cs/_static/image56.png)](storing-additional-user-information-cs/_static/image55.png)</span></span>

<span data-ttu-id="f4b6c-433">**그림 19**: 이제 방명록의 주석을 표시 `Guestbook.aspx` ([전체 크기 이미지를 보려면 클릭](storing-additional-user-information-cs/_static/image57.png))</span><span class="sxs-lookup"><span data-stu-id="f4b6c-433">**Figure 19**: `Guestbook.aspx` Now Displays the Guestbook's Comments  ([Click to view full-size image](storing-additional-user-information-cs/_static/image57.png))</span></span>

<span data-ttu-id="f4b6c-434">새 메모를 방명록에 추가 해 보세요.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-434">Try adding a new comment to the guestbook.</span></span> <span data-ttu-id="f4b6c-435">`PostCommentButton` 단추를 클릭 하면 페이지가 다시 게시 되 고 주석이 데이터베이스에 추가 되지만 ListView 컨트롤은 새 주석을 표시 하도록 업데이트 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-435">Upon clicking the `PostCommentButton` button the page posts back and the comment is added to the database, but the ListView control is not updated to show the new comment.</span></span> <span data-ttu-id="f4b6c-436">다음 중 하나를 수행 하 여 해결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-436">This can be fixed by either:</span></span>

- <span data-ttu-id="f4b6c-437">데이터베이스에 새 주석을 삽입 한 후 ListView 컨트롤의 `DataBind()` 메서드를 호출 하도록 `PostCommentButton` 단추의 `Click` 이벤트 처리기 업데이트 또는</span><span class="sxs-lookup"><span data-stu-id="f4b6c-437">Updating the `PostCommentButton` button's `Click` event handler so that it invokes the ListView control's `DataBind()` method after inserting the new comment into the database, or</span></span>
- <span data-ttu-id="f4b6c-438">ListView 컨트롤의 `EnableViewState` 속성을 `false`로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-438">Setting the ListView control's `EnableViewState` property to `false`.</span></span> <span data-ttu-id="f4b6c-439">이 방법은 컨트롤의 뷰 상태를 사용 하지 않도록 설정 하 여 다시 게시할 때마다 기본 데이터에 다시 바인딩해야 하기 때문에 작동 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-439">This approach works because by disabling the control's view state, it must rebind to the underlying data on every postback.</span></span>

<span data-ttu-id="f4b6c-440">이 자습서에서 다운로드할 자습서 웹 사이트에서는 두 가지 방법을 모두 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-440">The tutorial website downloadable from this tutorial illustrates both techniques.</span></span> <span data-ttu-id="f4b6c-441">ListView 컨트롤의 `EnableViewState` 속성은 `false` 하 고 데이터를 ListView에 프로그래밍 방식으로 다시 바인딩하는 데 필요한 코드는 `Click` 이벤트 처리기에 있지만 주석 처리 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-441">The ListView control's `EnableViewState` property to `false` and the code needed to programmatically rebind the data to the ListView is present in the `Click` event handler, but is commented out.</span></span>

> [!NOTE]
> <span data-ttu-id="f4b6c-442">현재 `AdditionalUserInfo.aspx` 페이지를 사용 하 여 사용자는 홈 타운, 홈 페이지 및 서명 설정을 보고 편집할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-442">Currently the `AdditionalUserInfo.aspx` page allows the user to view and edit their home town, homepage, and signature settings.</span></span> <span data-ttu-id="f4b6c-443">로그인 한 사용자의 방명록 주석을 표시 하도록 `AdditionalUserInfo.aspx`를 업데이트 하는 것이 좋을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-443">It might be nice to update `AdditionalUserInfo.aspx` to display the logged in user's guestbook comments.</span></span> <span data-ttu-id="f4b6c-444">즉, 사용자는 자신의 정보를 검토 하 고 수정 하는 것 외에도 `AdditionalUserInfo.aspx` 페이지를 방문 하 여 이전에 만든 방명록 의견을 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-444">That is, in addition to examining and modifying her information, a user can visit the `AdditionalUserInfo.aspx` page to see what guestbook comments she's made in the past.</span></span> <span data-ttu-id="f4b6c-445">관심이 있는 독자를 위한 연습으로 남겨 둡니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-445">I leave this as an exercise for the interested reader.</span></span>

## <a name="step-6-customizing-the-createuserwizard-control-to-include-an-interface-for-the-home-town-homepage-and-signature"></a><span data-ttu-id="f4b6c-446">6 단계: 홈 타운, 홈 페이지 및 서명에 대 한 인터페이스를 포함 하도록 CreateUserWizard 컨트롤 사용자 지정</span><span class="sxs-lookup"><span data-stu-id="f4b6c-446">Step 6: Customizing the CreateUserWizard Control to Include an Interface for the Home Town, Homepage, and Signature</span></span>

<span data-ttu-id="f4b6c-447">`Guestbook.aspx` 페이지에서 사용 하는 `SELECT` 쿼리는 `INNER JOIN`를 사용 하 여 `GuestbookComments`, `UserProfiles`및 `aspnet_Users` 테이블 간에 관련 레코드를 결합 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-447">The `SELECT` query used by the `Guestbook.aspx` page uses an `INNER JOIN` to combine the related records amongst the `GuestbookComments`, `UserProfiles`, and `aspnet_Users` tables.</span></span> <span data-ttu-id="f4b6c-448">`UserProfiles`에서 레코드가 없는 사용자가 방명록 주석을 만들면 `INNER JOIN` `UserProfiles` 및 `aspnet_Users`에 일치 하는 레코드가 있는 경우에만 `GuestbookComments` 레코드만 반환 하기 때문에이 주석은 ListView에 표시 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-448">If a user that has no record in `UserProfiles` makes a guestbook comment, the comment won't be displayed in the ListView because the `INNER JOIN` only returns `GuestbookComments` records when there are matching records in `UserProfiles` and `aspnet_Users`.</span></span> <span data-ttu-id="f4b6c-449">3 단계에서 본 것 처럼 사용자에 게 `UserProfiles` 레코드가 없는 경우 `AdditionalUserInfo.aspx` 페이지에서 해당 설정을 보거나 편집할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-449">And as we saw in Step 3, if a user does not have a record in `UserProfiles` she cannot view or edit her settings in the `AdditionalUserInfo.aspx` page.</span></span>

<span data-ttu-id="f4b6c-450">디자인 결정으로 인해 멤버 자격 시스템의 모든 사용자 계정에는 `UserProfiles` 테이블에 일치 하는 레코드가 있어야 한다는 것이 중요 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-450">Needless to say, due to our design decisions it is important that every user account in the Membership system have a matching record in the `UserProfiles` table.</span></span> <span data-ttu-id="f4b6c-451">CreateUserWizard를 통해 새 멤버 자격 사용자 계정을 만들 때마다 `UserProfiles`에 해당 레코드를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-451">What we want is for a corresponding record to be added to `UserProfiles` whenever a new Membership user account is created through the CreateUserWizard.</span></span>

<span data-ttu-id="f4b6c-452">[*사용자 계정 만들기*](creating-user-accounts-cs.md) 자습서에 설명 된 대로 새 멤버 자격 사용자 계정이 만들어진 후 CreateUserWizard 컨트롤은 해당 [`CreatedUser` 이벤트](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.createduser.aspx)를 발생 시킵니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-452">As discussed in the [*Creating User Accounts*](creating-user-accounts-cs.md) tutorial, after the new Membership user account is created the CreateUserWizard control raises its [`CreatedUser` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.createduser.aspx).</span></span> <span data-ttu-id="f4b6c-453">이 이벤트에 대 한 이벤트 처리기를 만들고 방금 만든 사용자의 UserId를 가져온 다음 `HomeTown`, `HomepageUrl`및 `Signature` 열에 대해 기본값을 사용 하 여 `UserProfiles` 테이블에 레코드를 삽입할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-453">We can create an event handler for this event, get the UserId for the just-created user, and then insert a record into the `UserProfiles` table with default values for the `HomeTown`, `HomepageUrl`, and `Signature` columns.</span></span> <span data-ttu-id="f4b6c-454">또한 추가 텍스트 상자를 포함 하도록 CreateUserWizard 컨트롤의 인터페이스를 사용자 지정 하 여 사용자에 게 이러한 값을 묻는 메시지를 표시할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-454">What's more, it is possible to prompt the user for these values by customizing the CreateUserWizard control's interface to include additional TextBoxes.</span></span>

<span data-ttu-id="f4b6c-455">먼저 기본값을 사용 하 여 `CreatedUser` 이벤트 처리기의 `UserProfiles` 테이블에 새 행을 추가 하는 방법을 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-455">Let's first look at how to add a new row to the `UserProfiles` table in the `CreatedUser` event handler with default values.</span></span> <span data-ttu-id="f4b6c-456">다음으로, 새 사용자의 홈 타운, 홈페이지 및 서명을 수집 하기 위해 추가 양식 필드를 포함 하도록 CreateUserWizard 컨트롤의 사용자 인터페이스를 사용자 지정 하는 방법을 알아봅니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-456">Following that, we will see how to customize the CreateUserWizard control's user interface to include additional form fields to collect the new user's home town, homepage, and signature.</span></span>

### <a name="adding-a-default-row-touserprofiles"></a><span data-ttu-id="f4b6c-457">`UserProfiles`에 기본 행 추가</span><span class="sxs-lookup"><span data-stu-id="f4b6c-457">Adding a Default Row to`UserProfiles`</span></span>

<span data-ttu-id="f4b6c-458">[*사용자 계정 만들기*](creating-user-accounts-cs.md) 자습서에서 `Membership` 폴더의 `CreatingUserAccounts.aspx` 페이지에 CreateUserWizard 컨트롤을 추가 했습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-458">In the [*Creating User Accounts*](creating-user-accounts-cs.md) tutorial we added a CreateUserWizard control to the `CreatingUserAccounts.aspx` page in the `Membership` folder.</span></span> <span data-ttu-id="f4b6c-459">CreateUserWizard 컨트롤에서 사용자 계정을 만들 때 `UserProfiles` 테이블에 레코드를 추가 하도록 하려면 CreateUserWizard 컨트롤의 기능을 업데이트 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-459">In order to have the CreateUserWizard control add a record to `UserProfiles` table upon user account creation, we need to update the CreateUserWizard control's functionality.</span></span> <span data-ttu-id="f4b6c-460">`CreatingUserAccounts.aspx` 페이지를 변경 하는 대신 `EnhancedCreateUserWizard.aspx` 페이지에 새 CreateUserWizard 컨트롤을 추가 하 고이 자습서에 대 한 수정 내용을 적용 해 보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-460">Rather than making these changes to the `CreatingUserAccounts.aspx` page, let's instead add a new CreateUserWizard control to `EnhancedCreateUserWizard.aspx` page and make the modifications for this tutorial there.</span></span>

<span data-ttu-id="f4b6c-461">Visual Studio에서 `EnhancedCreateUserWizard.aspx` 페이지를 열고 도구 상자에서 CreateUserWizard 컨트롤을 페이지로 끌어 옵니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-461">Open the `EnhancedCreateUserWizard.aspx` page in Visual Studio and drag a CreateUserWizard control from the Toolbox onto the page.</span></span> <span data-ttu-id="f4b6c-462">CreateUserWizard 컨트롤의 `ID` 속성을 `NewUserWizard`로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-462">Set the CreateUserWizard control's `ID` property to `NewUserWizard`.</span></span> <span data-ttu-id="f4b6c-463"><a id="_msoanchor_5"> </a> [*사용자 계정 만들기*](creating-user-accounts-cs.md) 자습서에서 설명한 대로 CreateUserWizard의 기본 사용자 인터페이스는 방문자에 게 필요한 정보를 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-463">As we discussed in the <a id="_msoanchor_5"></a>[*Creating User Accounts*](creating-user-accounts-cs.md) tutorial, the CreateUserWizard's default user interface prompts the visitor for the necessary information.</span></span> <span data-ttu-id="f4b6c-464">이 정보가 제공 되 면 컨트롤은 한 줄의 코드를 작성 하지 않고도 멤버 자격 프레임 워크에서 내부적으로 새 사용자 계정을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-464">Once this information has been supplied, the control internally creates a new user account in the Membership framework, all without us having to write a single line of code.</span></span>

<span data-ttu-id="f4b6c-465">CreateUserWizard 컨트롤은 해당 워크플로 중에 많은 이벤트를 발생 시킵니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-465">The CreateUserWizard control raises a number of events during its workflow.</span></span> <span data-ttu-id="f4b6c-466">방문자가 요청 정보를 제공 하 고 양식을 전송 하면 CreateUserWizard 컨트롤은 처음에 [`CreatingUser` 이벤트](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.creatinguser.aspx)를 발생 시킵니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-466">After a visitor supplies the request information and submits the form, the CreateUserWizard control initially fires its [`CreatingUser` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.creatinguser.aspx).</span></span> <span data-ttu-id="f4b6c-467">만들기 프로세스 중에 문제가 발생 하면 [`CreateUserError` 이벤트가](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.createusererror.aspx) 발생 합니다. 그러나 사용자가 성공적으로 만들어지면 [`CreatedUser` 이벤트가](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.createduser.aspx) 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-467">If there is a problem during the create process, the [`CreateUserError` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.createusererror.aspx) is fired; however, if the user is successfully created, then the [`CreatedUser` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.createduser.aspx) is raised.</span></span> <span data-ttu-id="f4b6c-468"><a id="_msoanchor_6"> </a> [*사용자 계정 만들기*](creating-user-accounts-cs.md) 자습서에서는 `CreatingUser` 이벤트에 대 한 이벤트 처리기를 만들어 제공 된 사용자 이름에 선행 또는 후행 공백이 포함 되지 않았는지와 사용자 이름이 암호에 표시 되지 않았는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-468">In the <a id="_msoanchor_6"></a>[*Creating User Accounts*](creating-user-accounts-cs.md) tutorial we created an event handler for the `CreatingUser` event to ensure that the supplied username did not contain any leading or trailing spaces, and that the username did not appear anywhere in the password.</span></span>

<span data-ttu-id="f4b6c-469">방금 만든 사용자에 대 한 `UserProfiles` 테이블에서 행을 추가 하려면 `CreatedUser` 이벤트에 대 한 이벤트 처리기를 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-469">In order to add a row in the `UserProfiles` table for the just-created user, we need to create an event handler for the `CreatedUser` event.</span></span> <span data-ttu-id="f4b6c-470">`CreatedUser` 이벤트가 발생 한 시간에는 멤버 자격 프레임 워크에서 사용자 계정이 이미 만들어져 있으므로 계정의 UserId 값을 검색할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-470">By the time the `CreatedUser` event has fired, the user account has already been created in the Membership framework, enabling us to retrieve the account's UserId value.</span></span>

<span data-ttu-id="f4b6c-471">`NewUserWizard`의 `CreatedUser` 이벤트에 대 한 이벤트 처리기를 만들고 다음 코드를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-471">Create an event handler for the `NewUserWizard`'s `CreatedUser` event and add the following code:</span></span>

[!code-csharp[Main](storing-additional-user-information-cs/samples/sample11.cs)]

<span data-ttu-id="f4b6c-472">위의 코드는 바로 추가 된 사용자 계정의 UserId를 검색 하 여 생물 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-472">The above code beings by retrieving the UserId of the just-added user account.</span></span> <span data-ttu-id="f4b6c-473">이는 `Membership.GetUser(username)` 메서드를 사용 하 여 특정 사용자에 대 한 정보를 반환한 다음 `ProviderUserKey` 속성을 사용 하 여 UserId를 검색 하는 방식으로 수행 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-473">This is accomplished by using the `Membership.GetUser(username)` method to return information about a particular user, and then using the `ProviderUserKey` property to retrieve their UserId.</span></span> <span data-ttu-id="f4b6c-474">CreateUserWizard 컨트롤에 사용자가 입력 한 사용자 이름은 해당 [`UserName` 속성](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.username.aspx)을 통해 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-474">The username entered by the user in the CreateUserWizard control is available via its [`UserName` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.username.aspx).</span></span>

<span data-ttu-id="f4b6c-475">그런 다음 `Web.config`에서 연결 문자열을 검색 하 고 `INSERT` 문을 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-475">Next, the connection string is retrieved from `Web.config` and the `INSERT` statement is specified.</span></span> <span data-ttu-id="f4b6c-476">필요한 ADO.NET 개체가 인스턴스화되어 명령이 실행 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-476">The necessary ADO.NET objects are instantiated and the command executed.</span></span> <span data-ttu-id="f4b6c-477">이 코드는 `@HomeTown`, `@HomepageUrl`및 `@Signature` 매개 변수에 [`DBNull`](https://msdn.microsoft.com/library/system.dbnull.aspx) 인스턴스를 할당 하며,이는 `NULL`, `HomeTown`및 `HomepageUrl`필드에 데이터베이스 `Signature` 값을 삽입할 때 효과가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-477">The code assigns a [`DBNull`](https://msdn.microsoft.com/library/system.dbnull.aspx) instance to the `@HomeTown`, `@HomepageUrl`, and `@Signature` parameters, which has the effect of inserting database `NULL` values for the `HomeTown`, `HomepageUrl`, and `Signature` fields.</span></span>

<span data-ttu-id="f4b6c-478">브라우저를 통해 `EnhancedCreateUserWizard.aspx` 페이지를 방문 하 여 새 사용자 계정을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-478">Visit the `EnhancedCreateUserWizard.aspx` page through a browser and create a new user account.</span></span> <span data-ttu-id="f4b6c-479">이렇게 한 후에는 Visual Studio로 돌아가서 `aspnet_Users`의 내용과 `UserProfiles` 테이블을 검토 합니다 (예: 그림 12에서).</span><span class="sxs-lookup"><span data-stu-id="f4b6c-479">After doing so, return to Visual Studio and examine the contents of the `aspnet_Users` and `UserProfiles` tables (like we did back in Figure 12).</span></span> <span data-ttu-id="f4b6c-480">`aspnet_Users`에 새 사용자 계정이 표시 되 고 해당 `UserProfiles` 행 (`HomeTown`, `HomepageUrl`및 `Signature`에 대 한 `NULL` 값 포함)이 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-480">You should see the new user account in `aspnet_Users` and a corresponding `UserProfiles` row (with `NULL` values for `HomeTown`, `HomepageUrl`, and `Signature`).</span></span>

<span data-ttu-id="f4b6c-481">[새 사용자 계정 및 UserProfiles 레코드가 추가 ![](storing-additional-user-information-cs/_static/image59.png)](storing-additional-user-information-cs/_static/image58.png)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-481">[![A New User Account and UserProfiles Record Have Been Added](storing-additional-user-information-cs/_static/image59.png)](storing-additional-user-information-cs/_static/image58.png)</span></span>

<span data-ttu-id="f4b6c-482">**그림 20**: 새 사용자 계정 및 `UserProfiles` 레코드가 추가 되었습니다 ([전체 크기 이미지를 보려면 클릭](storing-additional-user-information-cs/_static/image60.png)).</span><span class="sxs-lookup"><span data-stu-id="f4b6c-482">**Figure 20**: A New User Account and `UserProfiles` Record Have Been Added  ([Click to view full-size image](storing-additional-user-information-cs/_static/image60.png))</span></span>

<span data-ttu-id="f4b6c-483">방문자가 새 계정 정보를 제공 하 고 "사용자 만들기" 단추를 클릭 하면 사용자 계정이 만들어지고 `UserProfiles` 테이블에 행이 추가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-483">After the visitor has supplied his new account information and clicked the "Create User" button, the user account is created and a row added to the `UserProfiles` table.</span></span> <span data-ttu-id="f4b6c-484">그러면 CreateUserWizard는 성공 메시지와 계속 단추를 표시 하는 `CompleteWizardStep`표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-484">The CreateUserWizard then displays its `CompleteWizardStep`, which displays a success message and a Continue button.</span></span> <span data-ttu-id="f4b6c-485">[계속] 단추를 클릭 하면 포스트백이 발생 하지만 작업이 수행 되지 않고 사용자가 `EnhancedCreateUserWizard.aspx` 페이지에서 중단 된 상태로 유지 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-485">Clicking the Continue button causes a postback, but no action is taken, leaving the user stuck on the `EnhancedCreateUserWizard.aspx` page.</span></span>

<span data-ttu-id="f4b6c-486">CreateUserWizard 컨트롤의 [`ContinueDestinationPageUrl` 속성](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.continuedestinationpageurl.aspx)을 통해 계속 단추를 클릭할 때 사용자를 보낼 URL을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-486">We can specify a URL to send the user to when the Continue button is clicked via the CreateUserWizard control's [`ContinueDestinationPageUrl` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.continuedestinationpageurl.aspx).</span></span> <span data-ttu-id="f4b6c-487">`ContinueDestinationPageUrl` 속성을 "~/Membership/AdditionalUserInfo.aspx"로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-487">Set the `ContinueDestinationPageUrl` property to "~/Membership/AdditionalUserInfo.aspx".</span></span> <span data-ttu-id="f4b6c-488">그러면 새 사용자가 `AdditionalUserInfo.aspx`하 여 설정을 확인 하 고 업데이트할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-488">This takes the new user to `AdditionalUserInfo.aspx`, where they can view and update their settings.</span></span>

### <a name="customizing-the-createuserwizards-interface-to-prompt-for-the-new-users-home-town-homepage-and-signature"></a><span data-ttu-id="f4b6c-489">CreateUserWizard의 인터페이스를 사용자 지정 하 여 새 사용자의 홈 타운, 홈 페이지 및 서명 확인</span><span class="sxs-lookup"><span data-stu-id="f4b6c-489">Customizing the CreateUserWizard's Interface to Prompt for the New User's Home Town, Homepage, and Signature</span></span>

<span data-ttu-id="f4b6c-490">CreateUserWizard 컨트롤의 기본 인터페이스는 사용자 이름, 암호 및 전자 메일과 같은 핵심 사용자 계정 정보만 수집 해야 하는 간단한 계정 생성 시나리오에서 충분 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-490">The CreateUserWizard control's default interface is sufficient for simple account creation scenarios where only core user account information like username, password, and email need be collected.</span></span> <span data-ttu-id="f4b6c-491">하지만 계정을 만드는 동안 방문자에 게 자택 마을, 홈페이지 및 서명을 입력 하 라는 메시지를 표시 하려면 어떻게 해야 하나요?</span><span class="sxs-lookup"><span data-stu-id="f4b6c-491">But what if we wanted to prompt the visitor to enter her home town, homepage, and signature while creating her account?</span></span> <span data-ttu-id="f4b6c-492">등록 시 추가 정보를 수집 하도록 CreateUserWizard 컨트롤의 인터페이스를 사용자 지정할 수 있으며,이 정보는 `CreatedUser` 이벤트 처리기에서 기본 데이터베이스에 추가 레코드를 삽입 하는 데 사용 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-492">It is possible to customize the CreateUserWizard control's interface to collect additional information at signup, and this information may be used in the `CreatedUser` event handler to insert additional records into the underlying database.</span></span>

<span data-ttu-id="f4b6c-493">CreateUserWizard 컨트롤은 페이지 개발자가 일련의 정렬 된 `WizardSteps`를 정의할 수 있도록 하는 컨트롤인 ASP.NET Wizard 컨트롤을 확장 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-493">The CreateUserWizard control extends the ASP.NET Wizard control, which is a control that allows a page developer to define a series of ordered `WizardSteps`.</span></span> <span data-ttu-id="f4b6c-494">마법사 컨트롤은 활성 단계를 렌더링 하 고 방문자가 이러한 단계를 이동할 수 있도록 하는 탐색 인터페이스를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-494">The Wizard control renders the active step and provides a navigation interface that allows the visitor to move through these steps.</span></span> <span data-ttu-id="f4b6c-495">마법사 컨트롤은 긴 작업을 여러 개의 짧은 단계로 분할 하는 데 적합 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-495">The Wizard control is ideal for breaking down a long task into several short steps.</span></span> <span data-ttu-id="f4b6c-496">마법사 컨트롤에 대 한 자세한 내용은 [ASP.NET 2.0 마법사 컨트롤을 사용 하 여 단계별 사용자 인터페이스 만들기](http://aspnet.4guysfromrolla.com/articles/061406-1.aspx)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-496">For more information on the Wizard control, see [Creating a Step-by-Step User Interface with the ASP.NET 2.0 Wizard Control](http://aspnet.4guysfromrolla.com/articles/061406-1.aspx).</span></span>

<span data-ttu-id="f4b6c-497">CreateUserWizard 컨트롤의 기본 태그는 두 개의 `WizardSteps``CreateUserWizardStep` 및 `CompleteWizardStep`를 정의 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-497">The CreateUserWizard control's default markup defines two `WizardSteps`: `CreateUserWizardStep` and `CompleteWizardStep`.</span></span>

[!code-aspx[Main](storing-additional-user-information-cs/samples/sample12.aspx)]

<span data-ttu-id="f4b6c-498">첫 번째 `WizardStep``CreateUserWizardStep`는 사용자 이름, 암호, 전자 메일 등을 요청 하는 인터페이스를 렌더링 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-498">The first `WizardStep`, `CreateUserWizardStep`, renders the interface that prompts for the username, password, email, and so on.</span></span> <span data-ttu-id="f4b6c-499">방문자가이 정보를 제공 하 고 "사용자 만들기"를 클릭 하면 성공 메시지와 계속 단추를 표시 하는 `CompleteWizardStep`표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-499">After the visitor supplies this information and clicks "Create User", she is shown the `CompleteWizardStep`, which shows the success message and a Continue button.</span></span>

<span data-ttu-id="f4b6c-500">추가 양식 필드를 포함 하도록 CreateUserWizard 컨트롤의 인터페이스를 사용자 지정 하려면 다음을 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-500">To customize the CreateUserWizard control's interface to include additional form fields, we can:</span></span>

- <span data-ttu-id="f4b6c-501"><strong>추가 사용자 인터페이스 요소를 포함할 새`WizardStep`s를</strong> <strong>하나 이상 만듭니다</strong> .</span><span class="sxs-lookup"><span data-stu-id="f4b6c-501"><strong>Create one or more new</strong><strong>`WizardStep`</strong><strong>s to contain the additional user interface elements</strong>.</span></span> <span data-ttu-id="f4b6c-502">CreateUserWizard에 새 `WizardStep`를 추가 하려면 스마트 태그에서 "`WizardSteps`추가/제거" 링크를 클릭 하 여 `WizardStep` 컬렉션 편집기를 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-502">To add a new `WizardStep` to the CreateUserWizard, click the "Add/Remove `WizardSteps`" link from its Smart Tag to launch the `WizardStep` Collection Editor.</span></span> <span data-ttu-id="f4b6c-503">여기에서 마법사의 단계를 추가, 제거 또는 다시 정렬할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-503">From there you can add, remove, or reorder the steps in the wizard.</span></span> <span data-ttu-id="f4b6c-504">이는이 자습서에서 사용할 방법입니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-504">This is the approach we will use for this tutorial.</span></span>

- <span data-ttu-id="f4b6c-505"><strong>`CreateUserWizardStep`</strong>를 <strong>편집 가능한</strong> <strong>`WizardStep`</strong>변환 <strong>합니다.</strong></span><span class="sxs-lookup"><span data-stu-id="f4b6c-505"><strong>Convert the</strong><strong>`CreateUserWizardStep`</strong><strong>into an editable</strong><strong>`WizardStep`</strong><strong>.</strong></span></span> <span data-ttu-id="f4b6c-506">이렇게 하면 `CreateUserWizardStep`이 해당 태그가 `CreateUserWizardStep`의와 일치 하는 사용자 인터페이스를 정의 하는 해당 `WizardStep`로 바뀝니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-506">This replaces the `CreateUserWizardStep` with an equivalent `WizardStep` whose markup defines a user interface that matches the `CreateUserWizardStep`'s.</span></span> <span data-ttu-id="f4b6c-507">`CreateUserWizardStep`를 `WizardStep`으로 변환 하면 컨트롤의 위치를 변경 하거나이 단계에 추가 사용자 인터페이스 요소를 추가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-507">By converting the `CreateUserWizardStep` into a `WizardStep` we can reposition the controls or add additional user interface elements to this step.</span></span> <span data-ttu-id="f4b6c-508">`CreateUserWizardStep` 또는 `CompleteWizardStep`를 편집 가능한 `WizardStep`변환 하려면 컨트롤의 스마트 태그에서 "사용자 지정 만들기 단계" 또는 "완료 단계 사용자 지정" 링크를 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-508">To convert the `CreateUserWizardStep` or `CompleteWizardStep` into an editable `WizardStep`, click the "Customize Create User Step" or "Customize Complete Step" link from the control's Smart Tag.</span></span>

- <span data-ttu-id="f4b6c-509">**위의 두 옵션을 조합 하 여 사용 합니다.**</span><span class="sxs-lookup"><span data-stu-id="f4b6c-509">**Use some combination of the above two options.**</span></span>

<span data-ttu-id="f4b6c-510">CreateUserWizard 컨트롤은 해당 `CreateUserWizardStep`내에서 "사용자 만들기" 단추를 클릭할 때 사용자 계정 만들기 프로세스를 실행 한다는 점을 명심 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-510">One important thing to keep in mind is that the CreateUserWizard control executes its user account creation process when the "Create User" button is clicked from within its `CreateUserWizardStep`.</span></span> <span data-ttu-id="f4b6c-511">`CreateUserWizardStep` 후에 추가 `WizardStep` s가 있는지 여부는 중요 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-511">It doesn't matter if there are additional `WizardStep` s after the `CreateUserWizardStep` or not.</span></span>

<span data-ttu-id="f4b6c-512">CreateUserWizard 컨트롤에 사용자 지정 `WizardStep`를 추가 하 여 추가 사용자 입력을 수집 하는 경우 `CreateUserWizardStep`앞 이나 뒤에 사용자 지정 `WizardStep`을 배치할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-512">When adding a custom `WizardStep` to the CreateUserWizard control to collect additional user input, the custom `WizardStep` can be placed before or after the `CreateUserWizardStep`.</span></span> <span data-ttu-id="f4b6c-513">`CreateUserWizardStep` 앞에 오는 경우 사용자 지정 `WizardStep`에서 수집 된 추가 사용자 입력을 `CreatedUser` 이벤트 처리기에 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-513">If it comes before the `CreateUserWizardStep` then the additional user input collected from the custom `WizardStep` is available for the `CreatedUser` event handler.</span></span> <span data-ttu-id="f4b6c-514">그러나 사용자 지정 `WizardStep` `CreateUserWizardStep` 한 후에 사용자 지정 `WizardStep` 표시 될 때 새 사용자 계정이 이미 만들어지고 `CreatedUser` 이벤트가 이미 발생 한 것입니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-514">However, if the custom `WizardStep` comes after `CreateUserWizardStep` then by the time the custom `WizardStep` is displayed the new user account has already been created and the `CreatedUser` event has already fired.</span></span>

<span data-ttu-id="f4b6c-515">그림 21에서는 추가 된 `WizardStep` `CreateUserWizardStep`앞에 오는 워크플로를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-515">Figure 21 shows the workflow when the added `WizardStep` precedes the `CreateUserWizardStep`.</span></span> <span data-ttu-id="f4b6c-516">`CreatedUser` 이벤트가 발생 하는 시간에 추가 사용자 정보가 수집 되었으므로 `CreatedUser` 이벤트 처리기를 업데이트 하 여 이러한 입력을 검색 하 고 `DBNull.Value`대신 `INSERT` 문의 매개 변수 값에 사용 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-516">Since the additional user information has been collected by the time the `CreatedUser` event fires, all we have to do is update the `CreatedUser` event handler to retrieve these inputs and use those for the `INSERT` statement's parameter values (rather than `DBNull.Value`).</span></span>

<span data-ttu-id="f4b6c-517">[추가 WizardStep가 CreateUserWizardStep 앞에 CreateUserWizard 워크플로를 ![합니다.](storing-additional-user-information-cs/_static/image62.png)](storing-additional-user-information-cs/_static/image61.png)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-517">[![The CreateUserWizard Workflow When an Additional WizardStep Precedes the CreateUserWizardStep](storing-additional-user-information-cs/_static/image62.png)](storing-additional-user-information-cs/_static/image61.png)</span></span>

<span data-ttu-id="f4b6c-518">**그림 21**: 추가 `WizardStep` `CreateUserWizardStep` 앞에 있는 CreateUserWizard 워크플로 ([전체 크기 이미지를 보려면 클릭](storing-additional-user-information-cs/_static/image63.png))</span><span class="sxs-lookup"><span data-stu-id="f4b6c-518">**Figure 21**: The CreateUserWizard Workflow When an Additional `WizardStep` Precedes the `CreateUserWizardStep` ([Click to view full-size image](storing-additional-user-information-cs/_static/image63.png))</span></span>

<span data-ttu-id="f4b6c-519">그러나 사용자 지정 `WizardStep` `CreateUserWizardStep`*뒤* 에 배치 되는 경우 사용자가 자신의 집 마을, 홈페이지 또는 서명을 입력할 수 있기 전에 사용자 계정 만들기 프로세스가 수행 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-519">If the custom `WizardStep` is placed *after* the `CreateUserWizardStep`, however, the create user account process occurs before the user has had a chance to enter her home town, homepage, or signature.</span></span> <span data-ttu-id="f4b6c-520">이 경우 그림 22와 같이 사용자 계정을 만든 후이 추가 정보를 데이터베이스에 삽입 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-520">In such a case, this additional information needs to be inserted into the database after the user account has been created, as Figure 22 illustrates.</span></span>

<span data-ttu-id="f4b6c-521">[추가 WizardStep가 CreateUserWizardStep 뒤에 나오면 CreateUserWizard 워크플로를 ![합니다.](storing-additional-user-information-cs/_static/image65.png)](storing-additional-user-information-cs/_static/image64.png)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-521">[![The CreateUserWizard Workflow When an Additional WizardStep Comes After the CreateUserWizardStep](storing-additional-user-information-cs/_static/image65.png)](storing-additional-user-information-cs/_static/image64.png)</span></span>

<span data-ttu-id="f4b6c-522">**그림 22**: `CreateUserWizardStep` 후에 추가 `WizardStep` 되는 경우의 CreateUserWizard 워크플로 ([전체 크기 이미지를 보려면 클릭](storing-additional-user-information-cs/_static/image66.png))</span><span class="sxs-lookup"><span data-stu-id="f4b6c-522">**Figure 22**: The CreateUserWizard Workflow When an Additional `WizardStep` Comes After the `CreateUserWizardStep` ([Click to view full-size image](storing-additional-user-information-cs/_static/image66.png))</span></span>

<span data-ttu-id="f4b6c-523">그림 22에 표시 된 워크플로는 2 단계가 완료 될 때까지 `UserProfiles` 테이블에 레코드를 삽입 하기 위해 대기 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-523">The workflow shown in Figure 22 waits to insert a record into the `UserProfiles` table until after Step 2 completes.</span></span> <span data-ttu-id="f4b6c-524">그러나 방문자가 1 단계를 수행한 후 브라우저를 닫으면 사용자 계정이 생성 되었지만 `UserProfiles`에 레코드가 추가 되지 않은 상태에 도달 하 게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-524">If the visitor closes her browser after step 1, however, we will have reached a state where a user account was created, but no record was added to `UserProfiles`.</span></span> <span data-ttu-id="f4b6c-525">한 가지 해결 방법은 1 단계 후에 발생 하는 `CreatedUser` 이벤트 처리기의 `UserProfiles`에 `NULL` 또는 기본값이 삽입 된 레코드를 포함 하 고 2 단계를 완료 한 후이 레코드를 업데이트 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-525">One workaround is to have a record with `NULL` or default values inserted into `UserProfiles` in the `CreatedUser` event handler (which fires after step 1), and then update this record after step 2 completes.</span></span> <span data-ttu-id="f4b6c-526">이렇게 하면 사용자가 중간에 등록 프로세스를 종료 하는 경우에도 사용자 계정에 대 한 `UserProfiles` 레코드가 추가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-526">This ensures that a `UserProfiles` record will be added for the user account even if the user quits the registration process midway through.</span></span>

<span data-ttu-id="f4b6c-527">이 자습서에서는 `CreateUserWizardStep` 이후에 발생 하지만 `CompleteWizardStep`이전에 발생 하는 새 `WizardStep`를 만들어 보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-527">For this tutorial let's create a new `WizardStep` that occurs after the `CreateUserWizardStep` but before the `CompleteWizardStep`.</span></span> <span data-ttu-id="f4b6c-528">먼저 WizardStep을 준비 하 고 구성 하 고 코드를 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-528">Let's first get the WizardStep in place and configured and then we'll look at the code.</span></span>

<span data-ttu-id="f4b6c-529">CreateUserWizard 컨트롤의 스마트 태그에서 `WizardStep` 컬렉션 편집기 대화 상자를 표시 하는 "추가/제거 `WizardStep` s"를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-529">From the CreateUserWizard control's Smart Tag, select the "Add/Remove `WizardStep` s", which brings up the `WizardStep` Collection Editor dialog.</span></span> <span data-ttu-id="f4b6c-530">새 `WizardStep`을 추가 하 고, 해당 `ID`를 `UserSettings`로 설정 하 고, 해당 `Title`를 "설정"으로 설정 하 고 `StepType`를 `Step`로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-530">Add a new `WizardStep`, setting its `ID` to `UserSettings`, its `Title` to "Your Settings" and its `StepType` to `Step`.</span></span> <span data-ttu-id="f4b6c-531">그런 다음 그림 23과 같이 `CreateUserWizardStep` ("새 계정에 등록") 및 `CompleteWizardStep` ("완료") 앞에 오도록 배치 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-531">Then position it so that it comes after the `CreateUserWizardStep` ("Sign Up for Your New Account") and before the `CompleteWizardStep` ("Complete"), as shown in Figure 23.</span></span>

<span data-ttu-id="f4b6c-532">[새 WizardStep를 CreateUserWizard 컨트롤에 추가 ![](storing-additional-user-information-cs/_static/image68.png)](storing-additional-user-information-cs/_static/image67.png)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-532">[![Add a New WizardStep to the CreateUserWizard Control](storing-additional-user-information-cs/_static/image68.png)](storing-additional-user-information-cs/_static/image67.png)</span></span>

<span data-ttu-id="f4b6c-533">**그림 23**: CreateUserWizard 컨트롤에 새 `WizardStep` 추가 ([전체 크기 이미지를 보려면 클릭](storing-additional-user-information-cs/_static/image69.png))</span><span class="sxs-lookup"><span data-stu-id="f4b6c-533">**Figure 23**: Add a New `WizardStep` to the CreateUserWizard Control  ([Click to view full-size image](storing-additional-user-information-cs/_static/image69.png))</span></span>

<span data-ttu-id="f4b6c-534">확인을 클릭 하 여 `WizardStep` 컬렉션 편집기 대화 상자를 닫습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-534">Click OK to close the `WizardStep` Collection Editor dialog.</span></span> <span data-ttu-id="f4b6c-535">새 `WizardStep`는 CreateUserWizard 컨트롤의 업데이트 된 선언적 태그로 복합적 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-535">The new `WizardStep` is evidenced by the CreateUserWizard control's updated declarative markup:</span></span>

[!code-aspx[Main](storing-additional-user-information-cs/samples/sample13.aspx)]

<span data-ttu-id="f4b6c-536">새 `<asp:WizardStep>` 요소를 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-536">Note the new `<asp:WizardStep>` element.</span></span> <span data-ttu-id="f4b6c-537">여기에서 새 사용자의 홈 타운, 홈 페이지 및 서명을 수집 하려면 사용자 인터페이스를 추가 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-537">We need to add the user interface to collect the new user's home town, homepage, and signature here.</span></span> <span data-ttu-id="f4b6c-538">이 콘텐츠는 선언적 구문이 나 디자이너를 통해 입력할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-538">You can enter this content in the declarative syntax or through the Designer.</span></span> <span data-ttu-id="f4b6c-539">디자이너를 사용 하려면 스마트 태그의 드롭다운 목록에서 "사용자 설정" 단계를 선택 하 여 디자이너의 단계를 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-539">To use the Designer, select the "Your Settings" step from the drop-down list in the Smart Tag to see the step in the Designer.</span></span>

> [!NOTE]
> <span data-ttu-id="f4b6c-540">스마트 태그의 드롭다운 목록에서 단계를 선택 하면 시작 단계의 인덱스를 지정 하는 CreateUserWizard 컨트롤의 [`ActiveStepIndex` 속성이](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.activestepindex.aspx)업데이트 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-540">Selecting a step through the Smart Tag's drop-down list updates the CreateUserWizard control's [`ActiveStepIndex` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.activestepindex.aspx), which specifies the index of the starting step.</span></span> <span data-ttu-id="f4b6c-541">따라서이 드롭다운 목록을 사용 하 여 디자이너의 "설정" 단계를 편집 하는 경우 사용자가 `EnhancedCreateUserWizard.aspx` 페이지를 처음 방문할 때이 단계가 표시 되도록 "새 계정에 등록"으로 다시 설정 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-541">Therefore, if you use this drop-down list to edit the "Your Settings" step in the Designer, be sure to set it back to "Sign Up for Your New Account" so that this step is shown when users first visit the `EnhancedCreateUserWizard.aspx` page.</span></span>

<span data-ttu-id="f4b6c-542">`HomeTown`, `HomepageUrl`및 `Signature`라는 세 개의 TextBox 컨트롤을 포함 하는 "사용자 설정" 단계 내에서 사용자 인터페이스를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-542">Create a user interface within the "Your Settings" step that contains three TextBox controls named `HomeTown`, `HomepageUrl`, and `Signature`.</span></span> <span data-ttu-id="f4b6c-543">이 인터페이스를 생성 한 후에는 CreateUserWizard의 선언적 태그가 다음과 같이 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-543">After constructing this interface, the CreateUserWizard's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](storing-additional-user-information-cs/samples/sample14.aspx)]

<span data-ttu-id="f4b6c-544">계속 해 서 브라우저를 통해이 페이지를 방문 하 고 홈 타운, 홈 페이지 및 서명에 대 한 값을 지정 하 여 새 사용자 계정을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-544">Go ahead and visit this page through a browser and create a new user account, specifying values for the home town, homepage, and signature.</span></span> <span data-ttu-id="f4b6c-545">`CreateUserWizardStep` 완료 한 후에는 멤버 프레임 워크에서 사용자 계정을 만들고 `CreatedUser` 이벤트 처리기를 실행 합니다. 그러면 `UserProfiles`에 새 행이 추가 되지만 `HomeTown`, `HomepageUrl`, `Signature`에 대 한 데이터베이스 `NULL` 값이 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-545">After completing the `CreateUserWizardStep` the user account is created in the Membership framework and the `CreatedUser` event handler runs, which adds a new row to `UserProfiles`, but with a database `NULL` value for `HomeTown`, `HomepageUrl`, and `Signature`.</span></span> <span data-ttu-id="f4b6c-546">홈 타운, 홈 페이지 및 서명에 입력 한 값은 사용 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-546">The values entered for the home town, homepage, and signature are never used.</span></span> <span data-ttu-id="f4b6c-547">Net result는 `HomeTown`, `HomepageUrl`및 `Signature` 필드를 아직 지정 하지 않은 `UserProfiles` 레코드를 포함 하는 새 사용자 계정입니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-547">The net result is a new user account with a `UserProfiles` record whose `HomeTown`, `HomepageUrl`, and `Signature` fields have yet to be specified.</span></span>

<span data-ttu-id="f4b6c-548">사용자가 입력 한 집 타운, honepage 및 서명 값을 사용 하 고 적절 한 `UserProfiles` 레코드를 업데이트 하는 "사용자 설정" 단계 후에 코드를 실행 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-548">We need to execute code after the "Your Settings" step that takes the home town, honepage, and signature values entered by the user and updates the appropriate `UserProfiles` record.</span></span> <span data-ttu-id="f4b6c-549">사용자가 마법사 컨트롤의 단계 간을 이동할 때마다 마법사의 [`ActiveStepChanged` 이벤트가](https://msdn.microsoft.com/library/system.web.ui.webcontrols.wizard.activestepchanged.aspx) 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-549">Each time the user moves between steps in a Wizard control, the Wizard's [`ActiveStepChanged` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.wizard.activestepchanged.aspx) fires.</span></span> <span data-ttu-id="f4b6c-550">"설정" 단계가 완료 되 면이 이벤트에 대 한 이벤트 처리기를 만들고 `UserProfiles` 테이블을 업데이트할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-550">We can create an event handler for this event and update the `UserProfiles` table when the "Your Settings" step has completed.</span></span>

<span data-ttu-id="f4b6c-551">CreateUserWizard의 `ActiveStepChanged` 이벤트에 대 한 이벤트 처리기를 추가 하 고 다음 코드를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-551">Add an event handler for the CreateUserWizard's `ActiveStepChanged` event and add the following code:</span></span>

[!code-csharp[Main](storing-additional-user-information-cs/samples/sample15.cs)]

<span data-ttu-id="f4b6c-552">위의 코드는 단순히 "완료" 단계에 도달 했는지 확인 하 여 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-552">The above code starts by determining if we have just reached the "Complete" step.</span></span> <span data-ttu-id="f4b6c-553">"전체" 단계는 "사용자 설정" 단계 바로 다음에 발생 하므로 방문자가 "전체" 단계에 도달 하면 "설정" 단계를 완료 했다는 것을 의미 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-553">Since the "Complete" step occurs immediately after the "Your Settings" step, then when the visitor reaches "Complete" step that means she just finished the "Your Settings" step.</span></span>

<span data-ttu-id="f4b6c-554">이 경우 `UserSettings WizardStep`내에서 TextBox 컨트롤을 프로그래밍 방식으로 참조 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-554">In such a case, we need to programmatically reference the TextBox controls within the `UserSettings WizardStep`.</span></span> <span data-ttu-id="f4b6c-555">이를 위해서는 먼저 `FindControl` 메서드를 사용 하 여 `UserSettings WizardStep`를 프로그래밍 방식으로 참조 한 다음 `WizardStep`내에서 텍스트 상자를 참조 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-555">This is accomplished by first using the `FindControl` method to programmatically referencing the `UserSettings WizardStep`, and then again to reference the TextBoxes from within the `WizardStep`.</span></span> <span data-ttu-id="f4b6c-556">텍스트 상자가 참조 되 면 `UPDATE` 문을 실행할 준비가 된 것입니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-556">Once the TextBoxes have been referenced, we're ready to execute the `UPDATE` statement.</span></span> <span data-ttu-id="f4b6c-557">`UPDATE` 문에는 `CreatedUser` 이벤트 처리기의 `INSERT` 문과 동일한 수의 매개 변수가 있지만 여기서는 사용자가 제공 하는 홈 타운, 홈 페이지 및 서명 값을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-557">The `UPDATE` statement has the same number of parameters as the `INSERT` statement in the `CreatedUser` event handler, but here we use the home town, homepage, and signature values supplied by the user.</span></span>

<span data-ttu-id="f4b6c-558">이 이벤트 처리기를 사용 하는 경우 브라우저를 통해 `EnhancedCreateUserWizard.aspx` 페이지를 방문 하 고 홈 타운, 홈 페이지 및 서명 값을 지정 하는 새 사용자 계정을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-558">With this event handler in place, visit the `EnhancedCreateUserWizard.aspx` page through a browser and create a new user account specifying values for the home town, homepage, and signature.</span></span> <span data-ttu-id="f4b6c-559">새 계정을 만든 후에는 방금 입력 한 홈 타운, 홈 페이지 및 서명 정보가 표시 되는 `AdditionalUserInfo.aspx` 페이지로 리디렉션됩니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-559">After creating the new account you should be redirected to the `AdditionalUserInfo.aspx` page, where the just-entered home town, homepage, and signature information is displayed.</span></span>

> [!NOTE]
> <span data-ttu-id="f4b6c-560">현재 웹 사이트에는 방문자가 새 계정을 만들 수 있는 두 페이지가 있습니다. `CreatingUserAccounts.aspx` 및 `EnhancedCreateUserWizard.aspx`.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-560">Our website currently has two pages from which a visitor can create a new account: `CreatingUserAccounts.aspx` and `EnhancedCreateUserWizard.aspx`.</span></span> <span data-ttu-id="f4b6c-561">웹 사이트의 사이트 맵 및 로그인 페이지가 `CreatingUserAccounts.aspx` 페이지를 가리키기는 하지만 `CreatingUserAccounts.aspx` 페이지에서 사용자에 게 홈 타운, 홈 페이지 및 서명 정보를 입력 하 라는 메시지를 표시 하지 않고 `UserProfiles`에 해당 행을 추가 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-561">The website's sitemap and login page point to the `CreatingUserAccounts.aspx` page, but the `CreatingUserAccounts.aspx` page does not prompt the user for their home town, homepage, and signature information and does not add a corresponding row to `UserProfiles`.</span></span> <span data-ttu-id="f4b6c-562">따라서 `CreatingUserAccounts.aspx` 페이지를 업데이트 하 여이 기능을 제공 하거나 사이트 맵 및 로그인 페이지에서 `CreatingUserAccounts.aspx`대신 `EnhancedCreateUserWizard.aspx`를 참조 하도록 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-562">Therefore, either update the `CreatingUserAccounts.aspx` page so that it offers this functionality or update the sitemap and login page to reference `EnhancedCreateUserWizard.aspx` instead of `CreatingUserAccounts.aspx`.</span></span> <span data-ttu-id="f4b6c-563">후자 옵션을 선택 하는 경우 `EnhancedCreateUserWizard.aspx` 페이지에 대 한 익명 사용자의 액세스를 허용 하도록 `Membership` 폴더의 `Web.config` 파일을 업데이트 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-563">If you choose the latter option, be sure to update the `Membership` folder's `Web.config` file so as to allow anonymous users access to the `EnhancedCreateUserWizard.aspx` page.</span></span>

## <a name="summary"></a><span data-ttu-id="f4b6c-564">요약</span><span class="sxs-lookup"><span data-stu-id="f4b6c-564">Summary</span></span>

<span data-ttu-id="f4b6c-565">이 자습서에서는 멤버 자격 프레임 워크 내에서 사용자 계정과 관련 된 데이터를 모델링 하는 기술을 살펴보았습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-565">In this tutorial we looked at techniques for modeling data that is related to user accounts within the Membership framework.</span></span> <span data-ttu-id="f4b6c-566">특히 사용자 계정과 일 대 다 관계를 공유 하는 엔터티와 일 대 일 관계를 공유 하는 데이터를 모델링 하는 방법을 살펴보았습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-566">In particular, we looked at modeling entities that share a one-to-many relationship with user accounts as well as data that shares a one-to-one relationship.</span></span> <span data-ttu-id="f4b6c-567">또한 SqlDataSource 컨트롤을 사용 하는 몇 가지 예제와 ADO.NET 코드를 사용 하 여이 관련 정보를 표시, 삽입 및 업데이트 하는 방법을 살펴보았습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-567">Furthermore, we saw how this related information could be displayed, inserted, and updated, with some examples using the SqlDataSource control and others using ADO.NET code.</span></span>

<span data-ttu-id="f4b6c-568">이 자습서에서는 사용자 계정에 대 한 확인을 완료 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-568">This tutorial completes our look at user accounts.</span></span> <span data-ttu-id="f4b6c-569">다음 자습서부터 역할에 주의를 기울여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-569">Starting with the next tutorial we will turn our attention to roles.</span></span> <span data-ttu-id="f4b6c-570">다음 몇 가지 자습서에서는 역할 프레임 워크에서 새로운 역할을 만드는 방법, 사용자에 게 역할을 할당 하는 방법, 사용자가 속한 역할을 결정 하는 방법, 역할 기반 권한 부여를 적용 하는 방법을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-570">Over the next several tutorials we will look at the Roles framework, see how to create new roles, how to assign roles to users, how to determine what roles a user belongs to, and how to apply role-based authorization.</span></span>

<span data-ttu-id="f4b6c-571">행복 한 프로그래밍</span><span class="sxs-lookup"><span data-stu-id="f4b6c-571">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="f4b6c-572">추가 정보</span><span class="sxs-lookup"><span data-stu-id="f4b6c-572">Further Reading</span></span>

<span data-ttu-id="f4b6c-573">이 자습서에서 설명 하는 항목에 대 한 자세한 내용은 다음 리소스를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-573">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="f4b6c-574">ASP.NET 2.0에서 데이터 액세스 및 업데이트</span><span class="sxs-lookup"><span data-stu-id="f4b6c-574">Accessing and Updating Data in ASP.NET 2.0</span></span>](http://aspnet.4guysfromrolla.com/articles/011106-1.aspx)
- [<span data-ttu-id="f4b6c-575">ASP.NET 2.0 마법사 컨트롤</span><span class="sxs-lookup"><span data-stu-id="f4b6c-575">ASP.NET 2.0 Wizard Control</span></span>](https://weblogs.asp.net/scottgu/archive/2006/02/21/438732.aspx)
- [<span data-ttu-id="f4b6c-576">ASP.NET 2.0 마법사 컨트롤을 사용 하 여 단계별 사용자 인터페이스 만들기</span><span class="sxs-lookup"><span data-stu-id="f4b6c-576">Creating a Step-by-Step User Interface with the ASP.NET 2.0 Wizard Control</span></span>](http://aspnet.4guysfromrolla.com/articles/061406-1.aspx)
- [<span data-ttu-id="f4b6c-577">사용자 지정 DataSource 컨트롤 매개 변수 만들기</span><span class="sxs-lookup"><span data-stu-id="f4b6c-577">Creating Custom DataSource Control Parameters</span></span>](http://aspnet.4guysfromrolla.com/articles/110106-1.aspx)
- [<span data-ttu-id="f4b6c-578">CreateUserWizard 컨트롤 사용자 지정</span><span class="sxs-lookup"><span data-stu-id="f4b6c-578">Customizing the CreateUserWizard Control</span></span>](http://aspnet.4guysfromrolla.com/articles/070506-1.aspx)
- [<span data-ttu-id="f4b6c-579">DetailsView 컨트롤 빠른 시작</span><span class="sxs-lookup"><span data-stu-id="f4b6c-579">DetailsView Control QuickStarts</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/data/detailsview.aspx)
- [<span data-ttu-id="f4b6c-580">ListView 컨트롤을 사용 하 여 데이터 표시</span><span class="sxs-lookup"><span data-stu-id="f4b6c-580">Displaying Data with the ListView Control</span></span>](http://aspnet.4guysfromrolla.com/articles/122607-1.aspx)
- [<span data-ttu-id="f4b6c-581">ASP.NET 2.0에서 유효성 검사 컨트롤 개로 나누어서</span><span class="sxs-lookup"><span data-stu-id="f4b6c-581">Dissecting the Validation Controls in ASP.NET 2.0</span></span>](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx)
- [<span data-ttu-id="f4b6c-582">삽입 및 데이터 삭제 편집</span><span class="sxs-lookup"><span data-stu-id="f4b6c-582">Editing Insert and Deleting Data</span></span>](../../data-access/editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md)
- [<span data-ttu-id="f4b6c-583">ASP.NET의 폼 유효성 검사</span><span class="sxs-lookup"><span data-stu-id="f4b6c-583">Form Validation in ASP.NET</span></span>](http://www.4guysfromrolla.com/webtech/090200-1.shtml)
- [<span data-ttu-id="f4b6c-584">사용자 지정 사용자 등록 정보 수집</span><span class="sxs-lookup"><span data-stu-id="f4b6c-584">Gathering Custom User Registration Information</span></span>](https://weblogs.asp.net/scottgu/archive/2006/07/05/Tip_2F00_Trick_3A00_-Gathering-Custom-User-Registration-Information.aspx)
- [<span data-ttu-id="f4b6c-585">ASP.NET 2.0의 프로필</span><span class="sxs-lookup"><span data-stu-id="f4b6c-585">Profiles in ASP.NET 2.0</span></span>](http://www.odetocode.com/Articles/440.aspx)
- [<span data-ttu-id="f4b6c-586">Asp: ListView 컨트롤</span><span class="sxs-lookup"><span data-stu-id="f4b6c-586">The asp:ListView Control</span></span>](https://weblogs.asp.net/scottgu/archive/2007/08/10/the-asp-listview-control-part-1-building-a-product-listing-page-with-clean-css-ui.aspx)
- [<span data-ttu-id="f4b6c-587">사용자 프로필 빠른 시작</span><span class="sxs-lookup"><span data-stu-id="f4b6c-587">User Profiles QuickStart</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/profile/default.aspx)

### <a name="about-the-author"></a><span data-ttu-id="f4b6c-588">작성자 정보</span><span class="sxs-lookup"><span data-stu-id="f4b6c-588">About the Author</span></span>

<span data-ttu-id="f4b6c-589">Scott Mitchell는 여러 ASP/ASP. NET books의 작성자와 4GuysFromRolla.com의 창립자가 1998부터 Microsoft 웹 기술을 사용 하 여 작업 했습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-589">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="f4b6c-590">Scott은 독립 컨설턴트, 강사 및 기록기로 작동 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-590">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="f4b6c-591">최신 책은 *[24 시간 이내에 ASP.NET 2.0을 sams teach yourself](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)* 것입니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-591">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="f4b6c-592">Scott은 [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) 또는 [http://ScottOnWriting.NET](http://scottonwriting.net/)의 블로그를 통해 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-592">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="f4b6c-593">특별 해 주셔서 감사 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-593">Special Thanks To…</span></span>

<span data-ttu-id="f4b6c-594">이 자습서 시리즈는 많은 유용한 검토자가 검토 했습니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-594">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="f4b6c-595">예정 된 MSDN 문서를 검토 하는 데 관심이 있나요?</span><span class="sxs-lookup"><span data-stu-id="f4b6c-595">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="f4b6c-596">그렇다면 [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)에서 줄을 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="f4b6c-596">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="f4b6c-597">[이전](user-based-authorization-cs.md)
> [다음](creating-the-membership-schema-in-sql-server-vb.md)</span><span class="sxs-lookup"><span data-stu-id="f4b6c-597">[Previous](user-based-authorization-cs.md)
[Next](creating-the-membership-schema-in-sql-server-vb.md)</span></span>
