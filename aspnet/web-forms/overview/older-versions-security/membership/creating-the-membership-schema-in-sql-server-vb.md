---
uid: web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-vb
title: SQL Server에서 멤버 자격 스키마 만들기 (VB) | Microsoft Docs
author: rick-anderson
description: 이 자습서에서는 먼저 SqlMembershipProvider를 사용 하기 위해 필요한 스키마를 데이터베이스에 추가 하는 방법을 검토 합니다. 그 후에는 다음을 수행 합니다.
ms.author: riande
ms.date: 01/18/2008
ms.assetid: 112a674d-716f-41a6-99b8-4074d65a54c0
msc.legacyurl: /web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-vb
msc.type: authoredcontent
ms.openlocfilehash: 3596e85f6f1e36e046011212479128229be24201
ms.sourcegitcommit: 4e6d586faadbe4d9ef27122f86335ec9385134af
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/28/2020
ms.locfileid: "89045080"
---
# <a name="creating-the-membership-schema-in-sql-server-vb"></a><span data-ttu-id="5e1e2-104">SQL Server에서 멤버 자격 스키마 만들기(VB)</span><span class="sxs-lookup"><span data-stu-id="5e1e2-104">Creating the Membership Schema in SQL Server (VB)</span></span>

<span data-ttu-id="5e1e2-105">[Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="5e1e2-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="5e1e2-106">[코드 다운로드](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_VB.zip) 또는 [PDF 다운로드](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_vb.pdf)</span><span class="sxs-lookup"><span data-stu-id="5e1e2-106">[Download Code](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_VB.zip) or [Download PDF](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_vb.pdf)</span></span>

> <span data-ttu-id="5e1e2-107">이 자습서에서는 먼저 SqlMembershipProvider를 사용 하기 위해 필요한 스키마를 데이터베이스에 추가 하는 방법을 검토 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-107">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the SqlMembershipProvider.</span></span> <span data-ttu-id="5e1e2-108">다음에는 스키마의 키 테이블을 살펴보고 목적과 중요도에 대해 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-108">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="5e1e2-109">이 자습서에서는 멤버 프레임 워크에서 사용 해야 하는 공급자를 ASP.NET 응용 프로그램에 알리는 방법에 대해 살펴봅니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-109">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>

## <a name="introduction"></a><span data-ttu-id="5e1e2-110">소개</span><span class="sxs-lookup"><span data-stu-id="5e1e2-110">Introduction</span></span>

<span data-ttu-id="5e1e2-111">이전 두 자습서에서는 폼 인증을 사용 하 여 웹 사이트 방문자를 식별 하는 방법을 살펴보았습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-111">The previous two tutorials examined using forms authentication to identify website visitors.</span></span> <span data-ttu-id="5e1e2-112">개발자는 폼 인증 프레임 워크를 사용 하 여 사용자를 웹 사이트에 쉽게 로그인 하 고 인증 티켓을 사용 하 여 페이지를 방문할 때마다 기억할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-112">The forms authentication framework makes it easy for developers to log a user into a website and to remember them across page visits through the use of authentication tickets.</span></span> <span data-ttu-id="5e1e2-113">클래스에는 `FormsAuthentication` 티켓을 생성 하 고 방문자의 쿠키에 추가 하는 메서드가 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-113">The `FormsAuthentication` class includes methods for generating the ticket and adding it to the visitor's cookies.</span></span> <span data-ttu-id="5e1e2-114">는 `FormsAuthenticationModule` 들어오는 모든 요청을 검사 하 고, 유효한 인증 티켓이 있는 요청에 대해 `GenericPrincipal` 및 개체를 만들어 `FormsIdentity` 현재 요청과 연결 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-114">The `FormsAuthenticationModule` examines all incoming requests and, for those with a valid authentication ticket, creates and associates a `GenericPrincipal` and a `FormsIdentity` object with the current request.</span></span> <span data-ttu-id="5e1e2-115">폼 인증은 단순히 로그인 할 때 방문자에 게 인증 티켓을 부여 하는 메커니즘이 며 후속 요청에서 사용자의 id를 확인 하기 위해 해당 티켓을 구문 분석 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-115">Forms authentication is merely a mechanism for granting an authentication ticket to a visitor when logging in and, on subsequent requests, parsing that ticket to determine the user's identity.</span></span> <span data-ttu-id="5e1e2-116">사용자 계정을 지원 하기 위한 웹 응용 프로그램의 경우 여전히 사용자 저장소를 구현 하 고 자격 증명의 유효성을 검사 하 고, 새 사용자를 등록 하 고, 다른 사용자 계정 관련 작업을 등록 하는 기능을 추가 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-116">For a web application to support user accounts, we still need to implement a user store and add functionality to validate credentials, register new users, and the myriad of other user account-related tasks.</span></span>

<span data-ttu-id="5e1e2-117">ASP.NET 2.0 이전에는 개발자가 이러한 모든 사용자 계정 관련 작업을 구현 하기 위한 후크 였습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-117">Prior to ASP.NET 2.0, developers were on the hook for implementing all of these user account-related tasks.</span></span> <span data-ttu-id="5e1e2-118">다행히 ASP.NET 팀은 이러한 단점을 인식 하 고 ASP.NET 2.0를 사용 하 여 멤버 자격 프레임 워크를 도입 했습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-118">Fortunately the ASP.NET team recognized this shortcoming and introduced the Membership framework with ASP.NET 2.0.</span></span> <span data-ttu-id="5e1e2-119">멤버 프레임 프레임 워크는 핵심 사용자 계정 관련 작업을 수행 하기 위한 프로그래밍 인터페이스를 제공 하는 .NET Framework의 클래스 집합입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-119">The Membership framework is a set of classes in the .NET Framework that provide a programmatic interface for accomplishing core user account-related tasks.</span></span> <span data-ttu-id="5e1e2-120">이 프레임 워크는 개발자가 사용자 지정 된 구현을 표준화 된 API에 연결할 수 있도록 하는 [공급자 모델](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx)위에 빌드됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-120">This framework is built atop the [provider model](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), which allows developers to plug a customized implementation into a standardized API.</span></span>

<span data-ttu-id="5e1e2-121"><a id="Tutorial1"></a> [*보안 기본 및 ASP.NET 지원*](../introduction/security-basics-and-asp-net-support-vb.md) 자습서에 설명 된 대로 .NET Framework에는 및의 두 가지 기본 제공 멤버 자격 공급자가 제공 [`ActiveDirectoryMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) [`SqlMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx) 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-121">As discussed in the <a id="Tutorial1"></a>[*Security Basics and ASP.NET Support*](../introduction/security-basics-and-asp-net-support-vb.md) tutorial, the .NET Framework ships with two built-in Membership providers: [`ActiveDirectoryMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) and [`SqlMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx).</span></span> <span data-ttu-id="5e1e2-122">이름에서 알 때는 `SqlMembershipProvider` 사용자 저장소로 Microsoft SQL Server 데이터베이스를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-122">As its name implies, the `SqlMembershipProvider` uses a Microsoft SQL Server database as the user store.</span></span> <span data-ttu-id="5e1e2-123">응용 프로그램에서이 공급자를 사용 하려면 저장소로 사용할 데이터베이스를 공급자에 게 알려 주어 야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-123">In order to use this provider in an application, we need to tell the provider what database to use as the store.</span></span> <span data-ttu-id="5e1e2-124">짐작할 수 있듯이에서는 `SqlMembershipProvider` 사용자 저장소 데이터베이스가 특정 데이터베이스 테이블, 뷰 및 저장 프로시저를 가질 것으로 예상 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-124">As you might imagine, the `SqlMembershipProvider` expects the user store database to have certain database tables, views, and stored procedures.</span></span> <span data-ttu-id="5e1e2-125">이 예상 스키마를 선택한 데이터베이스에 추가 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-125">We need to add this expected schema to the selected database.</span></span>

<span data-ttu-id="5e1e2-126">이 자습서에서는를 사용 하기 위해 필요한 스키마를 데이터베이스에 추가 하는 방법을 검사 하 여 시작 `SqlMembershipProvider` 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-126">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the `SqlMembershipProvider`.</span></span> <span data-ttu-id="5e1e2-127">다음에는 스키마의 키 테이블을 살펴보고 목적과 중요도에 대해 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-127">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="5e1e2-128">이 자습서에서는 멤버 프레임 워크에서 사용 해야 하는 공급자를 ASP.NET 응용 프로그램에 알리는 방법에 대해 살펴봅니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-128">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>

<span data-ttu-id="5e1e2-129">그럼 시작하겠습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-129">Let's get started!</span></span>

## <a name="step-1-deciding-where-to-place-the-user-store"></a><span data-ttu-id="5e1e2-130">1 단계: 사용자 저장소를 보관할 위치 결정</span><span class="sxs-lookup"><span data-stu-id="5e1e2-130">Step 1: Deciding Where to Place the User Store</span></span>

<span data-ttu-id="5e1e2-131">ASP.NET 응용 프로그램의 데이터는 일반적으로 데이터베이스의 여러 테이블에 저장 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-131">An ASP.NET application's data is commonly stored in a number of tables in a database.</span></span> <span data-ttu-id="5e1e2-132">데이터베이스 스키마를 구현 하는 경우 `SqlMembershipProvider` 응용 프로그램 데이터와 같은 데이터베이스 또는 대체 데이터베이스에 멤버 자격 스키마를 배치할지 여부를 결정 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-132">When implementing the `SqlMembershipProvider` database schema we must decide whether to place the Membership schema in the same database as the application data or in an alternate database.</span></span>

<span data-ttu-id="5e1e2-133">다음과 같은 이유로 응용 프로그램 데이터와 동일한 데이터베이스에서 멤버 자격 스키마를 찾는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-133">I recommend locating the Membership schema in the same database as the application data for the following reasons:</span></span>

- <span data-ttu-id="5e1e2-134">**유지 관리**  데이터를 하나의 데이터베이스에 캡슐화 하는 응용 프로그램은 별도의 데이터베이스가 두 개인 응용 프로그램 보다 더 쉽게 이해 하 고 유지 관리 하 고 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-134">**Maintainability**  an application whose data is encapsulated in one database is easier to understand, maintain, and deploy than an application that has two separate databases.</span></span>
- <span data-ttu-id="5e1e2-135">**관계형 무결성**  응용 프로그램 테이블과 동일한 데이터베이스에 멤버 자격 관련 테이블을 배치 하 여 멤버 자격 관련 테이블 및 관련 응용 프로그램 테이블의 기본 키 사이에 [foreign key 제약 조건을](http://en.wikipedia.org/wiki/Foreign_key) 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-135">**Relational Integrity**  by locating the Membership-related tables in the same database as the application tables it is possible to establish [foreign key constraints](http://en.wikipedia.org/wiki/Foreign_key) between the primary keys in the Membership-related tables and related application tables.</span></span>

<span data-ttu-id="5e1e2-136">사용자 저장소와 응용 프로그램 데이터를 개별 데이터베이스로 분리 하는 것은 각각 별도의 데이터베이스를 사용 하지만 공통 사용자 저장소를 공유 해야 하는 여러 응용 프로그램이 있는 경우에만 적합 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-136">Decoupling the user store and application data into separate databases only makes sense if you have multiple applications that each use separate databases, but need to share a common user store.</span></span>

### <a name="creating-a-database"></a><span data-ttu-id="5e1e2-137">데이터베이스 만들기</span><span class="sxs-lookup"><span data-stu-id="5e1e2-137">Creating a Database</span></span>

<span data-ttu-id="5e1e2-138">두 번째 자습서에서 작성 한 응용 프로그램은 아직 데이터베이스를 필요로 하지 않았습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-138">The application we have been building since the second tutorial has not yet needed a database.</span></span> <span data-ttu-id="5e1e2-139">그러나 사용자 저장소에 대 한 현재이 (가) 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-139">We need one now, however, for the user store.</span></span> <span data-ttu-id="5e1e2-140">하나를 만들어 공급자에 필요한 스키마 `SqlMembershipProvider` (2 단계 참조)에 추가 해 보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-140">Let's create one and then add to it the schema required by the `SqlMembershipProvider` provider (see Step 2).</span></span>

> [!NOTE]
> <span data-ttu-id="5e1e2-141">이 자습서 시리즈 전체에서는 [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) 데이터베이스를 사용 하 여 응용 프로그램 테이블과 스키마를 저장 `SqlMembershipProvider` 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-141">Throughout this tutorial series we will be using a [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) database to store our application tables and the `SqlMembershipProvider` schema.</span></span> <span data-ttu-id="5e1e2-142">이러한 결정은 두 가지 이유로 수행 되었습니다. 첫 번째는 비용 없이 무료로 제공 됩니다. Express Edition은 SQL Server 2005의 가장 readably 액세스 가능한 버전입니다. 두 번째로 SQL Server 2005 Express Edition 데이터베이스를 웹 응용 프로그램의 폴더에 직접 배치 하 여 `App_Data` 데이터베이스 및 웹 응용 프로그램을 하나의 ZIP 파일로 cinch 하 고 특별 한 설치 지침 또는 구성 옵션 없이 다시 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-142">This decision was made for two reasons: first, due to its cost - free - the Express Edition is the most readably accessible version of SQL Server 2005; second, SQL Server 2005 Express Edition databases can be placed directly in the web application's `App_Data` folder, making it a cinch to package the database and web application together in one ZIP file and to redeploy it without any special setup instructions or configuration options.</span></span> <span data-ttu-id="5e1e2-143">Express Edition 버전의 SQL Server을 사용 하 여 수행 하는 것을 선호 하는 경우 무료로 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-143">If you'd prefer to follow along using a non-Express Edition version of SQL Server, feel free.</span></span> <span data-ttu-id="5e1e2-144">단계는 사실상 동일 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-144">The steps are virtually identical.</span></span> <span data-ttu-id="5e1e2-145">`SqlMembershipProvider`스키마는 Microsoft SQL Server 2000 이상 버전에서 작동 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-145">The `SqlMembershipProvider` schema will work with any version of Microsoft SQL Server 2000 and up.</span></span>

<span data-ttu-id="5e1e2-146">솔루션 탐색기에서 폴더를 마우스 오른쪽 단추로 클릭 `App_Data` 하 고 새 항목 추가를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-146">From the Solution Explorer, right-click on the `App_Data` folder and choose to Add New Item.</span></span> <span data-ttu-id="5e1e2-147">`App_Data`프로젝트에 폴더가 표시 되지 않으면 솔루션 탐색기에서 프로젝트를 마우스 오른쪽 단추로 클릭 하 고 ASP.NET 폴더 추가를 선택 하 고를 선택 `App_Data` 합니다. 새 항목 추가 대화 상자에서 라는 새 SQL Database을 추가 하도록 선택 `SecurityTutorials.mdf` 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-147">(If you do not see an `App_Data` folder in your project, right-click on the project in Solution Explorer, select Add ASP.NET Folder, and pick `App_Data`.) From the Add New Item dialog box, choose to add a new SQL Database named `SecurityTutorials.mdf`.</span></span> <span data-ttu-id="5e1e2-148">이 자습서에서는 `SqlMembershipProvider` 이 데이터베이스에 스키마를 추가 합니다. 이후 자습서에서는 응용 프로그램 데이터를 캡처하는 추가 테이블을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-148">In this tutorial we will add the `SqlMembershipProvider` schema to this database; in subsequent tutorials we will create additional tables to capture our application data.</span></span>

<span data-ttu-id="5e1e2-149">[![SecurityTutorials .mdf 데이터베이스 라는 새 SQL Database App_Data 폴더에 추가 합니다.](creating-the-membership-schema-in-sql-server-vb/_static/image2.png)](creating-the-membership-schema-in-sql-server-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="5e1e2-149">[![Add a New SQL Database Named SecurityTutorials.mdf Database to the App_Data Folder](creating-the-membership-schema-in-sql-server-vb/_static/image2.png)](creating-the-membership-schema-in-sql-server-vb/_static/image1.png)</span></span>

<span data-ttu-id="5e1e2-150">**그림 1**: 폴더에 새 SQL Database 명명 된 `SecurityTutorials.mdf` 데이터베이스 추가 `App_Data` ([전체 크기 이미지를 보려면 클릭](creating-the-membership-schema-in-sql-server-vb/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="5e1e2-150">**Figure 1**: Add a New SQL Database Named `SecurityTutorials.mdf` Database to the `App_Data` Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image3.png))</span></span>

<span data-ttu-id="5e1e2-151">폴더에 데이터베이스를 추가 하면 `App_Data` 데이터베이스 탐색기 보기에 자동으로 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-151">Adding a database to the `App_Data` folder automatically includes it in the Database Explorer view.</span></span> <span data-ttu-id="5e1e2-152">Express Edition 버전의 Visual Studio에서는 데이터베이스 탐색기를 서버 탐색기 이라고 합니다. 데이터베이스 탐색기로 이동 하 여 바로 추가 된 데이터베이스를 확장 합니다 `SecurityTutorials` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-152">(In the non-Express Edition version of Visual Studio, the Database Explorer is called the Server Explorer.) Go to the Database Explorer and expand the just-added `SecurityTutorials` database.</span></span> <span data-ttu-id="5e1e2-153">화면에 데이터베이스 탐색기 표시 되지 않으면 보기 메뉴로 이동 하 여 데이터베이스 탐색기를 선택 하거나 Ctrl + Alt + S를 누릅니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-153">If you do not see the Database Explorer on screen, go to the View menu and choose Database Explorer, or hit Ctrl+Alt+S.</span></span> <span data-ttu-id="5e1e2-154">그림 2에 나와 있는 것 처럼 `SecurityTutorials` 데이터베이스는 비어 있습니다. 즉, 테이블, 뷰 및 저장 프로시저는 포함 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-154">As Figure 2 shows, the `SecurityTutorials` database is empty - it contains no tables, no views, and no stored procedures.</span></span>

<span data-ttu-id="5e1e2-155">[![SecurityTutorials 데이터베이스가 현재 비어 있습니다.](creating-the-membership-schema-in-sql-server-vb/_static/image5.png)](creating-the-membership-schema-in-sql-server-vb/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="5e1e2-155">[![The SecurityTutorials Database is Currently Empty](creating-the-membership-schema-in-sql-server-vb/_static/image5.png)](creating-the-membership-schema-in-sql-server-vb/_static/image4.png)</span></span>

<span data-ttu-id="5e1e2-156">**그림 2**: `SecurityTutorials` 데이터베이스가 현재 비어 있습니다 ([전체 크기 이미지를 보려면 클릭](creating-the-membership-schema-in-sql-server-vb/_static/image6.png)).</span><span class="sxs-lookup"><span data-stu-id="5e1e2-156">**Figure 2**: The `SecurityTutorials` Database is Currently Empty ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image6.png))</span></span>

## <a name="step-2-adding-thesqlmembershipproviderschema-to-the-database"></a><span data-ttu-id="5e1e2-157">2 단계: `SqlMembershipProvider` 데이터베이스에 스키마 추가</span><span class="sxs-lookup"><span data-stu-id="5e1e2-157">Step 2: Adding the`SqlMembershipProvider`Schema to the Database</span></span>

<span data-ttu-id="5e1e2-158">에서는 `SqlMembershipProvider` 사용자 저장소 데이터베이스에 특정 테이블, 뷰 및 저장 프로시저 집합을 설치 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-158">The `SqlMembershipProvider` requires a particular set of tables, views, and stored procedures to be installed in the user store database.</span></span> <span data-ttu-id="5e1e2-159">이러한 필수 데이터베이스 개체는 [ `aspnet_regsql.exe` 도구](https://msdn.microsoft.com/library/ms229862.aspx)를 사용 하 여 추가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-159">These requisite database objects can be added using the [`aspnet_regsql.exe` tool](https://msdn.microsoft.com/library/ms229862.aspx).</span></span> <span data-ttu-id="5e1e2-160">이 파일은 폴더에 있습니다 `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-160">This file is located in the `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder.</span></span>

> [!NOTE]
> <span data-ttu-id="5e1e2-161">이 `aspnet_regsql.exe` 도구는 명령줄 기능과 그래픽 사용자 인터페이스를 모두 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-161">The `aspnet_regsql.exe` tool offers both command line functionality and a graphical user interface.</span></span> <span data-ttu-id="5e1e2-162">그래픽 인터페이스는 보다 사용자에 게 친숙 하며이 자습서에서 살펴볼 것입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-162">The graphical interface is more user friendly and is what we will examine in this tutorial.</span></span> <span data-ttu-id="5e1e2-163">명령줄 인터페이스는 `SqlMembershipProvider` 빌드 스크립트 또는 자동화 된 테스트 시나리오에서 스키마 추가를 자동화 해야 하는 경우에 유용 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-163">The command line interface is useful when the addition of the `SqlMembershipProvider` schema needs to be automated, such as in build scripts or automated testing scenarios.</span></span>

<span data-ttu-id="5e1e2-164">`aspnet_regsql.exe`이 도구는 지정 된 SQL Server 데이터베이스에 *ASP.NET 응용 프로그램 서비스* 를 추가 하거나 제거 하는 데 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-164">The `aspnet_regsql.exe` tool is used to add or remove *ASP.NET application services* to a specified SQL Server database.</span></span> <span data-ttu-id="5e1e2-165">ASP.NET 응용 프로그램 서비스는 `SqlMembershipProvider` `SqlRoleProvider` 기타 ASP.NET 2.0 프레임 워크에 대 한 SQL 기반 공급자의 스키마와 함께 및의 스키마를 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-165">The ASP.NET application services encompass the schemas for the `SqlMembershipProvider` and `SqlRoleProvider`, along with the schemas for the SQL-based providers for other ASP.NET 2.0 frameworks.</span></span> <span data-ttu-id="5e1e2-166">도구에 두 가지 비트 정보를 제공 해야 합니다 `aspnet_regsql.exe` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-166">We need to provide two bits of information to the `aspnet_regsql.exe` tool:</span></span>

- <span data-ttu-id="5e1e2-167">응용 프로그램 서비스를 추가 하거나 제거할지 여부를 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-167">Whether we want to add or remove application services, and</span></span>
- <span data-ttu-id="5e1e2-168">응용 프로그램 서비스 스키마를 추가 하거나 제거할 데이터베이스입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-168">The database from which to add or remove the application services schema</span></span>

<span data-ttu-id="5e1e2-169">사용할 데이터베이스에 대 한 메시지를 표시 하는 경우이 `aspnet_regsql.exe` 도구는 데이터베이스가 있는 서버의 이름, 데이터베이스에 연결 하기 위한 보안 자격 증명 및 데이터베이스 이름을 제공 하도록 요청 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-169">In prompting for the database to use, the `aspnet_regsql.exe` tool asks us to provide the name of the server the database resides on, the security credentials for connecting to the database, and the database name.</span></span> <span data-ttu-id="5e1e2-170">SQL Server Express Edition 이외의 버전을 사용 하는 경우이 정보는 ASP.NET 웹 페이지를 통해 데이터베이스를 사용할 때 연결 문자열을 통해 제공 해야 하는 정보 이기 때문에 이미 알고 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-170">If you are using the non-Express Edition of SQL Server, you should already know this information, as it is the same information you must provide through a connection string when working with the database through an ASP.NET web page.</span></span> <span data-ttu-id="5e1e2-171">그러나 폴더에 SQL Server 2005 Express Edition 데이터베이스를 사용 하는 경우 서버와 데이터베이스 이름을 결정 하는 `App_Data` 것은 약간 더 복잡 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-171">Determining the server and database name when using a SQL Server 2005 Express Edition database in the `App_Data` folder, however, is a bit more involved.</span></span>

<span data-ttu-id="5e1e2-172">다음 섹션에서는 폴더의 SQL Server 2005 Express Edition 데이터베이스에 대 한 서버 및 데이터베이스 이름을 지정 하는 간단한 방법을 검사 합니다 `App_Data` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-172">The following section examines a straightforward way for specifying the server and database name for a SQL Server 2005 Express Edition database in the `App_Data` folder.</span></span> <span data-ttu-id="5e1e2-173">SQL Server 2005 Express Edition 사용 하지 않는 경우 애플리케이션 서비스 섹션 설치로 건너뛸 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-173">If you are not using SQL Server 2005 Express Edition feel free to skip ahead to the Installing the Application Services section.</span></span>

### <a name="determining-the-server-and-database-name-for-a-sql-server-2005-express-edition-database-in-theapp_datafolder"></a><span data-ttu-id="5e1e2-174">폴더의 SQL Server 2005 Express Edition 데이터베이스에 대 한 서버 및 데이터베이스 이름 확인 `App_Data`</span><span class="sxs-lookup"><span data-stu-id="5e1e2-174">Determining the Server and Database Name for a SQL Server 2005 Express Edition Database in the`App_Data`Folder</span></span>

<span data-ttu-id="5e1e2-175">이 도구를 사용 하려면 `aspnet_regsql.exe` 서버 및 데이터베이스 이름을 알아야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-175">In order to use the `aspnet_regsql.exe` tool we need to know the server and database names.</span></span> <span data-ttu-id="5e1e2-176">서버 이름은 `localhost\InstanceName` 입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-176">The server name is `localhost\InstanceName`.</span></span> <span data-ttu-id="5e1e2-177">*인스턴스* 이름이 (가) 가장 가능성이 높습니다 `SQLExpress` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-177">Most likely, the *InstanceName* is `SQLExpress`.</span></span> <span data-ttu-id="5e1e2-178">그러나 SQL Server 2005 Express Edition를 수동으로 설치한 경우 (즉, Visual Studio를 설치 하는 동안 자동으로 설치 하지 않은 경우) 다른 인스턴스 이름을 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-178">However, if you installed SQL Server 2005 Express Edition manually (that is, you did not install it automatically while installing Visual Studio), then it is possible that you selected a different instance name.</span></span>

<span data-ttu-id="5e1e2-179">데이터베이스 이름을 확인 하는 것이 다소 까다롭습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-179">The database name is a bit trickier to determine.</span></span> <span data-ttu-id="5e1e2-180">폴더의 데이터베이스에는 `App_Data` 일반적으로 데이터베이스 파일에 대 한 경로와 함께 [전역 고유 식별자](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) 가 포함 된 데이터베이스 이름이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-180">Databases in the `App_Data` folder typically have a database name that includes a [globally unique identifier](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) along with the path to the database file.</span></span> <span data-ttu-id="5e1e2-181">를 통해 응용 프로그램 서비스 스키마를 추가 하려면이 데이터베이스 이름을 결정 해야 `aspnet_regsql.exe` 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-181">We need to determine this database name in order to add the application services schema through `aspnet_regsql.exe`.</span></span>

<span data-ttu-id="5e1e2-182">데이터베이스 이름을 확인 하는 가장 쉬운 방법은 SQL Server Management Studio을 통해 확인 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-182">The easiest way to ascertain the database name is to examine it through SQL Server Management Studio.</span></span> <span data-ttu-id="5e1e2-183">SQL Server Management Studio는 SQL Server 2005 데이터베이스를 관리 하기 위한 그래픽 인터페이스를 제공 하지만 SQL Server 2005 Express 버전에는 제공 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-183">SQL Server Management Studio provides a graphical interface for managing SQL Server 2005 databases, but it does not ship with the Express Edition of SQL Server 2005.</span></span> <span data-ttu-id="5e1e2-184">SQL Server Management Studio 무료 Express 버전을 [다운로드할 수](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) 있는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-184">The good news is that [you can download](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) the free Express Edition of SQL Server Management Studio.</span></span>

> [!NOTE]
> <span data-ttu-id="5e1e2-185">SQL Server 2005의 Express 버전이 아닌 버전이 바탕 화면에 설치 되어 있는 경우 Management Studio의 전체 버전이 설치 될 가능성이 높습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-185">If you also have a non-Express Edition version of SQL Server 2005 installed on your desktop then the full version of Management Studio is likely installed.</span></span> <span data-ttu-id="5e1e2-186">Express Edition에 대해 아래에 설명 된 것과 동일한 단계에 따라 전체 버전을 사용 하 여 데이터베이스 이름을 결정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-186">You can use the full version to determine the database name, following the same steps as outlined below for the Express Edition.</span></span>

<span data-ttu-id="5e1e2-187">Visual Studio를 닫아 시작 하 여 데이터베이스 파일에서 Visual Studio에 적용 되는 모든 잠금이 닫혀 있는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-187">Start by closing Visual Studio to ensure that any locks imposed by Visual Studio on the database file are closed.</span></span> <span data-ttu-id="5e1e2-188">그런 다음 SQL Server Management Studio를 시작 하 고 `localhost\InstanceName` SQL Server 2005 Express Edition에 대 한 데이터베이스에 연결 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-188">Next, launch SQL Server Management Studio and connect to the `localhost\InstanceName` database for SQL Server 2005 Express Edition.</span></span> <span data-ttu-id="5e1e2-189">앞에서 설명한 것 처럼 인스턴스 이름은 `SQLExpress` 입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-189">As noted earlier, chances are the instance name is `SQLExpress`.</span></span> <span data-ttu-id="5e1e2-190">인증 옵션에 대해 Windows 인증을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-190">For the Authentication option, select Windows Authentication.</span></span>

<span data-ttu-id="5e1e2-191">[![SQL Server 2005 Express Edition 인스턴스에 연결](creating-the-membership-schema-in-sql-server-vb/_static/image8.png)](creating-the-membership-schema-in-sql-server-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="5e1e2-191">[![Connect to the SQL Server 2005 Express Edition Instance](creating-the-membership-schema-in-sql-server-vb/_static/image8.png)](creating-the-membership-schema-in-sql-server-vb/_static/image7.png)</span></span>

<span data-ttu-id="5e1e2-192">**그림 3**: SQL Server 2005 Express Edition 인스턴스에 연결 ([전체 크기 이미지를 보려면 클릭](creating-the-membership-schema-in-sql-server-vb/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="5e1e2-192">**Figure 3**: Connect to the SQL Server 2005 Express Edition Instance ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image9.png))</span></span>

<span data-ttu-id="5e1e2-193">SQL Server 2005 Express Edition 인스턴스에 연결한 후 Management Studio는 데이터베이스, 보안 설정, 서버 개체 등에 대 한 폴더를 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-193">After connecting to the SQL Server 2005 Express Edition instance, Management Studio displays folders for the Databases, the Security settings, the Server Objects, and so on.</span></span> <span data-ttu-id="5e1e2-194">데이터베이스 탭을 확장 하면 데이터베이스가 데이터베이스 인스턴스에 등록 되지 않은 것을 확인할 수 있습니다 `SecurityTutorials.mdf` . 먼저 데이터베이스를 *not* 연결 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-194">If you expand the Databases tab you will see that the `SecurityTutorials.mdf` database is *not* registered in the database instance - we need to attach the database first.</span></span>

<span data-ttu-id="5e1e2-195">데이터베이스 폴더를 마우스 오른쪽 단추로 클릭 하 고 상황에 맞는 메뉴에서 연결을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-195">Right-click on the Databases folder and choose Attach from the context menu.</span></span> <span data-ttu-id="5e1e2-196">그러면 데이터베이스 연결 대화 상자가 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-196">This will display the Attach Databases dialog box.</span></span> <span data-ttu-id="5e1e2-197">여기에서 추가 단추를 클릭 하 고 데이터베이스를 찾은 `SecurityTutorials.mdf` 다음 확인을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-197">From here, click the Add button, browse to the `SecurityTutorials.mdf` database, and click OK.</span></span> <span data-ttu-id="5e1e2-198">그림 4에서는 데이터베이스를 선택한 후 데이터베이스 연결 대화 상자를 보여 줍니다 `SecurityTutorials.mdf` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-198">Figure 4 shows the Attach Databases dialog box after the `SecurityTutorials.mdf` database has been selected.</span></span> <span data-ttu-id="5e1e2-199">그림 5는 데이터베이스가 성공적으로 연결 된 후의 개체 탐색기 Management Studio 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-199">Figure 5 shows Management Studio's Object Explorer after the database has been successfully attached.</span></span>

<span data-ttu-id="5e1e2-200">[![SecurityTutorials .mdf 데이터베이스를 연결 합니다.](creating-the-membership-schema-in-sql-server-vb/_static/image11.png)](creating-the-membership-schema-in-sql-server-vb/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="5e1e2-200">[![Attach the SecurityTutorials.mdf Database](creating-the-membership-schema-in-sql-server-vb/_static/image11.png)](creating-the-membership-schema-in-sql-server-vb/_static/image10.png)</span></span>

<span data-ttu-id="5e1e2-201">**그림 4**: 데이터베이스 연결 `SecurityTutorials.mdf` ([전체 크기 이미지를 보려면 클릭](creating-the-membership-schema-in-sql-server-vb/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="5e1e2-201">**Figure 4**: Attach the `SecurityTutorials.mdf` Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image12.png))</span></span>

<span data-ttu-id="5e1e2-202">[![SecurityTutorials .mdf 데이터베이스가 Databases 폴더에 나타납니다.](creating-the-membership-schema-in-sql-server-vb/_static/image14.png)](creating-the-membership-schema-in-sql-server-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="5e1e2-202">[![The SecurityTutorials.mdf Database Appears in the Databases Folder](creating-the-membership-schema-in-sql-server-vb/_static/image14.png)](creating-the-membership-schema-in-sql-server-vb/_static/image13.png)</span></span>

<span data-ttu-id="5e1e2-203">**그림 5**: `SecurityTutorials.mdf` 데이터베이스 폴더에 표시 되는 데이터베이스 ([전체 크기 이미지를 보려면 클릭](creating-the-membership-schema-in-sql-server-vb/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="5e1e2-203">**Figure 5**: The `SecurityTutorials.mdf` Database Appears in the Databases Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image15.png))</span></span>

<span data-ttu-id="5e1e2-204">그림 5에 표시 된 것 처럼 `SecurityTutorials.mdf` 데이터베이스에는 대신 abstruse 이름이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-204">As Figure 5 shows, the `SecurityTutorials.mdf` database has a rather abstruse name.</span></span> <span data-ttu-id="5e1e2-205">더 기억 하기 쉬운 (형식) 이름으로 변경해 보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-205">Let's change it to a more memorable (and easier to type) name.</span></span> <span data-ttu-id="5e1e2-206">데이터베이스를 마우스 오른쪽 단추로 클릭 하 고 상황에 맞는 메뉴에서 이름 바꾸기를 선택한 다음 이름을 바꿉니다 `SecurityTutorialsDatabase` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-206">Right-click on the database, choose Rename from the context menu, and rename it `SecurityTutorialsDatabase`.</span></span> <span data-ttu-id="5e1e2-207">이는 파일 이름을 변경 하지 않습니다. 데이터베이스에서 SQL Server를 식별 하는 데 사용 하는 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-207">This does not change the filename, just the name the database uses to identify itself to SQL Server.</span></span>

<span data-ttu-id="5e1e2-208">[![데이터베이스 이름을 SecurityTutorialsDatabase로 바꿉니다.](creating-the-membership-schema-in-sql-server-vb/_static/image17.png)](creating-the-membership-schema-in-sql-server-vb/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="5e1e2-208">[![Rename the Database to SecurityTutorialsDatabase](creating-the-membership-schema-in-sql-server-vb/_static/image17.png)](creating-the-membership-schema-in-sql-server-vb/_static/image16.png)</span></span>

<span data-ttu-id="5e1e2-209">**그림 6**: 데이터베이스 이름 바꾸기 `SecurityTutorialsDatabase` ([전체 크기 이미지를 보려면 클릭](creating-the-membership-schema-in-sql-server-vb/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="5e1e2-209">**Figure 6**: Rename the Database to `SecurityTutorialsDatabase`([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image18.png))</span></span>

<span data-ttu-id="5e1e2-210">이 시점에서 데이터베이스 파일에 대 한 서버 및 데이터베이스 이름 `SecurityTutorials.mdf` (각각 및)을 알 수 `localhost\InstanceName` `SecurityTutorialsDatabase` 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-210">At this point we know the server and database names for the `SecurityTutorials.mdf` database file: `localhost\InstanceName` and `SecurityTutorialsDatabase`, respectively.</span></span> <span data-ttu-id="5e1e2-211">이제 도구를 통해 응용 프로그램 서비스를 설치할 준비가 되었습니다 `aspnet_regsql.exe` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-211">We are now ready to install the application services through the `aspnet_regsql.exe` tool.</span></span>

### <a name="installing-the-application-services"></a><span data-ttu-id="5e1e2-212">애플리케이션 서비스 설치</span><span class="sxs-lookup"><span data-stu-id="5e1e2-212">Installing the Application Services</span></span>

<span data-ttu-id="5e1e2-213">도구를 시작 하려면 `aspnet_regsql.exe` 시작 메뉴로 이동 하 여 실행을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-213">To launch the `aspnet_regsql.exe` tool, go to the start menu and choose Run.</span></span> <span data-ttu-id="5e1e2-214">`%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe`텍스트 상자에를 입력 하 고 확인을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-214">Enter `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe` into the textbox and click OK.</span></span> <span data-ttu-id="5e1e2-215">또는 Windows 탐색기를 사용 하 여 적절 한 폴더로 드릴 다운 하 고 해당 파일을 두 번 클릭 `aspnet_regsql.exe` 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-215">Alternatively, you can use Windows Explorer to drill down to the appropriate folder and double-click the `aspnet_regsql.exe` file.</span></span> <span data-ttu-id="5e1e2-216">두 방법 모두 동일한 결과를 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-216">Either approach will net the same results.</span></span>

<span data-ttu-id="5e1e2-217">`aspnet_regsql.exe`명령줄 인수 없이 도구를 실행 하면 ASP.NET SQL Server 설치 마법사 그래픽 사용자 인터페이스가 시작 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-217">Running the `aspnet_regsql.exe` tool without any command line arguments launches the ASP.NET SQL Server Setup Wizard graphical user interface.</span></span> <span data-ttu-id="5e1e2-218">이 마법사를 사용 하면 지정 된 데이터베이스에서 ASP.NET 응용 프로그램 서비스를 쉽게 추가 하거나 제거할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-218">The wizard makes it easy to add or remove the ASP.NET application services on a specified database.</span></span> <span data-ttu-id="5e1e2-219">그림 7에 표시 된 마법사의 첫 번째 화면에서는 도구의 용도를 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-219">The first screen of the wizard, shown in Figure 7, describes the purpose of the tool.</span></span>

<span data-ttu-id="5e1e2-220">[![ASP.NET SQL Server 설치 마법사를 사용 하 여 멤버 자격 스키마를 추가 합니다.](creating-the-membership-schema-in-sql-server-vb/_static/image20.png)](creating-the-membership-schema-in-sql-server-vb/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="5e1e2-220">[![Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema](creating-the-membership-schema-in-sql-server-vb/_static/image20.png)](creating-the-membership-schema-in-sql-server-vb/_static/image19.png)</span></span>

<span data-ttu-id="5e1e2-221">**그림 7**: ASP.NET SQL Server 설치 마법사를 사용 하 여 멤버 자격 스키마 추가 ([전체 크기 이미지를 보려면 클릭](creating-the-membership-schema-in-sql-server-vb/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="5e1e2-221">**Figure 7**: Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image21.png))</span></span>

<span data-ttu-id="5e1e2-222">마법사의 두 번째 단계에서는 응용 프로그램 서비스를 추가할지 아니면 제거할지를 묻는 메시지를 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-222">The second step in the wizard asks us whether we want to add the application services or remove them.</span></span> <span data-ttu-id="5e1e2-223">에 필요한 테이블, 뷰 및 저장 프로시저를 추가 하려고 하므로 `SqlMembershipProvider` 응용 프로그램 서비스에 대 한 SQL Server 구성 옵션을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-223">Since we want to add the tables, views, and stored procedures necessary for the `SqlMembershipProvider`, choose the Configure SQL Server for application services option.</span></span> <span data-ttu-id="5e1e2-224">나중에이 스키마를 데이터베이스에서 제거 하려면이 마법사를 다시 실행 하 고, 대신 기존 데이터베이스에서 응용 프로그램 서비스 정보 제거 옵션을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-224">Later, if you want to remove this schema from your database, re-run this wizard, but instead choose the Remove application services information from an existing database option.</span></span>

<span data-ttu-id="5e1e2-225">[![애플리케이션 서비스에 대 한 SQL Server 구성 옵션을 선택 합니다.](creating-the-membership-schema-in-sql-server-vb/_static/image23.png)](creating-the-membership-schema-in-sql-server-vb/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="5e1e2-225">[![Choose the Configure SQL Server for Application Services Option](creating-the-membership-schema-in-sql-server-vb/_static/image23.png)](creating-the-membership-schema-in-sql-server-vb/_static/image22.png)</span></span>

<span data-ttu-id="5e1e2-226">**그림 8**: 애플리케이션 서비스에 대 한 SQL Server 구성 옵션 선택 ([전체 크기 이미지를 보려면 클릭](creating-the-membership-schema-in-sql-server-vb/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="5e1e2-226">**Figure 8**: Choose the Configure SQL Server for Application Services Option ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image24.png))</span></span>

<span data-ttu-id="5e1e2-227">세 번째 단계에서는 데이터베이스 정보 (서버 이름, 인증 정보 및 데이터베이스 이름)를 묻는 메시지를 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-227">The third step prompts for the database information: the server name, authentication information, and the database name.</span></span> <span data-ttu-id="5e1e2-228">이 자습서와 함께 작업을 수행 하 고 데이터베이스를에 추가 하 고에 `SecurityTutorials.mdf` `App_Data` 연결 하 `localhost\InstanceName` 고 이름을로 바꾼 경우에 `SecurityTutorialsDatabase` 는 다음 값을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-228">If you have been following along with this tutorial and have added the `SecurityTutorials.mdf` database to `App_Data`, attached it to `localhost\InstanceName`, and renamed it to `SecurityTutorialsDatabase`, then use the following values:</span></span>

- <span data-ttu-id="5e1e2-229">서버: `localhost\InstanceName`</span><span class="sxs-lookup"><span data-stu-id="5e1e2-229">Server: `localhost\InstanceName`</span></span>
- <span data-ttu-id="5e1e2-230">Windows 인증</span><span class="sxs-lookup"><span data-stu-id="5e1e2-230">Windows authentication</span></span>
- <span data-ttu-id="5e1e2-231">데이터 `SecurityTutorialsDatabase`</span><span class="sxs-lookup"><span data-stu-id="5e1e2-231">Database: `SecurityTutorialsDatabase`</span></span>

<span data-ttu-id="5e1e2-232">[![데이터베이스 정보 입력](creating-the-membership-schema-in-sql-server-vb/_static/image26.png)](creating-the-membership-schema-in-sql-server-vb/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="5e1e2-232">[![Enter the Database Information](creating-the-membership-schema-in-sql-server-vb/_static/image26.png)](creating-the-membership-schema-in-sql-server-vb/_static/image25.png)</span></span>

<span data-ttu-id="5e1e2-233">**그림 9**: 데이터베이스 정보 입력 ([전체 크기 이미지를 보려면 클릭](creating-the-membership-schema-in-sql-server-vb/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="5e1e2-233">**Figure 9**: Enter the Database Information ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image27.png))</span></span>

<span data-ttu-id="5e1e2-234">데이터베이스 정보를 입력 한 후 다음을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-234">After entering the database information, click Next.</span></span> <span data-ttu-id="5e1e2-235">마지막 단계에서는 수행 되는 단계를 요약 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-235">The final step summarizes the steps that will be taken.</span></span> <span data-ttu-id="5e1e2-236">다음을 클릭 하 여 응용 프로그램 서비스를 설치한 후 마침을 클릭 하 여 마법사를 완료 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-236">Click Next to install the application services and then Finish to complete the wizard.</span></span>

> [!NOTE]
> <span data-ttu-id="5e1e2-237">Management Studio를 사용 하 여 데이터베이스를 연결 하 고 데이터베이스 파일의 이름을 바꾼 경우에는 데이터베이스를 분리 하 고 Visual Studio를 다시 열기 전에 Management Studio를 닫아야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-237">If you used Management Studio to attach the database and rename the database file, be sure to detach the database and close Management Studio before reopening Visual Studio.</span></span> <span data-ttu-id="5e1e2-238">데이터베이스를 분리 하려면 `SecurityTutorialsDatabase` 데이터베이스 이름을 마우스 오른쪽 단추로 클릭 하 고 작업 메뉴에서 분리를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-238">To detach the `SecurityTutorialsDatabase` database, right-click on the database name and, from the Tasks menu, choose Detach.</span></span>

<span data-ttu-id="5e1e2-239">마법사가 완료 되 면 Visual Studio로 돌아가서 데이터베이스 탐색기로 이동 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-239">Upon completion of the wizard, return to Visual Studio and navigate to the Database Explorer.</span></span> <span data-ttu-id="5e1e2-240">테이블 폴더를 확장합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-240">Expand the Tables folder.</span></span> <span data-ttu-id="5e1e2-241">이름이 접두사로 시작 하는 일련의 테이블이 표시 됩니다 `aspnet_` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-241">You should see a series of tables whose names start with the prefix `aspnet_`.</span></span> <span data-ttu-id="5e1e2-242">마찬가지로 뷰 및 저장 프로시저 폴더 아래에서 다양 한 뷰 및 저장 프로시저를 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-242">Likewise, a variety of views and stored procedures can be found under the Views and Stored Procedures folders.</span></span> <span data-ttu-id="5e1e2-243">이러한 데이터베이스 개체는 응용 프로그램 서비스 스키마를 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-243">These database objects make up the application services schema.</span></span> <span data-ttu-id="5e1e2-244">3 단계에서 멤버 자격 및 역할 관련 데이터베이스 개체를 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-244">We will examine the membership- and role-specific database objects in Step 3.</span></span>

<span data-ttu-id="5e1e2-245">[![다양 한 테이블, 뷰 및 저장 프로시저가 데이터베이스에 추가 되었습니다.](creating-the-membership-schema-in-sql-server-vb/_static/image29.png)](creating-the-membership-schema-in-sql-server-vb/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="5e1e2-245">[![A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database](creating-the-membership-schema-in-sql-server-vb/_static/image29.png)](creating-the-membership-schema-in-sql-server-vb/_static/image28.png)</span></span>

<span data-ttu-id="5e1e2-246">**그림 10**: 다양 한 테이블, 뷰 및 저장 프로시저가 데이터베이스에 추가 되었습니다 ([전체 크기 이미지를 보려면 클릭](creating-the-membership-schema-in-sql-server-vb/_static/image30.png)).</span><span class="sxs-lookup"><span data-stu-id="5e1e2-246">**Figure 10**: A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image30.png))</span></span>

> [!NOTE]
> <span data-ttu-id="5e1e2-247">`aspnet_regsql.exe`도구의 그래픽 사용자 인터페이스는 전체 응용 프로그램 서비스 스키마를 설치 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-247">The `aspnet_regsql.exe` tool's graphical user interface installs the entire application services schema.</span></span> <span data-ttu-id="5e1e2-248">그러나 `aspnet_regsql.exe` 명령줄에서 실행 하는 경우 설치할 특정 응용 프로그램 서비스 구성 요소를 지정할 수 있습니다 (또는 제거).</span><span class="sxs-lookup"><span data-stu-id="5e1e2-248">But when executing `aspnet_regsql.exe` from the command-line you can specify what particular application services components to install (or remove).</span></span> <span data-ttu-id="5e1e2-249">따라서 및 공급자에 필요한 테이블, 뷰 및 저장 프로시저만 추가 하려면 `SqlMembershipProvider` `SqlRoleProvider` 명령줄에서를 실행 합니다 `aspnet_regsql.exe` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-249">Therefore, if you want to add just the tables, views, and stored procedures necessary for the `SqlMembershipProvider` and `SqlRoleProvider` providers, run `aspnet_regsql.exe` from the command-line.</span></span> <span data-ttu-id="5e1e2-250">또는에서 사용 하는 T-sql 만들기 스크립트의 해당 하위 집합을 수동으로 실행할 수 있습니다 `aspnet_regsql.exe` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-250">Alternatively, you can manually run the appropriate subset of T-SQL create scripts used by `aspnet_regsql.exe`.</span></span> <span data-ttu-id="5e1e2-251">이러한 스크립트는 이름이,,,, 등과 `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` 같은 폴더에 있습니다 `InstallCommon.sql` `InstallMembership.sql` `InstallRoles.sql` `InstallProfile.sql` `InstallSqlState.sql` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-251">These scripts are located in the `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder with names like `InstallCommon.sql`, `InstallMembership.sql`, `InstallRoles.sql`, `InstallProfile.sql`, `InstallSqlState.sql`, and so on.</span></span>

<span data-ttu-id="5e1e2-252">이 시점에서에 필요한 데이터베이스 개체를 만들었습니다 `SqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-252">At this point we have created the database objects needed by the `SqlMembershipProvider`.</span></span> <span data-ttu-id="5e1e2-253">그러나를 사용 해야 한다는 것을 멤버 자격 프레임 워크에 지시 해야 합니다. 즉,를 사용 해야 하 고에서는 데이터베이스를 사용 해야 합니다 `SqlMembershipProvider` `ActiveDirectoryMembershipProvider` `SqlMembershipProvider` `SecurityTutorials` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-253">However, we still need to instruct the Membership framework that it should use the `SqlMembershipProvider` (versus, say, the `ActiveDirectoryMembershipProvider`) and that the `SqlMembershipProvider` should use the `SecurityTutorials` database.</span></span> <span data-ttu-id="5e1e2-254">사용할 공급자를 지정 하는 방법 및 4 단계에서 선택한 공급자의 설정을 사용자 지정 하는 방법을 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-254">We'll look at how to specify what provider to use and how to customize the selected provider's settings in Step 4.</span></span> <span data-ttu-id="5e1e2-255">하지만 먼저 방금 만든 데이터베이스 개체를 자세히 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-255">But first, let's take a deeper look at the database objects that were just created.</span></span>

## <a name="step-3-a-look-at-the-schemas-core-tables"></a><span data-ttu-id="5e1e2-256">3 단계: 스키마의 핵심 테이블 살펴보기</span><span class="sxs-lookup"><span data-stu-id="5e1e2-256">Step 3: A Look at the Schema's Core Tables</span></span>

<span data-ttu-id="5e1e2-257">ASP.NET 응용 프로그램의 멤버 자격 및 역할 프레임 워크를 사용 하는 경우 구현 세부 정보는 공급자에 의해 캡슐화 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-257">When working with the Membership and Roles frameworks in an ASP.NET application, the implementation details are encapsulated by the provider.</span></span> <span data-ttu-id="5e1e2-258">이후 자습서에서는 .NET Framework 및 클래스를 통해 이러한 프레임 워크와 상호 `Membership` 작용 `Roles` 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-258">In future tutorials we will interface with these frameworks via the .NET Framework's `Membership` and `Roles` classes.</span></span> <span data-ttu-id="5e1e2-259">이러한 높은 수준의 Api를 사용 하는 경우 실행 되는 쿼리 또는 및에서 수정 되는 테이블과 같은 하위 수준 세부 정보를 고려 하지 않아도 됩니다 `SqlMembershipProvider` `SqlRoleProvider` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-259">When using these high-level APIs we do not need to concern ourselves with the low-level details, like what queries are executed or what tables are modified by the `SqlMembershipProvider` and `SqlRoleProvider`.</span></span>

<span data-ttu-id="5e1e2-260">이를 고려 하 여 2 단계에서 만든 데이터베이스 스키마를 탐색 하지 않고도 멤버 자격과 역할 프레임 워크를 안전 하 게 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-260">Given this, we could confidently use the Membership and Roles frameworks without having explored the database schema created in Step 2.</span></span> <span data-ttu-id="5e1e2-261">그러나 응용 프로그램 데이터를 저장 하는 테이블을 만들 때 사용자 또는 역할과 관련 된 엔터티를 만들어야 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-261">However, when creating the tables to store application data we may need to create entities that relate to users or roles.</span></span> <span data-ttu-id="5e1e2-262">`SqlMembershipProvider` `SqlRoleProvider` 응용 프로그램 데이터 테이블과 2 단계에서 만든 테이블 사이에 foreign key 제약 조건을 설정할 때 및 스키마를 잘 이해 하는 데 도움이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-262">It helps to have a familiarity with the `SqlMembershipProvider` and `SqlRoleProvider` schemas when establishing foreign key constraints between the application data tables and those tables created in Step 2.</span></span> <span data-ttu-id="5e1e2-263">또한 드문 경우 지만 또는 클래스를 통하지 않고 데이터베이스 수준에서 직접 사용자 및 역할 저장소와 상호 작용 해야 할 수도 있습니다 `Membership` `Roles` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-263">Moreover, in certain rare circumstances we may need to interface with the user and role stores directly at the database level (instead of through the `Membership` or `Roles` classes).</span></span>

### <a name="partitioning-the-user-store-into-applications"></a><span data-ttu-id="5e1e2-264">사용자 저장소를 응용 프로그램으로 분할</span><span class="sxs-lookup"><span data-stu-id="5e1e2-264">Partitioning the User Store Into Applications</span></span>

<span data-ttu-id="5e1e2-265">멤버 자격 및 역할 프레임 워크는 여러 응용 프로그램 간에 단일 사용자 및 역할 저장소를 공유할 수 있도록 설계 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-265">The Membership and Roles frameworks are designed such that a single user and role store can be shared among many different applications.</span></span> <span data-ttu-id="5e1e2-266">멤버 자격 또는 역할 프레임 워크를 사용 하는 ASP.NET 응용 프로그램은 사용할 응용 프로그램 파티션을 지정 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-266">An ASP.NET application that uses the Membership or Roles frameworks must specify what application partition to use.</span></span> <span data-ttu-id="5e1e2-267">간단히 말해서 여러 웹 응용 프로그램에서 동일한 사용자 및 역할 저장소를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-267">In short, multiple web applications can use the same user and role stores.</span></span> <span data-ttu-id="5e1e2-268">그림 11에서는 HRSite, CustomerSite 및 SalesSite의 세 가지 응용 프로그램으로 분할 된 사용자 및 역할 저장소를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-268">Figure 11 depicts user and role stores that are partitioned into three applications: HRSite, CustomerSite, and SalesSite.</span></span> <span data-ttu-id="5e1e2-269">이러한 세 웹 응용 프로그램은 각각 고유한 사용자 및 역할을 포함 하지만 모두 동일한 데이터베이스 테이블에 사용자 계정 및 역할 정보를 실제로 저장 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-269">These three web applications each have their own unique users and roles, yet they all physically store their user account and role information in the same database tables.</span></span>

<span data-ttu-id="5e1e2-270">[![사용자 계정은 여러 응용 프로그램에서 분할 될 수 있습니다.](creating-the-membership-schema-in-sql-server-vb/_static/image32.png)](creating-the-membership-schema-in-sql-server-vb/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="5e1e2-270">[![User Accounts May Be Partitioned Across Multiple Applications](creating-the-membership-schema-in-sql-server-vb/_static/image32.png)](creating-the-membership-schema-in-sql-server-vb/_static/image31.png)</span></span>

<span data-ttu-id="5e1e2-271">**그림 11**: 사용자 계정이 여러 응용 프로그램에서 분할 될 수 있습니다 ([전체 크기 이미지를 보려면 클릭](creating-the-membership-schema-in-sql-server-vb/_static/image33.png)).</span><span class="sxs-lookup"><span data-stu-id="5e1e2-271">**Figure 11**: User Accounts May Be Partitioned Across Multiple Applications ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image33.png))</span></span>

<span data-ttu-id="5e1e2-272">`aspnet_Applications`테이블은 이러한 파티션을 정의 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-272">The `aspnet_Applications` table is what defines these partitions.</span></span> <span data-ttu-id="5e1e2-273">데이터베이스를 사용 하 여 사용자 계정 정보를 저장 하는 각 응용 프로그램은이 테이블의 행으로 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-273">Each application that uses the database to store user account information is represented by a row in this table.</span></span> <span data-ttu-id="5e1e2-274">테이블에는 `aspnet_Applications` `ApplicationId` ,, `ApplicationName` `LoweredApplicationName` 및 열 4 개가 `Description` 있습니다.`ApplicationId`</span><span class="sxs-lookup"><span data-stu-id="5e1e2-274">The `aspnet_Applications` table has four columns: `ApplicationId`, `ApplicationName`, `LoweredApplicationName`, and `Description`.`ApplicationId`</span></span> <span data-ttu-id="5e1e2-275">는 형식이 [`uniqueidentifier`](https://msdn.microsoft.com/library/ms187942.aspx) 고은 테이블의 기본 키입니다 .는 `ApplicationName` 각 응용 프로그램에 대 한 고유한 이름을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-275">is of type [`uniqueidentifier`](https://msdn.microsoft.com/library/ms187942.aspx) and is the table's primary key; `ApplicationName` provides a unique human-friendly name for each application.</span></span>

<span data-ttu-id="5e1e2-276">다른 멤버 자격 및 역할 관련 테이블은의 필드에 다시 연결 `ApplicationId` `aspnet_Applications` 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-276">The other Membership- and Role-related tables link back to the `ApplicationId` field in `aspnet_Applications`.</span></span> <span data-ttu-id="5e1e2-277">예를 `aspnet_Users` 들어 각 사용자 계정에 대 한 레코드를 포함 하는 테이블에는 `ApplicationId` 테이블에 대 한 외래 키 필드인 ditto이 있습니다 `aspnet_Roles` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-277">For example, the `aspnet_Users` table, which contains a record for each user account, has an `ApplicationId` foreign key field; ditto for the `aspnet_Roles` table.</span></span> <span data-ttu-id="5e1e2-278">`ApplicationId`이러한 테이블의 필드는 사용자 계정 또는 역할이 속한 응용 프로그램 파티션을 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-278">The `ApplicationId` field in these tables specifies the application partition the user account or role belongs to.</span></span>

### <a name="storing-user-account-information"></a><span data-ttu-id="5e1e2-279">사용자 계정 정보 저장</span><span class="sxs-lookup"><span data-stu-id="5e1e2-279">Storing User Account Information</span></span>

<span data-ttu-id="5e1e2-280">사용자 계정 정보는 및의 두 테이블에 `aspnet_Users` `aspnet_Membership` 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-280">User account information is housed in two tables: `aspnet_Users` and `aspnet_Membership`.</span></span> <span data-ttu-id="5e1e2-281">테이블에는 `aspnet_Users` 필수 사용자 계정 정보를 저장 하는 필드가 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-281">The `aspnet_Users` table contains fields that hold the essential user account information.</span></span> <span data-ttu-id="5e1e2-282">가장 관련성이 높은 세 열은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-282">The three most pertinent columns are:</span></span>

- `UserId`
- `UserName`
- `ApplicationId`

<span data-ttu-id="5e1e2-283">`UserId` 는 기본 키 (형식 `uniqueidentifier` )입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-283">`UserId` is the primary key (and of type `uniqueidentifier`).</span></span> <span data-ttu-id="5e1e2-284">`UserName` 는 형식이 `nvarchar(256)` 며 암호와 함께 사용자의 자격 증명을 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-284">`UserName` is of type `nvarchar(256)` and, along with the password, makes up the user's credentials.</span></span> <span data-ttu-id="5e1e2-285">사용자의 암호는 테이블에 저장 됩니다 `aspnet_Membership` . `ApplicationId` 사용자 계정을의 특정 응용 프로그램에 연결 `aspnet_Applications` 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-285">(A user's password is stored in the `aspnet_Membership` table.) `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="5e1e2-286">및 열에 복합 [ `UNIQUE` 제약 조건이](https://msdn.microsoft.com/library/ms191166.aspx) 있습니다 `UserName` `ApplicationId` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-286">There is a composite [`UNIQUE` constraint](https://msdn.microsoft.com/library/ms191166.aspx) on the `UserName` and `ApplicationId` columns.</span></span> <span data-ttu-id="5e1e2-287">이렇게 하면 지정 된 응용 프로그램에서 각 사용자 이름이 고유 하지만 `UserName` 다른 응용 프로그램에서 동일한를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-287">This ensures that in a given application each UserName is unique, yet it allows for the same `UserName` to be used in different applications.</span></span>

<span data-ttu-id="5e1e2-288">테이블에는 `aspnet_Membership` 사용자의 암호, 전자 메일 주소, 마지막 로그인 날짜 및 시간과 같은 추가 사용자 계정 정보가 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-288">The `aspnet_Membership` table includes additional user account information, like the user's password, email address, the last login date and time, and so forth.</span></span> <span data-ttu-id="5e1e2-289">및 테이블의 레코드 간에는 일 대 일 상관 관계가 있습니다 `aspnet_Users` `aspnet_Membership` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-289">There is a one-to-one correspondence between records in the `aspnet_Users` and `aspnet_Membership` tables.</span></span> <span data-ttu-id="5e1e2-290">이 관계는 `UserId` `aspnet_Membership` 테이블의 기본 키로 사용 되는의 필드에 의해 보장 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-290">This relationship is ensured by the `UserId` field in `aspnet_Membership`, which serves as the table's primary key.</span></span> <span data-ttu-id="5e1e2-291">테이블과 마찬가지로 `aspnet_Users` 에는 `aspnet_Membership` `ApplicationId` 이 정보를 특정 응용 프로그램 파티션에 연결 하는 필드가 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-291">Like the `aspnet_Users` table, `aspnet_Membership` includes an `ApplicationId` field that ties this information to a particular application partition.</span></span>

### <a name="securing-passwords"></a><span data-ttu-id="5e1e2-292">암호 보안</span><span class="sxs-lookup"><span data-stu-id="5e1e2-292">Securing Passwords</span></span>

<span data-ttu-id="5e1e2-293">암호 정보는 테이블에 저장 됩니다 `aspnet_Membership` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-293">Password information is stored in the `aspnet_Membership` table.</span></span> <span data-ttu-id="5e1e2-294">에서는 `SqlMembershipProvider` 다음 세 가지 방법 중 하나를 사용 하 여 데이터베이스에 암호를 저장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-294">The `SqlMembershipProvider` allows for passwords to be stored in the database using one of the following three techniques:</span></span>

- <span data-ttu-id="5e1e2-295">**Clear** -암호가 데이터베이스에 일반 텍스트로 저장 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-295">**Clear** - the password is stored in the database as plain-text.</span></span> <span data-ttu-id="5e1e2-296">이 옵션을 사용 하지 않는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-296">I strongly discourage using this option.</span></span> <span data-ttu-id="5e1e2-297">데이터베이스가 손상 된 경우, 백 도어를 검색 하는 해커 또는 데이터베이스 액세스 권한이 있는 불만 직원에 의해 it를 받을 수 있습니다. 모든 단일 사용자의 자격 증명이 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-297">If the database is compromised - be it by a hacker who finds a back door or a disgruntled employee who has database access - every single user's credentials are there for the taking.</span></span>
- <span data-ttu-id="5e1e2-298">**해시** 된 암호는 단방향 해시 알고리즘 및 임의로 생성 된 솔트 값을 사용 하 여 해시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-298">**Hashed** - passwords are hashed using a one-way hash algorithm and a randomly generated salt value.</span></span> <span data-ttu-id="5e1e2-299">이 해시 된 값 (솔트와 함께)은 데이터베이스에 저장 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-299">This hashed value (along with the salt) is stored in the database.</span></span>
- <span data-ttu-id="5e1e2-300">**암호화** 됨-암호화 된 버전의 암호가 데이터베이스에 저장 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-300">**Encrypted** - an encrypted version of the password is stored in the database.</span></span>

<span data-ttu-id="5e1e2-301">사용 되는 암호 저장소 기술은에 지정 된 설정에 따라 달라 집니다 `SqlMembershipProvider` `Web.config` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-301">The password storage technique used depends on the `SqlMembershipProvider` settings specified in `Web.config`.</span></span> <span data-ttu-id="5e1e2-302">4 단계에서 설정을 사용자 지정 하는 방법을 살펴보겠습니다 `SqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-302">We will look at customizing the `SqlMembershipProvider` settings in Step 4.</span></span> <span data-ttu-id="5e1e2-303">기본 동작은 암호의 해시를 저장 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-303">The default behavior is to store the hash of the password.</span></span>

<span data-ttu-id="5e1e2-304">암호 저장을 담당 하는 열은 `Password` , `PasswordFormat` 및 `PasswordSalt` 입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-304">The columns responsible for storing the password are `Password`, `PasswordFormat`, and `PasswordSalt`.</span></span> <span data-ttu-id="5e1e2-305">`PasswordFormat` 는 `int` 암호를 저장 하는 데 사용 되는 기술을 나타내는 값을 갖는 형식의 필드입니다. Clear의 경우 0, 해시의 경우 1, 암호화의 경우 2입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-305">`PasswordFormat` is a field of type `int` whose value indicates the technique used for storing the password: 0 for Clear; 1 for Hashed; 2 for Encrypted.</span></span> <span data-ttu-id="5e1e2-306">`PasswordSalt` 사용 된 암호 저장소 기술에 관계 없이 임의로 생성 된 문자열이 할당 됩니다. 값은 `PasswordSalt` 암호의 해시를 계산 하는 경우에만 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-306">`PasswordSalt` is assigned a randomly generated string regardless of the password storage technique used; the value of `PasswordSalt` is only used when computing the hash of the password.</span></span> <span data-ttu-id="5e1e2-307">마지막으로, `Password` 열에는 실제 암호 데이터, 일반 텍스트 암호, 암호 해시 또는 암호화 된 암호가 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-307">Finally, the `Password` column contains the actual password data, be it the plain-text password, the hash of the password, or the encrypted password.</span></span>

<span data-ttu-id="5e1e2-308">표 1에서는 암호 MySecret을 저장할 때 다양 한 저장소 기술에 대해 이러한 세 개의 열이 어떻게 표시 될 수 있는지를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-308">Table 1 illustrates what these three columns might look like for the various storage techniques when storing the password MySecret!</span></span> <span data-ttu-id="5e1e2-309">.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-309">.</span></span>

| <span data-ttu-id="5e1e2-310">**저장소 기술 &lt; \_ o3a \_ p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="5e1e2-310">**Storage Technique&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="5e1e2-311">**암호 &lt; \_ o3a \_ p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="5e1e2-311">**Password&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="5e1e2-312">**PasswordFormat &lt; \_ o3a \_ p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="5e1e2-312">**PasswordFormat&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="5e1e2-313">**PasswordSalt &lt; \_ o3a \_ p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="5e1e2-313">**PasswordSalt&lt;\_o3a\_p /&gt;**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="5e1e2-314">지우기</span><span class="sxs-lookup"><span data-stu-id="5e1e2-314">Clear</span></span> | <span data-ttu-id="5e1e2-315">MySecret!</span><span class="sxs-lookup"><span data-stu-id="5e1e2-315">MySecret!</span></span> | <span data-ttu-id="5e1e2-316">0</span><span class="sxs-lookup"><span data-stu-id="5e1e2-316">0</span></span> | <span data-ttu-id="5e1e2-317">tTnkPlesqissc2y2SMEygA = =</span><span class="sxs-lookup"><span data-stu-id="5e1e2-317">tTnkPlesqissc2y2SMEygA==</span></span> |
| <span data-ttu-id="5e1e2-318">된</span><span class="sxs-lookup"><span data-stu-id="5e1e2-318">Hashed</span></span> | <span data-ttu-id="5e1e2-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM =</span><span class="sxs-lookup"><span data-stu-id="5e1e2-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM=</span></span> | <span data-ttu-id="5e1e2-320">1</span><span class="sxs-lookup"><span data-stu-id="5e1e2-320">1</span></span> | <span data-ttu-id="5e1e2-321">wFgjUfhdUFOCKQiI61vtiQ = =</span><span class="sxs-lookup"><span data-stu-id="5e1e2-321">wFgjUfhdUFOCKQiI61vtiQ==</span></span> |
| <span data-ttu-id="5e1e2-322">암호화됨</span><span class="sxs-lookup"><span data-stu-id="5e1e2-322">Encrypted</span></span> | <span data-ttu-id="5e1e2-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span><span class="sxs-lookup"><span data-stu-id="5e1e2-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span></span> | <span data-ttu-id="5e1e2-324">2</span><span class="sxs-lookup"><span data-stu-id="5e1e2-324">2</span></span> | <span data-ttu-id="5e1e2-325">LSRzhGS/aa/oqAXGLHJNBw = =</span><span class="sxs-lookup"><span data-stu-id="5e1e2-325">LSRzhGS/aa/oqAXGLHJNBw==</span></span> |

<span data-ttu-id="5e1e2-326">**표 1**: 암호 Mysecret을 저장할 때 암호 관련 필드에 대 한 예제 값</span><span class="sxs-lookup"><span data-stu-id="5e1e2-326">**Table 1**: Example Values for the Password-Related Fields When Storing the Password MySecret!</span></span>

> [!NOTE]
> <span data-ttu-id="5e1e2-327">에서 사용 하는 특정 암호화 또는 해시 알고리즘 `SqlMembershipProvider` 은 요소의 설정에 따라 결정 됩니다 `<machineKey>` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-327">The particular encryption or hashing algorithm used by the `SqlMembershipProvider` is determined by the settings in the `<machineKey>` element.</span></span> <span data-ttu-id="5e1e2-328"><a id="Tutorial3"></a> [*폼 인증 구성 및 고급 항목*](../introduction/forms-authentication-configuration-and-advanced-topics-vb.md) 자습서의 3 단계에서이 구성 요소에 대해 설명 했습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-328">We discussed this configuration element in Step 3 of the <a id="Tutorial3"></a>[*Forms Authentication Configuration and Advanced Topics*](../introduction/forms-authentication-configuration-and-advanced-topics-vb.md) tutorial.</span></span>

### <a name="storing-roles-and-role-associations"></a><span data-ttu-id="5e1e2-329">역할 및 역할 연결 저장</span><span class="sxs-lookup"><span data-stu-id="5e1e2-329">Storing Roles and Role Associations</span></span>

<span data-ttu-id="5e1e2-330">개발자는 역할 프레임 워크를 사용 하 여 역할 집합을 정의 하 고 역할에 속하는 사용자를 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-330">The Roles framework allows developers to define a set of roles and specify what users belong to what roles.</span></span> <span data-ttu-id="5e1e2-331">이 정보는 및의 두 테이블을 통해 데이터베이스에 `aspnet_Roles` 캡처됩니다 `aspnet_UsersInRoles` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-331">This information is captured in the database through two tables: `aspnet_Roles` and `aspnet_UsersInRoles`.</span></span> <span data-ttu-id="5e1e2-332">테이블의 각 레코드는 `aspnet_Roles` 특정 응용 프로그램에 대 한 역할을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-332">Each record in the `aspnet_Roles` table represents a role for a particular application.</span></span> <span data-ttu-id="5e1e2-333">`aspnet_Users`테이블과 마찬가지로 테이블에는 `aspnet_Roles` 토론에 관련 된 세 개의 열이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-333">Much like the `aspnet_Users` table, the `aspnet_Roles` table has three columns pertinent to our discussion:</span></span>

- `RoleId`
- `RoleName`
- `ApplicationId`

<span data-ttu-id="5e1e2-334">`RoleId` 는 기본 키 (형식 `uniqueidentifier` )입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-334">`RoleId` is the primary key (and of type `uniqueidentifier`).</span></span> <span data-ttu-id="5e1e2-335">`RoleName`는 `nvarchar(256)` 형식입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-335">`RoleName` is of type `nvarchar(256)`.</span></span> <span data-ttu-id="5e1e2-336">및 `ApplicationId` 는 사용자 계정을의 특정 응용 프로그램에 연결 `aspnet_Applications` 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-336">And `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="5e1e2-337">`UNIQUE`및 열에 복합 제약 조건이 있으므로 `RoleName` `ApplicationId` 지정 된 응용 프로그램에서 각 역할 이름이 고유한 지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-337">There is a composite `UNIQUE` constraint on the `RoleName` and `ApplicationId` columns, ensuring that in a given application each role name is unique.</span></span>

<span data-ttu-id="5e1e2-338">이 `aspnet_UsersInRoles` 테이블은 사용자와 역할 간의 매핑으로 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-338">The `aspnet_UsersInRoles` table serves as a mapping between users and roles.</span></span> <span data-ttu-id="5e1e2-339">두 개의 열만 있고 `UserId` `RoleId` 함께 복합 기본 키를 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-339">There are only two columns - `UserId` and `RoleId` - and together they make up a composite primary key.</span></span>

## <a name="step-4-specifying-the-provider-and-customizing-its-settings"></a><span data-ttu-id="5e1e2-340">4 단계: 공급자 지정 및 해당 설정 사용자 지정</span><span class="sxs-lookup"><span data-stu-id="5e1e2-340">Step 4: Specifying the Provider and Customizing Its Settings</span></span>

<span data-ttu-id="5e1e2-341">멤버 자격 및 역할 프레임 워크와 같이 공급자 모델을 지 원하는 모든 프레임 워크는 구현에 대 한 세부 정보를 제공 하 고 대신 해당 역할을 공급자 클래스에 위임 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-341">All of the frameworks that support the provider model - such as the Membership and Roles frameworks - lack implementation details themselves and instead delegate that responsibility to a provider class.</span></span> <span data-ttu-id="5e1e2-342">멤버 프레임 프레임 워크의 경우 `Membership` 클래스는 사용자 계정을 관리 하기 위한 API를 정의 하지만 사용자 저장소와 직접 상호 작용 하지는 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-342">In the case of the Membership framework, the `Membership` class defines the API for managing user accounts, but it does not interact directly with any user store.</span></span> <span data-ttu-id="5e1e2-343">대신, `Membership` 클래스의 메서드는 구성 된 공급자에 대 한 요청을 전달 합니다 .이는를 사용 `SqlMembershipProvider` 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-343">Rather, the `Membership` class's methods hand off the request to the configured provider - we will be using the `SqlMembershipProvider`.</span></span> <span data-ttu-id="5e1e2-344">클래스의 메서드 중 하나를 호출할 때 `Membership` 멤버 자격 프레임 워크에서에 대 한 호출을 위임 하는 방법을 어떻게 알 수 `SqlMembershipProvider` 있나요?</span><span class="sxs-lookup"><span data-stu-id="5e1e2-344">When we invoke one of the methods in the `Membership` class, how does the Membership framework know to delegate the call to the `SqlMembershipProvider`?</span></span>

<span data-ttu-id="5e1e2-345">클래스에는 `Membership` 멤버 자격 프레임 워크에서 사용할 수 있는 등록 된 모든 공급자 클래스에 대 한 참조가 포함 된 [ `Providers` 속성이](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx) 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-345">The `Membership` class has a [`Providers` property](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx) that contains a reference to all of the registered provider classes available for use by the Membership framework.</span></span> <span data-ttu-id="5e1e2-346">등록 된 각 공급자에는 연결 된 이름 및 유형이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-346">Each registered provider has an associated name and type.</span></span> <span data-ttu-id="5e1e2-347">이 이름은 컬렉션에서 특정 공급자를 참조 하는 사용자에 게 친숙 한 방법을 제공 `Providers` 하는 반면 형식은 공급자 클래스를 식별 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-347">The name offers a human-friendly way to reference a particular provider in the `Providers` collection, while the type identifies the provider class.</span></span> <span data-ttu-id="5e1e2-348">또한 등록 된 각 공급자에는 구성 설정이 포함 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-348">Moreover, each registered provider may include configuration settings.</span></span> <span data-ttu-id="5e1e2-349">멤버 자격 프레임 워크에 대 한 구성 설정에는 `PasswordFormat` 및가 포함 됩니다 `requiresUniqueEmail` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-349">Configuration settings for the Membership framework include `PasswordFormat` and `requiresUniqueEmail`, among many others.</span></span> <span data-ttu-id="5e1e2-350">에서 사용 하는 구성 설정의 전체 목록은 표 2를 참조 하세요 `SqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-350">See Table 2 for a complete list of configuration settings used by the `SqlMembershipProvider`.</span></span>

<span data-ttu-id="5e1e2-351">`Providers`속성의 콘텐츠는 웹 응용 프로그램의 구성 설정을 통해 지정 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-351">The `Providers` property's contents are specified through the web application's configuration settings.</span></span> <span data-ttu-id="5e1e2-352">기본적으로 모든 웹 응용 프로그램에는 형식의 라는 공급자가 있습니다 `AspNetSqlMembershipProvider` `SqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-352">By default, all web applications have a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span> <span data-ttu-id="5e1e2-353">이 기본 멤버 자격 공급자는 (에 있음)에 등록 되어 `machine.config` `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG` 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-353">This default Membership provider is registered in `machine.config` (located at `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG`):</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample1.xml)]

<span data-ttu-id="5e1e2-354">위의 태그가 보여 주는 것 처럼 [ `<membership>` 요소](https://msdn.microsoft.com/library/1b9hw62f.aspx) 는 [ `<providers>` 자식 요소가](https://msdn.microsoft.com/library/6d4936ht.aspx) 등록 된 공급자를 지정 하는 동안 멤버 자격 프레임 워크에 대 한 구성 설정을 정의 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-354">As the markup above shows, the [`<membership>` element](https://msdn.microsoft.com/library/1b9hw62f.aspx) defines the configuration settings for the Membership framework while the [`<providers>` child element](https://msdn.microsoft.com/library/6d4936ht.aspx) specifies the registered providers.</span></span> <span data-ttu-id="5e1e2-355">또는 요소를 사용 하 여 공급자를 추가 하거나 제거할 수 있습니다. [`<add>`](https://msdn.microsoft.com/library/whae3t94.aspx) [`<remove>`](https://msdn.microsoft.com/library/aykw9a6d.aspx) 요소를 사용 [`<clear>`](https://msdn.microsoft.com/library/t062y6yc.aspx) 하 여 현재 등록 된 모든 공급자를 제거 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-355">Providers may be added or removed using the [`<add>`](https://msdn.microsoft.com/library/whae3t94.aspx) or [`<remove>`](https://msdn.microsoft.com/library/aykw9a6d.aspx) elements; use the [`<clear>`](https://msdn.microsoft.com/library/t062y6yc.aspx) element to remove all currently registered providers.</span></span> <span data-ttu-id="5e1e2-356">위의 태그에서 볼 때 `machine.config` 형식 이라는 공급자를 추가 합니다 `AspNetSqlMembershipProvider` `SqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-356">As the markup above shows, `machine.config` adds a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span>

<span data-ttu-id="5e1e2-357">및 특성 외에 `name` 도 `type` `<add>` 요소는 다양 한 구성 설정의 값을 정의 하는 특성을 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-357">In addition to the `name` and `type` attributes, the `<add>` element contains attributes that define the values for various configuring settings.</span></span> <span data-ttu-id="5e1e2-358">표 2에는 사용 가능한 `SqlMembershipProvider` 특정 구성 설정과 각 설정이 설명 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-358">Table 2 lists the available `SqlMembershipProvider`-specific configuration settings, along with a description of each.</span></span>

> [!NOTE]
> <span data-ttu-id="5e1e2-359">표 2에 명시 된 기본값은 클래스에 정의 된 기본값을 참조 합니다 `SqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-359">Any default values noted in Table 2 refer to the default values defined in the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="5e1e2-360">의 일부 구성 설정은 `AspNetSqlMembershipProvider` 클래스의 기본값과 일치 하지 않습니다 `SqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-360">Note that not all of the configuration settings in `AspNetSqlMembershipProvider` correspond to the default values of the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="5e1e2-361">예를 들어 멤버 자격 공급자에 지정 되지 않은 경우 `requiresUniqueEmail` 설정의 기본값은 true입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-361">For example, if not specified in a Membership provider, the `requiresUniqueEmail` setting defaults to true.</span></span> <span data-ttu-id="5e1e2-362">그러나는 `AspNetSqlMembershipProvider` 값을 명시적으로 지정 하 여이 기본값을 재정의 합니다 `false` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-362">However, the `AspNetSqlMembershipProvider` overrides this default value by explicitly specifying a value of `false`.</span></span>

| <span data-ttu-id="5e1e2-363">**&lt; \_ O3a \_ p/설정&gt;**</span><span class="sxs-lookup"><span data-stu-id="5e1e2-363">**Setting&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="5e1e2-364">**설명 &lt; \_ o3a \_ p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="5e1e2-364">**Description&lt;\_o3a\_p /&gt;**</span></span> |
| --- | --- |
| `ApplicationName` | <span data-ttu-id="5e1e2-365">Membership framework는 단일 사용자 저장소가 여러 응용 프로그램에 걸쳐 분할 될 수 있도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-365">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="5e1e2-366">이 설정은 멤버 자격 공급자가 사용 하는 응용 프로그램 파티션의 이름을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-366">This setting indicates the name of the application partition used by the Membership provider.</span></span> <span data-ttu-id="5e1e2-367">이 값을 명시적으로 지정 하지 않으면 런타임에 응용 프로그램의 가상 루트 경로 값으로 설정 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-367">If this value is not explicitly specified, it is set, at runtime, to the value of the application's virtual root path.</span></span> |
| `commandTimeout` | <span data-ttu-id="5e1e2-368">SQL 명령 제한 시간 값 (초)을 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-368">Specifies the SQL command timeout value (in seconds).</span></span> <span data-ttu-id="5e1e2-369">기본값은 30입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-369">The default value is 30.</span></span> |
| `connectionStringName` | <span data-ttu-id="5e1e2-370">`<connectionStrings>`사용자 저장소 데이터베이스에 연결 하는 데 사용할 요소에 있는 연결 문자열의 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-370">The name of the connection string in the `<connectionStrings>` element to use to connect to the user store database.</span></span> <span data-ttu-id="5e1e2-371">이 값은 필수입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-371">This value is required.</span></span> |
| `description` | <span data-ttu-id="5e1e2-372">등록 된 공급자에 대 한 사용자에 게 친숙 한 설명을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-372">Provides a human-friendly description of the registered provider.</span></span> |
| `enablePasswordRetrieval` | <span data-ttu-id="5e1e2-373">사용자가 잊어버린 암호를 검색할 수 있는지 여부를 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-373">Specifies whether users may retrieve their forgotten password.</span></span> <span data-ttu-id="5e1e2-374">기본값은 `false`입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-374">The default value is `false`.</span></span> |
| `enablePasswordReset` | <span data-ttu-id="5e1e2-375">사용자가 자신의 암호를 재설정할 수 있는지 여부를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-375">Indicates whether users are allowed to reset their password.</span></span> <span data-ttu-id="5e1e2-376">기본값은 `true`입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-376">Defaults to `true`.</span></span> |
| `maxInvalidPasswordAttempts` | <span data-ttu-id="5e1e2-377">사용자가 잠기기 전에 지정 된 동안 지정 된 사용자에 대해 발생할 수 있는 최대 로그인 실패 횟수입니다 `passwordAttemptWindow` . 기본값은 5입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-377">The maximum number of unsuccessful login attempts that may occur for a given user during the specified `passwordAttemptWindow` before the user is locked out. The default value is 5.</span></span> |
| `minRequiredNonalphanumericCharacters` | <span data-ttu-id="5e1e2-378">사용자의 암호에 표시 되어야 하는 영숫자가 아닌 최소 문자 수입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-378">The minimum number of non-alphanumeric characters that must appear in a user's password.</span></span> <span data-ttu-id="5e1e2-379">이 값은 0에서 128 사이 여야 합니다. 기본값은 1입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-379">This value must be between 0 and 128; the default is 1.</span></span> |
| `minRequiredPasswordLength` | <span data-ttu-id="5e1e2-380">암호에 필요한 최소 문자 수입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-380">The minimum number of characters required in a password.</span></span> <span data-ttu-id="5e1e2-381">이 값은 0에서 128 사이 여야 합니다. 기본값은 7입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-381">This value must be between 0 and 128; the default is 7.</span></span> |
| `name` | <span data-ttu-id="5e1e2-382">등록 된 공급자의 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-382">The name of the registered provider.</span></span> <span data-ttu-id="5e1e2-383">이 값은 필수입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-383">This value is required.</span></span> |
| `passwordAttemptWindow` | <span data-ttu-id="5e1e2-384">실패 한 로그인 시도가 추적 되는 시간 (분)입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-384">The number of minutes during which failed login attempts are tracked.</span></span> <span data-ttu-id="5e1e2-385">사용자가 지정 된 기간 내에 잘못 된 로그인 자격 증명을 제공 하면 `maxInvalidPasswordAttempts` 해당 시간이 잠깁니다. 기본값은 10입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-385">If a user supplies invalid login credentials `maxInvalidPasswordAttempts` times within this specified window, they are locked out. The default value is 10.</span></span> |
| `PasswordFormat` | <span data-ttu-id="5e1e2-386">암호 저장소 형식은 `Clear` , `Hashed` 또는 `Encrypted` 입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-386">The password storage format: `Clear`, `Hashed`, or `Encrypted`.</span></span> <span data-ttu-id="5e1e2-387">기본값은 `Hashed`입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-387">The default is `Hashed`.</span></span> |
| `passwordStrengthRegularExpression` | <span data-ttu-id="5e1e2-388">제공 되는 경우이 정규식은 새 계정을 만들 때 또는 암호를 변경할 때 사용자가 선택한 암호의 강도를 평가 하는 데 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-388">If provided, this regular expression is used to evaluate the strength of the user's selected password when creating a new account or when changing their password.</span></span> <span data-ttu-id="5e1e2-389">기본값은 빈 문자열입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-389">The default value is an empty string.</span></span> |
| `requiresQuestionAndAnswer` | <span data-ttu-id="5e1e2-390">사용자가 암호를 검색 하거나 다시 설정 하는 경우 보안 질문에 답변해 야 하는지 여부를 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-390">Specifies whether a user must answer his security question when retrieving or resetting his password.</span></span> <span data-ttu-id="5e1e2-391">기본값은 `true`입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-391">The default value is `true`.</span></span> |
| `requiresUniqueEmail` | <span data-ttu-id="5e1e2-392">지정 된 응용 프로그램 파티션의 모든 사용자 계정에 고유한 전자 메일 주소가 있어야 하는지 여부를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-392">Indicates whether all user accounts in a given application partition must have a unique email address.</span></span> <span data-ttu-id="5e1e2-393">기본값은 `true`입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-393">The default value is `true`.</span></span> |
| `type` | <span data-ttu-id="5e1e2-394">공급자의 유형을 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-394">Specifies the type of the provider.</span></span> <span data-ttu-id="5e1e2-395">이 값은 필수입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-395">This value is required.</span></span> |

<span data-ttu-id="5e1e2-396">**표 2**: 멤버 자격 및 `SqlMembershipProvider` 구성 설정</span><span class="sxs-lookup"><span data-stu-id="5e1e2-396">**Table 2**: Membership and `SqlMembershipProvider` Configuration Settings</span></span>

<span data-ttu-id="5e1e2-397">외에도 `AspNetSqlMembershipProvider` 파일에 비슷한 태그를 추가 하 여 응용 프로그램 별로 다른 멤버 자격 공급자를 등록할 수 있습니다 `Web.config` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-397">In addition to `AspNetSqlMembershipProvider`, other Membership providers may be registered on an application-by-application basis by adding similar markup to the `Web.config` file.</span></span>

> [!NOTE]
> <span data-ttu-id="5e1e2-398">역할 프레임 워크는 거의 동일한 방식으로 작동 합니다 .에 등록 된 기본 역할 공급자가 `machine.config` 있고에서 응용 프로그램 별로 등록 된 공급자를 사용자 지정할 수 있습니다 `Web.config` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-398">The Roles framework works in much the same way: there is a default registered role provider in `machine.config` and the registered providers may be customized on an application-by-application basis in `Web.config`.</span></span> <span data-ttu-id="5e1e2-399">이후 자습서에서는 역할 프레임 워크 및 해당 구성 마크업에 대해 자세히 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-399">We will examine the Roles framework and its configuration markup in detail in a future tutorial.</span></span>

### <a name="customizing-thesqlmembershipprovidersettings"></a><span data-ttu-id="5e1e2-400">설정 사용자 지정 `SqlMembershipProvider`</span><span class="sxs-lookup"><span data-stu-id="5e1e2-400">Customizing the`SqlMembershipProvider`Settings</span></span>

<span data-ttu-id="5e1e2-401">Default `SqlMembershipProvider` ( `AspNetSqlMembershipProvider` )의 특성은 `connectionStringName` 로 설정 `LocalSqlServer` 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-401">The default `SqlMembershipProvider` (`AspNetSqlMembershipProvider`) has its `connectionStringName` attribute set to `LocalSqlServer`.</span></span> <span data-ttu-id="5e1e2-402">공급자와 마찬가지로 `AspNetSqlMembershipProvider` 연결 문자열 이름은 `LocalSqlServer` 에 정의 되어 `machine.config` 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-402">Like the `AspNetSqlMembershipProvider` provider, the connection string name `LocalSqlServer` is defined in `machine.config`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample2.xml)]

<span data-ttu-id="5e1e2-403">여기에서 볼 수 있듯이이 연결 문자열은 |에 있는 SQL 2005 Express Edition 데이터베이스를 정의 합니다. DataDirectory | aspnetdb.mdf.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-403">As you can see, this connection string defines a SQL 2005 Express Edition database located at |DataDirectory|aspnetdb.mdf.</span></span> <span data-ttu-id="5e1e2-404">문자열 | DataDirectory | 는 런타임에 디렉터리를 가리키도록 변환 `~/App_Data/` 되므로 데이터베이스 경로 | DataDirectory | aspnetdb.mdf은로 변환 `~/App_Data` / `aspnet.mdf` 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-404">The string |DataDirectory| is translated at runtime to point to the `~/App_Data/` directory, so the database path |DataDirectory|aspnetdb.mdf translates to `~/App_Data`/`aspnet.mdf`.</span></span>

<span data-ttu-id="5e1e2-405">응용 프로그램의 파일에 멤버 자격 공급자 정보를 지정 하지 않은 경우 `Web.config` 응용 프로그램은 등록 된 기본 멤버 자격 공급자 인를 사용 `AspNetSqlMembershipProvider` 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-405">If we did not specify any Membership provider information in our application's `Web.config` file, the application uses the default registered Membership provider, `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="5e1e2-406">`~/App_Data/aspnet.mdf`데이터베이스가 존재 하지 않는 경우 ASP.NET 런타임은 자동으로 데이터베이스를 만들고 응용 프로그램 서비스 스키마를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-406">If the `~/App_Data/aspnet.mdf` database does not exist, the ASP.NET runtime will automatically create it and add the application services schema.</span></span> <span data-ttu-id="5e1e2-407">그러나 데이터베이스를 사용 하지 `aspnet.mdf` 않고 `SecurityTutorials.mdf` 2 단계에서 만든 데이터베이스를 사용 하려고 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-407">However, we don't want to use the `aspnet.mdf` database; rather, we want to use the `SecurityTutorials.mdf` database we created in Step 2.</span></span> <span data-ttu-id="5e1e2-408">이 수정 작업은 다음 두 가지 방법 중 하나로 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-408">This modification can be accomplished in one of two ways:</span></span>

- <span data-ttu-id="5e1e2-409">의 <strong>값을 지정 합니다</strong> <strong>`LocalSqlServer`</strong> . <strong>연결 문자열 이름</strong> <strong>`Web.config`</strong> <strong>.</strong></span><span class="sxs-lookup"><span data-stu-id="5e1e2-409"><strong>Specify a value for the</strong><strong>`LocalSqlServer`</strong><strong>connection string name in</strong><strong>`Web.config`</strong><strong>.</strong></span></span> <span data-ttu-id="5e1e2-410">`LocalSqlServer`에서 연결 문자열 이름 값을 덮어써서 `Web.config` 등록 된 기본 멤버 자격 공급자 ()를 사용 `AspNetSqlMembershipProvider` 하 여 데이터베이스에서 제대로 작동 하도록 할 수 있습니다 `SecurityTutorials.mdf` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-410">By overwriting the `LocalSqlServer` connection string name value in `Web.config`, we can use the default registered Membership provider (`AspNetSqlMembershipProvider`) and have it correctly work with the `SecurityTutorials.mdf` database.</span></span> <span data-ttu-id="5e1e2-411">이 방법은에 지정 된 구성 설정을 사용 하 여 콘텐츠를 사용 하는 경우에 적합 `AspNetSqlMembershipProvider` 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-411">This approach is fine if you are content with the configuration settings specified by `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="5e1e2-412">이 기술에 대 한 자세한 내용은 [Scott Guthrie](https://weblogs.asp.net/scottgu/)의 블로그 게시물, [SQL Server 2000 또는 SQL Server 2005를 사용 하도록 ASP.NET 2.0 애플리케이션 서비스 구성](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-412">For more information on this technique, see [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s blog post, [Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).</span></span>
- <span data-ttu-id="5e1e2-413">형식의 등록 된 <strong>새 공급자를 추가 합니다</strong> <strong>`SqlMembershipProvider`</strong> . <strong>및 구성</strong> <strong>`connectionStringName`</strong> 을 (를) 가리키는 <strong>설정</strong> <strong>`SecurityTutorials.mdf`</strong> <strong>데이터베이스.</strong></span><span class="sxs-lookup"><span data-stu-id="5e1e2-413"><strong>Add a new registered provider of type</strong><strong>`SqlMembershipProvider`</strong><strong>and configure its</strong><strong>`connectionStringName`</strong><strong>setting to point to the</strong><strong>`SecurityTutorials.mdf`</strong><strong>database.</strong></span></span> <span data-ttu-id="5e1e2-414">이 방법은 데이터베이스 연결 문자열 외에 다른 구성 속성을 사용자 지정 하려는 경우에 유용 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-414">This approach is useful in scenarios where you want to customize other configuration properties in addition to the database connection string.</span></span> <span data-ttu-id="5e1e2-415">내 프로젝트에서는 유연성과 가독성 때문에 항상이 방법을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-415">In my own projects I always use this approach because of its flexibility and readability.</span></span>

<span data-ttu-id="5e1e2-416">데이터베이스를 참조 하는 등록 된 새 공급자를 추가 `SecurityTutorials.mdf` 하려면 먼저의 섹션에서 적절 한 연결 문자열 값을 추가 해야 `<connectionStrings>` `Web.config` 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-416">Before we can add a new registered provider that references the `SecurityTutorials.mdf` database, we first need to add an appropriate connection string value in the `<connectionStrings>` section in `Web.config`.</span></span> <span data-ttu-id="5e1e2-417">다음 태그는 `SecurityTutorialsConnectionString` 폴더의 SQL Server 2005 Express Edition 데이터베이스를 참조 하는 라는 새 연결 문자열을 추가 합니다 `SecurityTutorials.mdf` `App_Data` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-417">The following markup adds a new connection string named `SecurityTutorialsConnectionString` that references the SQL Server 2005 Express Edition `SecurityTutorials.mdf` database in the `App_Data` folder.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample3.xml)]

> [!NOTE]
> <span data-ttu-id="5e1e2-418">대체 데이터베이스 파일을 사용 하는 경우 필요에 따라 연결 문자열을 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-418">If you are using an alternate database file, update the connection string as needed.</span></span> <span data-ttu-id="5e1e2-419">올바른 연결 문자열을 형성 하는 방법에 대 한 자세한 내용은 [ConnectionStrings.com](http://www.connectionstrings.com/)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-419">For more information on forming the correct connection string, refer to [ConnectionStrings.com](http://www.connectionstrings.com/).</span></span>

<span data-ttu-id="5e1e2-420">다음으로 파일에 다음 멤버 자격 구성 태그를 추가 합니다 `Web.config` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-420">Next, add the following Membership configuration markup to the `Web.config` file.</span></span> <span data-ttu-id="5e1e2-421">이 태그는 라는 새 공급자를 등록 `SecurityTutorialsSqlMembershipProvider` 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-421">This markup registers a new provider named `SecurityTutorialsSqlMembershipProvider`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample4.xml)]

<span data-ttu-id="5e1e2-422">위의 태그는 공급자를 등록 하는 것 외에도 `SecurityTutorialsSqlMembershipProvider` `SecurityTutorialsSqlMembershipProvider` 요소에 있는 특성을 통해를 기본 공급자로 정의 합니다 `defaultProvider` `<membership>` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-422">In addition to registering the `SecurityTutorialsSqlMembershipProvider` provider, the above markup defines the `SecurityTutorialsSqlMembershipProvider` as the default provider (via the `defaultProvider` attribute in the `<membership>` element).</span></span> <span data-ttu-id="5e1e2-423">멤버 자격 프레임 워크에는 등록 된 공급자가 여러 개 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-423">Recall that the Membership framework can have multiple registered providers.</span></span> <span data-ttu-id="5e1e2-424">`AspNetSqlMembershipProvider`는의 첫 번째 공급자로 등록 되었으므로 `machine.config` 달리 지정 하지 않는 한 기본 공급자로 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-424">Since `AspNetSqlMembershipProvider` is registered as the first provider in `machine.config`, it serves as the default provider unless we indicate otherwise.</span></span>

<span data-ttu-id="5e1e2-425">현재 응용 프로그램에는 및 라는 두 개의 등록 된 공급자가 있습니다. `AspNetSqlMembershipProvider` `SecurityTutorialsSqlMembershipProvider`</span><span class="sxs-lookup"><span data-stu-id="5e1e2-425">Currently, our application has two registered providers: `AspNetSqlMembershipProvider` and `SecurityTutorialsSqlMembershipProvider`.</span></span> <span data-ttu-id="5e1e2-426">그러나 공급자를 등록 하기 전에 `SecurityTutorialsSqlMembershipProvider` 요소 바로 앞에 [ `<clear />` 요소](https://msdn.microsoft.com/library/t062y6yc.aspx) 를 추가 하 여 이전에 등록 된 공급자를 모두 지울 수 있습니다 `<add>` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-426">However, before registering the `SecurityTutorialsSqlMembershipProvider` provider we could have cleared out all previously registered providers by adding a [`<clear />` element](https://msdn.microsoft.com/library/t062y6yc.aspx) immediately before our `<add>` element.</span></span> <span data-ttu-id="5e1e2-427">이렇게 하면 `AspNetSqlMembershipProvider` 등록 된 공급자 목록에서가 제거 됩니다. 즉,가 등록 된 `SecurityTutorialsSqlMembershipProvider` 유일한 멤버 자격 공급자가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-427">This would clear out the `AspNetSqlMembershipProvider` from the list of registered providers, meaning that the `SecurityTutorialsSqlMembershipProvider` would be the only registered Membership provider.</span></span> <span data-ttu-id="5e1e2-428">이 방법을 사용 하는 경우 `SecurityTutorialsSqlMembershipProvider` 등록 된 멤버 자격 공급자만이 될 수 있으므로를 기본 공급자로 표시할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-428">If we used this approach, then we would not need to mark the `SecurityTutorialsSqlMembershipProvider` as the default provider, since it would be the only registered Membership provider.</span></span> <span data-ttu-id="5e1e2-429">사용에 대 한 자세한 내용은 `<clear />` [공급자를 `<clear />` 추가할 때 사용](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-429">For more information on using `<clear />`, see [Using `<clear />` When Adding providers](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx).</span></span>

<span data-ttu-id="5e1e2-430">`SecurityTutorialsSqlMembershipProvider`의 `connectionStringName` 설정은 방금 추가 된 `SecurityTutorialsConnectionString` 연결 문자열 이름을 참조 하 고 해당 `applicationName` 설정이 securitytutorials의 값으로 설정 되어 있는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-430">Note that the `SecurityTutorialsSqlMembershipProvider`'s `connectionStringName` setting references the just-added `SecurityTutorialsConnectionString` connection string name, and that its `applicationName` setting has been set to a value of SecurityTutorials.</span></span> <span data-ttu-id="5e1e2-431">또한 `requiresUniqueEmail` 설정이로 설정 되었습니다 `true` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-431">Additionally, the `requiresUniqueEmail` setting has been set to `true`.</span></span> <span data-ttu-id="5e1e2-432">다른 모든 구성 옵션은의 값과 동일 `AspNetSqlMembershipProvider` 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-432">All other configuration options are identical to the values in `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="5e1e2-433">원하는 경우 언제 든 지 모든 구성을 수정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-433">Feel free to make any configuration modifications here, if you wish.</span></span> <span data-ttu-id="5e1e2-434">예를 들어, 하나 대신 영숫자가 아닌 문자를 두 개 이상 요구 하거나 암호 길이를 7이 아닌 8 자로 늘려서 암호 강도를 강화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-434">For example, you could tighten the password strength by requiring two non-alphanumeric characters instead of one, or by increasing the password length to eight characters instead of seven.</span></span>

> [!NOTE]
> <span data-ttu-id="5e1e2-435">Membership framework는 단일 사용자 저장소가 여러 응용 프로그램에 걸쳐 분할 될 수 있도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-435">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="5e1e2-436">멤버 자격 공급자의 `applicationName` 설정은 사용자 저장소를 사용할 때 공급자가 사용 하는 응용 프로그램을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-436">The Membership provider's `applicationName` setting indicates what application the provider uses when working with the user store.</span></span> <span data-ttu-id="5e1e2-437">`applicationName` `applicationName` 가 명시적으로 설정 되지 않은 경우 런타임에 웹 응용 프로그램의 가상 루트 경로에 할당 되기 때문에 구성 설정에 대 한 값을 명시적으로 설정 하는 것이 중요 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-437">It is important that you explicitly set a value for the `applicationName` configuration setting because if the `applicationName` is not explicitly set, it is assigned to the web application's virtual root path at runtime.</span></span> <span data-ttu-id="5e1e2-438">응용 프로그램의 가상 루트 경로가 변경 되지 않은 경우에는 잘 작동 하지만 응용 프로그램을 다른 경로로 이동 하면 해당 `applicationName` 설정도 변경 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-438">This works fine as long as the application's virtual root path doesn't change, but if you move the application to a different path, the `applicationName` setting will change too.</span></span> <span data-ttu-id="5e1e2-439">이 경우 멤버 자격 공급자는 이전에 사용 된 것과 다른 응용 프로그램 파티션으로 작업을 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-439">When this happens, the Membership provider will start working with a different application partition than was previously used.</span></span> <span data-ttu-id="5e1e2-440">이동 전에 만든 사용자 계정은 다른 응용 프로그램 파티션에 상주 하 고 해당 사용자는 더 이상 사이트에 로그인 할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-440">User accounts created prior to the move will reside in a different application partition and those users will no longer be able to log into the site.</span></span> <span data-ttu-id="5e1e2-441">이러한 문제에 대 한 자세한 내용은 [ `applicationName` ASP.NET 2.0 멤버 자격 및 기타 공급자를 구성할 때 항상 속성 설정](https://weblogs.asp.net/scottgu/443634)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-441">For a more in-depth discussion on this matter, see [Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other providers](https://weblogs.asp.net/scottgu/443634).</span></span>

## <a name="summary"></a><span data-ttu-id="5e1e2-442">요약</span><span class="sxs-lookup"><span data-stu-id="5e1e2-442">Summary</span></span>

<span data-ttu-id="5e1e2-443">이 시점에서 구성 된 응용 프로그램 서비스 ()가 포함 된 데이터베이스가 있고 `SecurityTutorials.mdf` , 멤버 자격 프레임 워크에서 방금 등록 한 공급자를 사용 하도록 웹 응용 프로그램을 구성 했습니다 `SecurityTutorialsSqlMembershipProvider` .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-443">At this point we have a database with the configured application services (`SecurityTutorials.mdf`) and have configured our web application so that the Membership framework uses the `SecurityTutorialsSqlMembershipProvider` provider we just registered.</span></span> <span data-ttu-id="5e1e2-444">이 등록 된 공급자는 형식이 `SqlMembershipProvider` 며 해당 `connectionStringName` 하는 연결 문자열 ( `SecurityTutorialsConnectionString` ) 및 해당 값이 명시적으로 설정 되어 `applicationName` 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-444">This registered provider is of type `SqlMembershipProvider` and has its `connectionStringName` set to the appropriate connection string (`SecurityTutorialsConnectionString`) and its `applicationName` value explicitly set.</span></span>

<span data-ttu-id="5e1e2-445">이제 응용 프로그램에서 멤버 자격 프레임 워크를 사용할 준비가 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-445">We are now ready to use the Membership framework from our application.</span></span> <span data-ttu-id="5e1e2-446">다음 자습서에서는 새 사용자 계정을 만드는 방법을 살펴봅니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-446">In the next tutorial we will examine how to create new user accounts.</span></span> <span data-ttu-id="5e1e2-447">다음에는 사용자 인증, 사용자 기반 권한 부여 수행, 데이터베이스에 추가 사용자 관련 정보 저장에 대해 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-447">Following that we will explore authenticating users, performing user-based authorization, and storing additional user-related information in the database.</span></span>

<span data-ttu-id="5e1e2-448">행복 한 프로그래밍</span><span class="sxs-lookup"><span data-stu-id="5e1e2-448">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="5e1e2-449">추가 정보</span><span class="sxs-lookup"><span data-stu-id="5e1e2-449">Further Reading</span></span>

<span data-ttu-id="5e1e2-450">이 자습서에서 설명 하는 항목에 대 한 자세한 내용은 다음 리소스를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-450">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="5e1e2-451">`applicationName`ASP.NET 2.0 멤버 자격과 기타 공급자를 구성할 때 항상 속성을 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-451">Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other providers</span></span>](https://weblogs.asp.net/scottgu/443634)
- [<span data-ttu-id="5e1e2-452">SQL Server 2000 또는 SQL Server 2005를 사용 하도록 ASP.NET 2.0 애플리케이션 서비스 구성</span><span class="sxs-lookup"><span data-stu-id="5e1e2-452">Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005</span></span>](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx)
- [<span data-ttu-id="5e1e2-453">Express Edition 다운로드 SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="5e1e2-453">Download SQL Server Management Studio Express Edition</span></span>](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)
- [<span data-ttu-id="5e1e2-454">ASP.NET 2.0 s 멤버 자격, 역할 및 프로필 검사</span><span class="sxs-lookup"><span data-stu-id="5e1e2-454">Examining ASP.NET 2.0s Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="5e1e2-455">`<add>`멤버 자격에 대 한 공급자 요소</span><span class="sxs-lookup"><span data-stu-id="5e1e2-455">The `<add>` Element for providers for Membership</span></span>](https://msdn.microsoft.com/library/whae3t94.aspx)
- [<span data-ttu-id="5e1e2-456">`<membership>`요소</span><span class="sxs-lookup"><span data-stu-id="5e1e2-456">The `<membership>` Element</span></span>](https://msdn.microsoft.com/library/1b9hw62f.aspx)
- [<span data-ttu-id="5e1e2-457">`<providers>`멤버 자격에 대 한 요소</span><span class="sxs-lookup"><span data-stu-id="5e1e2-457">The `<providers>` Element for Membership</span></span>](https://msdn.microsoft.com/library/6d4936ht.aspx)
- [<span data-ttu-id="5e1e2-458">`<clear />`공급자를 추가할 때 사용</span><span class="sxs-lookup"><span data-stu-id="5e1e2-458">Using `<clear />` When Adding providers</span></span>](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx)
- [<span data-ttu-id="5e1e2-459">로 직접 작업 `SqlMembershipProvider`</span><span class="sxs-lookup"><span data-stu-id="5e1e2-459">Working Directly with the `SqlMembershipProvider`</span></span>](http://aspnet.4guysfromrolla.com/articles/091207-1.aspx)

### <a name="video-training-on-topics-contained-in-this-tutorial"></a><span data-ttu-id="5e1e2-460">이 자습서에 포함 된 항목에 대 한 비디오 학습</span><span class="sxs-lookup"><span data-stu-id="5e1e2-460">Video Training on Topics Contained in this Tutorial</span></span>

- [<span data-ttu-id="5e1e2-461">ASP.NET 멤버 자격 이해</span><span class="sxs-lookup"><span data-stu-id="5e1e2-461">Understanding ASP.NET Memberships</span></span>](../../../videos/authentication/understanding-aspnet-memberships.md)
- [<span data-ttu-id="5e1e2-462">멤버 자격 스키마와 함께 작동하도록 SQL 구성</span><span class="sxs-lookup"><span data-stu-id="5e1e2-462">Configuring SQL To Work with Membership Schemas</span></span>](../../../videos/authentication/configuring-sql-to-work-with-membership-schemas.md)
- [<span data-ttu-id="5e1e2-463">기본 멤버 자격 스키마에서 멤버 자격 설정 변경</span><span class="sxs-lookup"><span data-stu-id="5e1e2-463">Changing Membership Settings in the Default Membership Schema</span></span>](../../../videos/authentication/changing-membership-settings-in-the-default-membership-schema.md)

### <a name="about-the-author"></a><span data-ttu-id="5e1e2-464">저자 정보</span><span class="sxs-lookup"><span data-stu-id="5e1e2-464">About the Author</span></span>

<span data-ttu-id="5e1e2-465">Scott Mitchell는 여러 ASP/ASP. NET books의 작성자와 4GuysFromRolla.com의 창립자가 1998부터 Microsoft 웹 기술을 사용 하 여 작업 했습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-465">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="5e1e2-466">Scott은 독립 컨설턴트, 강사 및 기록기로 작동 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-466">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="5e1e2-467">최신 책은 *[24 시간 이내에 ASP.NET 2.0을 sams teach yourself](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)* 것입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-467">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="5e1e2-468">Scott은에서 또는의 블로그를 통해 연결할 수 있습니다 [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) [http://ScottOnWriting.NET](http://scottonwriting.net/) .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-468">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="5e1e2-469">특별히 감사 합니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-469">Special Thanks To</span></span>

<span data-ttu-id="5e1e2-470">이 자습서 시리즈는 많은 유용한 검토자가 검토 했습니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-470">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="5e1e2-471">이 자습서의 리드 검토자는 Alicja Maziarz입니다.</span><span class="sxs-lookup"><span data-stu-id="5e1e2-471">Lead reviewer for this tutorial was Alicja Maziarz.</span></span> <span data-ttu-id="5e1e2-472">예정 된 MSDN 문서를 검토 하는 데 관심이 있나요?</span><span class="sxs-lookup"><span data-stu-id="5e1e2-472">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="5e1e2-473">그렇다면 줄을에 놓습니다 [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) .</span><span class="sxs-lookup"><span data-stu-id="5e1e2-473">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="5e1e2-474">[이전](storing-additional-user-information-cs.md)
> [다음](creating-user-accounts-vb.md)</span><span class="sxs-lookup"><span data-stu-id="5e1e2-474">[Previous](storing-additional-user-information-cs.md)
[Next](creating-user-accounts-vb.md)</span></span>
