---
uid: web-pages/overview/performance-and-traffic/15-caching-to-improve-the-performance-of-your-website
title: 성능 향상을 위해 ASP.NET 웹 페이지 (Razor) 사이트에서 데이터 캐싱 | Microsoft Docs
author: Rick-Anderson
description: 저장소를 저장 하 여 웹 사이트의 속도를 높일 수 있습니다. 즉, 일반적으로 ...을 검색 하거나 처리 하는 데 상당한 시간이 소요 되는 데이터의 결과를 캐시 합니다.
ms.author: riande
ms.date: 02/14/2014
ms.assetid: 961e525b-7700-469e-8a68-d7010b6fb68c
msc.legacyurl: /web-pages/overview/performance-and-traffic/15-caching-to-improve-the-performance-of-your-website
msc.type: authoredcontent
ms.openlocfilehash: 01796d3ca699a6af5d9162b22a926551435c2040
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78521159"
---
# <a name="caching-data-in-an-aspnet-web-pages-razor-site-for-better-performance"></a><span data-ttu-id="98ca0-103">성능 향상을 위해 ASP.NET 웹 페이지 (Razor) 사이트에서 데이터 캐싱</span><span class="sxs-lookup"><span data-stu-id="98ca0-103">Caching Data in an ASP.NET Web Pages (Razor) Site for Better Performance</span></span>

<span data-ttu-id="98ca0-104">만든 사람 [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="98ca0-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="98ca0-105">이 문서에서는 도우미를 사용 하 여 ASP.NET 웹 페이지 (Razor) 웹 사이트에서 더 빠른 성능을 위해 정보를 캐시 하는 방법을 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-105">This article explains how to use a helper to cache information for faster performance in an ASP.NET Web Pages (Razor) website.</span></span> <span data-ttu-id="98ca0-106">웹 사이트 &#8212; 의 속도를 향상 시킬 수 있습니다. 즉, 일반적으로 &#8212; 검색 또는 처리 하는 데 상당한 시간이 걸리고 자주 변경 되지 않는 데이터의 결과를 캐시 합니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-106">You can speed up your website by having it store &#8212; that is, cache &#8212; the results of data that ordinarily would take considerable time to retrieve or process and that does not change often.</span></span>
> 
> <span data-ttu-id="98ca0-107">**학습 내용:**</span><span class="sxs-lookup"><span data-stu-id="98ca0-107">**What you'll learn:**</span></span> 
> 
> - <span data-ttu-id="98ca0-108">캐싱을 사용 하 여 웹 사이트의 응답성을 향상 시키는 방법</span><span class="sxs-lookup"><span data-stu-id="98ca0-108">How to use caching to improve the responsiveness of your website.</span></span>
> 
> <span data-ttu-id="98ca0-109">다음은이 문서에 도입 된 ASP.NET 기능입니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-109">These are the ASP.NET features introduced in the article:</span></span>
> 
> - <span data-ttu-id="98ca0-110">`WebCache` 도우미입니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-110">The `WebCache` helper.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="98ca0-111">자습서에서 사용 되는 소프트웨어 버전</span><span class="sxs-lookup"><span data-stu-id="98ca0-111">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="98ca0-112">ASP.NET 웹 페이지 (Razor) 3</span><span class="sxs-lookup"><span data-stu-id="98ca0-112">ASP.NET Web Pages (Razor) 3</span></span>
>   
> 
> <span data-ttu-id="98ca0-113">이 자습서는 ASP.NET 웹 페이지 2 에서도 작동 합니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-113">This tutorial also works with ASP.NET Web Pages 2.</span></span>

<span data-ttu-id="98ca0-114">누군가가 사이트에서 페이지를 요청할 때마다 웹 서버는 요청을 수행 하기 위해 일부 작업을 수행 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-114">Every time someone requests a page from your site, the web server has to do some work in order to fulfill the request.</span></span> <span data-ttu-id="98ca0-115">일부 페이지의 경우 서버는 데이터베이스에서 데이터를 검색 하는 것과 같이 비교적 긴 시간을 사용 하는 작업을 수행 해야 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-115">For some of your pages, the server might have to perform tasks that take a (comparatively) long time, such as retrieving data from a database.</span></span> <span data-ttu-id="98ca0-116">이러한 작업에는 절대 시간이 오래 걸리지 않지만 사이트에 많은 트래픽이 발생 하는 경우 웹 서버에서 복잡 한 작업을 수행 하는 일련의 개별 요청이 많은 작업을 추가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-116">Even if these tasks don't take long in absolute terms, if your site experiences a lot of traffic, a whole series of individual requests that cause the web server to perform the complicated or slow task can add up to a lot of work.</span></span> <span data-ttu-id="98ca0-117">이는 궁극적으로 사이트의 성능에 영향을 줄 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-117">This can ultimately affect the performance of the site.</span></span>

<span data-ttu-id="98ca0-118">이와 같은 상황에서 웹 사이트의 성능을 향상 시키는 한 가지 방법은 데이터를 캐시 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-118">One way to improve the performance of your website in circumstances like this is to cache data.</span></span> <span data-ttu-id="98ca0-119">사이트에서 동일한 정보에 대 한 반복 된 요청을 가져오고 각 사용자에 대 한 정보를 수정할 필요가 없고 시간이 중요 하지 않은 경우에는 데이터를 한 번 페치 한 다음 결과를 저장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-119">If your site gets repeated requests for the same information, and the information does not need to be modified for each person, and it's not time sensitive, instead of re-fetching or recalculating it, you can fetch the data once and then store the results.</span></span> <span data-ttu-id="98ca0-120">다음에 해당 정보에 대 한 요청이 들어올 때 캐시에서 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-120">The next time a request comes in for that information, you just get it out of the cache.</span></span>

<span data-ttu-id="98ca0-121">일반적으로 자주 변경 되지 않는 정보를 캐시 합니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-121">In general, you cache information that doesn't change frequently.</span></span> <span data-ttu-id="98ca0-122">캐시에 정보를 저장 하면 웹 서버의 메모리에 저장 됩니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-122">When you put information in the cache, it's stored in memory on the web server.</span></span> <span data-ttu-id="98ca0-123">몇 초에서 며칠까지 캐시 해야 하는 기간을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-123">You can specify how long it should be cached, from seconds to days.</span></span> <span data-ttu-id="98ca0-124">캐싱 기간이 만료 되 면 정보가 캐시에서 자동으로 제거 됩니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-124">When the caching period expires, the information is automatically removed from the cache.</span></span>

> [!NOTE]
> <span data-ttu-id="98ca0-125">캐시의 항목이 만료 된 것 이외의 이유로 인해 제거 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-125">Entries in the cache might be removed for reasons other than that they've expired.</span></span> <span data-ttu-id="98ca0-126">예를 들어 웹 서버에 일시적으로 메모리가 부족 하거나 메모리를 회수할 수 있는 한 가지 방법은 캐시에서 항목을 throw 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-126">For example, the web server might temporarily run low on memory, and one way it can reclaim memory is by throwing entries out of the cache.</span></span> <span data-ttu-id="98ca0-127">캐시에 정보를 입력 한 경우에도 필요한 경우에도 해당 정보를 확인할 수 있는지 확인 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-127">As you'll see, even if you've put information into the cache, you have to check to be sure it's still there when you need it.</span></span>

<span data-ttu-id="98ca0-128">웹 사이트에 현재 온도 및 날씨 예보를 표시 하는 페이지가 있다고 가정 합니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-128">Imagine your website has a page that displays the current temperature and weather forecast.</span></span> <span data-ttu-id="98ca0-129">이러한 유형의 정보를 얻으려면 외부 서비스로 요청을 보낼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-129">To get this type of information, you might send a request to an external service.</span></span> <span data-ttu-id="98ca0-130">이 정보는 크게 변경 되지 않으므로 (예: 2 시간 동안) 외부 호출에 시간과 대역폭이 필요 하므로 캐싱에 적합 합니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-130">Since this information doesn't change much (within a two-hour time period, for example) and since external calls require time and bandwidth, it's a good candidate for caching.</span></span>

## <a name="adding-caching-to-a-page"></a><span data-ttu-id="98ca0-131">페이지에 캐싱 추가</span><span class="sxs-lookup"><span data-stu-id="98ca0-131">Adding Caching to a Page</span></span>

<span data-ttu-id="98ca0-132">ASP.NET에는 사이트에 캐싱을 추가 하 고 캐시에 데이터를 추가 하는 데 사용 되는 `WebCache` 도우미가 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-132">ASP.NET includes a `WebCache` helper that makes it easy to add caching to your site and add data to the cache.</span></span> <span data-ttu-id="98ca0-133">이 절차에서는 현재 시간을 캐시 하는 페이지를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-133">In this procedure, you'll create a page that caches the current time.</span></span> <span data-ttu-id="98ca0-134">실제 예는 아니지만 현재 시간은 자주 변경 되 고 계산 하기 복잡 하지 않기 때문입니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-134">This isn't a real-world example, since the current time is something that does change often, and that moreover isn't complex to calculate.</span></span> <span data-ttu-id="98ca0-135">그러나 캐싱 작업을 설명 하는 좋은 방법입니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-135">However, it's a good way to illustrate caching in action.</span></span>

1. <span data-ttu-id="98ca0-136">웹 사이트에 *Webcache. cshtml* 라는 새 페이지를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-136">Add a new page named *WebCache.cshtml* to the website.</span></span>
2. <span data-ttu-id="98ca0-137">페이지에 다음 코드 및 태그를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-137">Add the following code and markup to the page:</span></span>

    [!code-cshtml[Main](15-caching-to-improve-the-performance-of-your-website/samples/sample1.cshtml)]

    <span data-ttu-id="98ca0-138">데이터를 캐시 하는 경우 웹 사이트에서 고유한 이름을 사용 하 여 캐시에 저장 합니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-138">When you cache data, you put it into the cache using a name this is unique across the website.</span></span> <span data-ttu-id="98ca0-139">이 경우 `CachedTime`라는 캐시 항목을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-139">In this case, you'll use a cache entry named `CachedTime`.</span></span> <span data-ttu-id="98ca0-140">다음은 코드 예제에 표시 된 `cacheItemKey`입니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-140">This is the `cacheItemKey` shown in the code example.</span></span>

    <span data-ttu-id="98ca0-141">코드는 먼저 `CachedTime` 캐시 엔트리를 읽습니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-141">The code first reads the `CachedTime` cache entry.</span></span> <span data-ttu-id="98ca0-142">값이 반환 되는 경우 (즉, 캐시 엔트리가 null이 아닌 경우) 코드는 시간 변수의 값을 캐시 데이터로 설정 하기만 합니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-142">If a value is returned (that is, if the cache entry isn't null), the code just sets the value of the time variable to the cache data.</span></span>

    <span data-ttu-id="98ca0-143">그러나 캐시 항목이 존재 하지 않는 경우 (즉, null) 코드에서 시간 값을 설정 하 고, 캐시에 추가 하 고, 만료 값을 1 분으로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-143">However, if the cache entry doesn't exist (that is, it's null), the code sets the time value, adds it to the cache, and sets an expiration value to one minute.</span></span> <span data-ttu-id="98ca0-144">1 분 후 캐시 항목이 삭제 됩니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-144">After one minute, the cache entry is discarded.</span></span> <span data-ttu-id="98ca0-145">캐시의 항목에 대 한 기본 만료 값은 20 분입니다. 명령 `WebCache.Set(cacheItemKey, time, 1, false)`는 캐시에 현재 시간 값을 추가 하 고 만료 시간을 1 분으로 설정 하는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-145">(The default expiration value for an item in the cache is 20 minutes.) The command `WebCache.Set(cacheItemKey, time, 1, false)` shows how to add the current time value to the cache and set its expiration to 1 minute.</span></span> <span data-ttu-id="98ca0-146">*SlidingExpiration* 매개 변수를 `false`로 설정 하면 만료 시간이 요청 될 때마다 갱신 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-146">Setting the *slidingExpiration* parameter to `false` means the expiration time is not renewed each time it is requested.</span></span> <span data-ttu-id="98ca0-147">원래 캐시에 추가 된 후 정확히 1 분 후에 만료 됩니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-147">It will expire exactly 1 minute after it was originally added to the cache.</span></span> <span data-ttu-id="98ca0-148">이 값을로 설정 하면 캐시에서 값이 요청 될 때마다 1 분의 만료 시간이 다시 설정 됩니다 `true`.</span><span class="sxs-lookup"><span data-stu-id="98ca0-148">If you set this value to `true` the 1 minute expiration time is reset each time the value is requested from the cache.</span></span>

    <span data-ttu-id="98ca0-149">이 코드는 데이터를 캐시할 때 항상 사용 해야 하는 패턴을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-149">This code illustrates the pattern you should always use when you cache data.</span></span> <span data-ttu-id="98ca0-150">캐시에서 항목을 가져오기 전에 항상 `WebCache.Get` 메서드가 null을 반환 했는지 여부를 먼저 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-150">Before you get something out of the cache, always check first whether the `WebCache.Get` method has returned null.</span></span> <span data-ttu-id="98ca0-151">캐시 엔트리가 만료 되었거나 일부 다른 이유로 제거 되었을 수 있으므로 지정 된 항목이 캐시에 있는 것이 보장 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-151">Remember that the cache entry might have expired or might have been removed for some other reason, so any given entry is never guaranteed to be in the cache.</span></span>
3. <span data-ttu-id="98ca0-152">브라우저에서 *Webcache. cshtml* 를 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-152">Run *WebCache.cshtml* in a browser.</span></span> <span data-ttu-id="98ca0-153">(파일을 실행 하기 전에 해당 페이지가 **파일** 작업 영역에서 선택 되어 있는지 확인 합니다.) 페이지를 처음 요청할 때 시간 데이터는 캐시에 없고 코드는 시간 값을 캐시에 추가 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-153">(Make sure the page is selected in the **Files** workspace before you run it.) The first time you request the page, the time data isn't in the cache, and the code has to add the time value to the cache.</span></span>

    ![cache-1](15-caching-to-improve-the-performance-of-your-website/_static/image1.jpg)
4. <span data-ttu-id="98ca0-155">브라우저에서 *Webcache. cshtml* 를 새로 고칩니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-155">Refresh *WebCache.cshtml* in the browser.</span></span> <span data-ttu-id="98ca0-156">이번에는 시간 데이터가 캐시에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-156">This time, the time data is in the cache.</span></span> <span data-ttu-id="98ca0-157">페이지를 마지막으로 본 이후 시간이 변경 되지 않은 것을 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-157">Notice that the time hasn't changed since the last time you viewed the page.</span></span>

    ![cache-2](15-caching-to-improve-the-performance-of-your-website/_static/image2.jpg)
5. <span data-ttu-id="98ca0-159">캐시를 비울 때까지 1 분 정도 기다린 다음 페이지를 새로 고칩니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-159">Wait one minute for the cache to be emptied, and then refresh the page.</span></span> <span data-ttu-id="98ca0-160">이 페이지는 캐시에서 데이터를 찾을 수 없는 시간 및 업데이트 된 시간을 캐시에 추가 했음을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="98ca0-160">The page again indicates that the time data wasn't found in the cache, and the updated time is added to the cache.</span></span>

<a id="Additional_Resources"></a>
## <a name="additional-resources"></a><span data-ttu-id="98ca0-161">추가 리소스</span><span class="sxs-lookup"><span data-stu-id="98ca0-161">Additional Resources</span></span>

- [<span data-ttu-id="98ca0-162">차트에 데이터 표시</span><span class="sxs-lookup"><span data-stu-id="98ca0-162">Displaying Data in a Chart</span></span>](https://go.microsoft.com/fwlink/?LinkId=202895)
- <span data-ttu-id="98ca0-163">[Webcache API 참조](https://msdn.microsoft.com/library/system.web.helpers.webcache(v=vs.99).aspx) (MSDN)</span><span class="sxs-lookup"><span data-stu-id="98ca0-163">[WebCache API reference](https://msdn.microsoft.com/library/system.web.helpers.webcache(v=vs.99).aspx) (MSDN)</span></span>
