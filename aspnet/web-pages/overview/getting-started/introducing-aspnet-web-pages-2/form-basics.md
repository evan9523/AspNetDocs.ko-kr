---
uid: web-pages/overview/getting-started/introducing-aspnet-web-pages-2/form-basics
title: ASP.NET 웹 페이지 소개-HTML 양식 기본 사항 | Microsoft Docs
author: Rick-Anderson
description: 이 자습서에서는 ASP.NET 웹 페이지 (Razor)를 사용할 때 입력 폼을 만드는 방법 및 사용자 입력을 처리 하는 방법의 기본 사항을 보여 줍니다. 이제 ...
ms.author: riande
ms.date: 05/28/2015
ms.assetid: 81ed82bf-b940-44f1-b94a-555d0cb7cc98
msc.legacyurl: /web-pages/overview/getting-started/introducing-aspnet-web-pages-2/form-basics
msc.type: authoredcontent
ms.openlocfilehash: f57661077ec3bb13f3d4ec41b130bda4d2fb9070
ms.sourcegitcommit: c62ec20b453cee3249eb894ecd75013b57d078f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/21/2020
ms.locfileid: "92345459"
---
# <a name="introducing-aspnet-web-pages---html-form-basics"></a>ASP.NET 웹 페이지 소개-HTML 양식 기본 사항

[Tom FitzMacken](https://github.com/tfitzmac)

> 이 자습서에서는 ASP.NET 웹 페이지 (Razor)를 사용할 때 입력 폼을 만드는 방법 및 사용자 입력을 처리 하는 방법의 기본 사항을 보여 줍니다. 이제 데이터베이스를 만들었으므로 사용자는 폼 기술을 사용 하 여 사용자가 데이터베이스에서 특정 동영상을 찾을 수 있습니다. [ASP.NET 웹 페이지를 사용 하 여 데이터를 표시 하](/aspnet/web-pages/overview/getting-started/introducing-aspnet-web-pages-2/displaying-data)는 방법을 소개 하는 시리즈를 완료 했다고 가정 합니다.
> 
> 학습할 내용:
> 
> - 표준 HTML 요소를 사용 하 여 폼을 만드는 방법
> - 양식에서 사용자의 입력을 읽는 방법
> - 사용자가 제공 하는 검색 용어를 사용 하 여 선택적으로 데이터를 가져오는 SQL 쿼리를 만드는 방법입니다.
> - 페이지에 필드를 포함 하는 방법은 사용자가 입력 한 내용입니다.
>   
> 
> 설명 하는 기능/기술:
> 
> - `Request` 개체
> - SQL `Where` 절입니다.

## <a name="what-youll-build"></a>만들 내용

이전 자습서에서는 데이터베이스를 만들고 데이터를 추가한 다음 도우미를 사용 하 여 데이터를 표시 했습니다 `WebGrid` . 이 자습서에서는 특정 장르의 영화를 찾거나 제목에 입력 한 단어가 포함 된 검색 상자를 추가 합니다. (예를 들어 장르가 "Action" 이거나 제목에 "Harry" 또는 "어드벤처" 인 모든 영화를 찾을 수 있습니다.

이 자습서를 완료 한 후에는 다음과 같은 페이지가 표시 됩니다.

![장르 및 제목 검색을 사용 하는 동영상 페이지](form-basics/_static/image1.png)

페이지의 목록 부분은 마지막 자습서의 표 형태와 동일 합니다 &mdash; . 차이점은 검색 한 동영상과 표 형태 창에 표시 됩니다.

## <a name="about-html-forms"></a>HTML 양식 정보

(및의 차이점을 포함 하 여 HTML 양식을 만든 경험이 있는 경우 `GET` `POST` 이 섹션을 건너뛸 수 있습니다.)

양식에는 사용자 입력 요소 &mdash; 텍스트 상자, 단추, 라디오 단추, 확인란, 드롭다운 목록 등이 있습니다. 사용자는 이러한 컨트롤을 채우거 나 선택 항목을 만든 다음 단추를 클릭 하 여 양식을 제출 합니다.

다음 예제에서는 양식의 기본 HTML 구문을 보여 줍니다.

[!code-html[Main](form-basics/samples/sample1.html)]

이 태그가 페이지에서 실행 되는 경우 다음 그림과 같이 간단한 폼을 만듭니다.

![브라우저에서 렌더링 된 기본 HTML 폼](form-basics/_static/image2.png)

`<form>`요소는 제출할 HTML 요소를 포함 합니다. 요소를 페이지에 추가한 다음 요소 내에 배치 하는 것은 쉽지 않습니다 `<form>` . 이 경우 아무 것도 전송 되지 않습니다.) `method` 특성은 브라우저에 사용자 입력을 전송 하는 방법을 알려줍니다. `post`서버에 대 한 업데이트를 수행 하는 경우 또는 서버에서 데이터를 인출 하는 경우로 설정 `get` 합니다.

<a id="GET,_POST,_and_HTTP_Verb_Safety"></a>

> [!TIP] 
> 
> **GET, POST 및 HTTP 동사 안전성**
> 
> 브라우저와 서버가 정보를 교환 하는 데 사용 하는 프로토콜인 HTTP는 기본 작업에서 매우 간단 합니다. 브라우저는 소수의 동사로 사용 하 여 서버에 요청을 만듭니다. 웹에 대 한 코드를 작성 하는 경우 이러한 동사와 브라우저 및 서버에서 이러한 동사를 사용 하는 방법을 이해 하는 것이 유용 합니다. 가장 일반적으로 사용 되는 동사는 다음과 같습니다.
> 
> - `GET`. 브라우저는이 동사를 사용 하 여 서버에서 항목을 가져옵니다. 예를 들어 브라우저에 URL을 입력 하면 브라우저에서 `GET` 원하는 페이지를 요청 하는 작업을 수행 합니다. 페이지가 그래픽을 포함 하는 경우 브라우저는 `GET` 이미지를 가져오기 위해 추가 작업을 수행 합니다. 작업에서 `GET` 서버에 정보를 전달 해야 하는 경우 정보는 쿼리 문자열에서 URL의 일부로 전달 됩니다.
> - `POST`. 브라우저는 `POST` 서버에서 추가 하거나 변경할 데이터를 전송 하기 위해 요청을 보냅니다. 예를 들어 `POST` 동사는 데이터베이스에 레코드를 만들거나 기존 레코드를 변경 하는 데 사용 됩니다. 대부분의 경우 양식을 입력 하 고 제출 단추를 클릭 하면 브라우저에서 작업을 수행 `POST` 합니다. 작업에서 `POST` 서버에 전달 되는 데이터는 페이지의 본문에 있습니다.
> 
> 이러한 동사는 `GET` 작업에서 서버에 있는 모든 항목을 변경 하거나 약간 더 추상적인 방식으로 전환할 필요가 없다는 중요 한 차이점입니다 `GET` . 작업으로 인해 서버에서 상태가 변경 되지 않습니다. 원하는 `GET` 횟수 만큼 동일한 리소스에 대 한 작업을 수행할 수 있으며 이러한 리소스는 변경 되지 않습니다. ( `GET` 일반적으로 작업은 "안전" 하거나 기술 용어를 사용 하는 것이 *idempotent*입니다.) 물론 이와 달리 요청은 작업을 `POST` 수행할 때마다 서버에 있는 항목을 변경 합니다.
> 
> 이러한 차이점을 보여 주는 두 가지 예는 다음과 같습니다. Bing 또는 Google과 같은 엔진을 사용 하 여 검색을 수행 하는 경우 하나의 텍스트 상자를 구성 하는 폼을 채운 다음 검색 단추를 클릭 합니다. 브라우저는 `GET` URL의 일부로 전달 된 상자에 입력 한 값을 사용 하 여 작업을 수행 합니다. `GET`검색 작업에서 서버에 있는 리소스를 변경 하지 않으므로 정보를 인출 하기 때문에 이러한 형식의 폼에 작업을 사용 하는 것은 문제가 되지 않습니다.
> 
> 이제 온라인으로 항목을 정렬 하는 프로세스를 고려 합니다. 주문 정보를 입력 한 다음 제출 단추를 클릭 합니다. 이 작업은 `POST` 새 주문 레코드, 계정 정보 변경 및 기타 많은 변경 내용 등 서버에서 변경 작업을 수행 하기 때문에 요청이 됩니다. 작업과 달리 `GET` 요청을 반복할 수 없습니다 `POST` . 요청을 다시 제출할 때마다 서버에서 새 주문을 생성 합니다. 이와 같은 경우에는 웹 사이트에서 전송 단추를 두 번 이상 클릭 하지 않거나 제출 단추를 사용 하지 않도록 설정 하 여 실수로 양식을 다시 전송 하지 않도록 경고 하는 경우가 많습니다.
> 
> 이 자습서에서는 `GET` 작업 및 작업을 모두 사용 `POST` 하 여 HTML 양식 작업을 수행 합니다. 사용 하는 동사가 적절 한 경우 각 사례에 대해 설명 합니다.
> 
> HTTP 동사에 대 한 자세한 내용은 W3C 사이트에서 [메서드 정의](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html) 문서를 참조 하세요.

대부분의 사용자 입력 요소는 HTML `<input>` 요소입니다. `<input type="type" name="name">,`여기서 *형식은* 원하는 사용자 입력 컨트롤의 종류를 나타내는 경우와 같습니다. 이러한 요소는 일반적인 요소입니다.

- 텍스트 상자: `<input type="text">`
- 확인란: `<input type="check">`
- 라디오 단추: `<input type="radio">`
- 단추만 `<input type="button">`
- 제출 단추: `<input type="submit">`

요소를 사용 하 여 `<textarea>` 여러 줄 텍스트 상자와 요소를 만들어 `<select>` 드롭다운 목록이 나 스크롤 가능한 목록을 만들 수도 있습니다. HTML 양식 요소에 대 한 자세한 내용은 W3Schools 사이트의 [Html 양식 및 입력](http://www.w3schools.com/html/html_forms.asp) 을 참조 하세요.

특성은 나중에 표시 되는 것 `name` 처럼 나중에 요소의 값을 가져오는 방법 이기 때문에 매우 중요 합니다.

흥미로운 부분은 사용자의 사용자 입력을 사용 하 여 페이지 개발자가 수행 하는 작업입니다. 이러한 요소와 연결 된 기본 제공 동작은 없습니다. 대신 사용자가 입력 하거나 선택한 값을 가져와야 하는 값을 가져와야 합니다. 이 자습서에서 배우게 될 것입니다.

> [!TIP] 
> 
> **HTML5 및 입력 양식**
> 
> 아시다시피 HTML은 전환 하 고 최신 버전 (HTML5)에는 사용자가 정보를 입력할 수 있는 보다 직관적인 방법에 대 한 지원이 포함 되어 있습니다. 예를 들어 HTML5에서 사용자 (페이지 개발자)는 사용자가 날짜를 입력 하도록 페이지에 지시할 수 있습니다. 그러면 브라우저에서 사용자에 게 날짜를 수동으로 입력 하도록 요구 하지 않고 자동으로 달력을 표시할 수 있습니다. 그러나 HTML5는 새로운 것 이며 모든 브라우저에서 아직 지원 되지 않습니다.
> 
> ASP.NET 웹 페이지은 사용자의 브라우저에서 사용 하는 범위에 대 한 HTML5 입력을 지원 합니다. HTML5에서 요소의 새 특성에 대 한 개념은 `<input>` W3Schools 사이트의 [HTML &lt; 입력 &gt; 형식 특성](http://www.w3schools.com/html/html_form_input_types.asp) 을 참조 하세요.

## <a name="creating-the-form"></a>폼 만들기

WebMatrix의 **파일** 작업 영역에서 *동영상. cshtml* 페이지를 엽니다.

닫는 태그 뒤 `</h1>` 와 호출의 여는 `<div>` 태그 앞에 `grid.GetHtml` 다음 태그를 추가 합니다.

[!code-html[Main](form-basics/samples/sample2.html)]

이 태그는 이라는 텍스트 상자와 제출 단추를 포함 하는 폼을 만듭니다 `searchGenre` . 텍스트 상자 및 전송 단추는 `<form>` 특성이로 설정 된 요소에 포함 됩니다 `method` `get` . 텍스트 상자와 제출 단추를 요소 내에 배치 하지 않는 경우 단추를 `<form>` 클릭 하면 아무것도 전송 되지 않습니다. `GET` 여기서는 서버에서 변경 하지 않는 폼을 만들기 때문에 동사를 사용 합니다 .이는 검색을 수행 하는 것입니다. 이전 자습서에서는 `post` 서버에 변경 내용을 전송 하는 방법에 해당 하는 메서드를 사용 했습니다. 다음 자습서에서 다시 확인할 수 있습니다.

페이지를 실행 합니다. 폼에 대 한 동작을 정의 하지 않은 경우에는 다음과 같은 모양을 확인할 수 있습니다.

![장르 검색 상자를 사용 하는 동영상 페이지](form-basics/_static/image3.png)

텍스트 상자에 값을 입력 합니다 (예: "코미디"). 그런 다음 **검색 장르**를 클릭 합니다.

페이지의 URL을 기록해 둡니다. 요소의 특성을로 설정 했기 때문에 `<form>` `method` `get` 입력 한 값은 이제 다음과 같이 URL의 쿼리 문자열에 포함 됩니다.

`http://localhost:45661/Movies.cshtml?searchGenre=Comedy`

## <a name="reading-form-values"></a>양식 값 읽기

페이지에는 데이터베이스 데이터를 가져오고 결과를 표 형태로 표시 하는 코드가 이미 포함 되어 있습니다. 이제 텍스트 상자의 값을 읽어 검색 용어를 포함 하는 SQL 쿼리를 실행할 수 있도록 코드를 추가 해야 합니다.

폼의 메서드를로 설정 했기 때문에 `get` 다음과 같은 코드를 사용 하 여 텍스트 상자에 입력 한 값을 읽을 수 있습니다.

`var searchTerm = Request.QueryString["searchGenre"];`

`Request.QueryString`개체 ( `QueryString` 개체의 속성)에는 `Request` 작업의 일부로 제출 된 요소의 값이 포함 됩니다 `GET` . 속성에는 `Request.QueryString` 폼에 제출 된 값의 *컬렉션* (목록)이 포함 되어 있습니다. 개별 값을 가져오려면 원하는 요소의 이름을 지정 합니다. 이는 `name` `<input>` `searchTerm` 텍스트 상자를 만드는 요소 ()에 특성이 있어야 하기 때문입니다. 개체에 대 한 자세한 `Request` 내용은 뒷부분에 있는 [사이드바](#BKMK_TheRequestObject) 를 참조 하십시오.

텍스트 상자의 값을 읽을 수 있을 정도로 간단 합니다. 그러나 사용자가 텍스트 상자에 아무 것도 입력 하지 않았지만 **검색** 을 클릭 한 경우에는 검색할 항목이 없으므로 해당 클릭을 무시할 수 있습니다.

다음 코드는 이러한 조건을 구현 하는 방법을 보여 주는 예제입니다. 이 코드는 아직 추가할 필요가 없습니다. 잠시 후에이 작업을 수행 합니다.

[!code-csharp[Main](form-basics/samples/sample3.cs)]

테스트는 다음과 같은 방식으로 중단 됩니다.

- 의 값 `Request.QueryString["searchGenre"]` , 즉 라는 요소에 입력 된 값을 가져옵니다 `<input>` `searchGenre` .
- 메서드를 사용 하 여 비어 있는지 확인 `IsEmpty` 합니다. 이 메서드는 폼 요소와 같은 항목에 값이 포함 되어 있는지 여부를 확인 하는 표준 방법입니다. 그러나 비어 *있지 않은* 경우에만 주의 해야 합니다. 따라서
- `!`테스트 앞에 연산자를 추가 `IsEmpty` 합니다. 연산자는 `!` 논리적 NOT을 의미 합니다.

일반 영어에서 전체 `if` 조건은 다음과 같이 변환 됩니다. *양식의 searchgenre 요소가 비어 있지* 않으면 ...

이 블록은 검색 용어를 사용 하는 쿼리를 만들기 위한 단계를 설정 합니다. 다음 섹션에서 구성을 완료합니다.

<a id="BKMK_TheRequestObject"></a>

> [!TIP] 
> 
> **요청 개체입니다.**
> 
> `Request`개체는 페이지를 요청 하거나 제출할 때 브라우저가 응용 프로그램에 보내는 모든 정보를 포함 합니다. 이 개체에는 텍스트 상자 값 또는 업로드할 파일 등 사용자가 제공 하는 모든 정보가 포함 됩니다. 쿠키, URL 쿼리 문자열의 값 (있는 경우), 실행 중인 페이지의 파일 경로, 사용자가 사용 하는 브라우저의 유형, 브라우저에 설정 된 언어 목록 등 모든 종류의 추가 정보를 포함 합니다.
> 
> `Request`개체는 값의 *컬렉션* (목록)입니다. 이름을 지정 하 여 컬렉션에서 개별 값을 가져옵니다.
> 
> `var someValue = Request["name"];`
> 
> `Request`개체는 실제로 여러 하위 집합을 노출 합니다. 예를 들면 다음과 같습니다.
> 
> - `Request.Form` 요청이 요청 인 경우 제출 된 요소 내의 요소에서 값을 제공 `<form>` `POST` 합니다.
> - `Request.QueryString` URL의 쿼리 문자열에 있는 값만 제공 합니다. (와 같은 URL에서 `http://mysite/myapp/page?searchGenre=action&page=2` `?searchGenre=action&page=2` url의 섹션은 쿼리 문자열입니다.)
> - `Request.Cookies` 컬렉션은 브라우저에서 보낸 쿠키에 대 한 액세스를 제공 합니다.
> 
> 전송 된 형식으로 알고 있는 값을 가져오려면를 사용할 수 있습니다 `Request["name"]` . 또는 요청에 대 한 보다 구체적인 버전 `Request.Form["name"]` `POST` 또는 `Request.QueryString["name"]` (요청)을 사용할 수 있습니다 `GET` . 물론 *name* 은 가져올 항목의 이름입니다.
> 
> 가져오려는 항목의 이름은 사용 중인 컬렉션 내에서 고유 해야 합니다. 이러한 이유로 개체는 `Request` 및와 같은 하위 집합을 제공 합니다 `Request.Form` `Request.QueryString` . 페이지에 라는 폼 요소가 포함 되어 `userName` 있고 이라는 쿠키 *도* 포함 하 고 있다고 가정 `userName` 합니다. 가져온 경우 `Request["userName"]` 폼 값 이나 쿠키를 사용할지 여부는 모호 합니다. 그러나 또는를 가져오는 경우 `Request.Form["userName"]` `Request.Cookie["userName"]` 가져올 값을 명시적으로 결정 하 게 됩니다.
> 
> `Request`또는와 같이 관심이 있는의 하위 집합을 사용 하는 것이 좋습니다 `Request.Form` `Request.QueryString` . 이 자습서에서 작성 하는 간단한 페이지의 경우에는 전혀 차이가 없는 것일 수 있습니다. 그러나 더 복잡 한 페이지를 만들 때 명시적 버전을 사용 `Request.Form` 하거나 `Request.QueryString` 페이지에 폼 (또는 여러 형식), 쿠키, 쿼리 문자열 값 등이 포함 되어 있을 때 발생할 수 있는 문제를 방지 하는 데 도움이 될 수 있습니다.

## <a name="creating-a-query-by-using-a-search-term"></a>검색 용어를 사용 하 여 쿼리 만들기

사용자가 입력 한 검색어를 가져오는 방법을 배웠으므로 이제 해당 검색어를 사용 하는 쿼리를 만들 수 있습니다. 데이터베이스에서 모든 영화 항목을 가져오려면 다음과 같은 SQL 쿼리를 사용 하 고 있는 것입니다.

`SELECT * FROM Movies`

특정 동영상만 가져오려면 절이 포함 된 쿼리를 사용 해야 `Where` 합니다. 이 절을 사용 하면 쿼리에서 반환 되는 행에 대 한 조건을 설정할 수 있습니다. 예는 다음과 같습니다.

`SELECT * FROM Movies WHERE Genre = 'Action'`

기본 형식은 `WHERE column = value` 입니다. 원하는 `=` `>` 항목에 따라 (보다 큼), `<` (보다 작음), ( `<>` 같지 않음), `<=` (작거나 같음) 등의 다른 연산자를 사용할 수 있습니다.

대/소문자를 구분 하는 경우 SQL 문은 대/소문자를 구분 하지 않습니다 &mdash; `SELECT` `Select` `select` . 그러나 사용자는 종종 및와 같은 SQL 문에 키워드를 사용 `SELECT` `WHERE` 하 여 보다 쉽게 읽을 수 있도록 합니다.

### <a name="passing-the-search-term-as-a-parameter"></a>검색 용어를 매개 변수로 전달

특정 장르를 검색 하는 것은 매우 간단 `WHERE Genre = 'Action'` 하지만 () 사용자가 입력 하는 장르를 검색할 수 있습니다. 이렇게 하려면 검색할 값의 자리 표시자를 포함 하는 SQL 쿼리로를 만듭니다. 다음 명령과 같이 표시 됩니다.

`SELECT * FROM Movies WHERE Genre = @0`

자리 표시자는 `@` 문자 뒤에 0이 옵니다. 짐작할 수 있듯이 쿼리는 여러 자리 표시자를 포함할 수 있으며,, 등으로 이름이 지정 됩니다 `@0` `@1` `@2` .

쿼리를 설정 하 고 값을 실제로 전달 하려면 다음과 같은 코드를 사용 합니다.

[!code-sql[Main](form-basics/samples/sample4.sql)]

이 코드는 표에 데이터를 표시 하기 위해 이미 수행한 것과 유사 합니다. 유일한 차이점은 다음과 같습니다.

- 쿼리에 자리 표시자 ()가 포함 되어 있습니다 `WHERE Genre = @0"` .
- 쿼리가 변수 ()에 배치 됩니다 `selectCommand` . 이전에는 쿼리를 메서드로 직접 전달 `db.Query` 했습니다.
- 메서드를 호출 하는 경우 `db.Query` 자리 표시자에 사용할 쿼리와 값을 모두 전달 합니다. 쿼리에 여러 자리 표시 자가 있으면이를 모두 메서드에 별도의 값으로 전달 합니다.

이러한 모든 요소를 함께 배치 하면 다음 코드를 얻을 수 있습니다.

[!code-csharp[Main](form-basics/samples/sample5.cs)]

> [!NOTE] 
> 
> **중요!** 자리 표시자 (예 `@0` :)를 사용 하 여 SQL 명령에 값을 전달 하는 것은 보안에 *매우 중요* 합니다. 여기서 표시 하는 방법은 SQL 명령을 생성 하는 유일한 방법입니다. 변수 데이터의 자리 표시자를 사용 하는 것입니다.
> 
> 리터럴 텍스트와 사용자가 가져온 값을 결합 (연결) 하 여 SQL 문을 생성 하지 않습니다. 사용자 입력을 SQL 문에 연결 하면 악의적인 사용자가 데이터베이스를 해킹 하는 페이지에 값을 제출 하는 *sql 삽입 공격* 에 대해 사이트가 열립니다. MSDN 웹 사이트의 [SQL 삽입](https://msdn.microsoft.com/library/ms161953.aspx) 문서에서 자세히 알아볼 수 있습니다.

## <a name="updating-the-movies-page-with-search-code"></a>검색 코드를 사용 하 여 동영상 페이지 업데이트

이제 *영화 cshtml* 파일의 코드를 업데이트할 수 있습니다. 시작 하려면 페이지 맨 위에 있는 코드 블록의 코드를 다음 코드로 바꿉니다.

[!code-csharp[Main](form-basics/samples/sample6.cs)]

여기서 차이점은 나중에 전달 하는 변수에 쿼리를 배치 했다는 것입니다 `selectCommand` `db.Query` . SQL 문을 변수에 배치 하면 문을 변경 하 여 검색을 수행 하는 데 사용할 수 있습니다.

다음 두 줄을 제거 하 여 나중에 다시 배치할 수도 있습니다.

[!code-csharp[Main](form-basics/samples/sample7.cs)]

아직 쿼리를 실행 하지 않고 (즉, 호출 `db.Query` ) 도우미를 초기화 하지 않으려는 경우 `WebGrid` 실행 해야 하는 SQL 문을 파악 한 후에는 이러한 작업을 수행 합니다.

이 다시 작성 된 블록 이후에 검색을 처리 하는 새 논리를 추가할 수 있습니다. 완성 된 코드는 다음과 같습니다. 이 예제와 일치 하도록 페이지의 코드를 업데이트 합니다.

[!code-cshtml[Main](form-basics/samples/sample8.cshtml)]

이제 페이지가 다음과 같이 작동 합니다. 페이지가 실행 될 때마다 코드는 데이터베이스를 열고 변수는 테이블의 `selectCommand` 모든 레코드를 가져오는 SQL 문으로 설정 됩니다 `Movies` . 또한이 코드는 변수를 초기화 `searchTerm` 합니다.

그러나 현재 요청에 요소에 대 한 값이 포함 되어 있으면 `searchGenre` 코드는 `selectCommand` 다른 쿼리로 설정 합니다. 즉, 절을 포함 하 여 `Where` 장르를 검색 합니다. 또한 `searchTerm` 검색 상자에 대해 전달 된 모든 항목을로 설정 합니다 (아무 것도 가능 하지 않음).

어떤 SQL 문이 있는지에 관계 없이 `selectCommand` 코드는 `db.Query` 를 호출 하 여 쿼리를 실행 하 고에 있는 모든 항목을 전달 `searchTerm` 합니다. 에 아무 것도 없는 경우 `searchTerm` 값을 전달할 매개 변수가 없기 때문에 중요 하지 않습니다 `selectCommand` .

마지막으로 코드는 `WebGrid` 이전과 마찬가지로 쿼리 결과를 사용 하 여 도우미를 초기화 합니다.

SQL 문과 검색 용어를 변수에 배치 하면 코드에 유연성이 추가 된 것을 볼 수 있습니다. 이 자습서의 뒷부분에서 볼 수 있듯이,이 기본 프레임 워크를 사용 하 고 다양 한 유형의 검색에 대 한 논리를 계속 추가할 수 있습니다.

## <a name="testing-the-search-by-genre-feature"></a>장르 검색 기능 테스트

WebMatrix에서 *동영상과* 페이지를 실행 합니다. 장르에 대 한 텍스트 상자가 있는 페이지가 표시 됩니다.

테스트 레코드 중 하나에 입력 한 장르를 입력 한 다음 **검색**을 클릭 합니다. 이번에는 해당 장르와 일치 하는 영화 목록만 표시 됩니다.

![장르 ' Comedies '를 검색 한 후 동영상 페이지 나열](form-basics/_static/image4.png)

다른 장르를 입력 하 고 다시 검색 하세요. 검색에서 대/소문자를 구분 하지 않는 것을 볼 수 있도록 모든 소문자 또는 대문자를 모두 사용 하 여 장르를 입력 해 보세요.

## <a name="remembering-what-the-user-entered"></a>사용자가 입력 한 내용 "기억"

장르를 입력 하 고 **검색 장르**를 클릭 하면 해당 장르 목록이 표시 된 것을 알 수 있습니다. 그러나 검색 텍스트 상자는 비어 &mdash; 있습니다. 즉, 입력 한 내용이 기억나지 않습니다.

이러한 동작이 발생 하는 이유를 이해 하는 것이 중요 합니다. 페이지를 제출 하면 브라우저는 웹 서버에 요청을 보냅니다. ASP.NET가 요청을 가져오는 경우 페이지의 새 인스턴스를 만들고, 코드를 실행 한 다음 페이지를 브라우저에 다시 렌더링 합니다. 실제로이 페이지는 이전 버전의로만 작업 하 고 있음을 인식 하지 못합니다. 여기에는 일부 양식 데이터가 포함 된 요청이 있음을 알고 있습니다.

&mdash;처음으로 또는 전송 하 여 페이지를 요청할 때마다 &mdash; 새 페이지가 표시 됩니다. 웹 서버에 마지막 요청의 메모리가 없습니다. 둘 다 ASP.NET를 수행 하지 않고 브라우저를 수행 하지 않습니다. 이러한 개별 페이지 인스턴스 간의 유일한 연결은 서로 전송 하는 데이터입니다. 예를 들어 페이지를 전송 하는 경우 새 페이지 인스턴스는 이전 인스턴스에서 보낸 양식 데이터를 가져올 수 있습니다. 페이지 간에 데이터를 전달 하는 또 다른 방법은 쿠키를 사용 하는 것입니다.

이러한 상황을 설명 하는 공식적인 방법은 웹 페이지가 *상태 비저장*이라는 것입니다. 웹 서버와 페이지 자체와 페이지의 요소는 페이지의 이전 상태에 대 한 정보를 유지 하지 않습니다. 웹은 개별 요청에 대 한 상태를 유지 하는 웹 서버의 리소스를 신속 하 게 고갈 하는 웹 서버의 리소스를 신속 하 게 고갈 하는 등의 방법으로 설계 되었습니다.

따라서 텍스트 상자가 비어 있는 것입니다. 페이지를 제출한 후 ASP.NET는 페이지의 새 인스턴스를 만들고 코드와 태그를 통해 실행 합니다. 이 코드에는 텍스트 상자에 값을 ASP.NET 지시 하는 항목이 없습니다. ASP.NET는 아무것도 수행 하지 않았으며 텍스트 상자가 값 없이 렌더링 되었습니다.

실제로이 문제를 해결 하는 쉬운 방법이 있습니다. 텍스트 상자에 입력 한 *장르는 코드* 에서 사용할 수 있습니다 &mdash; `Request.QueryString["searchGenre"]` .

`value`다음 예제와 같이 특성의 값을 가져오는 텍스트 상자의 태그를 업데이트 합니다 `searchTerm` .

[!code-html[Main](form-basics/samples/sample9.html?highlight=1)]

또한이 페이지에서는 사용자가 입력 한 장르를 `value` `searchTerm` 포함 하 고 있기 때문에 특성을 변수로 설정할 수도 있습니다. 그러나 `Request` `value` 이 작업을 수행 하는 표준 방법은 개체를 사용 하 여 여기에 표시 된 대로 특성을 설정 하는 것입니다. 일부 경우에도이 작업을 수행 하려는 경우 &mdash; 필드에 값을 *포함 하지 않고* 페이지를 렌더링 하는 것이 좋습니다. 앱을 사용 하 여 수행 되는 작업에 따라 달라 집니다.

> [!NOTE]
> 암호에 사용 되는 입력란의 값은 "기억할 수 없습니다". 사용자가 코드를 사용 하 여 암호 필드를 채울 수 있도록 하는 보안 허점이 될 것입니다.

페이지를 다시 실행 하 고 장르를 입력 한 다음 **장르 검색**을 클릭 합니다. 이번에는 검색 결과를 볼 수 있을 뿐만 아니라 텍스트 상자에서 마지막으로 입력 한 내용을 기억 합니다.

![텍스트 상자에 이전 항목이 ' 기억 됨 '이 있음을 보여 주는 페이지](form-basics/_static/image5.png)

## <a name="searching-for-any-word-in-the-title"></a>제목에서 단어를 검색 하는 중

이제 모든 장르를 검색할 수 있지만 제목을 검색할 수도 있습니다. 검색 시 정확한 제목을 확인 하는 것이 어려울 수 있으므로 제목 내부에 표시 되는 단어를 검색할 수 있습니다. SQL에서이를 수행 하려면 `LIKE` 다음과 같은 연산자와 구문을 사용 합니다.

`SELECT * FROM Movies WHERE Title LIKE '%adventure%'`

이 명령은 제목에 "어드벤처"가 포함 된 모든 영화를 가져옵니다. 연산자를 사용 하는 경우 `LIKE` 검색 용어의 일부로 와일드 카드 문자를 포함 `%` 합니다. 검색은 `LIKE 'adventure%'` "' 놀이 '로 시작"을 의미 합니다. 기술적으로는 "' 놀이 ' 문자열 뒤에 모든 항목이 있습니다."를 의미 합니다. 마찬가지로 검색 단어는 `LIKE '%adventure'` "' 놀이 ' 문자열이 뒤에 오는 모든 것을 의미 하며,이는" ' 놀이 '로 끝납니다. "라고 표시 하는 다른 방법입니다.

따라서 검색 용어는 `LIKE '%adventure%'` "' 놀이 '가 제목의 어디에 나 있습니다."를 의미 합니다. (기술적으로 "제목에 있는 모든 항목, ' 어드벤처 ', 그 뒤에 나오는 모든 항목")

요소 내 `<form>` 에서 장르 검색의 닫는 태그 바로 아래에 다음 태그를 추가 합니다 `</div>` (closing 요소 바로 앞 `</form>` ).

[!code-html[Main](form-basics/samples/sample10.html)]

검색을 조합 해야 한다는 점을 제외 하 고이 검색을 처리 하는 코드는 장르 검색에 대 한 코드와 비슷합니다 `LIKE` . 페이지 맨 위에 있는 코드 블록 내에서이 `if` 블록을 `if` 장르 검색의 블록 바로 뒤에 추가 합니다.

[!code-csharp[Main](form-basics/samples/sample11.cs)]

이 코드는 앞에서 살펴본 것과 동일한 논리를 사용 합니다. 단, 검색에서 연산자를 사용 하 `LIKE` 고 코드는 `%` 검색 용어 앞과 뒤에 ""를 넣습니다.

페이지에 다른 검색을 추가 하는 것이 얼마나 쉬운지 확인 합니다. 다음 작업을 수행 해야 했습니다.

- `if`관련 검색 상자에 값이 있는지 여부를 확인 하기 위해 테스트 한 블록을 만듭니다.
- 변수를 `selectCommand` 새 SQL 문으로 설정 합니다.
- 변수를 `searchTerm` 쿼리에 전달할 값으로 설정 합니다.

다음은 제목 검색의 새 논리를 포함 하는 전체 코드 블록입니다.

[!code-cshtml[Main](form-basics/samples/sample12.cshtml)]

이 코드에서 수행하는 기능을 요약하면 다음과 같습니다.

- 및 변수 `searchTerm` 는 `selectCommand` 위쪽에서 초기화 됩니다. 이러한 변수를 적절 한 검색 용어 (있는 경우) 및 사용자가 페이지에서 수행 하는 작업에 따라 적절 한 SQL 명령으로 설정 합니다. 기본 검색은 데이터베이스에서 모든 영화를 가져오는 간단한 사례입니다.
- 및에 대 한 테스트에서 `searchGenre` `searchTitle` 코드는 `searchTerm` 검색 하려는 값으로 설정 됩니다. 또한 해당 코드 블록 `selectCommand` 은 해당 검색을 위한 적절 한 SQL 명령으로 설정 됩니다.
- `db.Query`메서드는에 있는 SQL 명령 및 모든 값을 사용 하 여 한 번만 호출 됩니다 `selectedCommand` `searchTerm` . 검색 용어가 없는 경우 (장르는 없고 제목 단어가 없는 경우)의 값은 `searchTerm` 빈 문자열입니다. 그러나이 경우 쿼리는 매개 변수를 필요로 하지 않기 때문에 중요 하지 않습니다.

## <a name="testing-the-title-search-feature"></a>제목 검색 기능 테스트

이제 완료 된 검색 페이지를 테스트할 수 있습니다. *영화. cshtml*를 실행 합니다.

장르를 입력 하 고 **장르 검색**을 클릭 합니다. 표 형태 창에는 이전 처럼 해당 장르 동영상이 표시 됩니다.

제목 단어를 입력 하 고 **제목 검색**을 클릭 합니다. 제목에 해당 단어가 포함 된 동영상이 표 형태 창에 표시 됩니다.

![제목에서 ' a '를 검색 한 후 동영상 페이지 나열](form-basics/_static/image6.png)

두 텍스트 상자를 모두 비워 두고 단추 중 하나를 클릭 합니다. 표는 모든 영화를 표시 합니다.

## <a name="combining-the-queries"></a>쿼리 결합

수행할 수 있는 검색은 단독으로 수행 될 수 있습니다. 두 검색 상자에 값이 있는 경우에도 제목과 장르를 동시에 검색할 수 없습니다. 예를 들어 제목에 "어드벤처"가 포함 되어 있는 모든 작업 영화를 검색할 수 없습니다. (이제 페이지가 코딩 될 때 장르와 제목 모두에 값을 입력 하면 제목 검색이 우선적으로 적용 됩니다.) 조건을 결합 하는 검색을 만들려면 다음과 같은 구문을 포함 하는 SQL 쿼리를 만들어야 합니다.

`SELECT * FROM Movies WHERE Genre = @0 AND Title LIKE @1`

그리고 다음과 같은 문을 사용 하 여 쿼리를 실행 해야 합니다 (약 말하기).

`var selectedData = db.Query(selectCommand, searchGenre, searchTitle);`

검색 조건의 많은 순열을 허용 하는 논리를 만들면 볼 수 있듯이 약간의 관련을 얻을 수 있습니다. 따라서 여기서는 중지 됩니다.

## <a name="coming-up-next"></a>다음에서 시작

다음 자습서에서는 폼을 사용 하 여 사용자가 데이터베이스에 영화를 추가할 수 있도록 하는 페이지를 만듭니다.

## <a name="complete-listing-for-movie-page-updated-with-search"></a>동영상에 대 한 목록 완료 페이지 (검색으로 업데이트 됨)

[!code-cshtml[Main](form-basics/samples/sample13.cshtml)]

## <a name="additional-resources"></a>추가 리소스

- [Razor 구문을 사용하는 ASP.NET 웹 프로그래밍 소개](https://go.microsoft.com/fwlink/?LinkID=202890)
- W3Schools 사이트의 [SQL WHERE 절](http://www.w3schools.com/sql/sql_where.asp)
- W3C 사이트의 [메서드 정의](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html) 문서

> [!div class="step-by-step"]
> [이전](displaying-data.md)
> [다음](entering-data.md)
