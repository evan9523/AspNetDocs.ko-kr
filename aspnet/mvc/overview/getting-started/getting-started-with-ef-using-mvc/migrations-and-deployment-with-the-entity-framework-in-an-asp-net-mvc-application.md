---
uid: mvc/overview/getting-started/getting-started-with-ef-using-mvc/migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application
title: '자습서: ASP.NET MVC 앱에서 EF 마이그레이션 사용 및 Azure에 배포'
author: tdykstra
description: 이 자습서에서는 Code First 마이그레이션을 사용 하도록 설정 하 고 응용 프로그램을 Azure의 클라우드에 배포 합니다.
ms.author: riande
ms.date: 01/16/2019
ms.topic: tutorial
ms.assetid: d4dfc435-bda6-4621-9762-9ba270f8de4e
msc.legacyurl: /mvc/overview/getting-started/getting-started-with-ef-using-mvc/migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application
msc.type: authoredcontent
ms.openlocfilehash: 989dd0f0e18b338be057b9c5657586eff996d8ea
ms.sourcegitcommit: b95316530fa51087d6c400ff91814fe37e73f7e8
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/23/2019
ms.locfileid: "70000758"
---
# <a name="tutorial-use-ef-migrations-in-an-aspnet-mvc-app-and-deploy-to-azure"></a><span data-ttu-id="a4ce3-103">자습서: ASP.NET MVC 앱에서 EF 마이그레이션 사용 및 Azure에 배포</span><span class="sxs-lookup"><span data-stu-id="a4ce3-103">Tutorial: Use EF Migrations in an ASP.NET MVC app and deploy to Azure</span></span>

<span data-ttu-id="a4ce3-104">지금까지 Contoso 대학 샘플 웹 응용 프로그램은 개발 컴퓨터의 IIS Express에서 로컬로 실행 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-104">So far the Contoso University sample web application has been running locally in IIS Express on your development computer.</span></span> <span data-ttu-id="a4ce3-105">다른 사용자가 인터넷을 통해 사용할 수 있는 실제 응용 프로그램을 만들려면 웹 호스팅 공급자에 배포 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-105">To make a real application available for other people to use over the Internet, you have to deploy it to a web hosting provider.</span></span> <span data-ttu-id="a4ce3-106">이 자습서에서는 Code First 마이그레이션을 사용 하도록 설정 하 고 응용 프로그램을 Azure의 클라우드에 배포 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-106">In this tutorial, you enable Code First migrations and deploy the application to the cloud in Azure:</span></span>

- <span data-ttu-id="a4ce3-107">Code First 마이그레이션를 사용 하도록 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-107">Enable Code First Migrations.</span></span> <span data-ttu-id="a4ce3-108">마이그레이션 기능을 사용 하면 데이터베이스를 삭제 하 고 다시 만들지 않고도 데이터베이스 스키마를 업데이트 하 여 데이터 모델을 변경 하 고 변경 내용을 프로덕션에 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-108">The Migrations feature enables you to change the data model and deploy your changes to production by updating the database schema without having to drop and re-create the database.</span></span>
- <span data-ttu-id="a4ce3-109">Azure에 배포 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-109">Deploy to Azure.</span></span> <span data-ttu-id="a4ce3-110">이 단계는 선택 사항입니다. 프로젝트를 배포 하지 않고 나머지 자습서를 계속 진행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-110">This step is optional; you can continue with the remaining tutorials without having deployed the project.</span></span>

<span data-ttu-id="a4ce3-111">배포를 위해 원본 제어와 함께 연속 통합 프로세스를 사용 하는 것이 좋지만,이 자습서에서는 이러한 항목에 대해 다루지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-111">We recommend that you use a continuous integration process with source control for deployment, but this tutorial does not cover those topics.</span></span> <span data-ttu-id="a4ce3-112">자세한 내용은 [Azure를 사용 하 여 실제 클라우드 앱 빌드](xref:aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/introduction)에 대 한 [소스 제어](xref:aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/source-control) 및 [연속 통합](xref:aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/continuous-integration-and-continuous-delivery) 챕터를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-112">For more information, see the [source control](xref:aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/source-control) and [continuous integration](xref:aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/continuous-integration-and-continuous-delivery) chapters of [Building Real-World Cloud Apps with Azure](xref:aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/introduction).</span></span>

<span data-ttu-id="a4ce3-113">이 자습서에서는 다음을 수행했습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-113">In this tutorial, you:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="a4ce3-114">Code First 마이그레이션 사용</span><span class="sxs-lookup"><span data-stu-id="a4ce3-114">Enable Code First migrations</span></span>
> * <span data-ttu-id="a4ce3-115">Azure에서 앱 배포 (선택 사항)</span><span class="sxs-lookup"><span data-stu-id="a4ce3-115">Deploy the app in Azure (optional)</span></span>

## <a name="prerequisites"></a><span data-ttu-id="a4ce3-116">전제 조건</span><span class="sxs-lookup"><span data-stu-id="a4ce3-116">Prerequisites</span></span>

- [<span data-ttu-id="a4ce3-117">연결 복원력 및 명령 인터셉션</span><span class="sxs-lookup"><span data-stu-id="a4ce3-117">Connection Resiliency and Command Interception</span></span>](connection-resiliency-and-command-interception-with-the-entity-framework-in-an-asp-net-mvc-application.md)

## <a name="enable-code-first-migrations"></a><span data-ttu-id="a4ce3-118">Code First 마이그레이션 사용</span><span class="sxs-lookup"><span data-stu-id="a4ce3-118">Enable Code First migrations</span></span>

<span data-ttu-id="a4ce3-119">새 애플리케이션을 개발하는 경우 데이터 모델은 자주 변경되며 모델이 변경될 때마다 데이터베이스와 동기화를 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-119">When you develop a new application, your data model changes frequently, and each time the model changes, it gets out of sync with the database.</span></span> <span data-ttu-id="a4ce3-120">데이터 모델을 변경할 때마다 데이터베이스를 자동으로 삭제 하 고 다시 만들기 위해 Entity Framework를 구성 했습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-120">You have configured the Entity Framework to automatically drop and re-create the database each time you change the data model.</span></span> <span data-ttu-id="a4ce3-121">엔터티 클래스를 추가, 제거 또는 변경 하거나 `DbContext` 클래스를 변경 하는 경우 다음에 응용 프로그램을 실행할 때 기존 데이터베이스가 자동으로 삭제 되 고, 모델과 일치 하는 새 데이터베이스가 만들어지고, 테스트 데이터로 시드 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-121">When you add, remove, or change entity classes or change your `DbContext` class, the next time you run the application it automatically deletes your existing database, creates a new one that matches the model, and seeds it with test data.</span></span>

<span data-ttu-id="a4ce3-122">데이터베이스를 데이터 모델과 동기화된 상태로 유지하는 이 메서드는 애플리케이션을 프로덕션 환경에 배포할 때까지 잘 작동합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-122">This method of keeping the database in sync with the data model works well until you deploy the application to production.</span></span> <span data-ttu-id="a4ce3-123">응용 프로그램이 프로덕션 환경에서 실행 되는 경우 일반적으로 보관할 데이터를 저장 하 고, 새 열을 추가 하는 등의 변경 작업을 수행할 때마다 모든 항목을 손실 하지 않으려고 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-123">When the application is running in production, it is usually storing data that you want to keep, and you don't want to lose everything each time you make a change such as adding a new column.</span></span> <span data-ttu-id="a4ce3-124">[Code First 마이그레이션](https://msdn.microsoft.com/data/jj591621) 기능은 Code First를 사용 하 여 데이터베이스를 삭제 하 고 다시 만드는 대신 데이터베이스 스키마를 업데이트할 수 있도록 하 여이 문제를 해결 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-124">The [Code First Migrations](https://msdn.microsoft.com/data/jj591621) feature solves this problem by enabling Code First to update the database schema instead of dropping and re-creating the database.</span></span> <span data-ttu-id="a4ce3-125">이 자습서에서는 응용 프로그램을 배포 하 고 마이그레이션을 사용 하도록 준비 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-125">In this tutorial, you'll deploy the application, and to prepare for that you'll enable Migrations.</span></span>

1. <span data-ttu-id="a4ce3-126">이전에 설정한 이니셜라이저를 사용 하지 않도록 설정 하 여 응용 프로그램 web.config `contexts` 파일에 추가한 요소를 주석으로 처리 하거나 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-126">Disable the initializer that you set up earlier by commenting out or deleting the `contexts` element that you added to the application Web.config file.</span></span>

    [!code-xml[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample1.xml?highlight=2,6)]
2. <span data-ttu-id="a4ce3-127">또한 응용 프로그램 *web.config* 파일에서 연결 문자열에 있는 데이터베이스의 이름을 ContosoUniversity2로 변경 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-127">Also in the application *Web.config* file, change the name of the database in the connection string to ContosoUniversity2.</span></span>

    [!code-xml[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample2.xml?highlight=2)]

    <span data-ttu-id="a4ce3-128">이 변경 내용은 첫 번째 마이그레이션이 새 데이터베이스를 만들 때 프로젝트를 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-128">This change sets up the project so that the first migration creates a new database.</span></span> <span data-ttu-id="a4ce3-129">이는 필수는 아니지만 나중에 좋은 생각이 표시 될 것입니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-129">This isn't required but you'll see later why it's a good idea.</span></span>
3. <span data-ttu-id="a4ce3-130">**도구** 메뉴에서 **NuGet 패키지 관리자** > **패키지 관리자 콘솔**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-130">From the **Tools** menu, select **NuGet Package Manager** > **Package Manager Console**.</span></span>

1. <span data-ttu-id="a4ce3-131">`PM>` 프롬프트에 다음 명령을 입력 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-131">At the `PM>` prompt enter the following commands:</span></span>

    ```text
    enable-migrations
    add-migration InitialCreate
    ```

    <span data-ttu-id="a4ce3-132">이 명령은 ContosoUniversity 프로젝트에 *마이그레이션* 폴더를 만들고 해당 폴더에 Configuration.cs 파일을 저장 합니다 .이 파일을 편집 하 여 마이그레이션을 구성할 수 있습니다. `enable-migrations`</span><span class="sxs-lookup"><span data-stu-id="a4ce3-132">The `enable-migrations` command creates a *Migrations* folder in the ContosoUniversity project, and it puts in that folder a *Configuration.cs* file that you can edit to configure Migrations.</span></span>

    <span data-ttu-id="a4ce3-133">데이터베이스 이름을 변경 하도록 지시 하는 위의 단계를 놓친 경우 마이그레이션은 기존 데이터베이스를 찾고 자동으로 `add-migration` 명령을 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-133">(If you missed the step above that directs you to change the database name, Migrations will find the existing database and automatically do the `add-migration` command.</span></span> <span data-ttu-id="a4ce3-134">이는 데이터베이스를 배포 하기 전에 마이그레이션 코드 테스트를 실행 하지 않는다는 것을 의미 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-134">That's okay, it just means you won't run a test of the migrations code before you deploy the database.</span></span> <span data-ttu-id="a4ce3-135">나중에 `update-database` 명령을 실행할 때 데이터베이스가 이미 있기 때문에 아무 작업도 수행 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-135">Later when you run the `update-database` command nothing will happen because the database already exists.)</span></span>

    <span data-ttu-id="a4ce3-136">*ContosoUniversity\Migrations\Configuration.cs* 파일을 엽니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-136">Open the *ContosoUniversity\Migrations\Configuration.cs* file.</span></span> <span data-ttu-id="a4ce3-137">앞서 살펴본 이니셜라이저 클래스와 마찬가지로 클래스에 `Configuration` 는 `Seed` 메서드가 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-137">Like the initializer class that you saw earlier, the `Configuration` class includes a `Seed` method.</span></span>

    [!code-csharp[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample3.cs)]

    <span data-ttu-id="a4ce3-138">[초기값](https://msdn.microsoft.com/library/hh829453(v=vs.103).aspx) 방법의 목적은 Code First 데이터베이스를 만들거나 업데이트 한 후 테스트 데이터를 삽입 하거나 업데이트할 수 있도록 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-138">The purpose of the [Seed](https://msdn.microsoft.com/library/hh829453(v=vs.103).aspx) method is to enable you to insert or update test data after Code First creates or updates the database.</span></span> <span data-ttu-id="a4ce3-139">메서드는 데이터베이스를 만들 때와 데이터 모델이 변경 된 후 데이터베이스 스키마가 업데이트 될 때마다 호출 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-139">The method is called when the database is created and every time the database schema is updated after a data model change.</span></span>

### <a name="set-up-the-seed-method"></a><span data-ttu-id="a4ce3-140">초기값 설정</span><span class="sxs-lookup"><span data-stu-id="a4ce3-140">Set up the Seed method</span></span>

<span data-ttu-id="a4ce3-141">모든 데이터 모델이 변경 될 때마다 데이터베이스를 삭제 하 고 다시 만들 때 이니셜라이저 클래스의 `Seed` 메서드를 사용 하 여 테스트 데이터를 삽입 합니다 .이 경우 모든 모델 변경 후 데이터베이스를 삭제 하 고 모든 테스트 데이터가 손실 되기 때문입니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-141">When you drop and re-create the database for every data model change, you use the initializer class's `Seed` method to insert test data, because after every model change the database is dropped and all the test data is lost.</span></span> <span data-ttu-id="a4ce3-142">Code First 마이그레이션를 사용 하면 데이터베이스 변경 후에 테스트 데이터가 유지 되므로 [시드](https://msdn.microsoft.com/library/hh829453(v=vs.103).aspx) 메서드에 테스트 데이터를 포함 하는 것은 일반적으로 필요 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-142">With Code First Migrations, test data is retained after database changes, so including test data in the [Seed](https://msdn.microsoft.com/library/hh829453(v=vs.103).aspx) method is typically not necessary.</span></span> <span data-ttu-id="a4ce3-143">실제로는 `Seed` 메서드가 프로덕션 환경에서 실행 `Seed` 되기 때문에 마이그레이션을 사용 하 여 데이터베이스를 프로덕션 환경에 배포 하는 경우 테스트 데이터를 삽입 하는 것을 원하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-143">In fact, you don't want the `Seed` method to insert test data if you'll be using Migrations to deploy the database to production, because the `Seed` method will run in production.</span></span> <span data-ttu-id="a4ce3-144">이 경우 `Seed` 프로덕션 환경에 필요한 데이터만 데이터베이스에 삽입 하려고 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-144">In that case, you want the `Seed` method to insert into the database only the data that you need in production.</span></span> <span data-ttu-id="a4ce3-145">예를 들어 응용 프로그램을 프로덕션 환경에서 사용할 수 있게 되 면 데이터베이스 `Department` 에 테이블의 실제 부서 이름이 포함 되도록 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-145">For example, you might want the database to include actual department names in the `Department` table when the application becomes available in production.</span></span>

<span data-ttu-id="a4ce3-146">이 자습서에서는 배포에 대해 마이그레이션을 사용 하지만 `Seed` 많은 데이터를 수동으로 삽입 하지 않고도 응용 프로그램 기능이 작동 하는 방식을 쉽게 확인할 수 있도록 메서드가 테스트 데이터를 삽입 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-146">For this tutorial, you'll be using Migrations for deployment, but your `Seed` method will insert test data anyway in order to make it easier to see how application functionality works without having to manually insert a lot of data.</span></span>

1. <span data-ttu-id="a4ce3-147">*Configuration.cs* 파일의 내용을 새 데이터베이스에 테스트 데이터를 로드 하는 다음 코드로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-147">Replace the contents of the *Configuration.cs* file with the following code, which loads test data into the new database.</span></span>

    [!code-csharp[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample4.cs)]

    <span data-ttu-id="a4ce3-148">[초기값](https://msdn.microsoft.com/library/hh829453(v=vs.103).aspx) 메서드는 데이터베이스 컨텍스트 개체를 입력 매개 변수로 사용 하 고 메서드의 코드는 해당 개체를 사용 하 여 데이터베이스에 새 엔터티를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-148">The [Seed](https://msdn.microsoft.com/library/hh829453(v=vs.103).aspx) method takes the database context object as an input parameter, and the code in the method uses that object to add new entities to the database.</span></span> <span data-ttu-id="a4ce3-149">각 엔터티 형식에 대해 코드는 새 엔터티 컬렉션을 만들고 적절 한 [Dbset](https://msdn.microsoft.com/library/system.data.entity.dbset(v=vs.103).aspx) 속성에 추가한 다음 변경 내용을 데이터베이스에 저장 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-149">For each entity type, the code creates a collection of new entities, adds them to the appropriate [DbSet](https://msdn.microsoft.com/library/system.data.entity.dbset(v=vs.103).aspx) property, and then saves the changes to the database.</span></span> <span data-ttu-id="a4ce3-150">여기에서 수행 하는 것 처럼 각 엔터티 그룹 다음에 [SaveChanges](https://msdn.microsoft.com/library/system.data.entity.dbcontext.savechanges(v=VS.103).aspx) 메서드를 호출할 필요는 없지만, 이렇게 하면 코드에서 데이터베이스에 쓰는 동안 예외가 발생 하는 경우 문제의 원인을 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-150">It isn't necessary to call the [SaveChanges](https://msdn.microsoft.com/library/system.data.entity.dbcontext.savechanges(v=VS.103).aspx) method after each group of entities, as is done here, but doing that helps you locate the source of a problem if an exception occurs while the code is writing to the database.</span></span>

    <span data-ttu-id="a4ce3-151">데이터를 삽입 하는 문 중 일부는 [Addorupdate](https://msdn.microsoft.com/library/system.data.entity.migrations.idbsetextensions.addorupdate(v=vs.103).aspx) 메서드를 사용 하 여 "upsert" 작업을 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-151">Some of the statements that insert data use the [AddOrUpdate](https://msdn.microsoft.com/library/system.data.entity.migrations.idbsetextensions.addorupdate(v=vs.103).aspx) method to perform an "upsert" operation.</span></span> <span data-ttu-id="a4ce3-152">명령을 실행할 때마다 메서드가 실행 되기 때문에 일반적으로 각 마이그레이션 후에는 데이터베이스를 만드는 첫 번째 마이그레이션 후에 추가 하려는 행이 이미 있기 때문에 데이터를 삽입 하기만 하면 됩니다. `Seed` `update-database`</span><span class="sxs-lookup"><span data-stu-id="a4ce3-152">Because the `Seed` method runs every time you execute the `update-database` command, typically after each migration, you can't just insert data, because the rows you are trying to add will already be there after the first migration that creates the database.</span></span> <span data-ttu-id="a4ce3-153">"Upsert" 작업은 이미 있는 행을 삽입 하려고 할 때 발생 하는 오류를 방지 하지만 응용 프로그램을 테스트 하는 동안 수행 된 데이터의 변경 내용을 ***재정의*** 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-153">The "upsert" operation prevents errors that would happen if you try to insert a row that already exists, but it ***overrides*** any changes to data that you may have made while testing the application.</span></span> <span data-ttu-id="a4ce3-154">일부 테이블에서 테스트 데이터를 사용 하는 경우 이러한 상황이 발생 하지 않을 수 있습니다. 테스트 하는 동안 데이터를 변경 하는 경우 데이터베이스 업데이트 후에 변경 내용을 유지 하려는 경우도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-154">With test data in some tables you might not want that to happen: in some cases when you change data while testing you want your changes to remain after database updates.</span></span> <span data-ttu-id="a4ce3-155">조건부 삽입 작업을 수행 하려는 경우: 행이 아직 없는 경우에만 행을 삽입 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-155">In that case you want to do a conditional insert operation: insert a row only if it doesn't already exist.</span></span> <span data-ttu-id="a4ce3-156">초기값 메서드는 두 가지 방법을 모두 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-156">The Seed method uses both approaches.</span></span>

    <span data-ttu-id="a4ce3-157">[Addorupdate](https://msdn.microsoft.com/library/system.data.entity.migrations.idbsetextensions.addorupdate(v=vs.103).aspx) 메서드에 전달 된 첫 번째 매개 변수는 행이 이미 있는지 여부를 확인 하는 데 사용할 속성을 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-157">The first parameter passed to the [AddOrUpdate](https://msdn.microsoft.com/library/system.data.entity.migrations.idbsetextensions.addorupdate(v=vs.103).aspx) method specifies the property to use to check if a row already exists.</span></span> <span data-ttu-id="a4ce3-158">제공 하는 테스트 학생 데이터의 경우 목록의 각 성이 `LastName` 고유 하므로 속성을이 용도로 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-158">For the test student data that you are providing, the `LastName` property can be used for this purpose since each last name in the list is unique:</span></span>

    [!code-csharp[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample5.cs)]

    <span data-ttu-id="a4ce3-159">이 코드에서는 성이 고유한 것으로 가정 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-159">This code assumes that last names are unique.</span></span> <span data-ttu-id="a4ce3-160">중복 성이 있는 학생을 수동으로 추가 하는 경우 다음에 마이그레이션을 수행할 때 다음과 같은 예외가 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-160">If you manually add a student with a duplicate last name, you'll get the following exception the next time you perform a migration:</span></span>

    <span data-ttu-id="a4ce3-161">**시퀀스에 둘 이상의 요소가 포함 되어 있습니다.**</span><span class="sxs-lookup"><span data-stu-id="a4ce3-161">**Sequence contains more than one element**</span></span>

    <span data-ttu-id="a4ce3-162">"Alexander Carson" 이라는 두 학생 같은 중복 데이터를 처리 하는 방법에 대 한 자세한 내용은 Rick Anderson의 블로그에서 [EF (시드 및 디버깅 Entity Framework) db](https://blogs.msdn.com/b/rickandy/archive/2013/02/12/seeding-and-debugging-entity-framework-ef-dbs.aspx) 를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-162">For information about how to handle redundant data such as two students named "Alexander Carson", see [Seeding and Debugging Entity Framework (EF) DBs](https://blogs.msdn.com/b/rickandy/archive/2013/02/12/seeding-and-debugging-entity-framework-ef-dbs.aspx) on Rick Anderson's blog.</span></span> <span data-ttu-id="a4ce3-163">메서드에 대 한 자세한 내용은 `AddOrUpdate` Julie Lerman의 블로그에서 [EF 4.3 addorupdate 메서드를 사용](http://thedatafarm.com/blog/data-access/take-care-with-ef-4-3-addorupdate-method/) 하는 방법을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-163">For more information about the `AddOrUpdate` method, see [Take care with EF 4.3 AddOrUpdate Method](http://thedatafarm.com/blog/data-access/take-care-with-ef-4-3-addorupdate-method/) on Julie Lerman's blog.</span></span>

    <span data-ttu-id="a4ce3-164">엔터티를 만드는 `Enrollment` 코드는 컬렉션을 만드는 코드에서 해당 속성을 설정 하지 `students` 않았지만 컬렉션의 엔터티에 `ID` 값이 있다고 가정 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-164">The code that creates `Enrollment` entities assumes you have the `ID` value in the entities in the `students` collection, although you didn't set that property in the code that creates the collection.</span></span>

    [!code-csharp[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample6.cs?highlight=2)]

    <span data-ttu-id="a4ce3-165">컬렉션에 대해를 `ID` 호출할 `ID` `SaveChanges` 때 값이 설정 되므로 여기에서 속성을 사용할 수 있습니다. `students`</span><span class="sxs-lookup"><span data-stu-id="a4ce3-165">You can use the `ID` property here because the `ID` value is set when you call `SaveChanges` for the `students` collection.</span></span> <span data-ttu-id="a4ce3-166">EF는 데이터베이스에 엔터티를 삽입할 때 기본 키 값을 자동으로 가져오고, 메모리에서 엔터티의 `ID` 속성을 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-166">EF automatically gets the primary key value when it inserts an entity into the database, and it updates the `ID` property of the entity in memory.</span></span>

    <span data-ttu-id="a4ce3-167">엔터티 집합 `Enrollment` 에 각 엔터티를 추가 하는 코드는 메서드를 `AddOrUpdate` 사용 하지 않습니다. `Enrollments`</span><span class="sxs-lookup"><span data-stu-id="a4ce3-167">The code that adds each `Enrollment` entity to the `Enrollments` entity set doesn't use the `AddOrUpdate` method.</span></span> <span data-ttu-id="a4ce3-168">엔터티가 이미 있는지 확인 하 고 존재 하지 않는 경우 엔터티를 삽입 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-168">It checks if an entity already exists and inserts the entity if it doesn't exist.</span></span> <span data-ttu-id="a4ce3-169">이 방법은 응용 프로그램 UI를 사용 하 여 등록 등급에 대 한 변경 내용을 유지 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-169">This approach will preserve changes you make to an enrollment grade by using the application UI.</span></span> <span data-ttu-id="a4ce3-170">이 코드는 `Enrollment` [목록의](https://msdn.microsoft.com/library/6sh2ey19.aspx) 각 멤버를 반복 하 고, 등록을 데이터베이스에서 찾을 수 없는 경우 데이터베이스에 등록을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-170">The code loops through each member of the `Enrollment`[List](https://msdn.microsoft.com/library/6sh2ey19.aspx) and if the enrollment is not found in the database, it adds the enrollment to the database.</span></span> <span data-ttu-id="a4ce3-171">처음으로 데이터베이스를 업데이트할 때 데이터베이스는 비어 있으므로 각 등록을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-171">The first time you update the database, the database will be empty, so it will add each enrollment.</span></span>

    [!code-csharp[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample7.cs)]

2. <span data-ttu-id="a4ce3-172">프로젝트를 빌드합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-172">Build the project.</span></span>

### <a name="execute-the-first-migration"></a><span data-ttu-id="a4ce3-173">첫 번째 마이그레이션 실행</span><span class="sxs-lookup"><span data-stu-id="a4ce3-173">Execute the first migration</span></span>

<span data-ttu-id="a4ce3-174">`add-migration` 명령을 실행 하면 마이그레이션을 통해 데이터베이스를 처음부터 만드는 코드가 생성 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-174">When you executed the `add-migration` command, Migrations generated the code that would create the database from scratch.</span></span> <span data-ttu-id="a4ce3-175">이 코드는 또한  *&lt;타임&gt;스탬프\_InitialCreate.cs*이라는 파일의 *마이그레이션* 폴더에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-175">This code is also in the *Migrations* folder, in the file named *&lt;timestamp&gt;\_InitialCreate.cs*.</span></span> <span data-ttu-id="a4ce3-176">클래스의 메서드는 `Up` 데이터 모델 엔터티 집합에 해당 하는 데이터베이스 테이블을 만들고 메서드는 `Down` 해당 테이블을 삭제 합니다. `InitialCreate`</span><span class="sxs-lookup"><span data-stu-id="a4ce3-176">The `Up` method of the `InitialCreate` class creates the database tables that correspond to the data model entity sets, and the `Down` method deletes them.</span></span>

[!code-csharp[Main](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample8.cs)]

<span data-ttu-id="a4ce3-177">마이그레이션에서는 마이그레이션을 위한 데이터 모델 변경을 구현하기 위해 `Up` 메서드를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-177">Migrations calls the `Up` method to implement the data model changes for a migration.</span></span> <span data-ttu-id="a4ce3-178">업데이트를 롤백하는 명령을 입력하면 마이그레이션에서 `Down` 메서드를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-178">When you enter a command to roll back the update, Migrations calls the `Down` method.</span></span>

<span data-ttu-id="a4ce3-179">이는 `add-migration InitialCreate` 명령을 입력할 때 생성 된 초기 마이그레이션입니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-179">This is the initial migration that was created when you entered the `add-migration InitialCreate` command.</span></span> <span data-ttu-id="a4ce3-180">파일 이름에`InitialCreate` 는 매개 변수 (예:)가 사용 되며 원하는 모든 항목을 사용할 수 있습니다. 일반적으로 마이그레이션에서 수행 되는 항목을 요약 하는 단어나 구를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-180">The parameter (`InitialCreate` in the example) is used for the file name and can be whatever you want; you typically choose a word or phrase that summarizes what is being done in the migration.</span></span> <span data-ttu-id="a4ce3-181">예를 들어 이후 마이그레이션 &quot;AddDepartmentTable&quot;의 이름을로 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-181">For example, you might name a later migration &quot;AddDepartmentTable&quot;.</span></span>

<span data-ttu-id="a4ce3-182">데이터베이스가 이미 존재할 때 초기 마이그레이션을 만든 경우 데이터베이스 만들기 코드가 생성되지만 데이터베이스는 이미 데이터 모델과 일치하기 때문에 실행할 필요는 없습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-182">If you created the initial migration when the database already exists, the database creation code is generated but it doesn't have to run because the database already matches the data model.</span></span> <span data-ttu-id="a4ce3-183">데이터베이스가 아직 없는 다른 환경에 앱을 배포하는 경우 이 코드를 실행하여 데이터베이스를 만들기 때문에 먼저 테스트하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-183">When you deploy the app to another environment where the database doesn't exist yet, this code will run to create your database, so it's a good idea to test it first.</span></span> <span data-ttu-id="a4ce3-184">앞&mdash;에서 새로 만들 수 있도록 연결 문자열에서 데이터베이스 이름을 변경한 이유 때문입니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-184">That's why you changed the name of the database in the connection string earlier&mdash;so that migrations can create a new one from scratch.</span></span>

1. <span data-ttu-id="a4ce3-185">**패키지 관리자 콘솔** 창에서 다음 명령을 입력 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-185">In the **Package Manager Console** window, enter the following command:</span></span>

    `update-database`

    <span data-ttu-id="a4ce3-186">이 명령은 메서드를 실행 하 여 데이터베이스를 만든 다음 메서드를 `Seed` 실행 하 여 데이터베이스를 채웁니다. `Up` `update-database`</span><span class="sxs-lookup"><span data-stu-id="a4ce3-186">The `update-database` command runs the `Up` method to create the database and then it runs the `Seed` method to populate the database.</span></span> <span data-ttu-id="a4ce3-187">다음 섹션에서 볼 수 있듯이 응용 프로그램을 배포한 후 프로덕션 환경에서 동일한 프로세스가 자동으로 실행 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-187">The same process will run automatically in production after you deploy the application, as you'll see in the following section.</span></span>
2. <span data-ttu-id="a4ce3-188">**서버 탐색기** 를 사용 하 여 첫 번째 자습서에서 했던 것 처럼 데이터베이스를 검사 하 고 응용 프로그램을 실행 하 여 모든 항목이 이전과 동일 하 게 작동 하는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-188">Use **Server Explorer** to inspect the database as you did in the first tutorial, and run the application to verify that everything still works the same as before.</span></span>

## <a name="deploy-to-azure"></a><span data-ttu-id="a4ce3-189">Azure에 배포</span><span class="sxs-lookup"><span data-stu-id="a4ce3-189">Deploy to Azure</span></span>

<span data-ttu-id="a4ce3-190">지금까지 응용 프로그램은 개발 컴퓨터의 IIS Express에서 로컬로 실행 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-190">So far the application has been running locally in IIS Express on your development computer.</span></span> <span data-ttu-id="a4ce3-191">다른 사용자가 인터넷을 통해 사용할 수 있도록 하려면 웹 호스팅 공급자에 배포 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-191">To make it available for other people to use over the Internet, you have to deploy it to a web hosting provider.</span></span> <span data-ttu-id="a4ce3-192">자습서의이 섹션에서는 Azure에 배포 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-192">In this section of the tutorial, you'll deploy it to Azure.</span></span> <span data-ttu-id="a4ce3-193">이 섹션은 선택 사항입니다. 이 작업을 건너뛰고 다음 자습서를 계속 진행 하거나, 선택한 다른 호스팅 공급자에 대해이 섹션의 지침을 적용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-193">This section is optional; you can skip this and continue with the following tutorial, or you can adapt the instructions in this section for a different hosting provider of your choice.</span></span>

### <a name="use-code-first-migrations-to-deploy-the-database"></a><span data-ttu-id="a4ce3-194">Code First 마이그레이션을 사용 하 여 데이터베이스 배포</span><span class="sxs-lookup"><span data-stu-id="a4ce3-194">Use Code First migrations to deploy the database</span></span>

<span data-ttu-id="a4ce3-195">데이터베이스를 배포 하려면 Code First 마이그레이션을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-195">To deploy the database, you'll use Code First Migrations.</span></span> <span data-ttu-id="a4ce3-196">Visual Studio에서 배포에 대 한 설정을 구성 하는 데 사용 하는 게시 프로필을 만들 때 **데이터베이스 업데이트**라는 확인란을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-196">When you create the publish profile that you use to configure settings for deploying from Visual Studio, you'll select a check box labeled **Update Database**.</span></span> <span data-ttu-id="a4ce3-197">이 설정을 사용 하면 Code First가 이니셜라이저 클래스를 `MigrateDatabaseToLatestVersion` 사용 하도록 배포 프로세스에서 대상 서버에 응용 프로그램 *web.config* 파일을 자동으로 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-197">This setting causes the deployment process to automatically configure the application *Web.config* file on the destination server so that Code First uses the `MigrateDatabaseToLatestVersion` initializer class.</span></span>

<span data-ttu-id="a4ce3-198">Visual Studio는 프로젝트를 대상 서버에 복사 하는 동안 배포 프로세스 중에 데이터베이스에서 어떤 작업도 수행 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-198">Visual Studio doesn't do anything with the database during the deployment process while it is copying your project to the destination server.</span></span> <span data-ttu-id="a4ce3-199">배포 된 응용 프로그램을 실행 하 고 배포 후 처음으로 데이터베이스에 액세스 하는 경우 Code First는 데이터베이스가 데이터 모델과 일치 하는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-199">When you run the deployed application and it accesses the database for the first time after deployment, Code First checks if the database matches the data model.</span></span> <span data-ttu-id="a4ce3-200">일치 하지 않는 경우 Code First는 데이터베이스를 자동으로 만들거나 (아직 존재 하지 않는 경우) 데이터베이스 스키마를 최신 버전으로 업데이트 합니다 (데이터베이스가 있지만 모델과 일치 하지 않는 경우).</span><span class="sxs-lookup"><span data-stu-id="a4ce3-200">If there's a mismatch, Code First automatically creates the database (if it doesn't exist yet) or updates the database schema to the latest version (if a database exists but doesn't match the model).</span></span> <span data-ttu-id="a4ce3-201">응용 프로그램이 마이그레이션 `Seed` 방법을 구현 하는 경우이 메서드는 데이터베이스가 만들어지거나 스키마가 업데이트 된 후에 실행 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-201">If the application implements a Migrations `Seed` method, the method runs after the database is created or the schema is updated.</span></span>

<span data-ttu-id="a4ce3-202">마이그레이션 `Seed` 방법은 테스트 데이터를 삽입 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-202">Your Migrations `Seed` method inserts test data.</span></span> <span data-ttu-id="a4ce3-203">프로덕션 환경에 배포 하는 경우 프로덕션 데이터베이스에 삽입 하려는 데이터만 삽입 하도록 `Seed` 메서드를 변경 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-203">If you were deploying to a production environment, you would have to change the `Seed` method so that it only inserts data that you want to be inserted into your production database.</span></span> <span data-ttu-id="a4ce3-204">예를 들어 현재 데이터 모델에서는 개발 데이터베이스에 실제 강의를 포함 하 고 가상 학생이 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-204">For example, in your current data model you might want to have real courses but fictional students in the development database.</span></span> <span data-ttu-id="a4ce3-205">개발 중에를 `Seed` 로드 하는 메서드를 작성 한 다음 프로덕션에 배포 하기 전에 가상 학생을 주석으로 처리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-205">You can write a `Seed` method to load both in development, and then comment out the fictional students before you deploy to production.</span></span> <span data-ttu-id="a4ce3-206">또는 단지 강좌를 로드 `Seed` 하는 메서드를 작성 하 고 응용 프로그램의 UI를 사용 하 여 테스트 데이터베이스에 가상 학생을 수동으로 입력할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-206">Or you can write a `Seed` method to load only courses, and enter the fictional students in the test database manually by using the application's UI.</span></span>

### <a name="get-an-azure-account"></a><span data-ttu-id="a4ce3-207">Azure 계정 가져오기</span><span class="sxs-lookup"><span data-stu-id="a4ce3-207">Get an Azure account</span></span>

<span data-ttu-id="a4ce3-208">Azure 계정이 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-208">You'll need an Azure account.</span></span> <span data-ttu-id="a4ce3-209">아직 없는 경우 Visual Studio 구독이 있는 경우 구독 혜택 [](https://azure.microsoft.com/pricing/member-offers/credit-for-visual-studio-subscribers/
)을 활성화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-209">If you don't already have one, but you do have a Visual Studio subscription, you can [activate your subscription benefits](https://azure.microsoft.com/pricing/member-offers/credit-for-visual-studio-subscribers/
).</span></span> <span data-ttu-id="a4ce3-210">그렇지 않으면 몇 분만에 무료 평가판 계정을 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-210">Otherwise, you can create a free trial account in just a couple of minutes.</span></span> <span data-ttu-id="a4ce3-211">자세한 내용은 참조 하세요 [Azure 무료 평가판](https://azure.microsoft.com/free/)합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-211">For details, see [Azure Free Trial](https://azure.microsoft.com/free/).</span></span>

### <a name="create-a-web-site-and-a-sql-database-in-azure"></a><span data-ttu-id="a4ce3-212">Azure에서 웹 사이트 및 SQL 데이터베이스 만들기</span><span class="sxs-lookup"><span data-stu-id="a4ce3-212">Create a web site and a SQL database in Azure</span></span>

<span data-ttu-id="a4ce3-213">Azure의 웹 앱은 공유 호스팅 환경에서 실행 됩니다. 즉, 다른 Azure 클라이언트와 공유 되는 Vm (가상 머신)에서 실행 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-213">Your web app in Azure will run in a shared hosting environment, which means it runs on virtual machines (VMs) that are shared with other Azure clients.</span></span> <span data-ttu-id="a4ce3-214">공유 호스팅 환경은 클라우드에서 시작할 수 있는 저렴 한 방법입니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-214">A shared hosting environment is a low-cost way to get started in the cloud.</span></span> <span data-ttu-id="a4ce3-215">나중에 웹 트래픽이 늘어나면 응용 프로그램은 전용 Vm에서를 실행 하 여 필요에 맞게 확장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-215">Later, if your web traffic increases, the application can scale to meet the need by running on dedicated VMs.</span></span> <span data-ttu-id="a4ce3-216">Azure App Service에 대 한 가격 책정 옵션에 대 한 자세한 내용은 [App Service 가격 책정](https://azure.microsoft.com/pricing/details/app-service/)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-216">To learn more about Pricing Options for Azure App Service, read [App Service pricing](https://azure.microsoft.com/pricing/details/app-service/).</span></span>

<span data-ttu-id="a4ce3-217">Azure SQL database에 데이터베이스를 배포 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-217">You'll deploy the database to Azure SQL database.</span></span> <span data-ttu-id="a4ce3-218">SQL database는 SQL Server 기술을 기반으로 구축 된 클라우드 기반의 관계형 데이터베이스 서비스입니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-218">SQL database is a cloud-based relational database service that is built on SQL Server technologies.</span></span> <span data-ttu-id="a4ce3-219">SQL Server와 함께 작동 하는 도구 및 응용 프로그램은 SQL database 에서도 작동 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-219">Tools and applications that work with SQL Server also work with SQL database.</span></span>

1. <span data-ttu-id="a4ce3-220">[Azure 관리 포털](https://portal.azure.com)의 왼쪽 탭에서 **리소스 만들기** 를 선택한 다음 **새** 창 또는 *블레이드에서* **모두 보기** 를 선택 하 여 사용 가능한 모든 리소스를 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-220">In the [Azure Management Portal](https://portal.azure.com), choose **Create a resource** in the left tab and then choose **See all** on the **New** pane (or *blade*) to see all available resources.</span></span> <span data-ttu-id="a4ce3-221">**모든** 블레이드의 **웹** 섹션에서 **웹 앱 + SQL** 을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-221">Choose **Web App + SQL** in the **Web** section of the **Everything** blade.</span></span> <span data-ttu-id="a4ce3-222">마지막으로 **만들기**를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-222">Finally, choose **Create**.</span></span>

    ![Azure Portal에서 리소스 만들기](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/create-azure-resource.png)

   <span data-ttu-id="a4ce3-224">새 **웹 앱 + SQL** 리소스를 만드는 양식이 열립니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-224">The form to create a new **New Web App + SQL** resource opens.</span></span>

2. <span data-ttu-id="a4ce3-225">응용 프로그램의 고유한 URL로 사용할 **앱 이름** 상자에 문자열을 입력 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-225">Enter a string in the **App name** box to use as the unique URL for your application.</span></span> <span data-ttu-id="a4ce3-226">전체 URL은 여기에 입력 한 내용 및 Azure 앱 서비스의 기본 도메인 (. azurewebsites.net)으로 구성 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-226">The complete URL will consist of what you enter here plus the default domain of Azure App Services (.azurewebsites.net).</span></span> <span data-ttu-id="a4ce3-227">**앱 이름이** 이미 사용 되 고 있으면 마법사에서 빨간색으로 표시 되 *고 앱 이름을 사용할 수 없음* 메시지가 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-227">If the **App name** is already taken, the Wizard notifies you with a red *The app name is not available* message.</span></span> <span data-ttu-id="a4ce3-228">**앱 이름을** 사용할 수 있는 경우 녹색 확인 표시가 나타납니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-228">If the **App name** is available, you see a green checkmark.</span></span>

3. <span data-ttu-id="a4ce3-229">**구독** 상자에서 **App Service** 상주할 Azure 구독을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-229">In the **Subscription** box, choose the Azure Subscription in which you want the **App Service** to reside.</span></span>

4. <span data-ttu-id="a4ce3-230">**리소스 그룹** 텍스트 상자에서 리소스 그룹을 선택 하거나 새 리소스 그룹을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-230">In the **Resource Group** text box, choose a Resource Group or create a new one.</span></span> <span data-ttu-id="a4ce3-231">이 설정은 웹 사이트를 실행 하는 데이터 센터를 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-231">This setting specifies which data center your web site will run in.</span></span> <span data-ttu-id="a4ce3-232">리소스 그룹에 대 한 자세한 내용은 [리소스 그룹](/azure/azure-resource-manager/resource-group-overview#resource-groups)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-232">For more information about Resource Groups, see [Resource groups](/azure/azure-resource-manager/resource-group-overview#resource-groups).</span></span>

5. <span data-ttu-id="a4ce3-233">*App Service 섹션*을 클릭 하 고, **새로 만들기**를 클릭 하 고 **App Service 계획** 을 입력 하 고 (App Service와 동일한 이름), **위치**및 **가격 책정 계층** (무료 옵션)을 클릭 하 여 새 **App Service 계획** 을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-233">Create a new **App Service Plan** by clicking the *App Service section*, **Create New**, and fill in **App Service plan** (can be same name as App Service), **Location**, and **Pricing tier** (there is a free option).</span></span>

6. <span data-ttu-id="a4ce3-234">**SQL Database**를 클릭 한 다음 **새 데이터베이스 만들기** 를 선택 하거나 기존 데이터베이스를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-234">Click **SQL Database**, and then choose **Create a new database** or select an existing database.</span></span>

7. <span data-ttu-id="a4ce3-235">**이름** 상자에 데이터베이스의 이름을 입력 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-235">In the **Name** box, enter a name for your database.</span></span>
8. <span data-ttu-id="a4ce3-236">**대상 서버** 상자를 클릭 한 다음 **새 서버 만들기**를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-236">Click the **Target Server** box, and then select **Create a new server**.</span></span> <span data-ttu-id="a4ce3-237">또는 이전에 서버를 만든 경우 사용 가능한 서버 목록에서 해당 서버를 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-237">Alternatively, if you previously created a server, you can select that server from list of available servers.</span></span>
9. <span data-ttu-id="a4ce3-238">**가격 책정 계층** 섹션을 선택 하 고 *무료*를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-238">Choose **Pricing tier** section, choose *Free*.</span></span> <span data-ttu-id="a4ce3-239">추가 리소스가 필요한 경우 언제 든 지 데이터베이스를 확장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-239">If additional resources are needed, the database can be scaled up at any time.</span></span> <span data-ttu-id="a4ce3-240">Azure SQL 가격에 대 한 자세한 내용은 [Azure SQL Database 가격 책정](https://azure.microsoft.com/pricing/details/sql-database/managed/)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-240">To learn more on Azure SQL Pricing, see [Azure SQL Database pricing](https://azure.microsoft.com/pricing/details/sql-database/managed/).</span></span>
10. <span data-ttu-id="a4ce3-241">필요에 따라 [데이터 정렬을](/sql/relational-databases/collations/collation-and-unicode-support) 수정 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-241">Modify [collation](/sql/relational-databases/collations/collation-and-unicode-support) as needed.</span></span>
11. <span data-ttu-id="a4ce3-242">관리자 Sql 관리자 **사용자 이름** 및 **sql 관리자 암호**를 입력 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-242">Enter an administrator **SQL Admin Username** and **SQL Admin Password**.</span></span>

    - <span data-ttu-id="a4ce3-243">**새 SQL Database 서버**를 선택한 경우 나중에 데이터베이스에 액세스할 때 사용할 새 이름과 암호를 정의 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-243">If you selected **New SQL Database server**, define a new name and password that you'll use later when you access the database.</span></span>
    - <span data-ttu-id="a4ce3-244">이전에 만든 서버를 선택한 경우 해당 서버에 대 한 자격 증명을 입력 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-244">If you selected a server that you created previously, enter credentials for that server.</span></span>

12. <span data-ttu-id="a4ce3-245">Application Insights를 사용 하 여 App Service에 대 한 원격 분석 수집을 사용 하도록 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-245">Telemetry collection can be enabled for App Service using Application Insights.</span></span> <span data-ttu-id="a4ce3-246">약간의 구성으로 Application Insights는 중요 한 이벤트, 예외, 종속성, 요청 및 추적 정보를 수집 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-246">With little configuration, Application Insights collects valuable event, exception, dependency, request, and trace information.</span></span> <span data-ttu-id="a4ce3-247">Application Insights에 대해 자세히 알아보려면 [Azure Monitor](https://azure.microsoft.com/services/monitor/)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-247">To learn more about Application Insights, see [Azure Monitor](https://azure.microsoft.com/services/monitor/).</span></span>
13. <span data-ttu-id="a4ce3-248">맨 아래에서 **만들기** 를 클릭 하 여 완료 되었음을 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-248">Click **Create** at the bottom to indicate that you're finished.</span></span>

    <span data-ttu-id="a4ce3-249">관리 포털 대시보드 페이지로 반환 되 고 페이지 맨 위에 있는 **알림** 영역에 사이트가 생성 되 고 있는 것으로 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-249">The Management Portal returns to the Dashboard page, and the **Notifications** area at the top of the page shows that the site is being created.</span></span> <span data-ttu-id="a4ce3-250">잠시 후 (일반적으로 1 분 미만) 배포에 성공 했다는 알림이 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-250">After a while (typically less than a minute), there's a notification that the Deployment succeeded.</span></span> <span data-ttu-id="a4ce3-251">왼쪽의 탐색 모음에 새 App Service **App Services** 섹션에 표시 되 고 **sql** 데이터베이스 섹션에 새 sql 데이터베이스가 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-251">In the navigation bar at the left, the new App Service appears in the **App Services** section and the new SQL database appears in the **SQL databases** section.</span></span>

### <a name="deploy-the-app-to-azure"></a><span data-ttu-id="a4ce3-252">Azure에 앱 배포</span><span class="sxs-lookup"><span data-stu-id="a4ce3-252">Deploy the app to Azure</span></span>

1. <span data-ttu-id="a4ce3-253">Visual Studio의 **솔루션 탐색기** 에서 프로젝트를 마우스 오른쪽 단추로 클릭 하 고 상황에 맞는 메뉴에서 **게시** 를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-253">In Visual Studio, right-click the project in **Solution Explorer** and select **Publish** from the context menu.</span></span>

2. <span data-ttu-id="a4ce3-254">**게시 대상 선택** 페이지에서 **App Service** 를 선택한 다음 **기존을 선택**하 고 **게시**를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-254">On the **Pick a publish target** page, choose **App Service** and then **Select Existing**, and then choose **Publish**.</span></span>

    ![게시 대상 선택 페이지](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/publish-select-existing-azure-app-service.png)

3. <span data-ttu-id="a4ce3-256">이전에 Visual Studio에서 Azure 구독을 추가 하지 않은 경우 화면에서 단계를 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-256">If you haven't previously added your Azure subscription in Visual Studio, perform the steps on the screen.</span></span> <span data-ttu-id="a4ce3-257">이러한 단계를 통해 Visual Studio가 **App Services** 목록에 웹 사이트를 포함 하도록 Azure 구독에 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-257">These steps enable Visual Studio to connect to your Azure subscription so that the list of **App Services** will include your web site.</span></span>

4. <span data-ttu-id="a4ce3-258">**App Service** 페이지에서 App Service 추가 된 **구독** 을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-258">On the **App Service** page, select the **Subscription** you added the App Service to.</span></span> <span data-ttu-id="a4ce3-259">**보기**아래에서 **리소스 그룹**을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-259">Under **View**, select **Resource Group**.</span></span> <span data-ttu-id="a4ce3-260">App Service 추가한 리소스 그룹을 확장 한 다음 App Service를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-260">Expand the resource group you added the App Service to, and then select the App Service.</span></span> <span data-ttu-id="a4ce3-261">**확인** 을 선택 하 여 앱을 게시 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-261">Choose **OK** to publish the app.</span></span>

5. <span data-ttu-id="a4ce3-262">**출력** 창에 수행 된 배포 작업이 표시 되 고 성공적인 배포 완료가 보고 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-262">The **Output** window shows what deployment actions were taken and reports successful completion of the deployment.</span></span>

6. <span data-ttu-id="a4ce3-263">성공적으로 배포 되 면 배포 된 웹 사이트의 URL에 대 한 기본 브라우저가 자동으로 열립니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-263">Upon successful deployment, the default browser automatically opens to the URL of the deployed web site.</span></span>

    ![Students_index_page_with_paging](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/cloud-app-browser.png)

    <span data-ttu-id="a4ce3-265">앱이 이제 클라우드에서 실행 되 고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-265">Your app is now running in the cloud.</span></span>

<span data-ttu-id="a4ce3-266">이 시점에서 **Code First 마이그레이션 실행 (앱 시작 시 실행)** 을 선택 하 여 Azure SQL Database에서 *schoolcontext.cs* 데이터베이스를 만들었습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-266">At this point, the *SchoolContext* database has been created in the Azure SQL database because you selected **Execute Code First Migrations (runs on app start)**.</span></span> <span data-ttu-id="a4ce3-267">배포 된 웹 사이트의 web.config 파일이 변경 되어 코드가 처음으로 데이터베이스에서 데이터를 읽거나 쓸 때 ( **학생** 탭을 선택 했을 때 발생) [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) 이니셜라이저가 실행 되도록 변경 되었습니다. ):</span><span class="sxs-lookup"><span data-stu-id="a4ce3-267">The *Web.config* file in the deployed web site has been changed so that the [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) initializer runs the first time your code reads or writes data in the database (which happened when you selected the **Students** tab):</span></span>

![Web.config 파일 발췌](https://asp.net/media/4367421/mig.png)

<span data-ttu-id="a4ce3-269">또한 배포 프로세스에서는 데이터베이스 스키마를 업데이트 하 고 데이터베이스를 시드 하는 데 사용할 Code First 마이그레이션에 대 한 새 연결 문자열 *(schoolcontext.cs\_databasepublish*)을 만들었습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-269">The deployment process also created a new connection string *(SchoolContext\_DatabasePublish*) for Code First Migrations to use for updating the database schema and seeding the database.</span></span>

![Web.config 파일의 연결 문자열](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image26.png)

<span data-ttu-id="a4ce3-271">*ContosoUniversity\obj\Release\Package\PackageTmp\Web.config*의 사용자 컴퓨터에서 배포 된 버전의 web.config 파일을 찾을 수 있습니다. FTP를 사용 하 여 배포 된 *web.config* 파일 자체에 액세스할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-271">You can find the deployed version of the Web.config file on your own computer in *ContosoUniversity\obj\Release\Package\PackageTmp\Web.config*. You can access the deployed *Web.config* file itself by using FTP.</span></span> <span data-ttu-id="a4ce3-272">자세한 지침은 Visual Studio [를 사용 하 여 웹 배포 ASP.NET를 참조 하세요. 코드 업데이트](xref:web-forms/overview/deployment/visual-studio-web-deployment/deploying-a-code-update)를 배포 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-272">For instructions, see [ASP.NET Web Deployment using Visual Studio: Deploying a Code Update](xref:web-forms/overview/deployment/visual-studio-web-deployment/deploying-a-code-update).</span></span> <span data-ttu-id="a4ce3-273">"FTP 도구를 사용 하려면 FTP URL, 사용자 이름 및 암호를 사용 해야 합니다."로 시작 하는 지침을 따르세요.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-273">Follow the instructions that start with "To use an FTP tool, you need three things: the FTP URL, the user name, and the password."</span></span>

> [!NOTE]
> <span data-ttu-id="a4ce3-274">웹 앱은 보안을 구현 하지 않으므로 URL을 검색 하는 모든 사용자가 데이터를 변경할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-274">The web app doesn't implement security, so anyone who finds the URL can change the data.</span></span> <span data-ttu-id="a4ce3-275">웹 사이트를 보호 하는 방법에 대 한 지침은 [멤버 자격, OAuth 및 SQL database가 포함 된 secure ASP.NET MVC 앱을 Azure에 배포](/aspnet/core/security/authorization/secure-data)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-275">For instructions on how to secure the web site, see [Deploy a Secure ASP.NET MVC app with Membership, OAuth, and SQL database to Azure](/aspnet/core/security/authorization/secure-data).</span></span> <span data-ttu-id="a4ce3-276">Visual Studio에서 Azure 관리 포털 또는 **서버 탐색기** 를 사용 하 여 서비스를 중지 하 여 다른 사용자가 사이트를 사용 하지 못하도록 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-276">You can prevent other people from using the site by stopping the service using the Azure Management Portal or **Server Explorer** in Visual Studio.</span></span>

![앱 서비스 중지 메뉴 항목](migrations-and-deployment-with-the-entity-framework-in-an-asp-net-mvc-application/_static/server-explorer-stop-app-service.png)

## <a name="advanced-migrations-scenarios"></a><span data-ttu-id="a4ce3-278">고급 마이그레이션 시나리오</span><span class="sxs-lookup"><span data-stu-id="a4ce3-278">Advanced migrations scenarios</span></span>

<span data-ttu-id="a4ce3-279">이 자습서에 표시 된 것 처럼 마이그레이션을 자동으로 실행 하 여 데이터베이스를 배포 하 고 여러 서버에서 실행 되는 웹 사이트에 배포 하는 경우 여러 서버에서 동시에 마이그레이션을 실행 하려고 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-279">If you deploy a database by running migrations automatically as shown in this tutorial, and you are deploying to a web site that runs on multiple servers, you could get multiple servers trying to run migrations at the same time.</span></span> <span data-ttu-id="a4ce3-280">마이그레이션은 원자성 이므로 두 서버가 동일한 마이그레이션을 실행 하려고 하면 하나는 성공 하 고 나머지는 실패 하 게 됩니다 (작업을 두 번 수행할 수 없다고 가정).</span><span class="sxs-lookup"><span data-stu-id="a4ce3-280">Migrations are atomic, so if two servers try to run the same migration, one will succeed and the other will fail (assuming the operations can't be done twice).</span></span> <span data-ttu-id="a4ce3-281">이 시나리오에서는 이러한 문제를 방지 하려는 경우 마이그레이션을 수동으로 호출 하 고 한 번만 수행 하도록 사용자 고유의 코드를 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-281">In that scenario if you want to avoid those issues, you can call migrations manually and set up your own code so that it only happens once.</span></span> <span data-ttu-id="a4ce3-282">자세한 내용은 주문형의 블로그 및 [debug.exe](/ef/ef6/modeling/code-first/migrations/migrate-exe) (명령줄에서 마이그레이션을 실행 하는 경우)에서 [코드에서 마이그레이션을 실행 하 고 스크립팅](http://romiller.com/2012/02/09/running-scripting-migrations-from-code/) 하는 방법을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-282">For more information, see [Running and Scripting Migrations from Code](http://romiller.com/2012/02/09/running-scripting-migrations-from-code/) on Rowan Miller's blog and [Migrate.exe](/ef/ef6/modeling/code-first/migrations/migrate-exe) (for executing migrations from the command line).</span></span>

<span data-ttu-id="a4ce3-283">다른 마이그레이션 시나리오에 대 한 자세한 내용은 migration [동영상 가이드 Series](https://blogs.msdn.com/b/adonet/archive/2014/03/12/migrations-screencast-series.aspx)항목을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-283">For information about other migrations scenarios, see [Migrations Screencast Series](https://blogs.msdn.com/b/adonet/archive/2014/03/12/migrations-screencast-series.aspx).</span></span>

## <a name="update-specific-migration"></a><span data-ttu-id="a4ce3-284">특정 마이그레이션 업데이트</span><span class="sxs-lookup"><span data-stu-id="a4ce3-284">Update specific migration</span></span>

`update-database -target MigrationName`

<span data-ttu-id="a4ce3-285">`update-database -target MigrationName` 명령은 대상 마이그레이션을 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-285">The `update-database -target MigrationName` command runs the targeted migration.</span></span>

## <a name="ignore-migration-changes-to-database"></a><span data-ttu-id="a4ce3-286">데이터베이스 마이그레이션 변경 내용 무시</span><span class="sxs-lookup"><span data-stu-id="a4ce3-286">Ignore migration changes to database</span></span>

`Add-migration MigrationName -ignoreChanges`

<span data-ttu-id="a4ce3-287">`ignoreChanges`현재 모델을 스냅숏으로 사용 하 여 빈 마이그레이션을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-287">`ignoreChanges` creates an empty migration with the current model as a snapshot.</span></span>

## <a name="code-first-initializers"></a><span data-ttu-id="a4ce3-288">Code First 이니셜라이저</span><span class="sxs-lookup"><span data-stu-id="a4ce3-288">Code First initializers</span></span>

<span data-ttu-id="a4ce3-289">배포 섹션에서 사용 되는 [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) 이니셜라이저를 살펴보았습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-289">In the deployment section, you saw the [MigrateDatabaseToLatestVersion](https://msdn.microsoft.com/library/hh829476(v=vs.103).aspx) initializer being used.</span></span> <span data-ttu-id="a4ce3-290">[Createdatabaseifnotexists](https://msdn.microsoft.com/library/gg679221(v=vs.103).aspx) (기본값), [Dropcreatedatabaseifmodelchanges](https://msdn.microsoft.com/library/gg679604(v=VS.103).aspx) (이전에 사용한) 및 [dropcreatedatabasealways](https://msdn.microsoft.com/library/gg679506(v=VS.103).aspx)를 비롯 한 다른 이니셜라이저가 제공 됩니다. Code First</span><span class="sxs-lookup"><span data-stu-id="a4ce3-290">Code First also provides other initializers, including [CreateDatabaseIfNotExists](https://msdn.microsoft.com/library/gg679221(v=vs.103).aspx) (the default), [DropCreateDatabaseIfModelChanges](https://msdn.microsoft.com/library/gg679604(v=VS.103).aspx) (which you used earlier) and [DropCreateDatabaseAlways](https://msdn.microsoft.com/library/gg679506(v=VS.103).aspx).</span></span> <span data-ttu-id="a4ce3-291">이니셜라이저 `DropCreateAlways` 는 단위 테스트에 대 한 조건을 설정 하는 데 유용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-291">The `DropCreateAlways` initializer can be useful for setting up conditions for unit tests.</span></span> <span data-ttu-id="a4ce3-292">사용자 고유의 이니셜라이저를 작성 하 고 응용 프로그램이 데이터베이스에서 읽거나 데이터베이스에 쓸 때까지 기다리지 않으려는 경우 이니셜라이저를 명시적으로 호출할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-292">You can also write your own initializers, and you can call an initializer explicitly if you don't want to wait until the application reads from or writes to the database.</span></span>

<span data-ttu-id="a4ce3-293">이니셜라이저에 대 한 자세한 내용은 [Entity Framework Code First의 데이터베이스 이니셜라이저 이해](http://www.codeguru.com/csharp/article.php/c19999/Understanding-Database-Initializers-in-Entity-Framework-Code-First.htm) 및 책 [프로그래밍 Entity Framework의 6 장을 참조 하세요. Julie](http://shop.oreilly.com/product/0636920022220.do) Lerman 및 rowan를 통해 Code First 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-293">For more information about initializers, see [Understanding Database Initializers in Entity Framework Code First](http://www.codeguru.com/csharp/article.php/c19999/Understanding-Database-Initializers-in-Entity-Framework-Code-First.htm) and chapter 6 of the book [Programming Entity Framework: Code First](http://shop.oreilly.com/product/0636920022220.do) by Julie Lerman and Rowan Miller.</span></span>

## <a name="get-the-code"></a><span data-ttu-id="a4ce3-294">코드 가져오기</span><span class="sxs-lookup"><span data-stu-id="a4ce3-294">Get the code</span></span>

[<span data-ttu-id="a4ce3-295">완료 된 프로젝트 다운로드</span><span class="sxs-lookup"><span data-stu-id="a4ce3-295">Download the Completed Project</span></span>](https://webpifeed.blob.core.windows.net/webpifeed/Partners/ASP.NET%20MVC%20Application%20Using%20Entity%20Framework%20Code%20First.zip)

## <a name="additional-resources"></a><span data-ttu-id="a4ce3-296">추가 자료</span><span class="sxs-lookup"><span data-stu-id="a4ce3-296">Additional resources</span></span>

<span data-ttu-id="a4ce3-297">[ASP.NET 데이터 액세스-권장 리소스](xref:whitepapers/aspnet-data-access-content-map)에서 다른 Entity Framework 리소스에 대 한 링크를 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-297">Links to other Entity Framework resources can be found in [ASP.NET Data Access - Recommended Resources](xref:whitepapers/aspnet-data-access-content-map).</span></span>

## <a name="next-steps"></a><span data-ttu-id="a4ce3-298">다음 단계</span><span class="sxs-lookup"><span data-stu-id="a4ce3-298">Next steps</span></span>

<span data-ttu-id="a4ce3-299">이 자습서에서는 다음을 수행했습니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-299">In this tutorial, you:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="a4ce3-300">Code First 마이그레이션 사용</span><span class="sxs-lookup"><span data-stu-id="a4ce3-300">Enabled Code First migrations</span></span>
> * <span data-ttu-id="a4ce3-301">Azure에 앱을 배포 합니다 (선택 사항).</span><span class="sxs-lookup"><span data-stu-id="a4ce3-301">Deployed the app in Azure (optional)</span></span>

<span data-ttu-id="a4ce3-302">ASP.NET MVC 응용 프로그램에 더 복잡 한 데이터 모델을 만드는 방법에 대해 알아보려면 다음 문서로 이동 합니다.</span><span class="sxs-lookup"><span data-stu-id="a4ce3-302">Advance to the next article to learn how to create a more complex data model for an ASP.NET MVC Application.</span></span>
> [!div class="nextstepaction"]
> [<span data-ttu-id="a4ce3-303">더 복잡 한 데이터 모델 만들기</span><span class="sxs-lookup"><span data-stu-id="a4ce3-303">Create a more complex data model</span></span>](creating-a-more-complex-data-model-for-an-asp-net-mvc-application.md)
